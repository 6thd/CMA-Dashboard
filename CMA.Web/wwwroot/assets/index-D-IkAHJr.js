var cw=n=>{throw TypeError(n)};var sp=(n,e,t)=>e.has(n)||cw("Cannot "+t);var fr=(n,e,t)=>(sp(n,e,"read from private field"),t?t.call(n):e.get(n)),da=(n,e,t)=>e.has(n)?cw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Io=(n,e,t,r)=>(sp(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Qc=(n,e,t)=>(sp(n,e,"access private method"),t);var uw=(n,e,t,r)=>({set _(i){Io(n,e,i,t)},get _(){return fr(n,e,r)}});function LO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function jr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ap={exports:{}},Ro={},op={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function FO(){if(dw)return je;dw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function m(I){return I===null||typeof I!="object"?null:(I=f&&I[f]||I["@@iterator"],typeof I=="function"?I:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function A(I,L,oe){this.props=I,this.context=L,this.refs=x,this.updater=oe||g}A.prototype.isReactComponent={},A.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},A.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=A.prototype;function C(I,L,oe){this.props=I,this.context=L,this.refs=x,this.updater=oe||g}var P=C.prototype=new E;P.constructor=C,b(P,A.prototype),P.isPureReactComponent=!0;var T=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function B(I,L,oe){var be,we={},le=null,me=null;if(L!=null)for(be in L.ref!==void 0&&(me=L.ref),L.key!==void 0&&(le=""+L.key),L)N.call(L,be)&&!j.hasOwnProperty(be)&&(we[be]=L[be]);var Oe=arguments.length-2;if(Oe===1)we.children=oe;else if(1<Oe){for(var ie=Array(Oe),Ae=0;Ae<Oe;Ae++)ie[Ae]=arguments[Ae+2];we.children=ie}if(I&&I.defaultProps)for(be in Oe=I.defaultProps,Oe)we[be]===void 0&&(we[be]=Oe[be]);return{$$typeof:n,type:I,key:le,ref:me,props:we,_owner:O.current}}function F(I,L){return{$$typeof:n,type:I.type,key:L,ref:I.ref,props:I.props,_owner:I._owner}}function Y(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function V(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(oe){return L[oe]})}var K=/\/+/g;function te(I,L){return typeof I=="object"&&I!==null&&I.key!=null?V(""+I.key):L.toString(36)}function H(I,L,oe,be,we){var le=typeof I;(le==="undefined"||le==="boolean")&&(I=null);var me=!1;if(I===null)me=!0;else switch(le){case"string":case"number":me=!0;break;case"object":switch(I.$$typeof){case n:case e:me=!0}}if(me)return me=I,we=we(me),I=be===""?"."+te(me,0):be,T(we)?(oe="",I!=null&&(oe=I.replace(K,"$&/")+"/"),H(we,L,oe,"",function(Ae){return Ae})):we!=null&&(Y(we)&&(we=F(we,oe+(!we.key||me&&me.key===we.key?"":(""+we.key).replace(K,"$&/")+"/")+I)),L.push(we)),1;if(me=0,be=be===""?".":be+":",T(I))for(var Oe=0;Oe<I.length;Oe++){le=I[Oe];var ie=be+te(le,Oe);me+=H(le,L,oe,ie,we)}else if(ie=m(I),typeof ie=="function")for(I=ie.call(I),Oe=0;!(le=I.next()).done;)le=le.value,ie=be+te(le,Oe++),me+=H(le,L,oe,ie,we);else if(le==="object")throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return me}function ae(I,L,oe){if(I==null)return I;var be=[],we=0;return H(I,be,"","",function(le){return L.call(oe,le,we++)}),be}function X(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(oe){(I._status===0||I._status===-1)&&(I._status=1,I._result=oe)},function(oe){(I._status===0||I._status===-1)&&(I._status=2,I._result=oe)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var Q={current:null},Z={transition:null},$={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:Z,ReactCurrentOwner:O};function W(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:ae,forEach:function(I,L,oe){ae(I,function(){L.apply(this,arguments)},oe)},count:function(I){var L=0;return ae(I,function(){L++}),L},toArray:function(I){return ae(I,function(L){return L})||[]},only:function(I){if(!Y(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},je.Component=A,je.Fragment=t,je.Profiler=i,je.PureComponent=C,je.StrictMode=r,je.Suspense=u,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,je.act=W,je.cloneElement=function(I,L,oe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var be=b({},I.props),we=I.key,le=I.ref,me=I._owner;if(L!=null){if(L.ref!==void 0&&(le=L.ref,me=O.current),L.key!==void 0&&(we=""+L.key),I.type&&I.type.defaultProps)var Oe=I.type.defaultProps;for(ie in L)N.call(L,ie)&&!j.hasOwnProperty(ie)&&(be[ie]=L[ie]===void 0&&Oe!==void 0?Oe[ie]:L[ie])}var ie=arguments.length-2;if(ie===1)be.children=oe;else if(1<ie){Oe=Array(ie);for(var Ae=0;Ae<ie;Ae++)Oe[Ae]=arguments[Ae+2];be.children=Oe}return{$$typeof:n,type:I.type,key:we,ref:le,props:be,_owner:me}},je.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:s,_context:I},I.Consumer=I},je.createElement=B,je.createFactory=function(I){var L=B.bind(null,I);return L.type=I,L},je.createRef=function(){return{current:null}},je.forwardRef=function(I){return{$$typeof:l,render:I}},je.isValidElement=Y,je.lazy=function(I){return{$$typeof:h,_payload:{_status:-1,_result:I},_init:X}},je.memo=function(I,L){return{$$typeof:d,type:I,compare:L===void 0?null:L}},je.startTransition=function(I){var L=Z.transition;Z.transition={};try{I()}finally{Z.transition=L}},je.unstable_act=W,je.useCallback=function(I,L){return Q.current.useCallback(I,L)},je.useContext=function(I){return Q.current.useContext(I)},je.useDebugValue=function(){},je.useDeferredValue=function(I){return Q.current.useDeferredValue(I)},je.useEffect=function(I,L){return Q.current.useEffect(I,L)},je.useId=function(){return Q.current.useId()},je.useImperativeHandle=function(I,L,oe){return Q.current.useImperativeHandle(I,L,oe)},je.useInsertionEffect=function(I,L){return Q.current.useInsertionEffect(I,L)},je.useLayoutEffect=function(I,L){return Q.current.useLayoutEffect(I,L)},je.useMemo=function(I,L){return Q.current.useMemo(I,L)},je.useReducer=function(I,L,oe){return Q.current.useReducer(I,L,oe)},je.useRef=function(I){return Q.current.useRef(I)},je.useState=function(I){return Q.current.useState(I)},je.useSyncExternalStore=function(I,L,oe){return Q.current.useSyncExternalStore(I,L,oe)},je.useTransition=function(){return Q.current.useTransition()},je.version="18.3.1",je}var hw;function Da(){return hw||(hw=1,op.exports=FO()),op.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function $O(){if(fw)return Ro;fw=1;var n=Da(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,u,d){var h,f={},m=null,g=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(g=u.ref);for(h in u)r.call(u,h)&&!s.hasOwnProperty(h)&&(f[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps,u)f[h]===void 0&&(f[h]=u[h]);return{$$typeof:e,type:l,key:m,ref:g,props:f,_owner:i.current}}return Ro.Fragment=t,Ro.jsx=a,Ro.jsxs=a,Ro}var pw;function BO(){return pw||(pw=1,ap.exports=$O()),ap.exports}var v=BO(),_=Da();const uE=jr(_),dE=LO({__proto__:null,default:uE},[_]);var Zc={},lp={exports:{}},xn={},cp={exports:{}},up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function zO(){return mw||(mw=1,(function(n){function e(Z,$){var W=Z.length;Z.push($);e:for(;0<W;){var I=W-1>>>1,L=Z[I];if(0<i(L,$))Z[I]=$,Z[W]=L,W=I;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var $=Z[0],W=Z.pop();if(W!==$){Z[0]=W;e:for(var I=0,L=Z.length,oe=L>>>1;I<oe;){var be=2*(I+1)-1,we=Z[be],le=be+1,me=Z[le];if(0>i(we,W))le<L&&0>i(me,we)?(Z[I]=me,Z[le]=W,I=le):(Z[I]=we,Z[be]=W,I=be);else if(le<L&&0>i(me,W))Z[I]=me,Z[le]=W,I=le;else break e}}return $}function i(Z,$){var W=Z.sortIndex-$.sortIndex;return W!==0?W:Z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],d=[],h=1,f=null,m=3,g=!1,b=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Z){for(var $=t(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=Z)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=t(d)}}function T(Z){if(x=!1,P(Z),!b)if(t(u)!==null)b=!0,X(N);else{var $=t(d);$!==null&&Q(T,$.startTime-Z)}}function N(Z,$){b=!1,x&&(x=!1,E(B),B=-1),g=!0;var W=m;try{for(P($),f=t(u);f!==null&&(!(f.expirationTime>$)||Z&&!V());){var I=f.callback;if(typeof I=="function"){f.callback=null,m=f.priorityLevel;var L=I(f.expirationTime<=$);$=n.unstable_now(),typeof L=="function"?f.callback=L:f===t(u)&&r(u),P($)}else r(u);f=t(u)}if(f!==null)var oe=!0;else{var be=t(d);be!==null&&Q(T,be.startTime-$),oe=!1}return oe}finally{f=null,m=W,g=!1}}var O=!1,j=null,B=-1,F=5,Y=-1;function V(){return!(n.unstable_now()-Y<F)}function K(){if(j!==null){var Z=n.unstable_now();Y=Z;var $=!0;try{$=j(!0,Z)}finally{$?te():(O=!1,j=null)}}else O=!1}var te;if(typeof C=="function")te=function(){C(K)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ae=H.port2;H.port1.onmessage=K,te=function(){ae.postMessage(null)}}else te=function(){A(K,0)};function X(Z){j=Z,O||(O=!0,te())}function Q(Z,$){B=A(function(){Z(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){b||g||(b=!0,X(N))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var W=m;m=$;try{return Z()}finally{m=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,$){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var W=m;m=Z;try{return $()}finally{m=W}},n.unstable_scheduleCallback=function(Z,$,W){var I=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?I+W:I):W=I,Z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,Z={id:h++,callback:$,priorityLevel:Z,startTime:W,expirationTime:L,sortIndex:-1},W>I?(Z.sortIndex=W,e(d,Z),t(u)===null&&Z===t(d)&&(x?(E(B),B=-1):x=!0,Q(T,W-I))):(Z.sortIndex=L,e(u,Z),b||g||(b=!0,X(N))),Z},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Z){var $=m;return function(){var W=m;m=$;try{return Z.apply(this,arguments)}finally{m=W}}}})(up)),up}var gw;function UO(){return gw||(gw=1,cp.exports=zO()),cp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function HO(){if(vw)return xn;vw=1;var n=Da(),e=UO();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(o){return u.call(f,o)?!0:u.call(h,o)?!1:d.test(o)?f[o]=!0:(h[o]=!0,!1)}function g(o,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,p,y){if(c===null||typeof c>"u"||g(o,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,p,y,w,S,k){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=S,this.removeEmptyString=k}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){A[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];A[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){A[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){A[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){A[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){A[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){A[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){A[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){A[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(E,C);A[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(E,C);A[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(E,C);A[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){A[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){A[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function P(o,c,p,y){var w=A.hasOwnProperty(c)?A[c]:null;(w!==null?w.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,p,w,y)&&(p=null),y||w===null?m(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):w.mustUseProperty?o[w.propertyName]=p===null?w.type===3?!1:"":p:(c=w.attributeName,y=w.attributeNamespace,p===null?o.removeAttribute(c):(w=w.type,p=w===3||w===4&&p===!0?"":""+p,y?o.setAttributeNS(y,c,p):o.setAttribute(c,p))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),V=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),Z=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var W=Object.assign,I;function L(o){if(I===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+o}var oe=!1;function be(o,c){if(!o||oe)return"";oe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(G){var y=G}Reflect.construct(o,[],c)}else{try{c.call()}catch(G){y=G}o.call(c.prototype)}else{try{throw Error()}catch(G){y=G}o()}}catch(G){if(G&&y&&typeof G.stack=="string"){for(var w=G.stack.split(`
`),S=y.stack.split(`
`),k=w.length-1,M=S.length-1;1<=k&&0<=M&&w[k]!==S[M];)M--;for(;1<=k&&0<=M;k--,M--)if(w[k]!==S[M]){if(k!==1||M!==1)do if(k--,M--,0>M||w[k]!==S[M]){var R=`
`+w[k].replace(" at new "," at ");return o.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",o.displayName)),R}while(1<=k&&0<=M);break}}}finally{oe=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?L(o):""}function we(o){switch(o.tag){case 5:return L(o.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return o=be(o.type,!1),o;case 11:return o=be(o.type.render,!1),o;case 1:return o=be(o.type,!0),o;default:return""}}function le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case O:return"Portal";case F:return"Profiler";case B:return"StrictMode";case te:return"Suspense";case H:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case Y:return(o._context.displayName||"Context")+".Provider";case K:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ae:return c=o.displayName||null,c!==null?c:le(o.type)||"Memo";case X:c=o._payload,o=o._init;try{return le(o(c))}catch{}}return null}function me(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(c);case 8:return c===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ie(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ae(o){var c=ie(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var w=p.get,S=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(k){y=""+k,S.call(this,k)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(k){y=""+k},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ie(o){o._valueTracker||(o._valueTracker=Ae(o))}function re(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=ie(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function At(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Be(o,c){var p=c.checked;return W({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function qt(o,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=Oe(c.value!=null?c.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Gt(o,c){c=c.checked,c!=null&&P(o,"checked",c,!1)}function sr(o,c){Gt(o,c);var p=Oe(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?fh(o,c.type,p):c.hasOwnProperty("defaultValue")&&fh(o,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Va(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function fh(o,c,p){(c!=="number"||At(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Ka=Array.isArray;function Bs(o,c,p,y){if(o=o.options,c){c={};for(var w=0;w<p.length;w++)c["$"+p[w]]=!0;for(p=0;p<o.length;p++)w=c.hasOwnProperty("$"+o[p].value),o[p].selected!==w&&(o[p].selected=w),w&&y&&(o[p].defaultSelected=!0)}else{for(p=""+Oe(p),c=null,w=0;w<o.length;w++){if(o[w].value===p){o[w].selected=!0,y&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function ph(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function x0(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(t(92));if(Ka(p)){if(1<p.length)throw Error(t(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:Oe(p)}}function b0(o,c){var p=Oe(c.value),y=Oe(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function w0(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function A0(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?A0(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Hl,S0=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,w){MSApp.execUnsafeLocalFunction(function(){return o(c,p,y,w)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Hl=Hl||document.createElement("div"),Hl.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Hl.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Ya(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zT=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(o){zT.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Xa[c]=Xa[o]})});function _0(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Xa.hasOwnProperty(o)&&Xa[o]?(""+c).trim():c+"px"}function E0(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,w=_0(p,c[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,w):o[p]=w}}var UT=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gh(o,c){if(c){if(UT[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function vh(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=null;function xh(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var bh=null,zs=null,Us=null;function C0(o){if(o=xo(o)){if(typeof bh!="function")throw Error(t(280));var c=o.stateNode;c&&(c=hc(c),bh(o.stateNode,o.type,c))}}function P0(o){zs?Us?Us.push(o):Us=[o]:zs=o}function k0(){if(zs){var o=zs,c=Us;if(Us=zs=null,C0(o),c)for(o=0;o<c.length;o++)C0(c[o])}}function T0(o,c){return o(c)}function N0(){}var wh=!1;function O0(o,c,p){if(wh)return o(c,p);wh=!0;try{return T0(o,c,p)}finally{wh=!1,(zs!==null||Us!==null)&&(N0(),k0())}}function Qa(o,c){var p=o.stateNode;if(p===null)return null;var y=hc(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,c,typeof p));return p}var Ah=!1;if(l)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Ah=!1}function HT(o,c,p,y,w,S,k,M,R){var G=Array.prototype.slice.call(arguments,3);try{c.apply(p,G)}catch(ee){this.onError(ee)}}var Ja=!1,Wl=null,ql=!1,Sh=null,WT={onError:function(o){Ja=!0,Wl=o}};function qT(o,c,p,y,w,S,k,M,R){Ja=!1,Wl=null,HT.apply(WT,arguments)}function GT(o,c,p,y,w,S,k,M,R){if(qT.apply(this,arguments),Ja){if(Ja){var G=Wl;Ja=!1,Wl=null}else throw Error(t(198));ql||(ql=!0,Sh=G)}}function Ki(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function j0(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function M0(o){if(Ki(o)!==o)throw Error(t(188))}function VT(o){var c=o.alternate;if(!c){if(c=Ki(o),c===null)throw Error(t(188));return c!==o?null:o}for(var p=o,y=c;;){var w=p.return;if(w===null)break;var S=w.alternate;if(S===null){if(y=w.return,y!==null){p=y;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===p)return M0(w),o;if(S===y)return M0(w),c;S=S.sibling}throw Error(t(188))}if(p.return!==y.return)p=w,y=S;else{for(var k=!1,M=w.child;M;){if(M===p){k=!0,p=w,y=S;break}if(M===y){k=!0,y=w,p=S;break}M=M.sibling}if(!k){for(M=S.child;M;){if(M===p){k=!0,p=S,y=w;break}if(M===y){k=!0,y=S,p=w;break}M=M.sibling}if(!k)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:c}function I0(o){return o=VT(o),o!==null?R0(o):null}function R0(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=R0(o);if(c!==null)return c;o=o.sibling}return null}var D0=e.unstable_scheduleCallback,L0=e.unstable_cancelCallback,KT=e.unstable_shouldYield,YT=e.unstable_requestPaint,ut=e.unstable_now,XT=e.unstable_getCurrentPriorityLevel,_h=e.unstable_ImmediatePriority,F0=e.unstable_UserBlockingPriority,Gl=e.unstable_NormalPriority,QT=e.unstable_LowPriority,$0=e.unstable_IdlePriority,Vl=null,br=null;function ZT(o){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(Vl,o,void 0,(o.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:tN,JT=Math.log,eN=Math.LN2;function tN(o){return o>>>=0,o===0?32:31-(JT(o)/eN|0)|0}var Kl=64,Yl=4194304;function eo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xl(o,c){var p=o.pendingLanes;if(p===0)return 0;var y=0,w=o.suspendedLanes,S=o.pingedLanes,k=p&268435455;if(k!==0){var M=k&~w;M!==0?y=eo(M):(S&=k,S!==0&&(y=eo(S)))}else k=p&~w,k!==0?y=eo(k):S!==0&&(y=eo(S));if(y===0)return 0;if(c!==0&&c!==y&&(c&w)===0&&(w=y&-y,S=c&-c,w>=S||w===16&&(S&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)p=31-ar(c),w=1<<p,y|=o[p],c&=~w;return y}function nN(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rN(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,w=o.expirationTimes,S=o.pendingLanes;0<S;){var k=31-ar(S),M=1<<k,R=w[k];R===-1?((M&p)===0||(M&y)!==0)&&(w[k]=nN(M,c)):R<=c&&(o.expiredLanes|=M),S&=~M}}function Eh(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function B0(){var o=Kl;return Kl<<=1,(Kl&4194240)===0&&(Kl=64),o}function Ch(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function to(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ar(c),o[c]=p}function iN(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var w=31-ar(p),S=1<<w;c[w]=0,y[w]=-1,o[w]=-1,p&=~S}}function Ph(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ar(p),w=1<<y;w&c|o[y]&c&&(o[y]|=c),p&=~w}}var ze=0;function z0(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var U0,kh,H0,W0,q0,Th=!1,Ql=[],li=null,ci=null,ui=null,no=new Map,ro=new Map,di=[],sN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(o,c){switch(o){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":no.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(c.pointerId)}}function io(o,c,p,y,w,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:S,targetContainers:[w]},c!==null&&(c=xo(c),c!==null&&kh(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function aN(o,c,p,y,w){switch(c){case"focusin":return li=io(li,o,c,p,y,w),!0;case"dragenter":return ci=io(ci,o,c,p,y,w),!0;case"mouseover":return ui=io(ui,o,c,p,y,w),!0;case"pointerover":var S=w.pointerId;return no.set(S,io(no.get(S)||null,o,c,p,y,w)),!0;case"gotpointercapture":return S=w.pointerId,ro.set(S,io(ro.get(S)||null,o,c,p,y,w)),!0}return!1}function V0(o){var c=Yi(o.target);if(c!==null){var p=Ki(c);if(p!==null){if(c=p.tag,c===13){if(c=j0(p),c!==null){o.blockedOn=c,q0(o.priority,function(){H0(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Zl(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=Oh(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);yh=y,p.target.dispatchEvent(y),yh=null}else return c=xo(p),c!==null&&kh(c),o.blockedOn=p,!1;c.shift()}return!0}function K0(o,c,p){Zl(o)&&p.delete(c)}function oN(){Th=!1,li!==null&&Zl(li)&&(li=null),ci!==null&&Zl(ci)&&(ci=null),ui!==null&&Zl(ui)&&(ui=null),no.forEach(K0),ro.forEach(K0)}function so(o,c){o.blockedOn===c&&(o.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oN)))}function ao(o){function c(w){return so(w,o)}if(0<Ql.length){so(Ql[0],o);for(var p=1;p<Ql.length;p++){var y=Ql[p];y.blockedOn===o&&(y.blockedOn=null)}}for(li!==null&&so(li,o),ci!==null&&so(ci,o),ui!==null&&so(ui,o),no.forEach(c),ro.forEach(c),p=0;p<di.length;p++)y=di[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<di.length&&(p=di[0],p.blockedOn===null);)V0(p),p.blockedOn===null&&di.shift()}var Hs=T.ReactCurrentBatchConfig,Jl=!0;function lN(o,c,p,y){var w=ze,S=Hs.transition;Hs.transition=null;try{ze=1,Nh(o,c,p,y)}finally{ze=w,Hs.transition=S}}function cN(o,c,p,y){var w=ze,S=Hs.transition;Hs.transition=null;try{ze=4,Nh(o,c,p,y)}finally{ze=w,Hs.transition=S}}function Nh(o,c,p,y){if(Jl){var w=Oh(o,c,p,y);if(w===null)Kh(o,c,y,ec,p),G0(o,y);else if(aN(w,o,c,p,y))y.stopPropagation();else if(G0(o,y),c&4&&-1<sN.indexOf(o)){for(;w!==null;){var S=xo(w);if(S!==null&&U0(S),S=Oh(o,c,p,y),S===null&&Kh(o,c,y,ec,p),S===w)break;w=S}w!==null&&y.stopPropagation()}else Kh(o,c,y,null,p)}}var ec=null;function Oh(o,c,p,y){if(ec=null,o=xh(y),o=Yi(o),o!==null)if(c=Ki(o),c===null)o=null;else if(p=c.tag,p===13){if(o=j0(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ec=o,null}function Y0(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XT()){case _h:return 1;case F0:return 4;case Gl:case QT:return 16;case $0:return 536870912;default:return 16}default:return 16}}var hi=null,jh=null,tc=null;function X0(){if(tc)return tc;var o,c=jh,p=c.length,y,w="value"in hi?hi.value:hi.textContent,S=w.length;for(o=0;o<p&&c[o]===w[o];o++);var k=p-o;for(y=1;y<=k&&c[p-y]===w[S-y];y++);return tc=w.slice(o,1<y?1-y:void 0)}function nc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function rc(){return!0}function Q0(){return!1}function Cn(o){function c(p,y,w,S,k){this._reactName=p,this._targetInst=w,this.type=y,this.nativeEvent=S,this.target=k,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(p=o[M],this[M]=p?p(S):S[M]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?rc:Q0,this.isPropagationStopped=Q0,this}return W(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=rc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=rc)},persist:function(){},isPersistent:rc}),c}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mh=Cn(Ws),oo=W({},Ws,{view:0,detail:0}),uN=Cn(oo),Ih,Rh,lo,ic=W({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==lo&&(lo&&o.type==="mousemove"?(Ih=o.screenX-lo.screenX,Rh=o.screenY-lo.screenY):Rh=Ih=0,lo=o),Ih)},movementY:function(o){return"movementY"in o?o.movementY:Rh}}),Z0=Cn(ic),dN=W({},ic,{dataTransfer:0}),hN=Cn(dN),fN=W({},oo,{relatedTarget:0}),Dh=Cn(fN),pN=W({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),mN=Cn(pN),gN=W({},Ws,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),vN=Cn(gN),yN=W({},Ws,{data:0}),J0=Cn(yN),xN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AN(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=wN[o])?!!c[o]:!1}function Lh(){return AN}var SN=W({},oo,{key:function(o){if(o.key){var c=xN[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=nc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?bN[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lh,charCode:function(o){return o.type==="keypress"?nc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?nc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_N=Cn(SN),EN=W({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=Cn(EN),CN=W({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lh}),PN=Cn(CN),kN=W({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),TN=Cn(kN),NN=W({},ic,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ON=Cn(NN),jN=[9,13,27,32],Fh=l&&"CompositionEvent"in window,co=null;l&&"documentMode"in document&&(co=document.documentMode);var MN=l&&"TextEvent"in window&&!co,tx=l&&(!Fh||co&&8<co&&11>=co),nx=" ",rx=!1;function ix(o,c){switch(o){case"keyup":return jN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sx(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qs=!1;function IN(o,c){switch(o){case"compositionend":return sx(c);case"keypress":return c.which!==32?null:(rx=!0,nx);case"textInput":return o=c.data,o===nx&&rx?null:o;default:return null}}function RN(o,c){if(qs)return o==="compositionend"||!Fh&&ix(o,c)?(o=X0(),tc=jh=hi=null,qs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tx&&c.locale!=="ko"?null:c.data;default:return null}}var DN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!DN[o.type]:c==="textarea"}function ox(o,c,p,y){P0(y),c=cc(c,"onChange"),0<c.length&&(p=new Mh("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var uo=null,ho=null;function LN(o){Ex(o,0)}function sc(o){var c=Xs(o);if(re(c))return o}function FN(o,c){if(o==="change")return c}var lx=!1;if(l){var $h;if(l){var Bh="oninput"in document;if(!Bh){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),Bh=typeof cx.oninput=="function"}$h=Bh}else $h=!1;lx=$h&&(!document.documentMode||9<document.documentMode)}function ux(){uo&&(uo.detachEvent("onpropertychange",dx),ho=uo=null)}function dx(o){if(o.propertyName==="value"&&sc(ho)){var c=[];ox(c,ho,o,xh(o)),O0(LN,c)}}function $N(o,c,p){o==="focusin"?(ux(),uo=c,ho=p,uo.attachEvent("onpropertychange",dx)):o==="focusout"&&ux()}function BN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sc(ho)}function zN(o,c){if(o==="click")return sc(c)}function UN(o,c){if(o==="input"||o==="change")return sc(c)}function HN(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var or=typeof Object.is=="function"?Object.is:HN;function fo(o,c){if(or(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var w=p[y];if(!u.call(c,w)||!or(o[w],c[w]))return!1}return!0}function hx(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fx(o,c){var p=hx(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=hx(p)}}function px(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?px(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function mx(){for(var o=window,c=At();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=At(o.document)}return c}function zh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function WN(o){var c=mx(),p=o.focusedElem,y=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&px(p.ownerDocument.documentElement,p)){if(y!==null&&zh(p)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var w=p.textContent.length,S=Math.min(y.start,w);y=y.end===void 0?S:Math.min(y.end,w),!o.extend&&S>y&&(w=y,y=S,S=w),w=fx(p,S);var k=fx(p,y);w&&k&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==k.node||o.focusOffset!==k.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),o.removeAllRanges(),S>y?(o.addRange(c),o.extend(k.node,k.offset)):(c.setEnd(k.node,k.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var qN=l&&"documentMode"in document&&11>=document.documentMode,Gs=null,Uh=null,po=null,Hh=!1;function gx(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Hh||Gs==null||Gs!==At(y)||(y=Gs,"selectionStart"in y&&zh(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),po&&fo(po,y)||(po=y,y=cc(Uh,"onSelect"),0<y.length&&(c=new Mh("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Gs)))}function ac(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Vs={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionend:ac("Transition","TransitionEnd")},Wh={},vx={};l&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function oc(o){if(Wh[o])return Wh[o];if(!Vs[o])return o;var c=Vs[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in vx)return Wh[o]=c[p];return o}var yx=oc("animationend"),xx=oc("animationiteration"),bx=oc("animationstart"),wx=oc("transitionend"),Ax=new Map,Sx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(o,c){Ax.set(o,c),s(c,[o])}for(var qh=0;qh<Sx.length;qh++){var Gh=Sx[qh],GN=Gh.toLowerCase(),VN=Gh[0].toUpperCase()+Gh.slice(1);fi(GN,"on"+VN)}fi(yx,"onAnimationEnd"),fi(xx,"onAnimationIteration"),fi(bx,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(wx,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KN=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function _x(o,c,p){var y=o.type||"unknown-event";o.currentTarget=p,GT(y,c,void 0,o),o.currentTarget=null}function Ex(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],w=y.event;y=y.listeners;e:{var S=void 0;if(c)for(var k=y.length-1;0<=k;k--){var M=y[k],R=M.instance,G=M.currentTarget;if(M=M.listener,R!==S&&w.isPropagationStopped())break e;_x(w,M,G),S=R}else for(k=0;k<y.length;k++){if(M=y[k],R=M.instance,G=M.currentTarget,M=M.listener,R!==S&&w.isPropagationStopped())break e;_x(w,M,G),S=R}}}if(ql)throw o=Sh,ql=!1,Sh=null,o}function Ye(o,c){var p=c[ef];p===void 0&&(p=c[ef]=new Set);var y=o+"__bubble";p.has(y)||(Cx(c,o,2,!1),p.add(y))}function Vh(o,c,p){var y=0;c&&(y|=4),Cx(p,o,y,c)}var lc="_reactListening"+Math.random().toString(36).slice(2);function go(o){if(!o[lc]){o[lc]=!0,r.forEach(function(p){p!=="selectionchange"&&(KN.has(p)||Vh(p,!1,o),Vh(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[lc]||(c[lc]=!0,Vh("selectionchange",!1,c))}}function Cx(o,c,p,y){switch(Y0(c)){case 1:var w=lN;break;case 4:w=cN;break;default:w=Nh}p=w.bind(null,c,p,o),w=void 0,!Ah||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),y?w!==void 0?o.addEventListener(c,p,{capture:!0,passive:w}):o.addEventListener(c,p,!0):w!==void 0?o.addEventListener(c,p,{passive:w}):o.addEventListener(c,p,!1)}function Kh(o,c,p,y,w){var S=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var k=y.tag;if(k===3||k===4){var M=y.stateNode.containerInfo;if(M===w||M.nodeType===8&&M.parentNode===w)break;if(k===4)for(k=y.return;k!==null;){var R=k.tag;if((R===3||R===4)&&(R=k.stateNode.containerInfo,R===w||R.nodeType===8&&R.parentNode===w))return;k=k.return}for(;M!==null;){if(k=Yi(M),k===null)return;if(R=k.tag,R===5||R===6){y=S=k;continue e}M=M.parentNode}}y=y.return}O0(function(){var G=S,ee=xh(p),ne=[];e:{var J=Ax.get(o);if(J!==void 0){var ce=Mh,fe=o;switch(o){case"keypress":if(nc(p)===0)break e;case"keydown":case"keyup":ce=_N;break;case"focusin":fe="focus",ce=Dh;break;case"focusout":fe="blur",ce=Dh;break;case"beforeblur":case"afterblur":ce=Dh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=hN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=PN;break;case yx:case xx:case bx:ce=mN;break;case wx:ce=TN;break;case"scroll":ce=uN;break;case"wheel":ce=ON;break;case"copy":case"cut":case"paste":ce=vN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ex}var pe=(c&4)!==0,dt=!pe&&o==="scroll",z=pe?J!==null?J+"Capture":null:J;pe=[];for(var D=G,U;D!==null;){U=D;var se=U.stateNode;if(U.tag===5&&se!==null&&(U=se,z!==null&&(se=Qa(D,z),se!=null&&pe.push(vo(D,se,U)))),dt)break;D=D.return}0<pe.length&&(J=new ce(J,fe,null,p,ee),ne.push({event:J,listeners:pe}))}}if((c&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",ce=o==="mouseout"||o==="pointerout",J&&p!==yh&&(fe=p.relatedTarget||p.fromElement)&&(Yi(fe)||fe[Mr]))break e;if((ce||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,ce?(fe=p.relatedTarget||p.toElement,ce=G,fe=fe?Yi(fe):null,fe!==null&&(dt=Ki(fe),fe!==dt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=G),ce!==fe)){if(pe=Z0,se="onMouseLeave",z="onMouseEnter",D="mouse",(o==="pointerout"||o==="pointerover")&&(pe=ex,se="onPointerLeave",z="onPointerEnter",D="pointer"),dt=ce==null?J:Xs(ce),U=fe==null?J:Xs(fe),J=new pe(se,D+"leave",ce,p,ee),J.target=dt,J.relatedTarget=U,se=null,Yi(ee)===G&&(pe=new pe(z,D+"enter",fe,p,ee),pe.target=U,pe.relatedTarget=dt,se=pe),dt=se,ce&&fe)t:{for(pe=ce,z=fe,D=0,U=pe;U;U=Ks(U))D++;for(U=0,se=z;se;se=Ks(se))U++;for(;0<D-U;)pe=Ks(pe),D--;for(;0<U-D;)z=Ks(z),U--;for(;D--;){if(pe===z||z!==null&&pe===z.alternate)break t;pe=Ks(pe),z=Ks(z)}pe=null}else pe=null;ce!==null&&Px(ne,J,ce,pe,!1),fe!==null&&dt!==null&&Px(ne,dt,fe,pe,!0)}}e:{if(J=G?Xs(G):window,ce=J.nodeName&&J.nodeName.toLowerCase(),ce==="select"||ce==="input"&&J.type==="file")var ge=FN;else if(ax(J))if(lx)ge=UN;else{ge=BN;var Se=$N}else(ce=J.nodeName)&&ce.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ge=zN);if(ge&&(ge=ge(o,G))){ox(ne,ge,p,ee);break e}Se&&Se(o,J,G),o==="focusout"&&(Se=J._wrapperState)&&Se.controlled&&J.type==="number"&&fh(J,"number",J.value)}switch(Se=G?Xs(G):window,o){case"focusin":(ax(Se)||Se.contentEditable==="true")&&(Gs=Se,Uh=G,po=null);break;case"focusout":po=Uh=Gs=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,gx(ne,p,ee);break;case"selectionchange":if(qN)break;case"keydown":case"keyup":gx(ne,p,ee)}var _e;if(Fh)e:{switch(o){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else qs?ix(o,p)&&(Pe="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Pe="onCompositionStart");Pe&&(tx&&p.locale!=="ko"&&(qs||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&qs&&(_e=X0()):(hi=ee,jh="value"in hi?hi.value:hi.textContent,qs=!0)),Se=cc(G,Pe),0<Se.length&&(Pe=new J0(Pe,o,null,p,ee),ne.push({event:Pe,listeners:Se}),_e?Pe.data=_e:(_e=sx(p),_e!==null&&(Pe.data=_e)))),(_e=MN?IN(o,p):RN(o,p))&&(G=cc(G,"onBeforeInput"),0<G.length&&(ee=new J0("onBeforeInput","beforeinput",null,p,ee),ne.push({event:ee,listeners:G}),ee.data=_e))}Ex(ne,c)})}function vo(o,c,p){return{instance:o,listener:c,currentTarget:p}}function cc(o,c){for(var p=c+"Capture",y=[];o!==null;){var w=o,S=w.stateNode;w.tag===5&&S!==null&&(w=S,S=Qa(o,p),S!=null&&y.unshift(vo(o,S,w)),S=Qa(o,c),S!=null&&y.push(vo(o,S,w))),o=o.return}return y}function Ks(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Px(o,c,p,y,w){for(var S=c._reactName,k=[];p!==null&&p!==y;){var M=p,R=M.alternate,G=M.stateNode;if(R!==null&&R===y)break;M.tag===5&&G!==null&&(M=G,w?(R=Qa(p,S),R!=null&&k.unshift(vo(p,R,M))):w||(R=Qa(p,S),R!=null&&k.push(vo(p,R,M)))),p=p.return}k.length!==0&&o.push({event:c,listeners:k})}var YN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function kx(o){return(typeof o=="string"?o:""+o).replace(YN,`
`).replace(XN,"")}function uc(o,c,p){if(c=kx(c),kx(o)!==c&&p)throw Error(t(425))}function dc(){}var Yh=null,Xh=null;function Qh(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Zh=typeof setTimeout=="function"?setTimeout:void 0,QN=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,ZN=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(o){return Tx.resolve(null).then(o).catch(JN)}:Zh;function JN(o){setTimeout(function(){throw o})}function Jh(o,c){var p=c,y=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(y===0){o.removeChild(w),ao(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=w}while(p);ao(c)}function pi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Nx(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),wr="__reactFiber$"+Ys,yo="__reactProps$"+Ys,Mr="__reactContainer$"+Ys,ef="__reactEvents$"+Ys,eO="__reactListeners$"+Ys,tO="__reactHandles$"+Ys;function Yi(o){var c=o[wr];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Mr]||p[wr]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=Nx(o);o!==null;){if(p=o[wr])return p;o=Nx(o)}return c}o=p,p=o.parentNode}return null}function xo(o){return o=o[wr]||o[Mr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Xs(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function hc(o){return o[yo]||null}var tf=[],Qs=-1;function mi(o){return{current:o}}function Xe(o){0>Qs||(o.current=tf[Qs],tf[Qs]=null,Qs--)}function Ve(o,c){Qs++,tf[Qs]=o.current,o.current=c}var gi={},Vt=mi(gi),pn=mi(!1),Xi=gi;function Zs(o,c){var p=o.type.contextTypes;if(!p)return gi;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var w={},S;for(S in p)w[S]=c[S];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=w),w}function mn(o){return o=o.childContextTypes,o!=null}function fc(){Xe(pn),Xe(Vt)}function Ox(o,c,p){if(Vt.current!==gi)throw Error(t(168));Ve(Vt,c),Ve(pn,p)}function jx(o,c,p){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var w in y)if(!(w in c))throw Error(t(108,me(o)||"Unknown",w));return W({},p,y)}function pc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||gi,Xi=Vt.current,Ve(Vt,o),Ve(pn,pn.current),!0}function Mx(o,c,p){var y=o.stateNode;if(!y)throw Error(t(169));p?(o=jx(o,c,Xi),y.__reactInternalMemoizedMergedChildContext=o,Xe(pn),Xe(Vt),Ve(Vt,o)):Xe(pn),Ve(pn,p)}var Ir=null,mc=!1,nf=!1;function Ix(o){Ir===null?Ir=[o]:Ir.push(o)}function nO(o){mc=!0,Ix(o)}function vi(){if(!nf&&Ir!==null){nf=!0;var o=0,c=ze;try{var p=Ir;for(ze=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}Ir=null,mc=!1}catch(w){throw Ir!==null&&(Ir=Ir.slice(o+1)),D0(_h,vi),w}finally{ze=c,nf=!1}}return null}var Js=[],ea=0,gc=null,vc=0,zn=[],Un=0,Qi=null,Rr=1,Dr="";function Zi(o,c){Js[ea++]=vc,Js[ea++]=gc,gc=o,vc=c}function Rx(o,c,p){zn[Un++]=Rr,zn[Un++]=Dr,zn[Un++]=Qi,Qi=o;var y=Rr;o=Dr;var w=32-ar(y)-1;y&=~(1<<w),p+=1;var S=32-ar(c)+w;if(30<S){var k=w-w%5;S=(y&(1<<k)-1).toString(32),y>>=k,w-=k,Rr=1<<32-ar(c)+w|p<<w|y,Dr=S+o}else Rr=1<<S|p<<w|y,Dr=o}function rf(o){o.return!==null&&(Zi(o,1),Rx(o,1,0))}function sf(o){for(;o===gc;)gc=Js[--ea],Js[ea]=null,vc=Js[--ea],Js[ea]=null;for(;o===Qi;)Qi=zn[--Un],zn[Un]=null,Dr=zn[--Un],zn[Un]=null,Rr=zn[--Un],zn[Un]=null}var Pn=null,kn=null,Ze=!1,lr=null;function Dx(o,c){var p=Gn(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function Lx(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Pn=o,kn=pi(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Pn=o,kn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Qi!==null?{id:Rr,overflow:Dr}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Gn(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,Pn=o,kn=null,!0):!1;default:return!1}}function af(o){return(o.mode&1)!==0&&(o.flags&128)===0}function of(o){if(Ze){var c=kn;if(c){var p=c;if(!Lx(o,c)){if(af(o))throw Error(t(418));c=pi(p.nextSibling);var y=Pn;c&&Lx(o,c)?Dx(y,p):(o.flags=o.flags&-4097|2,Ze=!1,Pn=o)}}else{if(af(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ze=!1,Pn=o}}}function Fx(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Pn=o}function yc(o){if(o!==Pn)return!1;if(!Ze)return Fx(o),Ze=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Qh(o.type,o.memoizedProps)),c&&(c=kn)){if(af(o))throw $x(),Error(t(418));for(;c;)Dx(o,c),c=pi(c.nextSibling)}if(Fx(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){kn=pi(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}kn=null}}else kn=Pn?pi(o.stateNode.nextSibling):null;return!0}function $x(){for(var o=kn;o;)o=pi(o.nextSibling)}function ta(){kn=Pn=null,Ze=!1}function lf(o){lr===null?lr=[o]:lr.push(o)}var rO=T.ReactCurrentBatchConfig;function bo(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var w=y,S=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(k){var M=w.refs;k===null?delete M[S]:M[S]=k},c._stringRef=S,c)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function xc(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Bx(o){var c=o._init;return c(o._payload)}function zx(o){function c(z,D){if(o){var U=z.deletions;U===null?(z.deletions=[D],z.flags|=16):U.push(D)}}function p(z,D){if(!o)return null;for(;D!==null;)c(z,D),D=D.sibling;return null}function y(z,D){for(z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function w(z,D){return z=Ei(z,D),z.index=0,z.sibling=null,z}function S(z,D,U){return z.index=U,o?(U=z.alternate,U!==null?(U=U.index,U<D?(z.flags|=2,D):U):(z.flags|=2,D)):(z.flags|=1048576,D)}function k(z){return o&&z.alternate===null&&(z.flags|=2),z}function M(z,D,U,se){return D===null||D.tag!==6?(D=Jf(U,z.mode,se),D.return=z,D):(D=w(D,U),D.return=z,D)}function R(z,D,U,se){var ge=U.type;return ge===j?ee(z,D,U.props.children,se,U.key):D!==null&&(D.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===X&&Bx(ge)===D.type)?(se=w(D,U.props),se.ref=bo(z,D,U),se.return=z,se):(se=Hc(U.type,U.key,U.props,null,z.mode,se),se.ref=bo(z,D,U),se.return=z,se)}function G(z,D,U,se){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=ep(U,z.mode,se),D.return=z,D):(D=w(D,U.children||[]),D.return=z,D)}function ee(z,D,U,se,ge){return D===null||D.tag!==7?(D=as(U,z.mode,se,ge),D.return=z,D):(D=w(D,U),D.return=z,D)}function ne(z,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Jf(""+D,z.mode,U),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return U=Hc(D.type,D.key,D.props,null,z.mode,U),U.ref=bo(z,null,D),U.return=z,U;case O:return D=ep(D,z.mode,U),D.return=z,D;case X:var se=D._init;return ne(z,se(D._payload),U)}if(Ka(D)||$(D))return D=as(D,z.mode,U,null),D.return=z,D;xc(z,D)}return null}function J(z,D,U,se){var ge=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ge!==null?null:M(z,D,""+U,se);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return U.key===ge?R(z,D,U,se):null;case O:return U.key===ge?G(z,D,U,se):null;case X:return ge=U._init,J(z,D,ge(U._payload),se)}if(Ka(U)||$(U))return ge!==null?null:ee(z,D,U,se,null);xc(z,U)}return null}function ce(z,D,U,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get(U)||null,M(D,z,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case N:return z=z.get(se.key===null?U:se.key)||null,R(D,z,se,ge);case O:return z=z.get(se.key===null?U:se.key)||null,G(D,z,se,ge);case X:var Se=se._init;return ce(z,D,U,Se(se._payload),ge)}if(Ka(se)||$(se))return z=z.get(U)||null,ee(D,z,se,ge,null);xc(D,se)}return null}function fe(z,D,U,se){for(var ge=null,Se=null,_e=D,Pe=D=0,It=null;_e!==null&&Pe<U.length;Pe++){_e.index>Pe?(It=_e,_e=null):It=_e.sibling;var Le=J(z,_e,U[Pe],se);if(Le===null){_e===null&&(_e=It);break}o&&_e&&Le.alternate===null&&c(z,_e),D=S(Le,D,Pe),Se===null?ge=Le:Se.sibling=Le,Se=Le,_e=It}if(Pe===U.length)return p(z,_e),Ze&&Zi(z,Pe),ge;if(_e===null){for(;Pe<U.length;Pe++)_e=ne(z,U[Pe],se),_e!==null&&(D=S(_e,D,Pe),Se===null?ge=_e:Se.sibling=_e,Se=_e);return Ze&&Zi(z,Pe),ge}for(_e=y(z,_e);Pe<U.length;Pe++)It=ce(_e,z,Pe,U[Pe],se),It!==null&&(o&&It.alternate!==null&&_e.delete(It.key===null?Pe:It.key),D=S(It,D,Pe),Se===null?ge=It:Se.sibling=It,Se=It);return o&&_e.forEach(function(Ci){return c(z,Ci)}),Ze&&Zi(z,Pe),ge}function pe(z,D,U,se){var ge=$(U);if(typeof ge!="function")throw Error(t(150));if(U=ge.call(U),U==null)throw Error(t(151));for(var Se=ge=null,_e=D,Pe=D=0,It=null,Le=U.next();_e!==null&&!Le.done;Pe++,Le=U.next()){_e.index>Pe?(It=_e,_e=null):It=_e.sibling;var Ci=J(z,_e,Le.value,se);if(Ci===null){_e===null&&(_e=It);break}o&&_e&&Ci.alternate===null&&c(z,_e),D=S(Ci,D,Pe),Se===null?ge=Ci:Se.sibling=Ci,Se=Ci,_e=It}if(Le.done)return p(z,_e),Ze&&Zi(z,Pe),ge;if(_e===null){for(;!Le.done;Pe++,Le=U.next())Le=ne(z,Le.value,se),Le!==null&&(D=S(Le,D,Pe),Se===null?ge=Le:Se.sibling=Le,Se=Le);return Ze&&Zi(z,Pe),ge}for(_e=y(z,_e);!Le.done;Pe++,Le=U.next())Le=ce(_e,z,Pe,Le.value,se),Le!==null&&(o&&Le.alternate!==null&&_e.delete(Le.key===null?Pe:Le.key),D=S(Le,D,Pe),Se===null?ge=Le:Se.sibling=Le,Se=Le);return o&&_e.forEach(function(DO){return c(z,DO)}),Ze&&Zi(z,Pe),ge}function dt(z,D,U,se){if(typeof U=="object"&&U!==null&&U.type===j&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case N:e:{for(var ge=U.key,Se=D;Se!==null;){if(Se.key===ge){if(ge=U.type,ge===j){if(Se.tag===7){p(z,Se.sibling),D=w(Se,U.props.children),D.return=z,z=D;break e}}else if(Se.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===X&&Bx(ge)===Se.type){p(z,Se.sibling),D=w(Se,U.props),D.ref=bo(z,Se,U),D.return=z,z=D;break e}p(z,Se);break}else c(z,Se);Se=Se.sibling}U.type===j?(D=as(U.props.children,z.mode,se,U.key),D.return=z,z=D):(se=Hc(U.type,U.key,U.props,null,z.mode,se),se.ref=bo(z,D,U),se.return=z,z=se)}return k(z);case O:e:{for(Se=U.key;D!==null;){if(D.key===Se)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){p(z,D.sibling),D=w(D,U.children||[]),D.return=z,z=D;break e}else{p(z,D);break}else c(z,D);D=D.sibling}D=ep(U,z.mode,se),D.return=z,z=D}return k(z);case X:return Se=U._init,dt(z,D,Se(U._payload),se)}if(Ka(U))return fe(z,D,U,se);if($(U))return pe(z,D,U,se);xc(z,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(p(z,D.sibling),D=w(D,U),D.return=z,z=D):(p(z,D),D=Jf(U,z.mode,se),D.return=z,z=D),k(z)):p(z,D)}return dt}var na=zx(!0),Ux=zx(!1),bc=mi(null),wc=null,ra=null,cf=null;function uf(){cf=ra=wc=null}function df(o){var c=bc.current;Xe(bc),o._currentValue=c}function hf(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function ia(o,c){wc=o,cf=ra=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(gn=!0),o.firstContext=null)}function Hn(o){var c=o._currentValue;if(cf!==o)if(o={context:o,memoizedValue:c,next:null},ra===null){if(wc===null)throw Error(t(308));ra=o,wc.dependencies={lanes:0,firstContext:o}}else ra=ra.next=o;return c}var Ji=null;function ff(o){Ji===null?Ji=[o]:Ji.push(o)}function Hx(o,c,p,y){var w=c.interleaved;return w===null?(p.next=p,ff(c)):(p.next=w.next,w.next=p),c.interleaved=p,Lr(o,y)}function Lr(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var yi=!1;function pf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wx(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Fr(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function xi(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(De&2)!==0){var w=y.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),y.pending=c,Lr(o,p)}return w=y.interleaved,w===null?(c.next=c,ff(y)):(c.next=w.next,w.next=c),y.interleaved=c,Lr(o,p)}function Ac(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ph(o,p)}}function qx(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var w=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var k={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};S===null?w=S=k:S=S.next=k,p=p.next}while(p!==null);S===null?w=S=c:S=S.next=c}else w=S=c;p={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function Sc(o,c,p,y){var w=o.updateQueue;yi=!1;var S=w.firstBaseUpdate,k=w.lastBaseUpdate,M=w.shared.pending;if(M!==null){w.shared.pending=null;var R=M,G=R.next;R.next=null,k===null?S=G:k.next=G,k=R;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,M=ee.lastBaseUpdate,M!==k&&(M===null?ee.firstBaseUpdate=G:M.next=G,ee.lastBaseUpdate=R))}if(S!==null){var ne=w.baseState;k=0,ee=G=R=null,M=S;do{var J=M.lane,ce=M.eventTime;if((y&J)===J){ee!==null&&(ee=ee.next={eventTime:ce,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var fe=o,pe=M;switch(J=c,ce=p,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ne=fe.call(ce,ne,J);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,J=typeof fe=="function"?fe.call(ce,ne,J):fe,J==null)break e;ne=W({},ne,J);break e;case 2:yi=!0}}M.callback!==null&&M.lane!==0&&(o.flags|=64,J=w.effects,J===null?w.effects=[M]:J.push(M))}else ce={eventTime:ce,lane:J,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ee===null?(G=ee=ce,R=ne):ee=ee.next=ce,k|=J;if(M=M.next,M===null){if(M=w.shared.pending,M===null)break;J=M,M=J.next,J.next=null,w.lastBaseUpdate=J,w.shared.pending=null}}while(!0);if(ee===null&&(R=ne),w.baseState=R,w.firstBaseUpdate=G,w.lastBaseUpdate=ee,c=w.shared.interleaved,c!==null){w=c;do k|=w.lane,w=w.next;while(w!==c)}else S===null&&(w.shared.lanes=0);ns|=k,o.lanes=k,o.memoizedState=ne}}function Gx(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],w=y.callback;if(w!==null){if(y.callback=null,y=p,typeof w!="function")throw Error(t(191,w));w.call(y)}}}var wo={},Ar=mi(wo),Ao=mi(wo),So=mi(wo);function es(o){if(o===wo)throw Error(t(174));return o}function mf(o,c){switch(Ve(So,c),Ve(Ao,o),Ve(Ar,wo),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:mh(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=mh(c,o)}Xe(Ar),Ve(Ar,c)}function sa(){Xe(Ar),Xe(Ao),Xe(So)}function Vx(o){es(So.current);var c=es(Ar.current),p=mh(c,o.type);c!==p&&(Ve(Ao,o),Ve(Ar,p))}function gf(o){Ao.current===o&&(Xe(Ar),Xe(Ao))}var it=mi(0);function _c(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var vf=[];function yf(){for(var o=0;o<vf.length;o++)vf[o]._workInProgressVersionPrimary=null;vf.length=0}var Ec=T.ReactCurrentDispatcher,xf=T.ReactCurrentBatchConfig,ts=0,st=null,St=null,jt=null,Cc=!1,_o=!1,Eo=0,iO=0;function Kt(){throw Error(t(321))}function bf(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!or(o[p],c[p]))return!1;return!0}function wf(o,c,p,y,w,S){if(ts=S,st=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ec.current=o===null||o.memoizedState===null?lO:cO,o=p(y,w),_o){S=0;do{if(_o=!1,Eo=0,25<=S)throw Error(t(301));S+=1,jt=St=null,c.updateQueue=null,Ec.current=uO,o=p(y,w)}while(_o)}if(Ec.current=Tc,c=St!==null&&St.next!==null,ts=0,jt=St=st=null,Cc=!1,c)throw Error(t(300));return o}function Af(){var o=Eo!==0;return Eo=0,o}function Sr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?st.memoizedState=jt=o:jt=jt.next=o,jt}function Wn(){if(St===null){var o=st.alternate;o=o!==null?o.memoizedState:null}else o=St.next;var c=jt===null?st.memoizedState:jt.next;if(c!==null)jt=c,St=o;else{if(o===null)throw Error(t(310));St=o,o={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},jt===null?st.memoizedState=jt=o:jt=jt.next=o}return jt}function Co(o,c){return typeof c=="function"?c(o):c}function Sf(o){var c=Wn(),p=c.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=St,w=y.baseQueue,S=p.pending;if(S!==null){if(w!==null){var k=w.next;w.next=S.next,S.next=k}y.baseQueue=w=S,p.pending=null}if(w!==null){S=w.next,y=y.baseState;var M=k=null,R=null,G=S;do{var ee=G.lane;if((ts&ee)===ee)R!==null&&(R=R.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),y=G.hasEagerState?G.eagerState:o(y,G.action);else{var ne={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};R===null?(M=R=ne,k=y):R=R.next=ne,st.lanes|=ee,ns|=ee}G=G.next}while(G!==null&&G!==S);R===null?k=y:R.next=M,or(y,c.memoizedState)||(gn=!0),c.memoizedState=y,c.baseState=k,c.baseQueue=R,p.lastRenderedState=y}if(o=p.interleaved,o!==null){w=o;do S=w.lane,st.lanes|=S,ns|=S,w=w.next;while(w!==o)}else w===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function _f(o){var c=Wn(),p=c.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=p.dispatch,w=p.pending,S=c.memoizedState;if(w!==null){p.pending=null;var k=w=w.next;do S=o(S,k.action),k=k.next;while(k!==w);or(S,c.memoizedState)||(gn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),p.lastRenderedState=S}return[S,y]}function Kx(){}function Yx(o,c){var p=st,y=Wn(),w=c(),S=!or(y.memoizedState,w);if(S&&(y.memoizedState=w,gn=!0),y=y.queue,Ef(Zx.bind(null,p,y,o),[o]),y.getSnapshot!==c||S||jt!==null&&jt.memoizedState.tag&1){if(p.flags|=2048,Po(9,Qx.bind(null,p,y,w,c),void 0,null),Mt===null)throw Error(t(349));(ts&30)!==0||Xx(p,c,w)}return w}function Xx(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=st.updateQueue,c===null?(c={lastEffect:null,stores:null},st.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function Qx(o,c,p,y){c.value=p,c.getSnapshot=y,Jx(c)&&eb(o)}function Zx(o,c,p){return p(function(){Jx(c)&&eb(o)})}function Jx(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!or(o,p)}catch{return!0}}function eb(o){var c=Lr(o,1);c!==null&&hr(c,o,1,-1)}function tb(o){var c=Sr();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:o},c.queue=o,o=o.dispatch=oO.bind(null,st,o),[c.memoizedState,o]}function Po(o,c,p,y){return o={tag:o,create:c,destroy:p,deps:y,next:null},c=st.updateQueue,c===null?(c={lastEffect:null,stores:null},st.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o)),o}function nb(){return Wn().memoizedState}function Pc(o,c,p,y){var w=Sr();st.flags|=o,w.memoizedState=Po(1|c,p,void 0,y===void 0?null:y)}function kc(o,c,p,y){var w=Wn();y=y===void 0?null:y;var S=void 0;if(St!==null){var k=St.memoizedState;if(S=k.destroy,y!==null&&bf(y,k.deps)){w.memoizedState=Po(c,p,S,y);return}}st.flags|=o,w.memoizedState=Po(1|c,p,S,y)}function rb(o,c){return Pc(8390656,8,o,c)}function Ef(o,c){return kc(2048,8,o,c)}function ib(o,c){return kc(4,2,o,c)}function sb(o,c){return kc(4,4,o,c)}function ab(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function ob(o,c,p){return p=p!=null?p.concat([o]):null,kc(4,4,ab.bind(null,c,o),p)}function Cf(){}function lb(o,c){var p=Wn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&bf(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function cb(o,c){var p=Wn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&bf(c,y[1])?y[0]:(o=o(),p.memoizedState=[o,c],o)}function ub(o,c,p){return(ts&21)===0?(o.baseState&&(o.baseState=!1,gn=!0),o.memoizedState=p):(or(p,c)||(p=B0(),st.lanes|=p,ns|=p,o.baseState=!0),c)}function sO(o,c){var p=ze;ze=p!==0&&4>p?p:4,o(!0);var y=xf.transition;xf.transition={};try{o(!1),c()}finally{ze=p,xf.transition=y}}function db(){return Wn().memoizedState}function aO(o,c,p){var y=Si(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},hb(o))fb(c,p);else if(p=Hx(o,c,p,y),p!==null){var w=on();hr(p,o,y,w),pb(p,c,y)}}function oO(o,c,p){var y=Si(o),w={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(hb(o))fb(c,w);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var k=c.lastRenderedState,M=S(k,p);if(w.hasEagerState=!0,w.eagerState=M,or(M,k)){var R=c.interleaved;R===null?(w.next=w,ff(c)):(w.next=R.next,R.next=w),c.interleaved=w;return}}catch{}finally{}p=Hx(o,c,w,y),p!==null&&(w=on(),hr(p,o,y,w),pb(p,c,y))}}function hb(o){var c=o.alternate;return o===st||c!==null&&c===st}function fb(o,c){_o=Cc=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function pb(o,c,p){if((p&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ph(o,p)}}var Tc={readContext:Hn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},lO={readContext:Hn,useCallback:function(o,c){return Sr().memoizedState=[o,c===void 0?null:c],o},useContext:Hn,useEffect:rb,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,Pc(4194308,4,ab.bind(null,c,o),p)},useLayoutEffect:function(o,c){return Pc(4194308,4,o,c)},useInsertionEffect:function(o,c){return Pc(4,2,o,c)},useMemo:function(o,c){var p=Sr();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var y=Sr();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=aO.bind(null,st,o),[y.memoizedState,o]},useRef:function(o){var c=Sr();return o={current:o},c.memoizedState=o},useState:tb,useDebugValue:Cf,useDeferredValue:function(o){return Sr().memoizedState=o},useTransition:function(){var o=tb(!1),c=o[0];return o=sO.bind(null,o[1]),Sr().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var y=st,w=Sr();if(Ze){if(p===void 0)throw Error(t(407));p=p()}else{if(p=c(),Mt===null)throw Error(t(349));(ts&30)!==0||Xx(y,c,p)}w.memoizedState=p;var S={value:p,getSnapshot:c};return w.queue=S,rb(Zx.bind(null,y,S,o),[o]),y.flags|=2048,Po(9,Qx.bind(null,y,S,p,c),void 0,null),p},useId:function(){var o=Sr(),c=Mt.identifierPrefix;if(Ze){var p=Dr,y=Rr;p=(y&~(1<<32-ar(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=Eo++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=iO++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},cO={readContext:Hn,useCallback:lb,useContext:Hn,useEffect:Ef,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:Sf,useRef:nb,useState:function(){return Sf(Co)},useDebugValue:Cf,useDeferredValue:function(o){var c=Wn();return ub(c,St.memoizedState,o)},useTransition:function(){var o=Sf(Co)[0],c=Wn().memoizedState;return[o,c]},useMutableSource:Kx,useSyncExternalStore:Yx,useId:db,unstable_isNewReconciler:!1},uO={readContext:Hn,useCallback:lb,useContext:Hn,useEffect:Ef,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:_f,useRef:nb,useState:function(){return _f(Co)},useDebugValue:Cf,useDeferredValue:function(o){var c=Wn();return St===null?c.memoizedState=o:ub(c,St.memoizedState,o)},useTransition:function(){var o=_f(Co)[0],c=Wn().memoizedState;return[o,c]},useMutableSource:Kx,useSyncExternalStore:Yx,useId:db,unstable_isNewReconciler:!1};function cr(o,c){if(o&&o.defaultProps){c=W({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function Pf(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:W({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Nc={isMounted:function(o){return(o=o._reactInternals)?Ki(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var y=on(),w=Si(o),S=Fr(y,w);S.payload=c,p!=null&&(S.callback=p),c=xi(o,S,w),c!==null&&(hr(c,o,w,y),Ac(c,o,w))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=on(),w=Si(o),S=Fr(y,w);S.tag=1,S.payload=c,p!=null&&(S.callback=p),c=xi(o,S,w),c!==null&&(hr(c,o,w,y),Ac(c,o,w))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=on(),y=Si(o),w=Fr(p,y);w.tag=2,c!=null&&(w.callback=c),c=xi(o,w,y),c!==null&&(hr(c,o,y,p),Ac(c,o,y))}};function mb(o,c,p,y,w,S,k){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,S,k):c.prototype&&c.prototype.isPureReactComponent?!fo(p,y)||!fo(w,S):!0}function gb(o,c,p){var y=!1,w=gi,S=c.contextType;return typeof S=="object"&&S!==null?S=Hn(S):(w=mn(c)?Xi:Vt.current,y=c.contextTypes,S=(y=y!=null)?Zs(o,w):gi),c=new c(p,S),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Nc,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=S),c}function vb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&Nc.enqueueReplaceState(c,c.state,null)}function kf(o,c,p,y){var w=o.stateNode;w.props=p,w.state=o.memoizedState,w.refs={},pf(o);var S=c.contextType;typeof S=="object"&&S!==null?w.context=Hn(S):(S=mn(c)?Xi:Vt.current,w.context=Zs(o,S)),w.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Pf(o,c,S,p),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&Nc.enqueueReplaceState(w,w.state,null),Sc(o,p,w,y),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function aa(o,c){try{var p="",y=c;do p+=we(y),y=y.return;while(y);var w=p}catch(S){w=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:c,stack:w,digest:null}}function Tf(o,c,p){return{value:o,source:null,stack:p??null,digest:c??null}}function Nf(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var dO=typeof WeakMap=="function"?WeakMap:Map;function yb(o,c,p){p=Fr(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){Lc||(Lc=!0,qf=y),Nf(o,c)},p}function xb(o,c,p){p=Fr(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var w=c.value;p.payload=function(){return y(w)},p.callback=function(){Nf(o,c)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(p.callback=function(){Nf(o,c),typeof y!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})}),p}function bb(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new dO;var w=new Set;y.set(c,w)}else w=y.get(c),w===void 0&&(w=new Set,y.set(c,w));w.has(p)||(w.add(p),o=EO.bind(null,o,c,p),c.then(o,o))}function wb(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Ab(o,c,p,y,w){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Fr(-1,1),c.tag=2,xi(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var hO=T.ReactCurrentOwner,gn=!1;function an(o,c,p,y){c.child=o===null?Ux(c,null,p,y):na(c,o.child,p,y)}function Sb(o,c,p,y,w){p=p.render;var S=c.ref;return ia(c,w),y=wf(o,c,p,y,S,w),p=Af(),o!==null&&!gn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,$r(o,c,w)):(Ze&&p&&rf(c),c.flags|=1,an(o,c,y,w),c.child)}function _b(o,c,p,y,w){if(o===null){var S=p.type;return typeof S=="function"&&!Zf(S)&&S.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=S,Eb(o,c,S,y,w)):(o=Hc(p.type,null,y,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,(o.lanes&w)===0){var k=S.memoizedProps;if(p=p.compare,p=p!==null?p:fo,p(k,y)&&o.ref===c.ref)return $r(o,c,w)}return c.flags|=1,o=Ei(S,y),o.ref=c.ref,o.return=c,c.child=o}function Eb(o,c,p,y,w){if(o!==null){var S=o.memoizedProps;if(fo(S,y)&&o.ref===c.ref)if(gn=!1,c.pendingProps=y=S,(o.lanes&w)!==0)(o.flags&131072)!==0&&(gn=!0);else return c.lanes=o.lanes,$r(o,c,w)}return Of(o,c,p,y,w)}function Cb(o,c,p){var y=c.pendingProps,w=y.children,S=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(la,Tn),Tn|=p;else{if((p&1073741824)===0)return o=S!==null?S.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Ve(la,Tn),Tn|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:p,Ve(la,Tn),Tn|=y}else S!==null?(y=S.baseLanes|p,c.memoizedState=null):y=p,Ve(la,Tn),Tn|=y;return an(o,c,w,p),c.child}function Pb(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function Of(o,c,p,y,w){var S=mn(p)?Xi:Vt.current;return S=Zs(c,S),ia(c,w),p=wf(o,c,p,y,S,w),y=Af(),o!==null&&!gn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,$r(o,c,w)):(Ze&&y&&rf(c),c.flags|=1,an(o,c,p,w),c.child)}function kb(o,c,p,y,w){if(mn(p)){var S=!0;pc(c)}else S=!1;if(ia(c,w),c.stateNode===null)jc(o,c),gb(c,p,y),kf(c,p,y,w),y=!0;else if(o===null){var k=c.stateNode,M=c.memoizedProps;k.props=M;var R=k.context,G=p.contextType;typeof G=="object"&&G!==null?G=Hn(G):(G=mn(p)?Xi:Vt.current,G=Zs(c,G));var ee=p.getDerivedStateFromProps,ne=typeof ee=="function"||typeof k.getSnapshotBeforeUpdate=="function";ne||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==y||R!==G)&&vb(c,k,y,G),yi=!1;var J=c.memoizedState;k.state=J,Sc(c,y,k,w),R=c.memoizedState,M!==y||J!==R||pn.current||yi?(typeof ee=="function"&&(Pf(c,p,ee,y),R=c.memoizedState),(M=yi||mb(c,p,M,y,J,R,G))?(ne||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=R),k.props=y,k.state=R,k.context=G,y=M):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{k=c.stateNode,Wx(o,c),M=c.memoizedProps,G=c.type===c.elementType?M:cr(c.type,M),k.props=G,ne=c.pendingProps,J=k.context,R=p.contextType,typeof R=="object"&&R!==null?R=Hn(R):(R=mn(p)?Xi:Vt.current,R=Zs(c,R));var ce=p.getDerivedStateFromProps;(ee=typeof ce=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==ne||J!==R)&&vb(c,k,y,R),yi=!1,J=c.memoizedState,k.state=J,Sc(c,y,k,w);var fe=c.memoizedState;M!==ne||J!==fe||pn.current||yi?(typeof ce=="function"&&(Pf(c,p,ce,y),fe=c.memoizedState),(G=yi||mb(c,p,G,y,J,fe,R)||!1)?(ee||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,fe,R),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,fe,R)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||M===o.memoizedProps&&J===o.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&J===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=fe),k.props=y,k.state=fe,k.context=R,y=G):(typeof k.componentDidUpdate!="function"||M===o.memoizedProps&&J===o.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&J===o.memoizedState||(c.flags|=1024),y=!1)}return jf(o,c,p,y,S,w)}function jf(o,c,p,y,w,S){Pb(o,c);var k=(c.flags&128)!==0;if(!y&&!k)return w&&Mx(c,p,!1),$r(o,c,S);y=c.stateNode,hO.current=c;var M=k&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&k?(c.child=na(c,o.child,null,S),c.child=na(c,null,M,S)):an(o,c,M,S),c.memoizedState=y.state,w&&Mx(c,p,!0),c.child}function Tb(o){var c=o.stateNode;c.pendingContext?Ox(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Ox(o,c.context,!1),mf(o,c.containerInfo)}function Nb(o,c,p,y,w){return ta(),lf(w),c.flags|=256,an(o,c,p,y),c.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function If(o){return{baseLanes:o,cachePool:null,transitions:null}}function Ob(o,c,p){var y=c.pendingProps,w=it.current,S=!1,k=(c.flags&128)!==0,M;if((M=k)||(M=o!==null&&o.memoizedState===null?!1:(w&2)!==0),M?(S=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),Ve(it,w&1),o===null)return of(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(k=y.children,o=y.fallback,S?(y=c.mode,S=c.child,k={mode:"hidden",children:k},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=k):S=Wc(k,y,0,null),o=as(o,y,p,null),S.return=c,o.return=c,S.sibling=o,c.child=S,c.child.memoizedState=If(p),c.memoizedState=Mf,o):Rf(c,k));if(w=o.memoizedState,w!==null&&(M=w.dehydrated,M!==null))return fO(o,c,k,y,M,w,p);if(S){S=y.fallback,k=c.mode,w=o.child,M=w.sibling;var R={mode:"hidden",children:y.children};return(k&1)===0&&c.child!==w?(y=c.child,y.childLanes=0,y.pendingProps=R,c.deletions=null):(y=Ei(w,R),y.subtreeFlags=w.subtreeFlags&14680064),M!==null?S=Ei(M,S):(S=as(S,k,p,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,k=o.child.memoizedState,k=k===null?If(p):{baseLanes:k.baseLanes|p,cachePool:null,transitions:k.transitions},S.memoizedState=k,S.childLanes=o.childLanes&~p,c.memoizedState=Mf,y}return S=o.child,o=S.sibling,y=Ei(S,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=y,c.memoizedState=null,y}function Rf(o,c){return c=Wc({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Oc(o,c,p,y){return y!==null&&lf(y),na(c,o.child,null,p),o=Rf(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function fO(o,c,p,y,w,S,k){if(p)return c.flags&256?(c.flags&=-257,y=Tf(Error(t(422))),Oc(o,c,k,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(S=y.fallback,w=c.mode,y=Wc({mode:"visible",children:y.children},w,0,null),S=as(S,w,k,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,(c.mode&1)!==0&&na(c,o.child,null,k),c.child.memoizedState=If(k),c.memoizedState=Mf,S);if((c.mode&1)===0)return Oc(o,c,k,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var M=y.dgst;return y=M,S=Error(t(419)),y=Tf(S,y,void 0),Oc(o,c,k,y)}if(M=(k&o.childLanes)!==0,gn||M){if(y=Mt,y!==null){switch(k&-k){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(y.suspendedLanes|k))!==0?0:w,w!==0&&w!==S.retryLane&&(S.retryLane=w,Lr(o,w),hr(y,o,w,-1))}return Qf(),y=Tf(Error(t(421))),Oc(o,c,k,y)}return w.data==="$?"?(c.flags|=128,c.child=o.child,c=CO.bind(null,o),w._reactRetry=c,null):(o=S.treeContext,kn=pi(w.nextSibling),Pn=c,Ze=!0,lr=null,o!==null&&(zn[Un++]=Rr,zn[Un++]=Dr,zn[Un++]=Qi,Rr=o.id,Dr=o.overflow,Qi=c),c=Rf(c,y.children),c.flags|=4096,c)}function jb(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),hf(o.return,c,p)}function Df(o,c,p,y,w){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:w}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=p,S.tailMode=w)}function Mb(o,c,p){var y=c.pendingProps,w=y.revealOrder,S=y.tail;if(an(o,c,y.children,p),y=it.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jb(o,p,c);else if(o.tag===19)jb(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Ve(it,y),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(p=c.child,w=null;p!==null;)o=p.alternate,o!==null&&_c(o)===null&&(w=p),p=p.sibling;p=w,p===null?(w=c.child,c.child=null):(w=p.sibling,p.sibling=null),Df(c,!1,w,p,S);break;case"backwards":for(p=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&_c(o)===null){c.child=w;break}o=w.sibling,w.sibling=p,p=w,w=o}Df(c,!0,p,null,S);break;case"together":Df(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jc(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function $r(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),ns|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,p=Ei(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Ei(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function pO(o,c,p){switch(c.tag){case 3:Tb(c),ta();break;case 5:Vx(c);break;case 1:mn(c.type)&&pc(c);break;case 4:mf(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,w=c.memoizedProps.value;Ve(bc,y._currentValue),y._currentValue=w;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Ve(it,it.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?Ob(o,c,p):(Ve(it,it.current&1),o=$r(o,c,p),o!==null?o.sibling:null);Ve(it,it.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(o.flags&128)!==0){if(y)return Mb(o,c,p);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Ve(it,it.current),y)break;return null;case 22:case 23:return c.lanes=0,Cb(o,c,p)}return $r(o,c,p)}var Ib,Lf,Rb,Db;Ib=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Lf=function(){},Rb=function(o,c,p,y){var w=o.memoizedProps;if(w!==y){o=c.stateNode,es(Ar.current);var S=null;switch(p){case"input":w=Be(o,w),y=Be(o,y),S=[];break;case"select":w=W({},w,{value:void 0}),y=W({},y,{value:void 0}),S=[];break;case"textarea":w=ph(o,w),y=ph(o,y),S=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=dc)}gh(p,y);var k;p=null;for(G in w)if(!y.hasOwnProperty(G)&&w.hasOwnProperty(G)&&w[G]!=null)if(G==="style"){var M=w[G];for(k in M)M.hasOwnProperty(k)&&(p||(p={}),p[k]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?S||(S=[]):(S=S||[]).push(G,null));for(G in y){var R=y[G];if(M=w?.[G],y.hasOwnProperty(G)&&R!==M&&(R!=null||M!=null))if(G==="style")if(M){for(k in M)!M.hasOwnProperty(k)||R&&R.hasOwnProperty(k)||(p||(p={}),p[k]="");for(k in R)R.hasOwnProperty(k)&&M[k]!==R[k]&&(p||(p={}),p[k]=R[k])}else p||(S||(S=[]),S.push(G,p)),p=R;else G==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,M=M?M.__html:void 0,R!=null&&M!==R&&(S=S||[]).push(G,R)):G==="children"?typeof R!="string"&&typeof R!="number"||(S=S||[]).push(G,""+R):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(i.hasOwnProperty(G)?(R!=null&&G==="onScroll"&&Ye("scroll",o),S||M===R||(S=[])):(S=S||[]).push(G,R))}p&&(S=S||[]).push("style",p);var G=S;(c.updateQueue=G)&&(c.flags|=4)}},Db=function(o,c,p,y){p!==y&&(c.flags|=4)};function ko(o,c){if(!Ze)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Yt(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var w=o.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function mO(o,c,p){var y=c.pendingProps;switch(sf(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(c),null;case 1:return mn(c.type)&&fc(),Yt(c),null;case 3:return y=c.stateNode,sa(),Xe(pn),Xe(Vt),yf(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(yc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,lr!==null&&(Kf(lr),lr=null))),Lf(o,c),Yt(c),null;case 5:gf(c);var w=es(So.current);if(p=c.type,o!==null&&c.stateNode!=null)Rb(o,c,p,y,w),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return Yt(c),null}if(o=es(Ar.current),yc(c)){y=c.stateNode,p=c.type;var S=c.memoizedProps;switch(y[wr]=c,y[yo]=S,o=(c.mode&1)!==0,p){case"dialog":Ye("cancel",y),Ye("close",y);break;case"iframe":case"object":case"embed":Ye("load",y);break;case"video":case"audio":for(w=0;w<mo.length;w++)Ye(mo[w],y);break;case"source":Ye("error",y);break;case"img":case"image":case"link":Ye("error",y),Ye("load",y);break;case"details":Ye("toggle",y);break;case"input":qt(y,S),Ye("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},Ye("invalid",y);break;case"textarea":x0(y,S),Ye("invalid",y)}gh(p,S),w=null;for(var k in S)if(S.hasOwnProperty(k)){var M=S[k];k==="children"?typeof M=="string"?y.textContent!==M&&(S.suppressHydrationWarning!==!0&&uc(y.textContent,M,o),w=["children",M]):typeof M=="number"&&y.textContent!==""+M&&(S.suppressHydrationWarning!==!0&&uc(y.textContent,M,o),w=["children",""+M]):i.hasOwnProperty(k)&&M!=null&&k==="onScroll"&&Ye("scroll",y)}switch(p){case"input":Ie(y),Va(y,S,!0);break;case"textarea":Ie(y),w0(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=dc)}y=w,c.updateQueue=y,y!==null&&(c.flags|=4)}else{k=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=A0(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=k.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=k.createElement(p,{is:y.is}):(o=k.createElement(p),p==="select"&&(k=o,y.multiple?k.multiple=!0:y.size&&(k.size=y.size))):o=k.createElementNS(o,p),o[wr]=c,o[yo]=y,Ib(o,c,!1,!1),c.stateNode=o;e:{switch(k=vh(p,y),p){case"dialog":Ye("cancel",o),Ye("close",o),w=y;break;case"iframe":case"object":case"embed":Ye("load",o),w=y;break;case"video":case"audio":for(w=0;w<mo.length;w++)Ye(mo[w],o);w=y;break;case"source":Ye("error",o),w=y;break;case"img":case"image":case"link":Ye("error",o),Ye("load",o),w=y;break;case"details":Ye("toggle",o),w=y;break;case"input":qt(o,y),w=Be(o,y),Ye("invalid",o);break;case"option":w=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},w=W({},y,{value:void 0}),Ye("invalid",o);break;case"textarea":x0(o,y),w=ph(o,y),Ye("invalid",o);break;default:w=y}gh(p,w),M=w;for(S in M)if(M.hasOwnProperty(S)){var R=M[S];S==="style"?E0(o,R):S==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&S0(o,R)):S==="children"?typeof R=="string"?(p!=="textarea"||R!=="")&&Ya(o,R):typeof R=="number"&&Ya(o,""+R):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?R!=null&&S==="onScroll"&&Ye("scroll",o):R!=null&&P(o,S,R,k))}switch(p){case"input":Ie(o),Va(o,y,!1);break;case"textarea":Ie(o),w0(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Oe(y.value));break;case"select":o.multiple=!!y.multiple,S=y.value,S!=null?Bs(o,!!y.multiple,S,!1):y.defaultValue!=null&&Bs(o,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=dc)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Yt(c),null;case 6:if(o&&c.stateNode!=null)Db(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(p=es(So.current),es(Ar.current),yc(c)){if(y=c.stateNode,p=c.memoizedProps,y[wr]=c,(S=y.nodeValue!==p)&&(o=Pn,o!==null))switch(o.tag){case 3:uc(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&uc(y.nodeValue,p,(o.mode&1)!==0)}S&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[wr]=c,c.stateNode=y}return Yt(c),null;case 13:if(Xe(it),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ze&&kn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)$x(),ta(),c.flags|=98560,S=!1;else if(S=yc(c),y!==null&&y.dehydrated!==null){if(o===null){if(!S)throw Error(t(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[wr]=c}else ta(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Yt(c),S=!1}else lr!==null&&(Kf(lr),lr=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(it.current&1)!==0?_t===0&&(_t=3):Qf())),c.updateQueue!==null&&(c.flags|=4),Yt(c),null);case 4:return sa(),Lf(o,c),o===null&&go(c.stateNode.containerInfo),Yt(c),null;case 10:return df(c.type._context),Yt(c),null;case 17:return mn(c.type)&&fc(),Yt(c),null;case 19:if(Xe(it),S=c.memoizedState,S===null)return Yt(c),null;if(y=(c.flags&128)!==0,k=S.rendering,k===null)if(y)ko(S,!1);else{if(_t!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(k=_c(o),k!==null){for(c.flags|=128,ko(S,!1),y=k.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)S=p,o=y,S.flags&=14680066,k=S.alternate,k===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=k.childLanes,S.lanes=k.lanes,S.child=k.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=k.memoizedProps,S.memoizedState=k.memoizedState,S.updateQueue=k.updateQueue,S.type=k.type,o=k.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Ve(it,it.current&1|2),c.child}o=o.sibling}S.tail!==null&&ut()>ca&&(c.flags|=128,y=!0,ko(S,!1),c.lanes=4194304)}else{if(!y)if(o=_c(k),o!==null){if(c.flags|=128,y=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),ko(S,!0),S.tail===null&&S.tailMode==="hidden"&&!k.alternate&&!Ze)return Yt(c),null}else 2*ut()-S.renderingStartTime>ca&&p!==1073741824&&(c.flags|=128,y=!0,ko(S,!1),c.lanes=4194304);S.isBackwards?(k.sibling=c.child,c.child=k):(p=S.last,p!==null?p.sibling=k:c.child=k,S.last=k)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=ut(),c.sibling=null,p=it.current,Ve(it,y?p&1|2:p&1),c):(Yt(c),null);case 22:case 23:return Xf(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Tn&1073741824)!==0&&(Yt(c),c.subtreeFlags&6&&(c.flags|=8192)):Yt(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function gO(o,c){switch(sf(c),c.tag){case 1:return mn(c.type)&&fc(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return sa(),Xe(pn),Xe(Vt),yf(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return gf(c),null;case 13:if(Xe(it),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ta()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Xe(it),null;case 4:return sa(),null;case 10:return df(c.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var Mc=!1,Xt=!1,vO=typeof WeakSet=="function"?WeakSet:Set,ue=null;function oa(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){ct(o,c,y)}else p.current=null}function Ff(o,c,p){try{p()}catch(y){ct(o,c,y)}}var Lb=!1;function yO(o,c){if(Yh=Jl,o=mx(),zh(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var w=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var k=0,M=-1,R=-1,G=0,ee=0,ne=o,J=null;t:for(;;){for(var ce;ne!==p||w!==0&&ne.nodeType!==3||(M=k+w),ne!==S||y!==0&&ne.nodeType!==3||(R=k+y),ne.nodeType===3&&(k+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)J=ne,ne=ce;for(;;){if(ne===o)break t;if(J===p&&++G===w&&(M=k),J===S&&++ee===y&&(R=k),(ce=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=ce}p=M===-1||R===-1?null:{start:M,end:R}}else p=null}p=p||{start:0,end:0}}else p=null;for(Xh={focusedElem:o,selectionRange:p},Jl=!1,ue=c;ue!==null;)if(c=ue,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ue=o;else for(;ue!==null;){c=ue;try{var fe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,dt=fe.memoizedState,z=c.stateNode,D=z.getSnapshotBeforeUpdate(c.elementType===c.type?pe:cr(c.type,pe),dt);z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=c.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ct(c,c.return,se)}if(o=c.sibling,o!==null){o.return=c.return,ue=o;break}ue=c.return}return fe=Lb,Lb=!1,fe}function To(o,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&o)===o){var S=w.destroy;w.destroy=void 0,S!==void 0&&Ff(c,p,S)}w=w.next}while(w!==y)}}function Ic(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function $f(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function Fb(o){var c=o.alternate;c!==null&&(o.alternate=null,Fb(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[wr],delete c[yo],delete c[ef],delete c[eO],delete c[tO])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function $b(o){return o.tag===5||o.tag===3||o.tag===4}function Bb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$b(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Bf(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=dc));else if(y!==4&&(o=o.child,o!==null))for(Bf(o,c,p),o=o.sibling;o!==null;)Bf(o,c,p),o=o.sibling}function zf(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(zf(o,c,p),o=o.sibling;o!==null;)zf(o,c,p),o=o.sibling}var Bt=null,ur=!1;function bi(o,c,p){for(p=p.child;p!==null;)zb(o,c,p),p=p.sibling}function zb(o,c,p){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(Vl,p)}catch{}switch(p.tag){case 5:Xt||oa(p,c);case 6:var y=Bt,w=ur;Bt=null,bi(o,c,p),Bt=y,ur=w,Bt!==null&&(ur?(o=Bt,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):Bt.removeChild(p.stateNode));break;case 18:Bt!==null&&(ur?(o=Bt,p=p.stateNode,o.nodeType===8?Jh(o.parentNode,p):o.nodeType===1&&Jh(o,p),ao(o)):Jh(Bt,p.stateNode));break;case 4:y=Bt,w=ur,Bt=p.stateNode.containerInfo,ur=!0,bi(o,c,p),Bt=y,ur=w;break;case 0:case 11:case 14:case 15:if(!Xt&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var S=w,k=S.destroy;S=S.tag,k!==void 0&&((S&2)!==0||(S&4)!==0)&&Ff(p,c,k),w=w.next}while(w!==y)}bi(o,c,p);break;case 1:if(!Xt&&(oa(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(M){ct(p,c,M)}bi(o,c,p);break;case 21:bi(o,c,p);break;case 22:p.mode&1?(Xt=(y=Xt)||p.memoizedState!==null,bi(o,c,p),Xt=y):bi(o,c,p);break;default:bi(o,c,p)}}function Ub(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new vO),c.forEach(function(y){var w=PO.bind(null,o,y);p.has(y)||(p.add(y),y.then(w,w))})}}function dr(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];try{var S=o,k=c,M=k;e:for(;M!==null;){switch(M.tag){case 5:Bt=M.stateNode,ur=!1;break e;case 3:Bt=M.stateNode.containerInfo,ur=!0;break e;case 4:Bt=M.stateNode.containerInfo,ur=!0;break e}M=M.return}if(Bt===null)throw Error(t(160));zb(S,k,w),Bt=null,ur=!1;var R=w.alternate;R!==null&&(R.return=null),w.return=null}catch(G){ct(w,c,G)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Hb(c,o),c=c.sibling}function Hb(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(dr(c,o),_r(o),y&4){try{To(3,o,o.return),Ic(3,o)}catch(pe){ct(o,o.return,pe)}try{To(5,o,o.return)}catch(pe){ct(o,o.return,pe)}}break;case 1:dr(c,o),_r(o),y&512&&p!==null&&oa(p,p.return);break;case 5:if(dr(c,o),_r(o),y&512&&p!==null&&oa(p,p.return),o.flags&32){var w=o.stateNode;try{Ya(w,"")}catch(pe){ct(o,o.return,pe)}}if(y&4&&(w=o.stateNode,w!=null)){var S=o.memoizedProps,k=p!==null?p.memoizedProps:S,M=o.type,R=o.updateQueue;if(o.updateQueue=null,R!==null)try{M==="input"&&S.type==="radio"&&S.name!=null&&Gt(w,S),vh(M,k);var G=vh(M,S);for(k=0;k<R.length;k+=2){var ee=R[k],ne=R[k+1];ee==="style"?E0(w,ne):ee==="dangerouslySetInnerHTML"?S0(w,ne):ee==="children"?Ya(w,ne):P(w,ee,ne,G)}switch(M){case"input":sr(w,S);break;case"textarea":b0(w,S);break;case"select":var J=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!S.multiple;var ce=S.value;ce!=null?Bs(w,!!S.multiple,ce,!1):J!==!!S.multiple&&(S.defaultValue!=null?Bs(w,!!S.multiple,S.defaultValue,!0):Bs(w,!!S.multiple,S.multiple?[]:"",!1))}w[yo]=S}catch(pe){ct(o,o.return,pe)}}break;case 6:if(dr(c,o),_r(o),y&4){if(o.stateNode===null)throw Error(t(162));w=o.stateNode,S=o.memoizedProps;try{w.nodeValue=S}catch(pe){ct(o,o.return,pe)}}break;case 3:if(dr(c,o),_r(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{ao(c.containerInfo)}catch(pe){ct(o,o.return,pe)}break;case 4:dr(c,o),_r(o);break;case 13:dr(c,o),_r(o),w=o.child,w.flags&8192&&(S=w.memoizedState!==null,w.stateNode.isHidden=S,!S||w.alternate!==null&&w.alternate.memoizedState!==null||(Wf=ut())),y&4&&Ub(o);break;case 22:if(ee=p!==null&&p.memoizedState!==null,o.mode&1?(Xt=(G=Xt)||ee,dr(c,o),Xt=G):dr(c,o),_r(o),y&8192){if(G=o.memoizedState!==null,(o.stateNode.isHidden=G)&&!ee&&(o.mode&1)!==0)for(ue=o,ee=o.child;ee!==null;){for(ne=ue=ee;ue!==null;){switch(J=ue,ce=J.child,J.tag){case 0:case 11:case 14:case 15:To(4,J,J.return);break;case 1:oa(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){y=J,p=J.return;try{c=y,fe.props=c.memoizedProps,fe.state=c.memoizedState,fe.componentWillUnmount()}catch(pe){ct(y,p,pe)}}break;case 5:oa(J,J.return);break;case 22:if(J.memoizedState!==null){Gb(ne);continue}}ce!==null?(ce.return=J,ue=ce):Gb(ne)}ee=ee.sibling}e:for(ee=null,ne=o;;){if(ne.tag===5){if(ee===null){ee=ne;try{w=ne.stateNode,G?(S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(M=ne.stateNode,R=ne.memoizedProps.style,k=R!=null&&R.hasOwnProperty("display")?R.display:null,M.style.display=_0("display",k))}catch(pe){ct(o,o.return,pe)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(pe){ct(o,o.return,pe)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===o)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===o)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===o)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:dr(c,o),_r(o),y&4&&Ub(o);break;case 21:break;default:dr(c,o),_r(o)}}function _r(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if($b(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(Ya(w,""),y.flags&=-33);var S=Bb(o);zf(o,S,w);break;case 3:case 4:var k=y.stateNode.containerInfo,M=Bb(o);Bf(o,M,k);break;default:throw Error(t(161))}}catch(R){ct(o,o.return,R)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function xO(o,c,p){ue=o,Wb(o)}function Wb(o,c,p){for(var y=(o.mode&1)!==0;ue!==null;){var w=ue,S=w.child;if(w.tag===22&&y){var k=w.memoizedState!==null||Mc;if(!k){var M=w.alternate,R=M!==null&&M.memoizedState!==null||Xt;M=Mc;var G=Xt;if(Mc=k,(Xt=R)&&!G)for(ue=w;ue!==null;)k=ue,R=k.child,k.tag===22&&k.memoizedState!==null?Vb(w):R!==null?(R.return=k,ue=R):Vb(w);for(;S!==null;)ue=S,Wb(S),S=S.sibling;ue=w,Mc=M,Xt=G}qb(o)}else(w.subtreeFlags&8772)!==0&&S!==null?(S.return=w,ue=S):qb(o)}}function qb(o){for(;ue!==null;){var c=ue;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Xt||Ic(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Xt)if(p===null)y.componentDidMount();else{var w=c.elementType===c.type?p.memoizedProps:cr(c.type,p.memoizedProps);y.componentDidUpdate(w,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&Gx(c,S,y);break;case 3:var k=c.updateQueue;if(k!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}Gx(c,k,p)}break;case 5:var M=c.stateNode;if(p===null&&c.flags&4){p=M;var R=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&p.focus();break;case"img":R.src&&(p.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var G=c.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&ao(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xt||c.flags&512&&$f(c)}catch(J){ct(c,c.return,J)}}if(c===o){ue=null;break}if(p=c.sibling,p!==null){p.return=c.return,ue=p;break}ue=c.return}}function Gb(o){for(;ue!==null;){var c=ue;if(c===o){ue=null;break}var p=c.sibling;if(p!==null){p.return=c.return,ue=p;break}ue=c.return}}function Vb(o){for(;ue!==null;){var c=ue;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Ic(4,c)}catch(R){ct(c,p,R)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var w=c.return;try{y.componentDidMount()}catch(R){ct(c,w,R)}}var S=c.return;try{$f(c)}catch(R){ct(c,S,R)}break;case 5:var k=c.return;try{$f(c)}catch(R){ct(c,k,R)}}}catch(R){ct(c,c.return,R)}if(c===o){ue=null;break}var M=c.sibling;if(M!==null){M.return=c.return,ue=M;break}ue=c.return}}var bO=Math.ceil,Rc=T.ReactCurrentDispatcher,Uf=T.ReactCurrentOwner,qn=T.ReactCurrentBatchConfig,De=0,Mt=null,gt=null,zt=0,Tn=0,la=mi(0),_t=0,No=null,ns=0,Dc=0,Hf=0,Oo=null,vn=null,Wf=0,ca=1/0,Br=null,Lc=!1,qf=null,wi=null,Fc=!1,Ai=null,$c=0,jo=0,Gf=null,Bc=-1,zc=0;function on(){return(De&6)!==0?ut():Bc!==-1?Bc:Bc=ut()}function Si(o){return(o.mode&1)===0?1:(De&2)!==0&&zt!==0?zt&-zt:rO.transition!==null?(zc===0&&(zc=B0()),zc):(o=ze,o!==0||(o=window.event,o=o===void 0?16:Y0(o.type)),o)}function hr(o,c,p,y){if(50<jo)throw jo=0,Gf=null,Error(t(185));to(o,p,y),((De&2)===0||o!==Mt)&&(o===Mt&&((De&2)===0&&(Dc|=p),_t===4&&_i(o,zt)),yn(o,y),p===1&&De===0&&(c.mode&1)===0&&(ca=ut()+500,mc&&vi()))}function yn(o,c){var p=o.callbackNode;rN(o,c);var y=Xl(o,o===Mt?zt:0);if(y===0)p!==null&&L0(p),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(p!=null&&L0(p),c===1)o.tag===0?nO(Yb.bind(null,o)):Ix(Yb.bind(null,o)),ZN(function(){(De&6)===0&&vi()}),p=null;else{switch(z0(y)){case 1:p=_h;break;case 4:p=F0;break;case 16:p=Gl;break;case 536870912:p=$0;break;default:p=Gl}p=rw(p,Kb.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function Kb(o,c){if(Bc=-1,zc=0,(De&6)!==0)throw Error(t(327));var p=o.callbackNode;if(ua()&&o.callbackNode!==p)return null;var y=Xl(o,o===Mt?zt:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=Uc(o,y);else{c=y;var w=De;De|=2;var S=Qb();(Mt!==o||zt!==c)&&(Br=null,ca=ut()+500,is(o,c));do try{SO();break}catch(M){Xb(o,M)}while(!0);uf(),Rc.current=S,De=w,gt!==null?c=0:(Mt=null,zt=0,c=_t)}if(c!==0){if(c===2&&(w=Eh(o),w!==0&&(y=w,c=Vf(o,w))),c===1)throw p=No,is(o,0),_i(o,y),yn(o,ut()),p;if(c===6)_i(o,y);else{if(w=o.current.alternate,(y&30)===0&&!wO(w)&&(c=Uc(o,y),c===2&&(S=Eh(o),S!==0&&(y=S,c=Vf(o,S))),c===1))throw p=No,is(o,0),_i(o,y),yn(o,ut()),p;switch(o.finishedWork=w,o.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:ss(o,vn,Br);break;case 3:if(_i(o,y),(y&130023424)===y&&(c=Wf+500-ut(),10<c)){if(Xl(o,0)!==0)break;if(w=o.suspendedLanes,(w&y)!==y){on(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=Zh(ss.bind(null,o,vn,Br),c);break}ss(o,vn,Br);break;case 4:if(_i(o,y),(y&4194240)===y)break;for(c=o.eventTimes,w=-1;0<y;){var k=31-ar(y);S=1<<k,k=c[k],k>w&&(w=k),y&=~S}if(y=w,y=ut()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*bO(y/1960))-y,10<y){o.timeoutHandle=Zh(ss.bind(null,o,vn,Br),y);break}ss(o,vn,Br);break;case 5:ss(o,vn,Br);break;default:throw Error(t(329))}}}return yn(o,ut()),o.callbackNode===p?Kb.bind(null,o):null}function Vf(o,c){var p=Oo;return o.current.memoizedState.isDehydrated&&(is(o,c).flags|=256),o=Uc(o,c),o!==2&&(c=vn,vn=p,c!==null&&Kf(c)),o}function Kf(o){vn===null?vn=o:vn.push.apply(vn,o)}function wO(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var w=p[y],S=w.getSnapshot;w=w.value;try{if(!or(S(),w))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _i(o,c){for(c&=~Hf,c&=~Dc,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-ar(c),y=1<<p;o[p]=-1,c&=~y}}function Yb(o){if((De&6)!==0)throw Error(t(327));ua();var c=Xl(o,0);if((c&1)===0)return yn(o,ut()),null;var p=Uc(o,c);if(o.tag!==0&&p===2){var y=Eh(o);y!==0&&(c=y,p=Vf(o,y))}if(p===1)throw p=No,is(o,0),_i(o,c),yn(o,ut()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ss(o,vn,Br),yn(o,ut()),null}function Yf(o,c){var p=De;De|=1;try{return o(c)}finally{De=p,De===0&&(ca=ut()+500,mc&&vi())}}function rs(o){Ai!==null&&Ai.tag===0&&(De&6)===0&&ua();var c=De;De|=1;var p=qn.transition,y=ze;try{if(qn.transition=null,ze=1,o)return o()}finally{ze=y,qn.transition=p,De=c,(De&6)===0&&vi()}}function Xf(){Tn=la.current,Xe(la)}function is(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,QN(p)),gt!==null)for(p=gt.return;p!==null;){var y=p;switch(sf(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&fc();break;case 3:sa(),Xe(pn),Xe(Vt),yf();break;case 5:gf(y);break;case 4:sa();break;case 13:Xe(it);break;case 19:Xe(it);break;case 10:df(y.type._context);break;case 22:case 23:Xf()}p=p.return}if(Mt=o,gt=o=Ei(o.current,null),zt=Tn=c,_t=0,No=null,Hf=Dc=ns=0,vn=Oo=null,Ji!==null){for(c=0;c<Ji.length;c++)if(p=Ji[c],y=p.interleaved,y!==null){p.interleaved=null;var w=y.next,S=p.pending;if(S!==null){var k=S.next;S.next=w,y.next=k}p.pending=y}Ji=null}return o}function Xb(o,c){do{var p=gt;try{if(uf(),Ec.current=Tc,Cc){for(var y=st.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}Cc=!1}if(ts=0,jt=St=st=null,_o=!1,Eo=0,Uf.current=null,p===null||p.return===null){_t=1,No=c,gt=null;break}e:{var S=o,k=p.return,M=p,R=c;if(c=zt,M.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=R,ee=M,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var J=ee.alternate;J?(ee.updateQueue=J.updateQueue,ee.memoizedState=J.memoizedState,ee.lanes=J.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ce=wb(k);if(ce!==null){ce.flags&=-257,Ab(ce,k,M,S,c),ce.mode&1&&bb(S,G,c),c=ce,R=G;var fe=c.updateQueue;if(fe===null){var pe=new Set;pe.add(R),c.updateQueue=pe}else fe.add(R);break e}else{if((c&1)===0){bb(S,G,c),Qf();break e}R=Error(t(426))}}else if(Ze&&M.mode&1){var dt=wb(k);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Ab(dt,k,M,S,c),lf(aa(R,M));break e}}S=R=aa(R,M),_t!==4&&(_t=2),Oo===null?Oo=[S]:Oo.push(S),S=k;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var z=yb(S,R,c);qx(S,z);break e;case 1:M=R;var D=S.type,U=S.stateNode;if((S.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(wi===null||!wi.has(U)))){S.flags|=65536,c&=-c,S.lanes|=c;var se=xb(S,M,c);qx(S,se);break e}}S=S.return}while(S!==null)}Jb(p)}catch(ge){c=ge,gt===p&&p!==null&&(gt=p=p.return);continue}break}while(!0)}function Qb(){var o=Rc.current;return Rc.current=Tc,o===null?Tc:o}function Qf(){(_t===0||_t===3||_t===2)&&(_t=4),Mt===null||(ns&268435455)===0&&(Dc&268435455)===0||_i(Mt,zt)}function Uc(o,c){var p=De;De|=2;var y=Qb();(Mt!==o||zt!==c)&&(Br=null,is(o,c));do try{AO();break}catch(w){Xb(o,w)}while(!0);if(uf(),De=p,Rc.current=y,gt!==null)throw Error(t(261));return Mt=null,zt=0,_t}function AO(){for(;gt!==null;)Zb(gt)}function SO(){for(;gt!==null&&!KT();)Zb(gt)}function Zb(o){var c=nw(o.alternate,o,Tn);o.memoizedProps=o.pendingProps,c===null?Jb(o):gt=c,Uf.current=null}function Jb(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=mO(p,c,Tn),p!==null){gt=p;return}}else{if(p=gO(p,c),p!==null){p.flags&=32767,gt=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{_t=6,gt=null;return}}if(c=c.sibling,c!==null){gt=c;return}gt=c=o}while(c!==null);_t===0&&(_t=5)}function ss(o,c,p){var y=ze,w=qn.transition;try{qn.transition=null,ze=1,_O(o,c,p,y)}finally{qn.transition=w,ze=y}return null}function _O(o,c,p,y){do ua();while(Ai!==null);if((De&6)!==0)throw Error(t(327));p=o.finishedWork;var w=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var S=p.lanes|p.childLanes;if(iN(o,S),o===Mt&&(gt=Mt=null,zt=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Fc||(Fc=!0,rw(Gl,function(){return ua(),null})),S=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||S){S=qn.transition,qn.transition=null;var k=ze;ze=1;var M=De;De|=4,Uf.current=null,yO(o,p),Hb(p,o),WN(Xh),Jl=!!Yh,Xh=Yh=null,o.current=p,xO(p),YT(),De=M,ze=k,qn.transition=S}else o.current=p;if(Fc&&(Fc=!1,Ai=o,$c=w),S=o.pendingLanes,S===0&&(wi=null),ZT(p.stateNode),yn(o,ut()),c!==null)for(y=o.onRecoverableError,p=0;p<c.length;p++)w=c[p],y(w.value,{componentStack:w.stack,digest:w.digest});if(Lc)throw Lc=!1,o=qf,qf=null,o;return($c&1)!==0&&o.tag!==0&&ua(),S=o.pendingLanes,(S&1)!==0?o===Gf?jo++:(jo=0,Gf=o):jo=0,vi(),null}function ua(){if(Ai!==null){var o=z0($c),c=qn.transition,p=ze;try{if(qn.transition=null,ze=16>o?16:o,Ai===null)var y=!1;else{if(o=Ai,Ai=null,$c=0,(De&6)!==0)throw Error(t(331));var w=De;for(De|=4,ue=o.current;ue!==null;){var S=ue,k=S.child;if((ue.flags&16)!==0){var M=S.deletions;if(M!==null){for(var R=0;R<M.length;R++){var G=M[R];for(ue=G;ue!==null;){var ee=ue;switch(ee.tag){case 0:case 11:case 15:To(8,ee,S)}var ne=ee.child;if(ne!==null)ne.return=ee,ue=ne;else for(;ue!==null;){ee=ue;var J=ee.sibling,ce=ee.return;if(Fb(ee),ee===G){ue=null;break}if(J!==null){J.return=ce,ue=J;break}ue=ce}}}var fe=S.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var dt=pe.sibling;pe.sibling=null,pe=dt}while(pe!==null)}}ue=S}}if((S.subtreeFlags&2064)!==0&&k!==null)k.return=S,ue=k;else e:for(;ue!==null;){if(S=ue,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:To(9,S,S.return)}var z=S.sibling;if(z!==null){z.return=S.return,ue=z;break e}ue=S.return}}var D=o.current;for(ue=D;ue!==null;){k=ue;var U=k.child;if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,ue=U;else e:for(k=D;ue!==null;){if(M=ue,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Ic(9,M)}}catch(ge){ct(M,M.return,ge)}if(M===k){ue=null;break e}var se=M.sibling;if(se!==null){se.return=M.return,ue=se;break e}ue=M.return}}if(De=w,vi(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(Vl,o)}catch{}y=!0}return y}finally{ze=p,qn.transition=c}}return!1}function ew(o,c,p){c=aa(p,c),c=yb(o,c,1),o=xi(o,c,1),c=on(),o!==null&&(to(o,1,c),yn(o,c))}function ct(o,c,p){if(o.tag===3)ew(o,o,p);else for(;c!==null;){if(c.tag===3){ew(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(wi===null||!wi.has(y))){o=aa(p,o),o=xb(c,o,1),c=xi(c,o,1),o=on(),c!==null&&(to(c,1,o),yn(c,o));break}}c=c.return}}function EO(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),c=on(),o.pingedLanes|=o.suspendedLanes&p,Mt===o&&(zt&p)===p&&(_t===4||_t===3&&(zt&130023424)===zt&&500>ut()-Wf?is(o,0):Hf|=p),yn(o,c)}function tw(o,c){c===0&&((o.mode&1)===0?c=1:(c=Yl,Yl<<=1,(Yl&130023424)===0&&(Yl=4194304)));var p=on();o=Lr(o,c),o!==null&&(to(o,c,p),yn(o,p))}function CO(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),tw(o,p)}function PO(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,w=o.memoizedState;w!==null&&(p=w.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),tw(o,p)}var nw;nw=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||pn.current)gn=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return gn=!1,pO(o,c,p);gn=(o.flags&131072)!==0}else gn=!1,Ze&&(c.flags&1048576)!==0&&Rx(c,vc,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;jc(o,c),o=c.pendingProps;var w=Zs(c,Vt.current);ia(c,p),w=wf(null,c,y,o,w,p);var S=Af();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,mn(y)?(S=!0,pc(c)):S=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,pf(c),w.updater=Nc,c.stateNode=w,w._reactInternals=c,kf(c,y,o,p),c=jf(null,c,y,!0,S,p)):(c.tag=0,Ze&&S&&rf(c),an(null,c,w,p),c=c.child),c;case 16:y=c.elementType;e:{switch(jc(o,c),o=c.pendingProps,w=y._init,y=w(y._payload),c.type=y,w=c.tag=TO(y),o=cr(y,o),w){case 0:c=Of(null,c,y,o,p);break e;case 1:c=kb(null,c,y,o,p);break e;case 11:c=Sb(null,c,y,o,p);break e;case 14:c=_b(null,c,y,cr(y.type,o),p);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:cr(y,w),Of(o,c,y,w,p);case 1:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:cr(y,w),kb(o,c,y,w,p);case 3:e:{if(Tb(c),o===null)throw Error(t(387));y=c.pendingProps,S=c.memoizedState,w=S.element,Wx(o,c),Sc(c,y,null,p);var k=c.memoizedState;if(y=k.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){w=aa(Error(t(423)),c),c=Nb(o,c,y,p,w);break e}else if(y!==w){w=aa(Error(t(424)),c),c=Nb(o,c,y,p,w);break e}else for(kn=pi(c.stateNode.containerInfo.firstChild),Pn=c,Ze=!0,lr=null,p=Ux(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ta(),y===w){c=$r(o,c,p);break e}an(o,c,y,p)}c=c.child}return c;case 5:return Vx(c),o===null&&of(c),y=c.type,w=c.pendingProps,S=o!==null?o.memoizedProps:null,k=w.children,Qh(y,w)?k=null:S!==null&&Qh(y,S)&&(c.flags|=32),Pb(o,c),an(o,c,k,p),c.child;case 6:return o===null&&of(c),null;case 13:return Ob(o,c,p);case 4:return mf(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=na(c,null,y,p):an(o,c,y,p),c.child;case 11:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:cr(y,w),Sb(o,c,y,w,p);case 7:return an(o,c,c.pendingProps,p),c.child;case 8:return an(o,c,c.pendingProps.children,p),c.child;case 12:return an(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,w=c.pendingProps,S=c.memoizedProps,k=w.value,Ve(bc,y._currentValue),y._currentValue=k,S!==null)if(or(S.value,k)){if(S.children===w.children&&!pn.current){c=$r(o,c,p);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var M=S.dependencies;if(M!==null){k=S.child;for(var R=M.firstContext;R!==null;){if(R.context===y){if(S.tag===1){R=Fr(-1,p&-p),R.tag=2;var G=S.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?R.next=R:(R.next=ee.next,ee.next=R),G.pending=R}}S.lanes|=p,R=S.alternate,R!==null&&(R.lanes|=p),hf(S.return,p,c),M.lanes|=p;break}R=R.next}}else if(S.tag===10)k=S.type===c.type?null:S.child;else if(S.tag===18){if(k=S.return,k===null)throw Error(t(341));k.lanes|=p,M=k.alternate,M!==null&&(M.lanes|=p),hf(k,p,c),k=S.sibling}else k=S.child;if(k!==null)k.return=S;else for(k=S;k!==null;){if(k===c){k=null;break}if(S=k.sibling,S!==null){S.return=k.return,k=S;break}k=k.return}S=k}an(o,c,w.children,p),c=c.child}return c;case 9:return w=c.type,y=c.pendingProps.children,ia(c,p),w=Hn(w),y=y(w),c.flags|=1,an(o,c,y,p),c.child;case 14:return y=c.type,w=cr(y,c.pendingProps),w=cr(y.type,w),_b(o,c,y,w,p);case 15:return Eb(o,c,c.type,c.pendingProps,p);case 17:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:cr(y,w),jc(o,c),c.tag=1,mn(y)?(o=!0,pc(c)):o=!1,ia(c,p),gb(c,y,w),kf(c,y,w,p),jf(null,c,y,!0,o,p);case 19:return Mb(o,c,p);case 22:return Cb(o,c,p)}throw Error(t(156,c.tag))};function rw(o,c){return D0(o,c)}function kO(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(o,c,p,y){return new kO(o,c,p,y)}function Zf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function TO(o){if(typeof o=="function")return Zf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===ae)return 14}return 2}function Ei(o,c){var p=o.alternate;return p===null?(p=Gn(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Hc(o,c,p,y,w,S){var k=2;if(y=o,typeof o=="function")Zf(o)&&(k=1);else if(typeof o=="string")k=5;else e:switch(o){case j:return as(p.children,w,S,c);case B:k=8,w|=8;break;case F:return o=Gn(12,p,c,w|2),o.elementType=F,o.lanes=S,o;case te:return o=Gn(13,p,c,w),o.elementType=te,o.lanes=S,o;case H:return o=Gn(19,p,c,w),o.elementType=H,o.lanes=S,o;case Q:return Wc(p,w,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Y:k=10;break e;case V:k=9;break e;case K:k=11;break e;case ae:k=14;break e;case X:k=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=Gn(k,p,c,w),c.elementType=o,c.type=y,c.lanes=S,c}function as(o,c,p,y){return o=Gn(7,o,y,c),o.lanes=p,o}function Wc(o,c,p,y){return o=Gn(22,o,y,c),o.elementType=Q,o.lanes=p,o.stateNode={isHidden:!1},o}function Jf(o,c,p){return o=Gn(6,o,null,c),o.lanes=p,o}function ep(o,c,p){return c=Gn(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function NO(o,c,p,y,w){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function tp(o,c,p,y,w,S,k,M,R){return o=new NO(o,c,p,M,R),c===1?(c=1,S===!0&&(c|=8)):c=0,S=Gn(3,null,null,c),o.current=S,S.stateNode=o,S.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},pf(S),o}function OO(o,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:y==null?null:""+y,children:o,containerInfo:c,implementation:p}}function iw(o){if(!o)return gi;o=o._reactInternals;e:{if(Ki(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(mn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(mn(p))return jx(o,p,c)}return c}function sw(o,c,p,y,w,S,k,M,R){return o=tp(p,y,!0,o,w,S,k,M,R),o.context=iw(null),p=o.current,y=on(),w=Si(p),S=Fr(y,w),S.callback=c??null,xi(p,S,w),o.current.lanes=w,to(o,w,y),yn(o,y),o}function qc(o,c,p,y){var w=c.current,S=on(),k=Si(w);return p=iw(p),c.context===null?c.context=p:c.pendingContext=p,c=Fr(S,k),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=xi(w,c,k),o!==null&&(hr(o,w,k,S),Ac(o,w,k)),k}function Gc(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function aw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function np(o,c){aw(o,c),(o=o.alternate)&&aw(o,c)}function jO(){return null}var ow=typeof reportError=="function"?reportError:function(o){console.error(o)};function rp(o){this._internalRoot=o}Vc.prototype.render=rp.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));qc(o,c,null,null)},Vc.prototype.unmount=rp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;rs(function(){qc(null,o,null,null)}),c[Mr]=null}};function Vc(o){this._internalRoot=o}Vc.prototype.unstable_scheduleHydration=function(o){if(o){var c=W0();o={blockedOn:null,target:o,priority:c};for(var p=0;p<di.length&&c!==0&&c<di[p].priority;p++);di.splice(p,0,o),p===0&&V0(o)}};function ip(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Kc(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function lw(){}function MO(o,c,p,y,w){if(w){if(typeof y=="function"){var S=y;y=function(){var G=Gc(k);S.call(G)}}var k=sw(c,y,o,0,null,!1,!1,"",lw);return o._reactRootContainer=k,o[Mr]=k.current,go(o.nodeType===8?o.parentNode:o),rs(),k}for(;w=o.lastChild;)o.removeChild(w);if(typeof y=="function"){var M=y;y=function(){var G=Gc(R);M.call(G)}}var R=tp(o,0,!1,null,null,!1,!1,"",lw);return o._reactRootContainer=R,o[Mr]=R.current,go(o.nodeType===8?o.parentNode:o),rs(function(){qc(c,R,p,y)}),R}function Yc(o,c,p,y,w){var S=p._reactRootContainer;if(S){var k=S;if(typeof w=="function"){var M=w;w=function(){var R=Gc(k);M.call(R)}}qc(c,k,o,w)}else k=MO(p,c,o,w,y);return Gc(k)}U0=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=eo(c.pendingLanes);p!==0&&(Ph(c,p|1),yn(c,ut()),(De&6)===0&&(ca=ut()+500,vi()))}break;case 13:rs(function(){var y=Lr(o,1);if(y!==null){var w=on();hr(y,o,1,w)}}),np(o,1)}},kh=function(o){if(o.tag===13){var c=Lr(o,134217728);if(c!==null){var p=on();hr(c,o,134217728,p)}np(o,134217728)}},H0=function(o){if(o.tag===13){var c=Si(o),p=Lr(o,c);if(p!==null){var y=on();hr(p,o,c,y)}np(o,c)}},W0=function(){return ze},q0=function(o,c){var p=ze;try{return ze=o,c()}finally{ze=p}},bh=function(o,c,p){switch(c){case"input":if(sr(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var w=hc(y);if(!w)throw Error(t(90));re(y),sr(y,w)}}}break;case"textarea":b0(o,p);break;case"select":c=p.value,c!=null&&Bs(o,!!p.multiple,c,!1)}},T0=Yf,N0=rs;var IO={usingClientEntryPoint:!1,Events:[xo,Xs,hc,P0,k0,Yf]},Mo={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RO={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=I0(o),o===null?null:o.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||jO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xc.isDisabled&&Xc.supportsFiber)try{Vl=Xc.inject(RO),br=Xc}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IO,xn.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ip(c))throw Error(t(200));return OO(o,c,null,p)},xn.createRoot=function(o,c){if(!ip(o))throw Error(t(299));var p=!1,y="",w=ow;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=tp(o,1,!1,null,null,p,!1,y,w),o[Mr]=c.current,go(o.nodeType===8?o.parentNode:o),new rp(c)},xn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=I0(c),o=o===null?null:o.stateNode,o},xn.flushSync=function(o){return rs(o)},xn.hydrate=function(o,c,p){if(!Kc(c))throw Error(t(200));return Yc(null,o,c,!0,p)},xn.hydrateRoot=function(o,c,p){if(!ip(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,w=!1,S="",k=ow;if(p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),c=sw(c,null,o,1,p??null,w,!1,S,k),o[Mr]=c.current,go(o),y)for(o=0;o<y.length;o++)p=y[o],w=p._getVersion,w=w(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,w]:c.mutableSourceEagerHydrationData.push(p,w);return new Vc(c)},xn.render=function(o,c,p){if(!Kc(c))throw Error(t(200));return Yc(null,o,c,!1,p)},xn.unmountComponentAtNode=function(o){if(!Kc(o))throw Error(t(40));return o._reactRootContainer?(rs(function(){Yc(null,null,o,!1,function(){o._reactRootContainer=null,o[Mr]=null})}),!0):!1},xn.unstable_batchedUpdates=Yf,xn.unstable_renderSubtreeIntoContainer=function(o,c,p,y){if(!Kc(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Yc(o,c,p,!1,y)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var yw;function hE(){if(yw)return lp.exports;yw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lp.exports=HO(),lp.exports}var xw;function WO(){if(xw)return Zc;xw=1;var n=hE();return Zc.createRoot=n.createRoot,Zc.hydrateRoot=n.hydrateRoot,Zc}var qO=WO();const GO=jr(qO);var fE=hE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},il.apply(this,arguments)}var Mi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Mi||(Mi={}));const bw="popstate";function VO(n){n===void 0&&(n={});function e(i,s){let{pathname:a="/",search:l="",hash:u=""}=js(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Qm("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:ku(s))}function r(i,s){tv(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return YO(e,t,r,n)}function bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KO(){return Math.random().toString(36).substr(2,8)}function ww(n,e){return{usr:n.state,key:n.key,idx:e}}function Qm(n,e,t,r){return t===void 0&&(t=null),il({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?js(e):e,{state:t,key:e&&e.key||r||KO()})}function ku(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function js(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function YO(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Mi.Pop,u=null,d=h();d==null&&(d=0,a.replaceState(il({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=Mi.Pop;let A=h(),E=A==null?null:A-d;d=A,u&&u({action:l,location:x.location,delta:E})}function m(A,E){l=Mi.Push;let C=Qm(x.location,A,E);t&&t(C,A),d=h()+1;let P=ww(C,d),T=x.createHref(C);try{a.pushState(P,"",T)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(T)}s&&u&&u({action:l,location:x.location,delta:1})}function g(A,E){l=Mi.Replace;let C=Qm(x.location,A,E);t&&t(C,A),d=h();let P=ww(C,d),T=x.createHref(C);a.replaceState(P,"",T),s&&u&&u({action:l,location:x.location,delta:0})}function b(A){let E=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof A=="string"?A:ku(A);return C=C.replace(/ $/,"%20"),bt(E,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,E)}let x={get action(){return l},get location(){return n(i,a)},listen(A){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(bw,f),u=A,()=>{i.removeEventListener(bw,f),u=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(A){return a.go(A)}};return x}var Aw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Aw||(Aw={}));function XO(n,e,t){return t===void 0&&(t="/"),QO(n,e,t)}function QO(n,e,t,r){let i=typeof e=="string"?js(e):e,s=nv(i.pathname||"/",t);if(s==null)return null;let a=pE(n);ZO(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=uj(s);l=oj(a[u],d)}return l}function pE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(bt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ri([r,u.relativePath]),h=t.concat(u);s.children&&s.children.length>0&&(bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),pE(s.children,e,h,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:sj(d,s.index),routesMeta:h})};return n.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let u of mE(s.path))i(s,a,u)}),e}function mE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=mE(r.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function ZO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:aj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JO=/^:[\w-]+$/,ej=3,tj=2,nj=1,rj=10,ij=-2,Sw=n=>n==="*";function sj(n,e){let t=n.split("/"),r=t.length;return t.some(Sw)&&(r+=ij),e&&(r+=tj),t.filter(i=>!Sw(i)).reduce((i,s)=>i+(JO.test(s)?ej:s===""?nj:rj),r)}function aj(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function oj(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=lj({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Ri([s,f.pathname]),pathnameBase:pj(Ri([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Ri([s,f.pathnameBase]))}return a}function lj(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=cj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let x=l[f]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[f];return g&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:n}}function cj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),tv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function nv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function dj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?js(n):n;return{pathname:t?t.startsWith("/")?t:hj(t,e):e,search:mj(r),hash:gj(i)}}function hj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function dp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gE(n,e){let t=fj(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function vE(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=js(n):(i=il({},n),bt(!i.pathname||!i.pathname.includes("?"),dp("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),dp("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),dp("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let u=dj(i,l),d=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Ri=n=>n.join("/").replace(/\/\/+/g,"/"),pj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const yE=["post","put","patch","delete"];new Set(yE);const yj=["get",...yE];new Set(yj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sl.apply(this,arguments)}const rv=_.createContext(null),xj=_.createContext(null),Ms=_.createContext(null),xd=_.createContext(null),ei=_.createContext({outlet:null,matches:[],isDataRoute:!1}),xE=_.createContext(null);function bj(n,e){let{relative:t}=e===void 0?{}:e;bl()||bt(!1);let{basename:r,navigator:i}=_.useContext(Ms),{hash:s,pathname:a,search:l}=SE(n,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Ri([r,a])),i.createHref({pathname:u,search:l,hash:s})}function bl(){return _.useContext(xd)!=null}function La(){return bl()||bt(!1),_.useContext(xd).location}function bE(n){_.useContext(Ms).static||_.useLayoutEffect(n)}function bd(){let{isDataRoute:n}=_.useContext(ei);return n?Rj():wj()}function wj(){bl()||bt(!1);let n=_.useContext(rv),{basename:e,future:t,navigator:r}=_.useContext(Ms),{matches:i}=_.useContext(ei),{pathname:s}=La(),a=JSON.stringify(gE(i,t.v7_relativeSplatPath)),l=_.useRef(!1);return bE(()=>{l.current=!0}),_.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=vE(d,JSON.parse(a),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ri([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,s,n])}const wE=_.createContext(null);function Aj(){return _.useContext(wE)}function Sj(n){let e=_.useContext(ei).outlet;return e&&_.createElement(wE.Provider,{value:n},e)}function AE(){let{matches:n}=_.useContext(ei),e=n[n.length-1];return e?e.params:{}}function SE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=_.useContext(Ms),{matches:i}=_.useContext(ei),{pathname:s}=La(),a=JSON.stringify(gE(i,r.v7_relativeSplatPath));return _.useMemo(()=>vE(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function _j(n,e){return Ej(n,e)}function Ej(n,e,t,r){bl()||bt(!1);let{navigator:i}=_.useContext(Ms),{matches:s}=_.useContext(ei),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=La(),h;if(e){var f;let A=typeof e=="string"?js(e):e;u==="/"||(f=A.pathname)!=null&&f.startsWith(u)||bt(!1),h=A}else h=d;let m=h.pathname||"/",g=m;if(u!=="/"){let A=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let b=XO(n,{pathname:g}),x=Nj(b&&b.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Ri([u,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Ri([u,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,t,r);return e&&x?_.createElement(xd.Provider,{value:{location:sl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Mi.Pop}},x):x}function Cj(){let n=Ij(),e=vj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:i},t):null,null)}const Pj=_.createElement(Cj,null);class kj extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(ei.Provider,{value:this.props.routeContext},_.createElement(xE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tj(n){let{routeContext:e,match:t,children:r}=n,i=_.useContext(rv);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(ei.Provider,{value:e},r)}function Nj(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);h>=0||bt(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:g}=t,b=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||b){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let g,b=!1,x=null,A=null;t&&(g=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||Pj,u&&(d<0&&m===0?(Dj("route-fallback"),b=!0,A=null):d===m&&(b=!0,A=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,m+1)),C=()=>{let P;return g?P=x:b?P=A:f.route.Component?P=_.createElement(f.route.Component,null):f.route.element?P=f.route.element:P=h,_.createElement(Tj,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:P})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?_.createElement(kj,{location:t.location,revalidation:t.revalidation,component:x,error:g,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}var _E=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(_E||{}),EE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(EE||{});function Oj(n){let e=_.useContext(rv);return e||bt(!1),e}function jj(n){let e=_.useContext(xj);return e||bt(!1),e}function Mj(n){let e=_.useContext(ei);return e||bt(!1),e}function CE(n){let e=Mj(),t=e.matches[e.matches.length-1];return t.route.id||bt(!1),t.route.id}function Ij(){var n;let e=_.useContext(xE),t=jj(),r=CE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Rj(){let{router:n}=Oj(_E.UseNavigateStable),e=CE(EE.UseNavigateStable),t=_.useRef(!1);return bE(()=>{t.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,sl({fromRouteId:e},s)))},[n,e])}const _w={};function Dj(n,e,t){_w[n]||(_w[n]=!0)}function Lj(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Fj(n){return Sj(n.context)}function Qt(n){bt(!1)}function $j(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Mi.Pop,navigator:s,static:a=!1,future:l}=n;bl()&&bt(!1);let u=e.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:u,navigator:s,static:a,future:sl({v7_relativeSplatPath:!1},l)}),[u,l,s,a]);typeof r=="string"&&(r=js(r));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:b="default"}=r,x=_.useMemo(()=>{let A=nv(h,u);return A==null?null:{location:{pathname:A,search:f,hash:m,state:g,key:b},navigationType:i}},[u,h,f,m,g,b,i]);return x==null?null:_.createElement(Ms.Provider,{value:d},_.createElement(xd.Provider,{children:t,value:x}))}function Bj(n){let{children:e,location:t}=n;return _j(Zm(e),t)}new Promise(()=>{});function Zm(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){t.push.apply(t,Zm(r.props.children,s));return}r.type!==Qt&&bt(!1),!r.props.index||!r.props.children||bt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Zm(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jm.apply(this,arguments)}function zj(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Uj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Hj(n,e){return n.button===0&&(!e||e==="_self")&&!Uj(n)}const Wj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qj="6";try{window.__reactRouterVersion=qj}catch{}const Gj="startTransition",Ew=dE[Gj];function Vj(n){let{basename:e,children:t,future:r,window:i}=n,s=_.useRef();s.current==null&&(s.current=VO({window:i,v5Compat:!0}));let a=s.current,[l,u]=_.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=_.useCallback(f=>{d&&Ew?Ew(()=>u(f)):u(f)},[u,d]);return _.useLayoutEffect(()=>a.listen(h),[a,h]),_.useEffect(()=>Lj(r),[r]),_.createElement($j,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:r})}const Kj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eg=_.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,m=zj(e,Wj),{basename:g}=_.useContext(Ms),b,x=!1;if(typeof d=="string"&&Yj.test(d)&&(b=d,Kj))try{let P=new URL(window.location.href),T=d.startsWith("//")?new URL(P.protocol+d):new URL(d),N=nv(T.pathname,g);T.origin===P.origin&&N!=null?d=N+T.search+T.hash:x=!0}catch{}let A=bj(d,{relative:i}),E=Xj(d,{replace:a,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:f});function C(P){r&&r(P),P.defaultPrevented||E(P)}return _.createElement("a",Jm({},m,{href:b||A,onClick:x||s?r:C,ref:t,target:u}))});var Cw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Cw||(Cw={}));var Pw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Pw||(Pw={}));function Xj(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=e===void 0?{}:e,u=bd(),d=La(),h=SE(n,{relative:a});return _.useCallback(f=>{if(Hj(f,t)){f.preventDefault();let m=r!==void 0?r:ku(d)===ku(h);u(n,{replace:m,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,h,r,i,t,n,s,a,l])}const PE=_.createContext(void 0),Qj={Admin:{id:"user1",name:"Admin User",role:"Admin"}},Zj=({children:n})=>{const[e,t]=_.useState(Qj.Admin);return v.jsx(PE.Provider,{value:{currentUser:e,setCurrentUser:t},children:n})},ti=()=>{const n=_.useContext(PE);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n},Jj=[{path:"/",title:"Dashboard",iconPath:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z",roles:["Admin","Moderator","Content Creator"]},{path:"/analytics",title:"Analytics",iconPath:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",roles:["Admin","Moderator"]},{path:"/students",title:"Students",iconPath:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm-9 3a2 2 0 11-4 0 2 2 0 014 0z",roles:["Admin","Moderator"]},{path:"/exams",title:"Exams",iconPath:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",roles:["Admin","Content Creator"]},{path:"/questions",title:"Questions",iconPath:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",roles:["Admin","Content Creator"]},{path:"/results",title:"Results",iconPath:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",roles:["Admin","Moderator"]},{path:"/curriculum",title:"Curriculum",iconPath:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",roles:["Admin","Moderator","Content Creator"]},{path:"/exam-simulation",title:"Exam Simulation",iconPath:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",roles:["Admin","Moderator","Content Creator"]},{path:"/ai-dashboard",title:"AI Dashboard",iconPath:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",roles:["Admin","Moderator","Content Creator"]},{path:"/achievements",title:"Achievements",iconPath:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z",roles:["Admin","Moderator","Content Creator"]},{path:"/audit-log",title:"Audit Log",iconPath:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",roles:["Admin"]},{path:"/settings",title:"Settings",iconPath:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065zM15 12a3 3 0 11-6 0 3 3 0 016 0z",roles:["Admin"]}],eM=({isOpen:n,onClose:e})=>{const{currentUser:t}=ti(),r=Jj.filter(s=>s.roles.includes(t.role)),i=La();return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:v.jsxs("div",{className:"w-64 bg-gray-900/50 backdrop-blur-xl border-r border-white/10 text-gray-200 flex flex-col",children:[v.jsx("div",{className:"h-20 flex items-center justify-center border-b border-white/10 bg-gradient-primary",children:v.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[v.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:v.jsx("svg",{className:"w-6 h-6 text-cyan-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsx("h1",{className:"text-2xl font-bold text-white text-shadow",children:"FMAA Pro"})]})}),v.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:r.map(s=>v.jsxs(eg,{to:s.path,onClick:e,className:`sidebar-link flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 text-shadow group ${i.pathname===s.path||s.path==="/"&&i.pathname==="/"?"active text-white font-semibold shadow-lg":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:s.title}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:s.iconPath})]})}),v.jsx("span",{className:"ml-3 font-medium",children:s.title})]},s.path))}),v.jsx("div",{className:"p-4 border-t border-white/10",children:v.jsxs("div",{className:"flex items-center",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"h-12 w-12 rounded-full object-cover ring-2 ring-cyan-500 bg-gradient-secondary flex items-center justify-center text-xl font-bold text-white",children:t.name.charAt(0)}),v.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-800"})]}),v.jsxs("div",{className:"mr-3 flex-1",children:[v.jsx("p",{className:"font-bold text-white",children:t.name}),v.jsx("p",{className:"text-sm text-gray-400",children:t.role})]})]})})]})}),n&&v.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[v.jsx("div",{className:"fixed inset-0 bg-black/60",onClick:e}),v.jsxs("div",{className:"relative w-64 bg-gray-900/50 backdrop-blur-xl border-r border-white/10 text-gray-200 flex flex-col h-full",children:[v.jsx("div",{className:"h-20 flex items-center justify-center border-b border-white/10 bg-gradient-primary",children:v.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[v.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:v.jsx("svg",{className:"w-6 h-6 text-cyan-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsx("h1",{className:"text-2xl font-bold text-white text-shadow",children:"FMAA Pro"})]})}),v.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:r.map(s=>v.jsxs(eg,{to:s.path,onClick:e,className:`sidebar-link flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 text-shadow group ${i.pathname===s.path||s.path==="/"&&i.pathname==="/"?"active text-white font-semibold shadow-lg":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("title",{children:s.title}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:s.iconPath})]})}),v.jsx("span",{className:"ml-3 font-medium",children:s.title})]},s.path))}),v.jsx("div",{className:"p-4 border-t border-white/10",children:v.jsxs("div",{className:"flex items-center",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"h-12 w-12 rounded-full object-cover ring-2 ring-cyan-500 bg-gradient-secondary flex items-center justify-center text-xl font-bold text-white",children:t.name.charAt(0)}),v.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-800"})]}),v.jsxs("div",{className:"mr-3 flex-1",children:[v.jsx("p",{className:"font-bold text-white",children:t.name}),v.jsx("p",{className:"text-sm text-gray-400",children:t.role})]})]})})]})]})]})},tM=({type:n})=>{const e="w-8 h-8 p-1.5 rounded-full flex-shrink-0";switch(n){case"submission":return v.jsx("div",{className:`bg-blue-500/30 text-blue-300 ${e}`,children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})});case"registration":return v.jsx("div",{className:`bg-green-500/30 text-green-300 ${e}`,children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.75 3.75 0 1 1-6.75 0 3.75 3.75 0 0 1 6.75 0ZM4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25h-15a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})});case"high_score":return v.jsx("div",{className:`bg-yellow-500/30 text-yellow-300 ${e}`,children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})})});case"exam_published":return v.jsx("div",{className:`bg-purple-500/30 text-purple-300 ${e}`,children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})})});default:return null}},nM=({onMenuClick:n,title:e,notifications:t,unreadCount:r,onMarkAllRead:i})=>{const[s,a]=_.useState(!1),[l,u]=_.useState(!1),d=_.useRef(null),h=_.useRef(null),{currentUser:f,setCurrentUser:m}=ti(),g={Admin:{id:"user1",name:"Admin User",role:"Admin"},Moderator:{id:"user2",name:"Moderator User",role:"Moderator"},"Content Creator":{id:"user3",name:"Content Creator",role:"Content Creator"}},b=x=>{m(g[x]),u(!1)};return _.useEffect(()=>{const x=A=>{d.current&&!d.current.contains(A.target)&&a(!1),h.current&&!h.current.contains(A.target)&&u(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]),v.jsxs("header",{className:"h-16 bg-gray-900/30 backdrop-blur-xl border-b border-white/10 flex-shrink-0 flex items-center justify-between px-4 md:px-6",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:n,className:"md:hidden text-white mr-4","aria-label":"Open menu",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),v.jsx("h1",{className:"text-xl font-semibold text-white text-shadow",children:e})]}),v.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[v.jsxs("div",{className:"hidden md:flex relative",children:[v.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 px-4 py-2 bg-white/5 rounded-lg border border-white/20 focus:ring-2 focus:ring-primary focus:border-primary transition-all duration-300 text-white placeholder-gray-400"}),v.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),v.jsxs("div",{className:"relative",ref:d,children:[v.jsxs("button",{onClick:()=>a(x=>!x),className:"relative text-white p-2 rounded-full hover:bg-white/10","aria-label":`Notifications (${r} unread)`,children:[v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 00-5-5.917V5a1 1 0 10-2 0v.083A6 6 0 006 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),r>0&&v.jsxs("span",{className:"absolute top-1 right-1 flex h-3 w-3",children:[v.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),v.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),s&&v.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-sm bg-gray-800/80 backdrop-blur-xl border border-white/20 rounded-lg shadow-2xl z-50 text-white",role:"dialog","aria-labelledby":"notifications-heading",children:[v.jsxs("div",{className:"flex justify-between items-center p-3 border-b border-white/20",children:[v.jsx("h2",{id:"notifications-heading",className:"font-semibold text-shadow",children:"Notifications"}),v.jsx("button",{onClick:i,className:"text-sm text-blue-300 hover:underline disabled:text-gray-400 disabled:no-underline",disabled:r===0,children:"Mark all as read"})]}),v.jsx("ul",{className:"max-h-96 overflow-y-auto",children:t.length>0?t.map(x=>v.jsxs("li",{className:`p-3 border-b border-white/10 flex items-start gap-3 hover:bg-white/10 ${x.read?"opacity-60":""}`,children:[v.jsx(tM,{type:x.type}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-sm",children:x.message}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:x.timestamp})]}),!x.read&&v.jsx("div",{className:"w-2.5 h-2.5 bg-blue-400 rounded-full mt-1.5 flex-shrink-0","aria-label":"Unread"})]},x.id)):v.jsx("li",{className:"p-6 text-center text-sm text-gray-300",children:"You have no new notifications."})})]})]}),v.jsxs("div",{className:"relative",ref:h,children:[v.jsx("button",{onClick:()=>u(x=>!x),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-white/10",children:v.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center font-bold text-white text-shadow",children:f.name.charAt(0)})}),l&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800/90 backdrop-blur-xl border border-white/20 rounded-lg shadow-2xl z-50 text-white overflow-hidden",children:[v.jsxs("div",{className:"p-3 border-b border-white/10",children:[v.jsx("p",{className:"text-sm font-semibold text-shadow truncate",children:f.name}),v.jsx("p",{className:"text-xs text-gray-400",children:f.role})]}),v.jsxs("div",{className:"py-1",children:[v.jsx("p",{className:"px-3 pt-2 pb-1 text-xs font-semibold text-gray-400",children:"Switch Role"}),v.jsx("button",{onClick:()=>b("Admin"),className:"w-full text-left px-3 py-1.5 text-sm hover:bg-white/10 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:f.role==="Admin",children:"Admin"}),v.jsx("button",{onClick:()=>b("Moderator"),className:"w-full text-left px-3 py-1.5 text-sm hover:bg-white/10 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:f.role==="Moderator",children:"Moderator"}),v.jsx("button",{onClick:()=>b("Content Creator"),className:"w-full text-left px-3 py-1.5 text-sm hover:bg-white/10 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:f.role==="Content Creator",children:"Content Creator"})]})]})]})]})]})},wd=({isOpen:n,onClose:e,title:t,children:r})=>{const i=_.useRef(null);return _.useEffect(()=>{const s=a=>{a.key==="Escape"&&e()};return n&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[n,e]),_.useEffect(()=>{if(!n||!i.current)return;const s=i.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=s[0],l=s[s.length-1],u=h=>{h.key==="Tab"&&(h.shiftKey?document.activeElement===a&&(l?.focus(),h.preventDefault()):document.activeElement===l&&(a?.focus(),h.preventDefault()))},d=i.current;return d.addEventListener("keydown",u),a?a.focus():i.current.focus(),()=>{d.removeEventListener("keydown",u)}},[n]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center",onClick:e,children:v.jsxs("div",{ref:i,className:"bg-glass-light backdrop-blur-xl rounded-lg shadow-2xl w-full max-w-md m-4 transform transition-all border border-white/30",onClick:s=>s.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/20",children:[v.jsx("h3",{id:"modal-title",className:"text-xl font-semibold text-white text-shadow",children:t}),v.jsx("button",{onClick:e,className:"text-gray-300 hover:text-white","aria-label":"Close modal",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"p-6 text-white",children:r})]})}):null};var kw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(kw||(kw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(Tw||(Tw={}));var Nw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Nw||(Nw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=["user","model","function","system"];var jw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(jw||(jw={}));var Mw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Mw||(Mw={}));var Iw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Iw||(Iw={}));var Rw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Rw||(Rw={}));var Zo;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Zo||(Zo={}));var Dw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Dw||(Dw={}));var Lw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Lw||(Lw={}));var Fw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Fw||(Fw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ha extends nn{constructor(e,t){super(e),this.response=t}}class kE extends nn{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}}class Di extends nn{}class TE extends nn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="https://generativelanguage.googleapis.com",iM="v1beta",sM="0.24.1",aM="genai-js";var As;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(As||(As={}));class oM{constructor(e,t,r,i,s){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||iM;let s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||rM}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function lM(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${aM}/${sM}`),e.join(" ")}async function cM(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",lM(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Di(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,s]of r.entries()){if(i==="x-goog-api-key")throw new Di(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Di(`Header name ${i} can only be set using the apiClient field`);t.append(i,s)}}return t}async function uM(n,e,t,r,i,s){const a=new oM(n,e,t,r,s);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},pM(s)),{method:"POST",headers:await cM(a),body:i})}}async function wl(n,e,t,r,i,s={},a=fetch){const{url:l,fetchOptions:u}=await uM(n,e,t,r,i,s);return dM(l,u,a)}async function dM(n,e,t=fetch){let r;try{r=await t(n,e)}catch(i){hM(i,n)}return r.ok||await fM(r,n),r}function hM(n,e){let t=n;throw t.name==="AbortError"?(t=new TE(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof kE||n instanceof Di||(t=new nn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function fM(n,e){let t="",r;try{const i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new kE(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function pM(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),wu(n.candidates[0]))throw new ha(`${Pi(n)}`,n);return mM(n)}else if(n.promptFeedback)throw new ha(`Text not available. ${Pi(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),wu(n.candidates[0]))throw new ha(`${Pi(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),$w(n)[0]}else if(n.promptFeedback)throw new ha(`Function call not available. ${Pi(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),wu(n.candidates[0]))throw new ha(`${Pi(n)}`,n);return $w(n)}else if(n.promptFeedback)throw new ha(`Function call not available. ${Pi(n)}`,n)},n}function mM(n){var e,t,r,i;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.text&&s.push(a.text),a.executableCode&&s.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&s.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function $w(n){var e,t,r,i;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.functionCall&&s.push(a.functionCall);if(s.length>0)return s}const gM=[Zo.RECITATION,Zo.SAFETY,Zo.LANGUAGE];function wu(n){return!!n.finishReason&&gM.includes(n.finishReason)}function Pi(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const s=n.candidates[0];wu(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function al(n){return this instanceof al?(this.v=n,this):new al(n)}function vM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(g){return new Promise(function(b,x){s.push([m,g,b,x])>1||l(m,g)})})}function l(m,g){try{u(r[m](g))}catch(b){f(s[0][3],b)}}function u(m){m.value instanceof al?Promise.resolve(m.value.v).then(d,h):f(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function f(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function yM(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=wM(e),[r,i]=t.tee();return{stream:bM(r),response:xM(i)}}async function xM(n){const e=[],t=n.getReader();for(;;){const{done:r,value:i}=await t.read();if(r)return iv(AM(e));e.push(i)}}function bM(n){return vM(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:i}=yield al(t.read());if(i)break;yield yield al(iv(r))}})}function wM(n){const e=n.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:a,done:l})=>{if(l){if(i.trim()){r.error(new nn("Failed to parse stream"));return}r.close();return}i+=a;let u=i.match(Bw),d;for(;u;){try{d=JSON.parse(u[1])}catch{r.error(new nn(`Error parsing JSON response: "${u[1]}"`));return}r.enqueue(d),i=i.substring(u[0].length),u=i.match(Bw)}return s()}).catch(a=>{let l=a;throw l.stack=a.stack,l.name==="AbortError"?l=new TE("Request aborted when reading from the stream"):l=new nn("Error reading from the stream"),l})}}})}function AM(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let i=0;for(const s of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=s.citationMetadata,t.candidates[i].groundingMetadata=s.groundingMetadata,t.candidates[i].finishReason=s.finishReason,t.candidates[i].finishMessage=s.finishMessage,t.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){t.candidates[i].content||(t.candidates[i].content={role:s.content.role||"user",parts:[]});const a={};for(const l of s.content.parts)l.text&&(a.text=l.text),l.functionCall&&(a.functionCall=l.functionCall),l.executableCode&&(a.executableCode=l.executableCode),l.codeExecutionResult&&(a.codeExecutionResult=l.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),t.candidates[i].content.parts.push(a)}i++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(n,e,t,r){const i=await wl(e,As.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return yM(i)}async function OE(n,e,t,r){const s=await(await wl(e,As.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:iv(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function ol(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return SM(e)}function SM(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,i=!1;for(const s of n)"functionResponse"in s?(t.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new nn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new nn("No content is provided for sending chat message.");return r?e:t}function _M(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=n.generateContentRequest!=null;if(n.contents){if(i)throw new Di("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const s=ol(n);r.contents=[s]}return{generateContentRequest:r}}function zw(n){let e;return n.contents?e=n:e={contents:[ol(n)]},n.systemInstruction&&(e.systemInstruction=jE(n.systemInstruction)),e}function EM(n){return typeof n=="string"||Array.isArray(n)?{content:ol(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],CM={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function PM(n){let e=!1;for(const t of n){const{role:r,parts:i}=t;if(!e&&r!=="user")throw new nn(`First content should be with role 'user', got ${r}`);if(!Ow.includes(r))throw new nn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Ow)}`);if(!Array.isArray(i))throw new nn("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new nn("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of i)for(const u of Uw)u in l&&(s[u]+=1);const a=CM[r];for(const l of Uw)if(!a.includes(l)&&s[l]>0)throw new nn(`Content with role '${r}' can't contain '${l}' part`);e=!0}}function Hw(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="SILENT_ERROR";class kM{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(PM(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,i,s,a,l,u;await this._sendPromise;const d=ol(e),h={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,d]},f=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>OE(this._apiKey,this.model,h,f)).then(g=>{var b;if(Hw(g.response)){this._history.push(d);const x=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(x)}else{const x=Pi(g.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}m=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,m}async sendMessageStream(e,t={}){var r,i,s,a,l,u;await this._sendPromise;const d=ol(e),h={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,d]},f=Object.assign(Object.assign({},this._requestOptions),t),m=NE(this._apiKey,this.model,h,f);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(Ww)}).then(g=>g.response).then(g=>{if(Hw(g)){this._history.push(d);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Pi(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==Ww&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(n,e,t,r){return(await wl(e,As.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(n,e,t,r){return(await wl(e,As.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function OM(n,e,t,r){const i=t.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await wl(e,As.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=jE(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const i=zw(e),s=Object.assign(Object.assign({},this._requestOptions),t);return OE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,t={}){var r;const i=zw(e),s=Object.assign(Object.assign({},this._requestOptions),t);return NE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var t;return new kM(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=_M(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return TM(this.apiKey,this.model,r,i)}async embedContent(e,t={}){const r=EM(e),i=Object.assign(Object.assign({},this._requestOptions),t);return NM(this.apiKey,this.model,r,i)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return OM(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new nn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new qw(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new Di("Cached content must contain a `name` field.");if(!e.model)throw new Di("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const a of i)if(t?.[a]&&e[a]&&t?.[a]!==e[a]){if(a==="model"){const l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===u)continue}throw new Di(`Different value for "${a}" specified in modelParams (${t[a]}) and cachedContent (${e[a]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new qw(this.apiKey,s,r)}}const IE=({isOpen:n,onClose:e,context:t})=>{const[r,i]=_.useState([]),[s,a]=_.useState(""),[l,u]=_.useState(!1),[d,h]=_.useState(""),f=_.useRef(null),m=_.useRef(null);_.useEffect(()=>{if(n)try{const A=`You are a helpful AI assistant for the FMAA & CMA Admin Dashboard. You are an expert in financial and managerial accounting topics. Your purpose is to help administrators create and manage exam content, analyze student performance data, and answer questions related to the FMAA (Financial and Managerial Accounting Associate) and CMA (Certified Management Accountant) certifications. When the user provides specific context with their question, you must strictly base your answer on that context. If the answer cannot be found in the context, you must state that the provided material does not contain the answer. Be concise and professional.
                
                Here is the knowledge base you should use as a primary reference:
                --- KNOWLEDGE BASE ---
                ${localStorage.getItem("cmaKnowledgeBase")||""}
                --- END KNOWLEDGE BASE ---
                `,C=new ME("AIzaSyB3ZU7PI1I950fCzQfVcWncoifz-z9SHzk").getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:A});let P="Hello! I am your FMAA & CMA specialist assistant. How can I help you with the exam content or data analysis today?";t&&(P=`I see you're looking at material related to "${t.split(`
`)[0].replace("## ","")}". What specific questions do you have about this topic?`),i([{role:"model",text:P}]),f.current=C}catch(x){console.error("Failed to initialize AI Assistant:",x),h("Failed to initialize AI Assistant. Please check the console for details.")}else i([]),a(""),u(!1),h(""),f.current=null},[n,t]);const g=()=>{m.current?.scrollIntoView({behavior:"smooth"})};_.useEffect(g,[r]);const b=async x=>{if(x.preventDefault(),!s.trim()||l||!f.current)return;const A={role:"user",text:s};i(E=>[...E,A]),a(""),u(!0),h("");try{const E=t?`Using the following context, please answer the user's question.

CONTEXT:
${t}

QUESTION:
${s}`:s,N={role:"model",text:(await(await f.current.generateContent(E)).response).text()||""};i(O=>[...O,N])}catch(E){console.error("Error sending message to Gemini:",E),h("Sorry, I encountered an error. Please try again.")}finally{u(!1)}};return v.jsx(wd,{isOpen:n,onClose:e,title:"AI Assistant",children:v.jsxs("div",{className:"flex flex-col h-[60vh]",children:[v.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:[r.map((x,A)=>v.jsxs("div",{className:`flex items-start gap-3 ${x.role==="user"?"justify-end":""}`,children:[x.role==="model"&&v.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 font-bold text-shadow",children:"A"}),v.jsx("div",{className:`max-w-xs md:max-w-md p-3 rounded-lg text-shadow ${x.role==="user"?"bg-primary text-white":"bg-white/10"}`,children:v.jsx("p",{className:"text-sm",dangerouslySetInnerHTML:{__html:x.text.replace(/\n/g,"<br />")}})})]},A)),l&&v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 font-bold text-shadow",children:"A"}),v.jsx("div",{className:"max-w-xs md:max-w-md p-3 rounded-lg bg-white/10 text-shadow",children:v.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse"}),v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse delay-75"}),v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse delay-150"})]})})]}),v.jsx("div",{ref:m})]}),d&&v.jsx("div",{className:"text-red-400 text-sm p-2 text-center",children:d}),v.jsxs("form",{onSubmit:b,className:"mt-4 flex items-center gap-2 border-t border-white/20 pt-4",children:[v.jsx("input",{type:"text",value:s,onChange:x=>a(x.target.value),placeholder:"Ask about students, exams, data...",className:"flex-grow block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400 disabled:opacity-50",disabled:l||!!d,"aria-label":"Chat message input"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:bg-gray-500/50 disabled:cursor-not-allowed",disabled:l||!s.trim()||!!d,children:"Send"})]})]})})},at=[{id:"unit1",title:"Study Unit One: External Financial Statements",description:"This study unit is the first of six on external financial reporting decisions. It discusses the basic concepts underlying financial accounting.",weight:"15%",sections:[{id:"1.1",title:"Concepts of Financial Accounting",content:`## 1.1 Concepts of Financial Accounting
**The Objective of General-Purpose Financial Reporting:**
To report financial information that is useful in making decisions about providing resources to the reporting entity. The information relates to the entity’s economic resources and claims (financial position) and to changes in them.

**Key Uses:**
- Evaluate liquidity, solvency, financing needs.
- Understand the return on economic resources, its variability, and its components.
- Evaluate management performance.
- Predict future returns.

**Standard:**
Statements must be prepared in conformity with accounting principles that are generally accepted in the United States (GAAP). The CMA exam may also test on International Financial Reporting Standards (IFRS).

**Financial vs. Management Accounting:**
- **Financial Accounting:** Differs from management accounting. Primarily for external users.
- **Management Accounting:** Assists internal management with decision making, planning, and control.
`},{id:"1.2",title:"Statement of Financial Position (Balance Sheet)",content:`## 1.2 Statement of Financial Position (Balance Sheet)
Reports the amounts of assets (items of value), liabilities (debt), and equity (net worth) at a moment in time. It helps users assess liquidity, financial flexibility, efficiency, capital structure, and risk.

**The Basic Accounting Equation:**
Assets = Liabilities + Stockholders' Equity

This equation is based on the **fund theory**. It can be rearranged to form the **proprietary theory**:
Assets – Liabilities = Stockholders' Equity

**Transaction Analysis:**
Every transaction has a dual effect, impacting at least two elements of the equation, which must always remain in balance.

**Elements of the Balance Sheet:**
- **Assets:** Resources controlled by the entity from past events, representing probable future economic benefits. Examples: inventory, accounts receivable, property, plant, and equipment (PPE).
- **Liabilities:** Present obligations from past events, expected to result in an outflow of economic benefits. Examples: loans payable, bonds payable, accounts payable.
- **Equity:** The residual interest in the assets after deducting all liabilities. Examples: common stock, preferred stock, retained earnings.
Assets and liabilities are separated into **current** and **noncurrent** categories.
`},{id:"1.3",title:"Income Statement and Statement of Comprehensive Income",content:`## 1.3 Income Statement and Statement of Comprehensive Income
Reports the results of an entity’s operations over a period of time.

**The Income Equation:**
Income (Loss) = Revenues + Gains – Expenses – Losses

**Elements:**
- **Revenues:** Inflows from delivering goods, services, or other major operations.
- **Gains:** Increases in equity other than from revenues or owner investments.
- **Expenses:** Outflows or usage of assets from delivering goods, services, or other major operations.
- **Losses:** Decreases in equity other than from expenses or distributions to owners.

**Cost of Goods Sold (COGS):**
- **For a retailer:** Beginning inventory + Net purchases + Freight-in - Ending inventory.
- **For a manufacturer:** Involves calculating the cost of goods manufactured.

**Gross Profit:**
Net sales revenue - Cost of goods sold.
`},{id:"1.4",title:"Statement of Changes in Equity and Equity Transactions",content:`## 1.4 Statement of Changes in Equity and Equity Transactions
**Statement of Changes in Equity:**
Presents a reconciliation for the accounting period of the beginning balance for each component of equity to the ending balance. Common changes include: Net income/loss, Distributions to owners (dividends), Issuance of common stock, and changes in other comprehensive income (OCI).

**Statement of Retained Earnings:**
A part of the statement of changes in equity. The reconciliation is:
Beginning RE + Net Income (or - Net Loss) - Dividends +/- Prior-period adjustments = Ending RE.

**Equity Transactions:**
- **Common and Preferred Stock:** Classes of stock representing ownership. Key terms are Authorized, Issued, and Outstanding.
- **Treasury Stock:** The entity’s own stock that was repurchased. It reduces shares outstanding.
`},{id:"1.5",title:"Statement of Cash Flows",content:`## 1.5 Statement of Cash Flows
The primary purpose is to provide relevant information about the cash receipts and cash payments of an entity during a period. It helps users assess liquidity, solvency, and financial flexibility.

**Three Main Activities:**
1.  **Operating Activities:** Primarily derived from the principal revenue-producing activities. Generally result from transactions that enter into the determination of net income.
2.  **Investing Activities:** Represent expenditures made for resources intended to generate future income and cash flows (e.g., buying/selling PPE, acquiring/selling debt or equity of other entities).
3.  **Financing Activities:** Involve cash effects of transactions with the owners (equity) and creditors (debt).

The statement reconciles the beginning and ending balances of cash and cash equivalents.
`},{id:"1.6",title:"Consolidation Accounting",content:`## 1.6 Consolidation Accounting
When one entity controls another, consolidated financial statements must be issued by the parent company.

**Key Concepts:**
- **Business Combination:** A transaction in which an acquirer obtains control of another business.
- **Control:** The direct or indirect ability to determine the direction of management and policies, usually through ownership of more than 50% of voting interests.
- **Parent & Subsidiary:** A parent is an entity with a controlling financial interest in one or more subsidiaries.
- **Acquisition Method:** Business combinations must be accounted for using this method, which involves recognizing and measuring identifiable assets, liabilities, and any noncontrolling interest at acquisition-date fair value.
- **Goodwill:** An intangible asset reflecting future economic benefits from assets that are not individually identified. It's the difference between the consideration transferred and the fair value of identifiable net assets acquired.
`}]},{id:"unit2",title:"Study Unit Two: Planning, Budgeting, and Forecasting",description:"This study unit covers the planning, budgeting, and forecasting processes essential for organizational success.",weight:"20%",sections:[{id:"2.1",title:"Strategic Planning",content:`## 2.1 Strategic Planning
Strategic planning is the process of determining an organization's long-term goals and strategies for achieving them.

**Key Components:**
- Vision and mission statements
- SWOT analysis (Strengths, Weaknesses, Opportunities, Threats)
- Strategic objectives
- Strategy formulation and implementation

**Strategic Analysis Tools:**
- PEST analysis (Political, Economic, Social, Technological)
- Five Forces Analysis (Porter's Model)
- Value Chain Analysis
- Balanced Scorecard
`},{id:"2.2",title:"Budgeting Concepts",content:`## 2.2 Budgeting Concepts
Budgeting is the process of creating plans for the acquisition and use of resources over a specified time period.

**Types of Budgets:**
- **Operating Budget:** Projects revenues and expenses for the primary operations
- **Capital Budget:** Plans for long-term asset acquisitions
- **Cash Budget:** Projects cash inflows and outflows
- **Financial Budget:** Projects financial position and results

**Budgeting Approaches:**
- Traditional budgeting (incremental)
- Zero-based budgeting (ZBB)
- Activity-based budgeting (ABB)
- Kaizen budgeting (continuous improvement)
`},{id:"2.3",title:"Forecasting Techniques",content:`## 2.3 Forecasting Techniques
Forecasting is the process of predicting future events based on historical data and analysis.

**Quantitative Methods:**
- Time series analysis
- Moving averages
- Exponential smoothing
- Regression analysis

**Qualitative Methods:**
- Executive opinions
- Delphi technique
- Sales force composite
- Customer surveys

**Forecasting Accuracy:**
- Mean Absolute Deviation (MAD)
- Mean Squared Error (MSE)
- Tracking signals
`},{id:"2.4",title:"Budgeting Methodologies",content:`## 2.4 Budgeting Methodologies
Different approaches to creating and managing budgets within an organization.

**Continuous/ Rolling Budgets:**
- Updated regularly (monthly/quarterly)
- Maintains a constant planning horizon

**Activity-Based Budgeting:**
- Focuses on activities that drive costs
- Aligns resources with value-added activities

**Kaizen Budgeting:**
- Incorporates continuous improvement
- Sets targets for cost reduction

**Flexible Budgeting:**
- Adjusts for different levels of activity
- Useful for performance evaluation
`},{id:"2.5",title:"Capital Budgeting",content:`## 2.5 Capital Budgeting
Capital budgeting involves making long-term investment decisions in projects or assets.

**Evaluation Methods:**
- **Payback Period:** Time to recover initial investment
- **Accounting Rate of Return (ARR):** Average annual profit/initial investment
- **Net Present Value (NPV):** Present value of cash flows minus initial investment
- **Internal Rate of Return (IRR):** Discount rate that makes NPV equal to zero
- **Profitability Index:** Present value of cash flows/initial investment

**Risk Analysis:**
- Sensitivity analysis
- Scenario analysis
- Monte Carlo simulation
`}]},{id:"unit3",title:"Study Unit Three: Performance Management",description:"This study unit focuses on performance measurement and management systems.",weight:"20%",sections:[{id:"3.1",title:"Cost Management",content:`## 3.1 Cost Management
Cost management involves planning and controlling the budgeted costs of activities.

**Cost Classifications:**
- By behavior: Fixed, Variable, Mixed
- By traceability: Direct, Indirect
- By relevance: Relevant, Irrelevant
- By function: Product, Period

**Costing Systems:**
- Job-order costing
- Process costing
- Activity-based costing (ABC)
`},{id:"3.2",title:"Performance Measurement",content:`## 3.2 Performance Measurement
Performance measurement evaluates how well an organization or individual is achieving objectives.

**Key Performance Indicators (KPIs):**
- Financial metrics (ROI, ROE, EVA)
- Non-financial metrics (customer satisfaction, quality measures)
- Leading vs. lagging indicators

**Balanced Scorecard:**
- Financial perspective
- Customer perspective
- Internal business processes perspective
- Learning and growth perspective
`},{id:"3.3",title:"Transfer Pricing",content:`## 3.3 Transfer Pricing
Transfer pricing refers to the pricing of goods and services between divisions of the same company.

**Transfer Pricing Methods:**
- Market-based prices
- Cost-based prices
- Negotiated prices
- Dual pricing

**Objectives:**
- Goal congruence
- Performance evaluation
- Resource allocation
- Tax planning
`},{id:"3.4",title:"Investment Centers",content:`## 3.4 Investment Centers
Investment centers are responsibility centers where managers control revenues, costs, and investment decisions.

**Performance Measures:**
- Return on Investment (ROI)
- Residual Income (RI)
- Economic Value Added (EVA)

**ROI Formula:**
ROI = Operating Income / Average Operating Assets
ROI = Profit Margin × Asset Turnover

**Limitations:**
- May lead to suboptimal decisions
- Can discourage investments with returns below divisional ROI
`}]},{id:"unit4",title:"Study Unit Four: Cost Management",description:"This study unit covers cost measurement, accumulation, and allocation techniques.",weight:"15%",sections:[{id:"4.1",title:"Cost Concepts and Classifications",content:`## 4.1 Cost Concepts and Classifications
Understanding different ways to categorize and analyze costs.

**By Function:**
- Production costs
- Selling costs
- Administrative costs

**By Behavior:**
- Fixed costs (remain constant in total)
- Variable costs (vary in total with activity)
- Mixed costs (have both fixed and variable components)

**By Traceability:**
- Direct costs (traceable to cost object)
- Indirect costs (not easily traceable)

**By Relevance:**
- Relevant costs (differ between alternatives)
- Sunk costs (past costs, not relevant)
- Opportunity costs (benefits foregone)
`},{id:"4.2",title:"Cost Accumulation Systems",content:`## 4.2 Cost Accumulation Systems
Methods for collecting and assigning costs to cost objects.

**Job-Order Costing:**
- Used for unique, custom products
- Costs accumulated by job
- Appropriate for construction projects, custom furniture

**Process Costing:**
- Used for mass production of identical units
- Costs accumulated by process or department
- Appropriate for chemical processing, food production

**Hybrid Systems:**
- Combines elements of job-order and process costing
- Used when products have both common and unique features
`},{id:"4.3",title:"Cost Allocation",content:`## 4.3 Cost Allocation
The process of assigning indirect costs to cost objects.

**Allocation Methods:**
- **Traditional costing:** Single overhead rate
- **Activity-based costing (ABC):** Multiple cost pools and drivers

**Steps in ABC:**
1. Identify activities
2. Assign resource costs to activities
3. Identify cost drivers
4. Calculate activity rates
5. Assign activity costs to products

**Benefits of ABC:**
- More accurate product costing
- Better understanding of cost drivers
- Improved decision making
`},{id:"4.4",title:"Overhead Analysis",content:`## 4.4 Overhead Analysis
Analysis of indirect manufacturing costs.

**Types of Overhead:**
- Variable overhead (changes with production)
- Fixed overhead (remains constant)
- Mixed overhead (combination of both)

**Overhead Variances:**
- **Variable overhead:**
  - Spending variance
  - Efficiency variance
- **Fixed overhead:**
  - Spending variance
  - Volume variance

**Capacity Concepts:**
- Theoretical capacity
- Practical capacity
- Normal capacity
- Expected capacity
`}]},{id:"unit5",title:"Study Unit Five: Internal Controls",description:"This study unit covers internal control systems and risk management.",weight:"15%",sections:[{id:"5.1",title:"Internal Control Framework",content:`## 5.1 Internal Control Framework
Internal control is a process designed to provide reasonable assurance regarding achievement of objectives.

**COSO Framework Components:**
1. Control Environment
2. Risk Assessment
3. Control Activities
4. Information and Communication
5. Monitoring Activities

**Control Objectives:**
- Effectiveness and efficiency of operations
- Reliability of financial reporting
- Compliance with applicable laws and regulations
`},{id:"5.2",title:"Risk Management",content:`## 5.2 Risk Management
Risk management is the identification, assessment, and prioritization of risks.

**Risk Management Process:**
1. Risk identification
2. Risk assessment
3. Risk response
4. Risk monitoring

**Types of Risk:**
- Strategic risk
- Operational risk
- Financial risk
- Compliance risk

**Risk Response Strategies:**
- Risk avoidance
- Risk reduction/mitigation
- Risk sharing/transfer
- Risk acceptance
`},{id:"5.3",title:"Business Continuity",content:`## 5.3 Business Continuity
Business continuity planning ensures an organization can continue operations during and after disruptions.

**Key Components:**
- Business impact analysis
- Recovery strategies
- Plan development
- Testing and maintenance

**Disaster Recovery:**
- Data backup and recovery
- Alternate processing sites
- Emergency response procedures
- Communication plans
`},{id:"5.4",title:"Fraud Prevention and Detection",content:`## 5.4 Fraud Prevention and Detection
Fraud is intentional deception for personal gain.

**Types of Fraud:**
- Asset misappropriation
- Corruption
- Financial statement fraud

**Fraud Triangle:**
- Pressure/Motivation
- Opportunity
- Rationalization

**Prevention Measures:**
- Strong internal controls
- Segregation of duties
- Authorization procedures
- Regular reconciliations
- Employee screening
`}]},{id:"unit6",title:"Study Unit Six: Technology and Analytics",description:"This study unit covers information systems, data analytics, and technology in management accounting.",weight:"15%",sections:[{id:"6.1",title:"Information Systems",content:`## 6.1 Information Systems
Information systems collect, process, store, and distribute information to support decision making.

**Types of Systems:**
- Transaction Processing Systems (TPS)
- Management Information Systems (MIS)
- Decision Support Systems (DSS)
- Executive Information Systems (EIS)

**Enterprise Resource Planning (ERP):**
- Integrated software solutions
- Centralized database
- Real-time information
- Cross-functional processes
`},{id:"6.2",title:"Data Analytics",content:`## 6.2 Data Analytics
Data analytics involves examining data sets to draw conclusions and support decision making.

**Types of Analytics:**
- **Descriptive:** What happened?
- **Diagnostic:** Why did it happen?
- **Predictive:** What might happen?
- **Prescriptive:** What should we do?

**Tools and Techniques:**
- Data visualization
- Statistical analysis
- Machine learning
- Data mining
`},{id:"6.3",title:"Cybersecurity",content:`## 6.3 Cybersecurity
Cybersecurity involves protecting information systems from intrusion, attack, and damage.

**Key Threats:**
- Malware
- Phishing
- Ransomware
- Insider threats
- DDoS attacks

**Security Controls:**
- Firewalls
- Encryption
- Access controls
- Intrusion detection systems
- Security awareness training
`},{id:"6.4",title:"Emerging Technologies",content:`## 6.4 Emerging Technologies
New technologies that are transforming business operations and decision making.

**Key Technologies:**
- Artificial Intelligence (AI)
- Blockchain
- Internet of Things (IoT)
- Cloud computing
- Robotic Process Automation (RPA)

**Impact on Management Accounting:**
- Enhanced data processing capabilities
- Improved forecasting accuracy
- Automated routine tasks
- Real-time reporting
- Better decision support
`}]}],jM=[{id:1,read:!1,type:"submission",message:'Jane Smith submitted "Calculus I Final".',timestamp:"5m ago"},{id:2,read:!1,type:"registration",message:'New student "Alex Ray" has registered.',timestamp:"2h ago"},{id:3,read:!0,type:"high_score",message:'Emily Davis scored 96% on "Modern Physics Midterm".',timestamp:"1d ago"},{id:4,read:!0,type:"exam_published",message:'New exam "Data Structures" has been published.',timestamp:"2d ago"}],RE=({children:n})=>{const[e,t]=_.useState(!1),r=La(),[i,s]=_.useState(jM),[a,l]=_.useState(!1),[u,d]=_.useState(),h=i.filter(C=>!C.read).length,f=()=>{s(i.map(C=>({...C,read:!0})))},m=C=>{d(C),l(!0)},g=()=>{const C=`The following curriculum study units are available:
${at.map(P=>`- ${P.title}`).join(`
`)}`;m(C)},b=()=>{l(!1),setTimeout(()=>d(void 0),300)},A=(C=>{if(C==="/")return"Dashboard";const P=C.replace("/","").replace("-"," ");return P.charAt(0).toUpperCase()+P.slice(1)})(r.pathname),E=()=>{t(!1)};return v.jsxs("div",{className:"flex h-screen font-sans bg-gray-900/50",children:[v.jsx(eM,{isOpen:e,onClose:E}),v.jsxs("div",{className:"flex flex-col flex-1 w-0",children:[" ",v.jsx(nM,{onMenuClick:()=>t(!0),title:A,notifications:i,unreadCount:h,onMarkAllRead:f}),v.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:v.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:n||v.jsx(Fj,{context:{openAssistant:m}})})})]}),v.jsx("button",{onClick:g,className:"fixed bottom-6 right-6 bg-secondary hover:bg-secondary-dark text-white w-16 h-16 rounded-full flex items-center justify-center shadow-2xl transition-transform transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-white z-20","aria-label":"Open AI Assistant",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("title",{children:"AI Assistant Icon"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]})}),v.jsx(IE,{isOpen:a,onClose:b,context:u})]})};function DE(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=DE(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function He(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=DE(n))&&(r&&(r+=" "),r+=e);return r}var hp={},fp={},Gw;function MM(){return Gw||(Gw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(fp)),fp}var pp={},Vw;function LE(){return Vw||(Vw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(pp)),pp}var mp={},Kw;function sv(){return Kw||(Kw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}n.toKey=e})(mp)),mp}var gp={},vp={},Yw;function IM(){return Yw||(Yw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return r==="0"&&Object.is(Number(t),-0)?"-0":r}n.toString=e})(vp)),vp}var Xw;function av(){return Xw||(Xw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=IM(),t=sv();function r(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const f=i[l];d?f==="\\"&&l+1<a?(l++,u+=i[l]):f===d?d="":u+=f:h?f==='"'||f==="'"?d=f:f==="]"?(h=!1,s.push(u),u=""):u+=f:f==="["?(h=!0,u&&(s.push(u),u="")):f==="."?u&&(s.push(u),u=""):u+=f,l++}return u&&s.push(u),s}n.toPath=r})(gp)),gp}var Qw;function ov(){return Qw||(Qw=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=MM(),t=LE(),r=sv(),i=av();function s(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?t.isDeepKey(u)?s(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return a(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function a(l,u,d){if(u.length===0)return d;let h=l;for(let f=0;f<u.length;f++){if(h==null||e.isUnsafeProperty(u[f]))return d;h=h[u[f]]}return h===void 0?d:h}n.get=s})(hp)),hp}var yp,Zw;function RM(){return Zw||(Zw=1,yp=ov().get),yp}var DM=RM();const Ss=jr(DM);var xp={exports:{}},We={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function LM(){if(Jw)return We;Jw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var A=x.$$typeof;switch(A){case n:switch(x=x.type,x){case t:case i:case r:case u:case d:case m:return x;default:switch(x=x&&x.$$typeof,x){case a:case l:case f:case h:return x;case s:return x;default:return A}}case e:return A}}}return We.ContextConsumer=s,We.ContextProvider=a,We.Element=n,We.ForwardRef=l,We.Fragment=t,We.Lazy=f,We.Memo=h,We.Portal=e,We.Profiler=i,We.StrictMode=r,We.Suspense=u,We.SuspenseList=d,We.isContextConsumer=function(x){return b(x)===s},We.isContextProvider=function(x){return b(x)===a},We.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===n},We.isForwardRef=function(x){return b(x)===l},We.isFragment=function(x){return b(x)===t},We.isLazy=function(x){return b(x)===f},We.isMemo=function(x){return b(x)===h},We.isPortal=function(x){return b(x)===e},We.isProfiler=function(x){return b(x)===i},We.isStrictMode=function(x){return b(x)===r},We.isSuspense=function(x){return b(x)===u},We.isSuspenseList=function(x){return b(x)===d},We.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===t||x===i||x===r||x===u||x===d||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===h||x.$$typeof===a||x.$$typeof===s||x.$$typeof===l||x.$$typeof===g||x.getModuleId!==void 0)},We.typeOf=b,We}var e1;function FM(){return e1||(e1=1,xp.exports=LM()),xp.exports}var $M=FM(),Dt=n=>n===0?0:n>0?1:-1,Ln=n=>typeof n=="number"&&n!=+n,ds=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,xe=n=>(typeof n=="number"||n instanceof Number)&&!Ln(n),Nr=n=>xe(n)||typeof n=="string",BM=0,ll=n=>{var e=++BM;return"".concat(n||"").concat(e)},sn=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(e)&&typeof e!="string")return r;var s;if(ds(e)){if(t==null)return r;var a=e.indexOf("%");s=t*parseFloat(e.slice(0,a))/100}else s=+e;return Ln(s)&&(s=r),i&&t!=null&&s>t&&(s=t),s},FE=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},r=0;r<e;r++)if(!t[n[r]])t[n[r]]=!0;else return!0;return!1};function Wt(n,e,t){return xe(n)&&xe(e)?n+t*(e-n):e}function zM(n,e,t){if(!(!n||!n.length))return n.find(r=>r&&(typeof e=="function"?e(r):Ss(r,e))===t)}var Lt=n=>n===null||typeof n>"u",Al=n=>Lt(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),UM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function lv(n){if(typeof n!="string")return!1;var e=UM;return e.includes(n)}var HM=["viewBox","children"],t1=["points","pathLength"],bp={svg:HM,polygon:t1,polyline:t1},WM=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(_.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var r={};return Object.keys(t).forEach(i=>{lv(i)&&(r[i]=(s=>t[i](t,s)))}),r},qM=(n,e,t)=>r=>(n(e,t,r),null),Sl=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var r=null;return Object.keys(n).forEach(i=>{var s=n[i];lv(i)&&typeof s=="function"&&(r||(r={}),r[i]=qM(s,e,t))}),r},GM=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function $E(n){if(typeof n!="string")return!1;var e=GM;return e.includes(n)}function Hi(n){var e=Object.entries(n).filter(t=>{var[r]=t;return $E(r)});return Object.fromEntries(e)}var n1=n=>typeof n=="string"?n:n?n.displayName||n.name||"Component":"",r1=null,wp=null,BE=n=>{if(n===r1&&Array.isArray(wp))return wp;var e=[];return _.Children.forEach(n,t=>{Lt(t)||($M.isFragment(t)?e=e.concat(BE(t.props.children)):e.push(t))}),wp=e,r1=n,e};function cv(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(i=>n1(i)):r=[n1(e)],BE(n).forEach(i=>{var s=Ss(i,"type.displayName")||Ss(i,"type.name");r.indexOf(s)!==-1&&t.push(i)}),t}var VM=(n,e,t,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var s=(i=r&&bp?.[r])!==null&&i!==void 0?i:[],a=e.startsWith("data-"),l=typeof n!="function"&&(!!r&&s.includes(e)||$E(e)),u=!!t&&lv(e);return a||l||u},kt=(n,e,t)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var r=n;if(_.isValidElement(n)&&(r=n.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var a;VM((a=r)===null||a===void 0?void 0:a[s],s,e,t)&&(i[s]=r[s])}),i},KM=["children","width","height","viewBox","className","style","title","desc"];function tg(){return tg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tg.apply(null,arguments)}function YM(n,e){if(n==null)return{};var t,r,i=XM(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function XM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var uv=_.forwardRef((n,e)=>{var{children:t,width:r,height:i,viewBox:s,className:a,style:l,title:u,desc:d}=n,h=YM(n,KM),f=s||{width:r,height:i,x:0,y:0},m=He("recharts-surface",a);return _.createElement("svg",tg({},kt(h,!0,"svg"),{className:m,width:r,height:i,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),_.createElement("title",null,u),_.createElement("desc",null,d),t)}),QM=["children","className"];function ng(){return ng=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ng.apply(null,arguments)}function ZM(n,e){if(n==null)return{};var t,r,i=JM(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function JM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var En=_.forwardRef((n,e)=>{var{children:t,className:r}=n,i=ZM(n,QM),s=He("recharts-layer",r);return _.createElement("g",ng({className:s},kt(i,!0),{ref:e}),t)}),zE=_.createContext(null),eI=()=>_.useContext(zE);function Ke(n){return function(){return n}}const UE=Math.cos,Tu=Math.sin,xr=Math.sqrt,Nu=Math.PI,Ad=2*Nu,rg=Math.PI,ig=2*rg,ls=1e-6,tI=ig-ls;function HE(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function nI(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return HE;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class rI{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?HE:nI(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,a){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=r-e,d=i-t,h=a-e,f=l-t,m=h*h+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(m>ls)if(!(Math.abs(f*u-d*h)>ls)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let g=r-a,b=i-l,x=u*u+d*d,A=g*g+b*b,E=Math.sqrt(x),C=Math.sqrt(m),P=s*Math.tan((rg-Math.acos((x+m-A)/(2*E*C)))/2),T=P/C,N=P/E;Math.abs(T-1)>ls&&this._append`L${e+T*h},${t+T*f}`,this._append`A${s},${s},0,0,${+(f*g>h*b)},${this._x1=e+N*u},${this._y1=t+N*d}`}}arc(e,t,r,i,s,a){if(e=+e,t=+t,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=e+l,h=t+u,f=1^a,m=a?i-s:s-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>ls||Math.abs(this._y1-h)>ls)&&this._append`L${d},${h}`,r&&(m<0&&(m=m%ig+ig),m>tI?this._append`A${r},${r},0,1,${f},${e-l},${t-u}A${r},${r},0,1,${f},${this._x1=d},${this._y1=h}`:m>ls&&this._append`A${r},${r},0,${+(m>=rg)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function dv(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new rI(e)}function hv(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function WE(n){this._context=n}WE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function Sd(n){return new WE(n)}function qE(n){return n[0]}function GE(n){return n[1]}function VE(n,e){var t=Ke(!0),r=null,i=Sd,s=null,a=dv(l);n=typeof n=="function"?n:n===void 0?qE:Ke(n),e=typeof e=="function"?e:e===void 0?GE:Ke(e);function l(u){var d,h=(u=hv(u)).length,f,m=!1,g;for(r==null&&(s=i(g=a())),d=0;d<=h;++d)!(d<h&&t(f=u[d],d,u))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+n(f,d,u),+e(f,d,u));if(g)return s=null,g+""||null}return l.x=function(u){return arguments.length?(n=typeof u=="function"?u:Ke(+u),l):n},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:Ke(+u),l):e},l.defined=function(u){return arguments.length?(t=typeof u=="function"?u:Ke(!!u),l):t},l.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),l):r},l}function Jc(n,e,t){var r=null,i=Ke(!0),s=null,a=Sd,l=null,u=dv(d);n=typeof n=="function"?n:n===void 0?qE:Ke(+n),e=typeof e=="function"?e:Ke(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?GE:Ke(+t);function d(f){var m,g,b,x=(f=hv(f)).length,A,E=!1,C,P=new Array(x),T=new Array(x);for(s==null&&(l=a(C=u())),m=0;m<=x;++m){if(!(m<x&&i(A=f[m],m,f))===E)if(E=!E)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=m-1;b>=g;--b)l.point(P[b],T[b]);l.lineEnd(),l.areaEnd()}E&&(P[m]=+n(A,m,f),T[m]=+e(A,m,f),l.point(r?+r(A,m,f):P[m],t?+t(A,m,f):T[m]))}if(C)return l=null,C+""||null}function h(){return VE().defined(i).curve(a).context(s)}return d.x=function(f){return arguments.length?(n=typeof f=="function"?f:Ke(+f),r=null,d):n},d.x0=function(f){return arguments.length?(n=typeof f=="function"?f:Ke(+f),d):n},d.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ke(+f),d):r},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),t=null,d):e},d.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),d):e},d.y1=function(f){return arguments.length?(t=f==null?null:typeof f=="function"?f:Ke(+f),d):t},d.lineX0=d.lineY0=function(){return h().x(n).y(e)},d.lineY1=function(){return h().x(n).y(t)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ke(!!f),d):i},d.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),d):a},d.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),d):s},d}class KE{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function iI(n){return new KE(n,!0)}function sI(n){return new KE(n,!1)}const fv={draw(n,e){const t=xr(e/Nu);n.moveTo(t,0),n.arc(0,0,t,0,Ad)}},aI={draw(n,e){const t=xr(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},YE=xr(1/3),oI=YE*2,lI={draw(n,e){const t=xr(e/oI),r=t*YE;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},cI={draw(n,e){const t=xr(e),r=-t/2;n.rect(r,r,t,t)}},uI=.8908130915292852,XE=Tu(Nu/10)/Tu(7*Nu/10),dI=Tu(Ad/10)*XE,hI=-UE(Ad/10)*XE,fI={draw(n,e){const t=xr(e*uI),r=dI*t,i=hI*t;n.moveTo(0,-t),n.lineTo(r,i);for(let s=1;s<5;++s){const a=Ad*s/5,l=UE(a),u=Tu(a);n.lineTo(u*t,-l*t),n.lineTo(l*r-u*i,u*r+l*i)}n.closePath()}},Ap=xr(3),pI={draw(n,e){const t=-xr(e/(Ap*3));n.moveTo(0,t*2),n.lineTo(-Ap*t,-t),n.lineTo(Ap*t,-t),n.closePath()}},Vn=-.5,Kn=xr(3)/2,sg=1/xr(12),mI=(sg/2+1)*3,gI={draw(n,e){const t=xr(e/mI),r=t/2,i=t*sg,s=r,a=t*sg+t,l=-s,u=a;n.moveTo(r,i),n.lineTo(s,a),n.lineTo(l,u),n.lineTo(Vn*r-Kn*i,Kn*r+Vn*i),n.lineTo(Vn*s-Kn*a,Kn*s+Vn*a),n.lineTo(Vn*l-Kn*u,Kn*l+Vn*u),n.lineTo(Vn*r+Kn*i,Vn*i-Kn*r),n.lineTo(Vn*s+Kn*a,Vn*a-Kn*s),n.lineTo(Vn*l+Kn*u,Vn*u-Kn*l),n.closePath()}};function vI(n,e){let t=null,r=dv(i);n=typeof n=="function"?n:Ke(n||fv),e=typeof e=="function"?e:Ke(e===void 0?64:+e);function i(){let s;if(t||(t=s=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(n=typeof s=="function"?s:Ke(s),i):n},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ke(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function Ou(){}function ju(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function QE(n){this._context=n}QE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ju(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ju(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function yI(n){return new QE(n)}function ZE(n){this._context=n}ZE.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:ju(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function xI(n){return new ZE(n)}function JE(n){this._context=n}JE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:ju(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function bI(n){return new JE(n)}function eC(n){this._context=n}eC.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function wI(n){return new eC(n)}function i1(n){return n<0?-1:1}function s1(n,e,t){var r=n._x1-n._x0,i=e-n._x1,s=(n._y1-n._y0)/(r||i<0&&-0),a=(t-n._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(i1(s)+i1(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function a1(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function Sp(n,e,t){var r=n._x0,i=n._y0,s=n._x1,a=n._y1,l=(s-r)/3;n._context.bezierCurveTo(r+l,i+l*e,s-l,a-l*t,s,a)}function Mu(n){this._context=n}Mu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sp(this,this._t0,a1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,Sp(this,a1(this,t=s1(this,n,e)),t);break;default:Sp(this,this._t0,t=s1(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function tC(n){this._context=new nC(n)}(tC.prototype=Object.create(Mu.prototype)).point=function(n,e){Mu.prototype.point.call(this,e,n)};function nC(n){this._context=n}nC.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,s){this._context.bezierCurveTo(e,n,r,t,s,i)}};function AI(n){return new Mu(n)}function SI(n){return new tC(n)}function rC(n){this._context=n}rC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=o1(n),i=o1(e),s=0,a=1;a<t;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],n[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function o1(n){var e,t=n.length-1,r,i=new Array(t),s=new Array(t),a=new Array(t);for(i[0]=0,s[0]=2,a[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,a[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,s[t-1]=7,a[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[t-1]=a[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-i[e+1];return[i,s]}function _I(n){return new rC(n)}function _d(n,e){this._context=n,this._t=e}_d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function EI(n){return new _d(n,.5)}function CI(n){return new _d(n,0)}function PI(n){return new _d(n,1)}function Sa(n,e){if((a=n.length)>1)for(var t=1,r,i,s=n[e[0]],a,l=s.length;t<a;++t)for(i=s,s=n[e[t]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ag(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function kI(n,e){return n[e]}function TI(n){const e=[];return e.key=n,e}function NI(){var n=Ke([]),e=ag,t=Sa,r=kI;function i(s){var a=Array.from(n.apply(this,arguments),TI),l,u=a.length,d=-1,h;for(const f of s)for(l=0,++d;l<u;++l)(a[l][d]=[0,+r(f,a[l].key,d,s)]).data=f;for(l=0,h=hv(e(a));l<u;++l)a[h[l]].index=l;return t(a,h),a}return i.keys=function(s){return arguments.length?(n=typeof s=="function"?s:Ke(Array.from(s)),i):n},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Ke(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?ag:typeof s=="function"?s:Ke(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(t=s??Sa,i):t},i}function OI(n,e){if((r=n.length)>0){for(var t,r,i=0,s=n[0].length,a;i<s;++i){for(a=t=0;t<r;++t)a+=n[t][i][1]||0;if(a)for(t=0;t<r;++t)n[t][i][1]/=a}Sa(n,e)}}function jI(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,s=r.length;t<s;++t){for(var a=0,l=0;a<i;++a)l+=n[a][t][1]||0;r[t][1]+=r[t][0]=-l/2}Sa(n,e)}}function MI(n,e){if(!(!((a=n.length)>0)||!((s=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,s,a;r<s;++r){for(var l=0,u=0,d=0;l<a;++l){for(var h=n[e[l]],f=h[r][1]||0,m=h[r-1][1]||0,g=(f-m)/2,b=0;b<l;++b){var x=n[e[b]],A=x[r][1]||0,E=x[r-1][1]||0;g+=A-E}u+=f,d+=g*f}i[r-1][1]+=i[r-1][0]=t,u&&(t-=d/u)}i[r-1][1]+=i[r-1][0]=t,Sa(n,e)}}var II=["type","size","sizeType"];function og(){return og=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},og.apply(null,arguments)}function l1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function c1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l1(Object(t),!0).forEach(function(r){RI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RI(n,e,t){return(e=DI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DI(n){var e=LI(n,"string");return typeof e=="symbol"?e:e+""}function LI(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FI(n,e){if(n==null)return{};var t,r,i=$I(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function $I(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var iC={symbolCircle:fv,symbolCross:aI,symbolDiamond:lI,symbolSquare:cI,symbolStar:fI,symbolTriangle:pI,symbolWye:gI},BI=Math.PI/180,zI=n=>{var e="symbol".concat(Al(n));return iC[e]||fv},UI=(n,e,t)=>{if(e==="area")return n;switch(t){case"cross":return 5*n*n/9;case"diamond":return .5*n*n/Math.sqrt(3);case"square":return n*n;case"star":{var r=18*BI;return 1.25*n*n*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*n*n/4;case"wye":return(21-10*Math.sqrt(3))*n*n/8;default:return Math.PI*n*n/4}},HI=(n,e)=>{iC["symbol".concat(Al(n))]=e},pv=n=>{var{type:e="circle",size:t=64,sizeType:r="area"}=n,i=FI(n,II),s=c1(c1({},i),{},{type:e,size:t,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var m=zI(a),g=vI().type(m).size(UI(t,r,a));return g()},{className:u,cx:d,cy:h}=s,f=kt(s,!0);return d===+d&&h===+h&&t===+t?_.createElement("path",og({},f,{className:He("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:l()})):null};pv.registerSymbol=HI;function lg(){return lg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lg.apply(null,arguments)}function u1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function WI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u1(Object(t),!0).forEach(function(r){mv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mv(n,e,t){return(e=qI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qI(n){var e=GI(n,"string");return typeof e=="symbol"?e:e+""}function GI(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Yn=32;class gv extends _.PureComponent{renderIcon(e,t){var{inactiveColor:r}=this.props,i=Yn/2,s=Yn/6,a=Yn/3,l=e.inactive?r:e.color,u=t??e.type;if(u==="none")return null;if(u==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Yn,y2:i,className:"recharts-legend-icon"});if(u==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Yn,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return _.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Yn/8,"h").concat(Yn,"v").concat(Yn*3/4,"h").concat(-Yn,"z"),className:"recharts-legend-icon"});if(_.isValidElement(e.legendIcon)){var d=WI({},e);return delete d.legendIcon,_.cloneElement(e.legendIcon,d)}return _.createElement(pv,{fill:l,cx:i,cy:i,size:Yn,sizeType:"diameter",type:u})}renderItems(){var{payload:e,iconSize:t,layout:r,formatter:i,inactiveColor:s,iconType:a}=this.props,l={x:0,y:0,width:Yn,height:Yn},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,f)=>{var m=h.formatter||i,g=He({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:h.inactive});if(h.type==="none")return null;var b=h.inactive?s:h.color,x=m?m(h.value,h,f):h.value;return _.createElement("li",lg({className:g,style:u,key:"legend-item-".concat(f)},Sl(this.props,h,f)),_.createElement(uv,{width:t,height:t,viewBox:l,style:d,"aria-label":"".concat(x," legend icon")},this.renderIcon(h,a)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},x))})}render(){var{payload:e,layout:t,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:t==="horizontal"?r:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}mv(gv,"displayName","Legend");mv(gv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var _p={},Ep={},d1;function VI(){return d1||(d1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){const i=new Map;for(let s=0;s<t.length;s++){const a=t[s],l=r(a);i.has(l)||i.set(l,a)}return Array.from(i.values())}n.uniqBy=e})(Ep)),Ep}var Cp={},h1;function sC(){return h1||(h1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(Cp)),Cp}var Pp={},kp={},Tp={},f1;function KI(){return f1||(f1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(Tp)),Tp}var p1;function vv(){return p1||(p1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=KI();function t(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}n.isArrayLike=t})(kp)),kp}var Np={},m1;function YI(){return m1||(m1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(Np)),Np}var g1;function XI(){return g1||(g1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=vv(),t=YI();function r(i){return t.isObjectLike(i)&&e.isArrayLike(i)}n.isArrayLikeObject=r})(Pp)),Pp}var Op={},jp={},v1;function QI(){return v1||(v1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=ov();function t(r){return function(i){return e.get(i,r)}}n.property=t})(jp)),jp}var Mp={},Ip={},Rp={},Dp={},y1;function aC(){return y1||(y1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(Dp)),Dp}var Lp={},x1;function oC(){return x1||(x1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(Lp)),Lp}var Fp={},b1;function lC(){return b1||(b1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){return t===r||Number.isNaN(t)&&Number.isNaN(r)}n.eq=e})(Fp)),Fp}var w1;function ZI(){return w1||(w1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=yv(),t=aC(),r=oC(),i=lC();function s(f,m,g){return typeof g!="function"?e.isMatch(f,m):a(f,m,function b(x,A,E,C,P,T){const N=g(x,A,E,C,P,T);return N!==void 0?!!N:a(x,A,b,T)},new Map)}function a(f,m,g,b){if(m===f)return!0;switch(typeof m){case"object":return l(f,m,g,b);case"function":return Object.keys(m).length>0?a(f,{...m},g,b):i.eq(f,m);default:return t.isObject(f)?typeof m=="string"?m==="":!0:i.eq(f,m)}}function l(f,m,g,b){if(m==null)return!0;if(Array.isArray(m))return d(f,m,g,b);if(m instanceof Map)return u(f,m,g,b);if(m instanceof Set)return h(f,m,g,b);const x=Object.keys(m);if(f==null)return x.length===0;if(x.length===0)return!0;if(b&&b.has(m))return b.get(m)===f;b&&b.set(m,f);try{for(let A=0;A<x.length;A++){const E=x[A];if(!r.isPrimitive(f)&&!(E in f)||m[E]===void 0&&f[E]!==void 0||m[E]===null&&f[E]!==null||!g(f[E],m[E],E,f,m,b))return!1}return!0}finally{b&&b.delete(m)}}function u(f,m,g,b){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,A]of m.entries()){const E=f.get(x);if(g(E,A,x,f,m,b)===!1)return!1}return!0}function d(f,m,g,b){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let A=0;A<m.length;A++){const E=m[A];let C=!1;for(let P=0;P<f.length;P++){if(x.has(P))continue;const T=f[P];let N=!1;if(g(T,E,A,f,m,b)&&(N=!0),N){x.add(P),C=!0;break}}if(!C)return!1}return!0}function h(f,m,g,b){return m.size===0?!0:f instanceof Set?d([...f],[...m],g,b):!1}n.isMatchWith=s,n.isSetMatch=h})(Rp)),Rp}var A1;function yv(){return A1||(A1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=ZI();function t(r,i){return e.isMatchWith(r,i,()=>{})}n.isMatch=t})(Ip)),Ip}var $p={},Bp={},zp={},S1;function JI(){return S1||(S1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(r=>Object.prototype.propertyIsEnumerable.call(t,r))}n.getSymbols=e})(zp)),zp}var Up={},_1;function cC(){return _1||(_1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(Up)),Up}var Hp={},E1;function uC(){return E1||(E1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",f="[object Function]",m="[object ArrayBuffer]",g="[object Object]",b="[object Error]",x="[object DataView]",A="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",P="[object Uint32Array]",T="[object BigUint64Array]",N="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",B="[object BigInt64Array]",F="[object Float32Array]",Y="[object Float64Array]";n.argumentsTag=s,n.arrayBufferTag=m,n.arrayTag=h,n.bigInt64ArrayTag=B,n.bigUint64ArrayTag=T,n.booleanTag=i,n.dataViewTag=x,n.dateTag=l,n.errorTag=b,n.float32ArrayTag=F,n.float64ArrayTag=Y,n.functionTag=f,n.int16ArrayTag=O,n.int32ArrayTag=j,n.int8ArrayTag=N,n.mapTag=u,n.numberTag=r,n.objectTag=g,n.regexpTag=e,n.setTag=d,n.stringTag=t,n.symbolTag=a,n.uint16ArrayTag=C,n.uint32ArrayTag=P,n.uint8ArrayTag=A,n.uint8ClampedArrayTag=E})(Hp)),Hp}var Wp={},C1;function eR(){return C1||(C1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(Wp)),Wp}var P1;function dC(){return P1||(P1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=JI(),t=cC(),r=uC(),i=oC(),s=eR();function a(h,f){return l(h,void 0,h,new Map,f)}function l(h,f,m,g=new Map,b=void 0){const x=b?.(h,f,m,g);if(x!==void 0)return x;if(i.isPrimitive(h))return h;if(g.has(h))return g.get(h);if(Array.isArray(h)){const A=new Array(h.length);g.set(h,A);for(let E=0;E<h.length;E++)A[E]=l(h[E],E,m,g,b);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;g.set(h,A);for(const[E,C]of h)A.set(E,l(C,E,m,g,b));return A}if(h instanceof Set){const A=new Set;g.set(h,A);for(const E of h)A.add(l(E,void 0,m,g,b));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);g.set(h,A);for(let E=0;E<h.length;E++)A[E]=l(h[E],E,m,g,b);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return g.set(h,A),u(A,h,m,g,b),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return g.set(h,A),u(A,h,m,g,b),A}if(typeof Blob<"u"&&h instanceof Blob){const A=new Blob([h],{type:h.type});return g.set(h,A),u(A,h,m,g,b),A}if(h instanceof Error){const A=new h.constructor;return g.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,u(A,h,m,g,b),A}if(h instanceof Boolean){const A=new Boolean(h.valueOf());return g.set(h,A),u(A,h,m,g,b),A}if(h instanceof Number){const A=new Number(h.valueOf());return g.set(h,A),u(A,h,m,g,b),A}if(h instanceof String){const A=new String(h.valueOf());return g.set(h,A),u(A,h,m,g,b),A}if(typeof h=="object"&&d(h)){const A=Object.create(Object.getPrototypeOf(h));return g.set(h,A),u(A,h,m,g,b),A}return h}function u(h,f,m=h,g,b){const x=[...Object.keys(f),...e.getSymbols(f)];for(let A=0;A<x.length;A++){const E=x[A],C=Object.getOwnPropertyDescriptor(h,E);(C==null||C.writable)&&(h[E]=l(f[E],E,m,g,b))}}function d(h){switch(t.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=a,n.cloneDeepWithImpl=l,n.copyProperties=u})(Bp)),Bp}var k1;function tR(){return k1||(k1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=dC();function t(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}n.cloneDeep=t})($p)),$p}var T1;function nR(){return T1||(T1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=yv(),t=tR();function r(i){return i=t.cloneDeep(i),s=>e.isMatch(s,i)}n.matches=r})(Mp)),Mp}var qp={},Gp={},Vp={},N1;function rR(){return N1||(N1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=dC(),t=uC();function r(i,s){return e.cloneDeepWith(i,(a,l,u,d)=>{const h=s?.(a,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const f=new i.constructor(i?.valueOf());return e.copyProperties(f,i),f}case t.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}n.cloneDeepWith=r})(Vp)),Vp}var O1;function iR(){return O1||(O1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=rR();function t(r){return e.cloneDeepWith(r)}n.cloneDeep=t})(Gp)),Gp}var Kp={},Yp={},j1;function hC(){return j1||(j1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}n.isIndex=t})(Yp)),Yp}var Xp={},M1;function sR(){return M1||(M1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=cC();function t(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}n.isArguments=t})(Xp)),Xp}var I1;function aR(){return I1||(I1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=LE(),t=hC(),r=sR(),i=av();function s(a,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=a;for(let h=0;h<u.length;h++){const f=u[h];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||r.isArguments(d))&&t.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}n.has=s})(Kp)),Kp}var R1;function oR(){return R1||(R1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=yv(),t=sv(),r=iR(),i=ov(),s=aR();function a(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=t.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?s.has(d,l):u===void 0?h===void 0:e.isMatch(h,u)}}n.matchesProperty=a})(qp)),qp}var D1;function lR(){return D1||(D1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=sC(),t=QI(),r=nR(),i=oR();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return t.property(a)}}n.iteratee=s})(Op)),Op}var L1;function cR(){return L1||(L1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=VI(),t=sC(),r=XI(),i=lR();function s(a,l=t.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(l)):[]}n.uniqBy=s})(_p)),_p}var Qp,F1;function uR(){return F1||(F1=1,Qp=cR().uniqBy),Qp}var dR=uR();const $1=jr(dR);function fC(n,e,t){return e===!0?$1(n,t):typeof e=="function"?$1(n,e):n}var Zp={exports:{}},Jp={},em={exports:{}},tm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function hR(){if(B1)return tm;B1=1;var n=Da();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(f,m){var g=m(),b=r({inst:{value:g,getSnapshot:m}}),x=b[0].inst,A=b[1];return s(function(){x.value=g,x.getSnapshot=m,u(x)&&A({inst:x})},[f,g,m]),i(function(){return u(x)&&A({inst:x}),f(function(){u(x)&&A({inst:x})})},[f]),a(g),g}function u(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!t(f,g)}catch{return!0}}function d(f,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return tm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,tm}var z1;function fR(){return z1||(z1=1,em.exports=hR()),em.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function pR(){if(U1)return Jp;U1=1;var n=Da(),e=fR();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue;return Jp.useSyncExternalStoreWithSelector=function(d,h,f,m,g){var b=s(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=l(function(){function E(O){if(!C){if(C=!0,P=O,O=m(O),g!==void 0&&x.hasValue){var j=x.value;if(g(j,O))return T=j}return T=O}if(j=T,r(P,O))return j;var B=m(O);return g!==void 0&&g(j,B)?(P=O,j):(P=O,T=B)}var C=!1,P,T,N=f===void 0?null:f;return[function(){return E(h())},N===null?void 0:function(){return E(N())}]},[h,f,m,g]);var A=i(d,b[0],b[1]);return a(function(){x.hasValue=!0,x.value=A},[A]),u(A),A},Jp}var H1;function mR(){return H1||(H1=1,Zp.exports=pR()),Zp.exports}var gR=mR(),xv=_.createContext(null),vR=n=>n,lt=()=>{var n=_.useContext(xv);return n?n.store.dispatch:vR},Au=()=>{},yR=()=>Au,xR=(n,e)=>n===e;function ve(n){var e=_.useContext(xv);return gR.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:yR,e?e.store.getState:Au,e?e.store.getState:Au,e?n:Au,xR)}function bR(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function wR(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function AR(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var W1=n=>Array.isArray(n)?n:[n];function SR(n){const e=Array.isArray(n[0])?n[0]:n;return AR(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _R(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}var ER=class{constructor(n){this.value=n}deref(){return this.value}},CR=typeof WeakRef<"u"?WeakRef:ER,PR=0,q1=1;function eu(){return{s:PR,v:void 0,o:null,p:null}}function pC(n,e={}){let t=eu();const{resultEqualityCheck:r}=e;let i,s=0;function a(){let l=t;const{length:u}=arguments;for(let f=0,m=u;f<m;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let b=l.o;b===null&&(l.o=b=new WeakMap);const x=b.get(g);x===void 0?(l=eu(),b.set(g,l)):l=x}else{let b=l.p;b===null&&(l.p=b=new Map);const x=b.get(g);x===void 0?(l=eu(),b.set(g,l)):l=x}}const d=l;let h;if(l.s===q1)h=l.v;else if(h=n.apply(null,arguments),s++,r){const f=i?.deref?.()??i;f!=null&&r(f,h)&&(h=f,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new CR(h):h}return d.s=q1,d.v=h,h}return a.clearCache=()=>{t=eu(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function kR(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let s=0,a=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),bR(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...t,...u},{memoize:f,memoizeOptions:m=[],argsMemoize:g=pC,argsMemoizeOptions:b=[]}=h,x=W1(m),A=W1(b),E=SR(i),C=f(function(){return s++,d.apply(null,arguments)},...x),P=g(function(){a++;const N=_R(E,arguments);return l=C.apply(null,N),l},...A);return Object.assign(P,{resultFunc:d,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var q=kR(pC),TR=Object.assign((n,e=q)=>{wR(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(s=>n[s]);return e(r,(...s)=>s.reduce((a,l,u)=>(a[t[u]]=l,a),{}))},{withTypes:()=>TR}),nm={},rm={},im={},G1;function NR(){return G1||(G1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const t=(r,i,s)=>{if(r!==i){const a=e(r),l=e(i);if(a===l&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};n.compareValues=t})(im)),im}var sm={},am={},V1;function mC(){return V1||(V1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(am)),am}var K1;function OR(){return K1||(K1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=mC(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!t.test(s))||a!=null&&Object.hasOwn(a,s)}n.isKey=i})(sm)),sm}var Y1;function jR(){return Y1||(Y1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=NR(),t=OR(),r=av();function i(s,a,l,u){if(s==null)return[];l=u?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(g=>String(g));const d=(g,b)=>{let x=g;for(let A=0;A<b.length&&x!=null;++A)x=x[b[A]];return x},h=(g,b)=>b==null||g==null?b:typeof g=="object"&&"key"in g?Object.hasOwn(b,g.key)?b[g.key]:d(b,g.path):typeof g=="function"?g(b):Array.isArray(g)?d(b,g):typeof b=="object"?b[g]:b,f=a.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||t.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:f.map(b=>h(b,g))})).slice().sort((g,b)=>{for(let x=0;x<f.length;x++){const A=e.compareValues(g.criteria[x],b.criteria[x],l[x]);if(A!==0)return A}return 0}).map(g=>g.original)}n.orderBy=i})(rm)),rm}var om={},X1;function MR(){return X1||(X1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r=1){const i=[],s=Math.floor(r),a=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<s?a(h,u+1):i.push(h)}};return a(t,0),i}n.flatten=e})(om)),om}var lm={},Q1;function gC(){return Q1||(Q1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=hC(),t=vv(),r=aC(),i=lC();function s(a,l,u){return r.isObject(u)&&(typeof l=="number"&&t.isArrayLike(u)&&e.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],a):!1}n.isIterateeCall=s})(lm)),lm}var Z1;function IR(){return Z1||(Z1=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jR(),t=MR(),r=gC();function i(s,...a){const l=a.length;return l>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,t.flatten(a),["asc"])}n.sortBy=i})(nm)),nm}var cm,J1;function RR(){return J1||(J1=1,cm=IR().sortBy),cm}var DR=RR();const Ed=jr(DR);var vC=n=>n.legend.settings,LR=n=>n.legend.size,FR=n=>n.legend.payload,$R=q([FR,vC],(n,e)=>{var{itemSorter:t}=e,r=n.flat(1);return t?Ed(r,t):r});function BR(){return ve($R)}var tu=1;function yC(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>tu||Math.abs(a.left-e.left)>tu||Math.abs(a.top-e.top)>tu||Math.abs(a.width-e.width)>tu)&&t({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,r]}function Ut(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var zR=typeof Symbol=="function"&&Symbol.observable||"@@observable",eA=zR,um=()=>Math.random().toString(36).substring(7).split("").join("."),UR={INIT:`@@redux/INIT${um()}`,REPLACE:`@@redux/REPLACE${um()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${um()}`},Iu=UR;function bv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function xC(n,e,t){if(typeof n!="function")throw new Error(Ut(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ut(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ut(1));return t(xC)(n,e)}let r=n,i=e,s=new Map,a=s,l=0,u=!1;function d(){a===s&&(a=new Map,s.forEach((A,E)=>{a.set(E,A)}))}function h(){if(u)throw new Error(Ut(3));return i}function f(A){if(typeof A!="function")throw new Error(Ut(4));if(u)throw new Error(Ut(5));let E=!0;d();const C=l++;return a.set(C,A),function(){if(E){if(u)throw new Error(Ut(6));E=!1,d(),a.delete(C),s=null}}}function m(A){if(!bv(A))throw new Error(Ut(7));if(typeof A.type>"u")throw new Error(Ut(8));if(typeof A.type!="string")throw new Error(Ut(17));if(u)throw new Error(Ut(9));try{u=!0,i=r(i,A)}finally{u=!1}return(s=a).forEach(C=>{C()}),A}function g(A){if(typeof A!="function")throw new Error(Ut(10));r=A,m({type:Iu.REPLACE})}function b(){const A=f;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Ut(11));function C(){const T=E;T.next&&T.next(h())}return C(),{unsubscribe:A(C)}},[eA](){return this}}}return m({type:Iu.INIT}),{dispatch:m,subscribe:f,getState:h,replaceReducer:g,[eA]:b}}function HR(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Iu.INIT})>"u")throw new Error(Ut(12));if(typeof t(void 0,{type:Iu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ut(13))})}function bC(n){const e=Object.keys(n),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof n[a]=="function"&&(t[a]=n[a])}const r=Object.keys(t);let i;try{HR(t)}catch(s){i=s}return function(a={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const f=r[h],m=t[f],g=a[f],b=m(g,l);if(typeof b>"u")throw l&&l.type,new Error(Ut(14));d[f]=b,u=u||b!==g}return u=u||r.length!==Object.keys(a).length,u?d:a}}function Ru(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function WR(...n){return e=>(t,r)=>{const i=e(t,r);let s=()=>{throw new Error(Ut(15))};const a={getState:i.getState,dispatch:(u,...d)=>s(u,...d)},l=n.map(u=>u(a));return s=Ru(...l)(i.dispatch),{...i,dispatch:s}}}function wC(n){return bv(n)&&"type"in n&&typeof n.type=="string"}var AC=Symbol.for("immer-nothing"),tA=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function mr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var _a=Object.getPrototypeOf;function _s(n){return!!n&&!!n[Fn]}function Xr(n){return n?SC(n)||Array.isArray(n)||!!n[tA]||!!n.constructor?.[tA]||_l(n)||Pd(n):!1}var qR=Object.prototype.constructor.toString();function SC(n){if(!n||typeof n!="object")return!1;const e=_a(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===qR}function Du(n,e){Cd(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function Cd(n){const e=n[Fn];return e?e.type_:Array.isArray(n)?1:_l(n)?2:Pd(n)?3:0}function cg(n,e){return Cd(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function _C(n,e,t){const r=Cd(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function GR(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function _l(n){return n instanceof Map}function Pd(n){return n instanceof Set}function cs(n){return n.copy_||n.base_}function ug(n,e){if(_l(n))return new Map(n);if(Pd(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=SC(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Fn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[a]})}return Object.create(_a(n),r)}else{const r=_a(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function wv(n,e=!1){return kd(n)||_s(n)||!Xr(n)||(Cd(n)>1&&Object.defineProperties(n,{set:{value:nu},add:{value:nu},clear:{value:nu},delete:{value:nu}}),Object.freeze(n),e&&Object.values(n).forEach(t=>wv(t,!0))),n}function nu(){mr(2)}function kd(n){return Object.isFrozen(n)}var VR={};function Es(n){const e=VR[n];return e||mr(0,n),e}var cl;function EC(){return cl}function KR(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nA(n,e){e&&(Es("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function dg(n){hg(n),n.drafts_.forEach(YR),n.drafts_=null}function hg(n){n===cl&&(cl=n.parent_)}function rA(n){return cl=KR(cl,n)}function YR(n){const e=n[Fn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iA(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Fn].modified_&&(dg(e),mr(4)),Xr(n)&&(n=Lu(e,n),e.parent_||Fu(e,n)),e.patches_&&Es("Patches").generateReplacementPatches_(t[Fn].base_,n,e.patches_,e.inversePatches_)):n=Lu(e,t,[]),dg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==AC?n:void 0}function Lu(n,e,t){if(kd(e))return e;const r=e[Fn];if(!r)return Du(e,(i,s)=>sA(n,r,e,i,s,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return Fu(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),Du(s,(l,u)=>sA(n,r,i,l,u,t,a)),Fu(n,i,!1),t&&n.patches_&&Es("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function sA(n,e,t,r,i,s,a){if(_s(i)){const l=s&&e&&e.type_!==3&&!cg(e.assigned_,r)?s.concat(r):void 0,u=Lu(n,i,l);if(_C(t,r,u),_s(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Xr(i)&&!kd(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Lu(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(_l(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&Fu(n,i)}}function Fu(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&wv(e,t)}function XR(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:EC(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Av;t&&(i=[r],s=ul);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,l}var Av={get(n,e){if(e===Fn)return n;const t=cs(n);if(!cg(t,e))return QR(n,t,e);const r=t[e];return n.finalized_||!Xr(r)?r:r===dm(n.base_,e)?(hm(n),n.copy_[e]=pg(r,n)):r},has(n,e){return e in cs(n)},ownKeys(n){return Reflect.ownKeys(cs(n))},set(n,e,t){const r=CC(cs(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=dm(cs(n),e),s=i?.[Fn];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(GR(t,i)&&(t!==void 0||cg(n.base_,e)))return!0;hm(n),fg(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return dm(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,hm(n),fg(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=cs(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){mr(11)},getPrototypeOf(n){return _a(n.base_)},setPrototypeOf(){mr(12)}},ul={};Du(Av,(n,e)=>{ul[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ul.deleteProperty=function(n,e){return ul.set.call(this,n,e,void 0)};ul.set=function(n,e,t){return Av.set.call(this,n[0],e,t,n[0])};function dm(n,e){const t=n[Fn];return(t?cs(t):n)[e]}function QR(n,e,t){const r=CC(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function CC(n,e){if(!(e in n))return;let t=_a(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=_a(t)}}function fg(n){n.modified_||(n.modified_=!0,n.parent_&&fg(n.parent_))}function hm(n){n.copy_||(n.copy_=ug(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var ZR=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(u=s,...d){return a.produce(u,h=>t.call(this,h,...d))}}typeof t!="function"&&mr(6),r!==void 0&&typeof r!="function"&&mr(7);let i;if(Xr(e)){const s=rA(this),a=pg(e,void 0);let l=!0;try{i=t(a),l=!1}finally{l?dg(s):hg(s)}return nA(s,r),iA(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===AC&&(i=void 0),this.autoFreeze_&&wv(i,!0),r){const s=[],a=[];Es("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else mr(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,u=>e(u,...l));let r,i;return[this.produce(e,t,(a,l)=>{r=a,i=l}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Xr(n)||mr(8),_s(n)&&(n=Vr(n));const e=rA(this),t=pg(n,void 0);return t[Fn].isManual_=!0,hg(e),t}finishDraft(n,e){const t=n&&n[Fn];(!t||!t.isManual_)&&mr(9);const{scope_:r}=t;return nA(r,e),iA(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Es("Patches").applyPatches_;return _s(n)?r(n,e):this.produce(n,i=>r(i,e))}};function pg(n,e){const t=_l(n)?Es("MapSet").proxyMap_(n,e):Pd(n)?Es("MapSet").proxySet_(n,e):XR(n,e);return(e?e.scope_:EC()).drafts_.push(t),t}function Vr(n){return _s(n)||mr(10,n),PC(n)}function PC(n){if(!Xr(n)||kd(n))return n;const e=n[Fn];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ug(n,e.scope_.immer_.useStrictShallowCopy_)}else t=ug(n,!0);return Du(t,(r,i)=>{_C(t,r,PC(i))}),e&&(e.finalized_=!1),t}var JR=new ZR,kC=JR.produce;function TC(n){return({dispatch:t,getState:r})=>i=>s=>typeof s=="function"?s(t,r,n):i(s)}var eD=TC(),tD=TC,nD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ru:Ru.apply(null,arguments)};function tr(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(Dn(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>wC(r)&&r.type===n,t}var NC=class Ko extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ko.prototype)}static get[Symbol.species](){return Ko}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ko(...e[0].concat(this)):new Ko(...e.concat(this))}};function aA(n){return Xr(n)?kC(n,()=>{}):n}function ru(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function rD(n){return typeof n=="boolean"}var iD=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new NC;return t&&(rD(t)?a.push(eD):a.push(tD(t.extraArgument))),a},sD="RTK_autoBatch",oA=n=>e=>{setTimeout(e,n)},aD=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,s=!1,a=!1;const l=new Set,u=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:oA(10):n.type==="callback"?n.queueNotification:oA(n.timeout),d=()=>{a=!1,s&&(s=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const f=()=>i&&h(),m=r.subscribe(f);return l.add(h),()=>{m(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[sD],s=!i,s&&(a||(a=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},oD=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new NC(n);return r&&i.push(aD(typeof r=="object"?r:void 0)),i};function lD(n){const e=iD(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=n||{};let l;if(typeof t=="function")l=t;else if(bv(t))l=bC(t);else throw new Error(Dn(1));let u;typeof r=="function"?u=r(e):u=e();let d=Ru;i&&(d=nD({trace:!1,...typeof i=="object"&&i}));const h=WR(...u),f=oD(h);let m=typeof a=="function"?a(f):f();const g=d(...m);return xC(l,s,g)}function OC(n){const e={},t=[];let r;const i={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Dn(28));if(l in e)throw new Error(Dn(29));return e[l]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&t.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return t.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return n(i),[e,t,r]}function cD(n){return typeof n=="function"}function uD(n,e){let[t,r,i]=OC(e),s;if(cD(n))s=()=>aA(n());else{const l=aA(n);s=()=>l}function a(l=s(),u){let d=[t[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,f)=>{if(f)if(_s(h)){const g=f(h,u);return g===void 0?h:g}else{if(Xr(h))return kC(h,m=>f(m,u));{const m=f(h,u);if(m===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return h},l)}return a.getInitialState=s,a}var dD="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hD=(n=21)=>{let e="",t=n;for(;t--;)e+=dD[Math.random()*64|0];return e},fD=Symbol.for("rtk-slice-createasyncthunk");function pD(n,e){return`${n}/${e}`}function mD({creators:n}={}){const e=n?.asyncThunk?.[fD];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Dn(11));const a=(typeof r.reducers=="function"?r.reducers(vD()):r.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(P,T){const N=typeof P=="string"?P:P.type;if(!N)throw new Error(Dn(12));if(N in u.sliceCaseReducersByType)throw new Error(Dn(13));return u.sliceCaseReducersByType[N]=T,d},addMatcher(P,T){return u.sliceMatchers.push({matcher:P,reducer:T}),d},exposeAction(P,T){return u.actionCreators[P]=T,d},exposeCaseReducer(P,T){return u.sliceCaseReducersByName[P]=T,d}};l.forEach(P=>{const T=a[P],N={reducerName:P,type:pD(i,P),createNotation:typeof r.reducers=="function"};xD(T)?wD(N,T,d,e):yD(N,T,d)});function h(){const[P={},T=[],N=void 0]=typeof r.extraReducers=="function"?OC(r.extraReducers):[r.extraReducers],O={...P,...u.sliceCaseReducersByType};return uD(r.initialState,j=>{for(let B in O)j.addCase(B,O[B]);for(let B of u.sliceMatchers)j.addMatcher(B.matcher,B.reducer);for(let B of T)j.addMatcher(B.matcher,B.reducer);N&&j.addDefaultCase(N)})}const f=P=>P,m=new Map,g=new WeakMap;let b;function x(P,T){return b||(b=h()),b(P,T)}function A(){return b||(b=h()),b.getInitialState()}function E(P,T=!1){function N(j){let B=j[P];return typeof B>"u"&&T&&(B=ru(g,N,A)),B}function O(j=f){const B=ru(m,T,()=>new WeakMap);return ru(B,j,()=>{const F={};for(const[Y,V]of Object.entries(r.selectors??{}))F[Y]=gD(V,j,()=>ru(g,j,A),T);return F})}return{reducerPath:P,getSelectors:O,get selectors(){return O(N)},selectSlice:N}}const C={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:A,...E(s),injectInto(P,{reducerPath:T,...N}={}){const O=T??s;return P.inject({reducerPath:O,reducer:x},N),{...C,...E(O,!0)}}};return C}}function gD(n,e,t,r){function i(s,...a){let l=e(s);return typeof l>"u"&&r&&(l=t()),n(l,...a)}return i.unwrapped=n,i}var Bn=mD();function vD(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function yD({type:n,reducerName:e,createNotation:t},r,i){let s,a;if("reducer"in r){if(t&&!bD(r))throw new Error(Dn(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(n,s).exposeCaseReducer(e,s).exposeAction(e,a?tr(n,a):tr(n))}function xD(n){return n._reducerDefinitionType==="asyncThunk"}function bD(n){return n._reducerDefinitionType==="reducerWithPrepare"}function wD({type:n,reducerName:e},t,r,i){if(!i)throw new Error(Dn(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:u,settled:d,options:h}=t,f=i(n,s,h);r.exposeAction(e,f),a&&r.addCase(f.fulfilled,a),l&&r.addCase(f.pending,l),u&&r.addCase(f.rejected,u),d&&r.addMatcher(f.settled,d),r.exposeCaseReducer(e,{fulfilled:a||iu,pending:l||iu,rejected:u||iu,settled:d||iu})}function iu(){}var AD="task",jC="listener",MC="completed",Sv="cancelled",SD=`task-${Sv}`,_D=`task-${MC}`,mg=`${jC}-${Sv}`,ED=`${jC}-${MC}`,Td=class{constructor(n){this.code=n,this.message=`${AD} ${Sv} (reason: ${n})`}name="TaskAbortError";message},_v=(n,e)=>{if(typeof n!="function")throw new TypeError(Dn(32))},$u=()=>{},IC=(n,e=$u)=>(n.catch(e),n),RC=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),ys=(n,e)=>{const t=n.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),n.abort(e))},xs=n=>{if(n.aborted){const{reason:e}=n;throw new Td(e)}};function DC(n,e){let t=$u;return new Promise((r,i)=>{const s=()=>i(new Td(n.reason));if(n.aborted){s();return}t=RC(n,s),e.finally(()=>t()).then(r,i)}).finally(()=>{t=$u})}var CD=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof Td?"cancelled":"rejected",error:t}}finally{e?.()}},Bu=n=>e=>IC(DC(n,e).then(t=>(xs(n),t))),LC=n=>{const e=Bu(n);return t=>e(new Promise(r=>setTimeout(r,t)))},{assign:va}=Object,lA={},Nd="listenerMiddleware",PD=(n,e)=>{const t=r=>RC(n,()=>ys(r,n.reason));return(r,i)=>{_v(r);const s=new AbortController;t(s);const a=CD(async()=>{xs(n),xs(s.signal);const l=await r({pause:Bu(s.signal),delay:LC(s.signal),signal:s.signal});return xs(s.signal),l},()=>ys(s,_D));return i?.autoJoin&&e.push(a.catch($u)),{result:Bu(n)(a),cancel(){ys(s,SD)}}}},kD=(n,e)=>{const t=async(r,i)=>{xs(e);let s=()=>{};const l=[new Promise((u,d)=>{let h=n({predicate:r,effect:(f,m)=>{m.unsubscribe(),u([f,m.getState(),m.getOriginalState()])}});s=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await DC(e,Promise.race(l));return xs(e),u}finally{s()}};return(r,i)=>IC(t(r,i))},FC=n=>{let{type:e,actionCreator:t,matcher:r,predicate:i,effect:s}=n;if(e)i=tr(e).match;else if(t)e=t.type,i=t.match;else if(r)i=r;else if(!i)throw new Error(Dn(21));return _v(s),{predicate:i,type:e,effect:s}},$C=va(n=>{const{type:e,predicate:t,effect:r}=FC(n);return{id:hD(),effect:r,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(Dn(22))}}},{withTypes:()=>$C}),cA=(n,e)=>{const{type:t,effect:r,predicate:i}=FC(e);return Array.from(n.values()).find(s=>(typeof t=="string"?s.type===t:s.predicate===i)&&s.effect===r)},gg=n=>{n.pending.forEach(e=>{ys(e,mg)})},TD=n=>()=>{n.forEach(gg),n.clear()},uA=(n,e,t)=>{try{n(e,t)}catch(r){setTimeout(()=>{throw r},0)}},BC=va(tr(`${Nd}/add`),{withTypes:()=>BC}),ND=tr(`${Nd}/removeAll`),zC=va(tr(`${Nd}/remove`),{withTypes:()=>zC}),OD=(...n)=>{console.error(`${Nd}/error`,...n)},El=(n={})=>{const e=new Map,{extra:t,onError:r=OD}=n;_v(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),f=>{h.unsubscribe(),f?.cancelActive&&gg(h)}),s=h=>{const f=cA(e,h)??$C(h);return i(f)};va(s,{withTypes:()=>s});const a=h=>{const f=cA(e,h);return f&&(f.unsubscribe(),h.cancelActive&&gg(f)),!!f};va(a,{withTypes:()=>a});const l=async(h,f,m,g)=>{const b=new AbortController,x=kD(s,b.signal),A=[];try{h.pending.add(b),await Promise.resolve(h.effect(f,va({},m,{getOriginalState:g,condition:(E,C)=>x(E,C).then(Boolean),take:x,delay:LC(b.signal),pause:Bu(b.signal),extra:t,signal:b.signal,fork:PD(b.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((E,C,P)=>{E!==b&&(ys(E,mg),P.delete(E))})},cancel:()=>{ys(b,mg),h.pending.delete(b)},throwIfCancelled:()=>{xs(b.signal)}})))}catch(E){E instanceof Td||uA(r,E,{raisedBy:"effect"})}finally{await Promise.all(A),ys(b,ED),h.pending.delete(b)}},u=TD(e);return{middleware:h=>f=>m=>{if(!wC(m))return f(m);if(BC.match(m))return s(m.payload);if(ND.match(m)){u();return}if(zC.match(m))return a(m.payload);let g=h.getState();const b=()=>{if(g===lA)throw new Error(Dn(23));return g};let x;try{if(x=f(m),e.size>0){const A=h.getState(),E=Array.from(e.values());for(const C of E){let P=!1;try{P=C.predicate(m,A,g)}catch(T){P=!1,uA(r,T,{raisedBy:"predicate"})}P&&l(C,m,h,b)}}}finally{g=lA}return x},startListening:s,stopListening:a,clearListeners:u}};function Dn(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var jD={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},UC=Bn({name:"chartLayout",initialState:jD,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){var t,r,i,s;n.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,n.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,n.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,n.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(n,e){n.scale=e.payload}}}),{setMargin:MD,setLayout:ID,setChartSize:RD,setScale:DD}=UC.actions,LD=UC.reducer;function dA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dA(Object(t),!0).forEach(function(r){FD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FD(n,e,t){return(e=$D(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $D(n){var e=BD(n,"string");return typeof e=="symbol"?e:e+""}function BD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var zu=Math.PI/180,zD=n=>n*180/Math.PI,xt=(n,e,t,r)=>({x:n+Math.cos(-zu*r)*t,y:e+Math.sin(-zu*r)*t}),HC=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},UD=(n,e)=>{var{x:t,y:r}=n,{x:i,y:s}=e;return Math.sqrt((t-i)**2+(r-s)**2)},HD=(n,e)=>{var{x:t,y:r}=n,{cx:i,cy:s}=e,a=UD({x:t,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var l=(t-i)/a,u=Math.acos(l);return r>s&&(u=2*Math.PI-u),{radius:a,angle:zD(u),angleInRadian:u}},WD=n=>{var{startAngle:e,endAngle:t}=n,r=Math.floor(e/360),i=Math.floor(t/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:t-s*360}},qD=(n,e)=>{var{startAngle:t,endAngle:r}=e,i=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(i,s);return n+a*360},GD=(n,e)=>{var{x:t,y:r}=n,{radius:i,angle:s}=HD({x:t,y:r},e),{innerRadius:a,outerRadius:l}=e;if(i<a||i>l||i===0)return null;var{startAngle:u,endAngle:d}=WD(e),h=s,f;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;f=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;f=h>=d&&h<=u}return f?hA(hA({},e),{},{radius:i,angle:qD(h,e)}):null};function WC(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function fA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(t),!0).forEach(function(r){VD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VD(n,e,t){return(e=KD(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KD(n){var e=YD(n,"string");return typeof e=="symbol"?e:e+""}function YD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ot(n,e,t){return Lt(n)||Lt(e)?t:Nr(e)?Ss(n,e,t):typeof e=="function"?e(n):t}var XD=(n,e,t,r,i)=>{var s,a=-1,l=(s=e?.length)!==null&&s!==void 0?s:0;if(l<=1||n==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?t[u-1].coordinate:t[l-1].coordinate,h=t[u].coordinate,f=u>=l-1?t[0].coordinate:t[u+1].coordinate,m=void 0;if(Dt(h-d)!==Dt(f-h)){var g=[];if(Dt(f-h)===Dt(i[1]-i[0])){m=f;var b=h+i[1]-i[0];g[0]=Math.min(b,(b+d)/2),g[1]=Math.max(b,(b+d)/2)}else{m=d;var x=f+i[1]-i[0];g[0]=Math.min(h,(x+h)/2),g[1]=Math.max(h,(x+h)/2)}var A=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(n>A[0]&&n<=A[1]||n>=g[0]&&n<=g[1]){({index:a}=t[u]);break}}else{var E=Math.min(d,f),C=Math.max(d,f);if(n>(E+h)/2&&n<=(C+h)/2){({index:a}=t[u]);break}}}else if(e){for(var P=0;P<l;P++)if(P===0&&n<=(e[P].coordinate+e[P+1].coordinate)/2||P>0&&P<l-1&&n>(e[P].coordinate+e[P-1].coordinate)/2&&n<=(e[P].coordinate+e[P+1].coordinate)/2||P===l-1&&n>(e[P].coordinate+e[P-1].coordinate)/2){({index:a}=e[P]);break}}return a},QD=(n,e,t)=>{if(e&&t){var{width:r,height:i}=t,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&xe(n[s]))return Jn(Jn({},n),{},{[s]:n[s]+(r||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&xe(n[a]))return Jn(Jn({},n),{},{[a]:n[a]+(i||0)})}return n},Is=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",qC=(n,e,t,r)=>{if(r)return n.map(l=>l.coordinate);var i,s,a=n.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===t&&(s=!0),l.coordinate));return i||a.push(e),s||a.push(t),a},GC=(n,e,t)=>{if(!n)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:f,niceTicks:m,axisType:g}=n;if(!a)return null;var b=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,x=i==="category"&&a.bandwidth?a.bandwidth()/b:0;if(x=g==="angleAxis"&&s&&s.length>=2?Dt(s[0]-s[1])*2*x:x,f||m){var A=(f||m||[]).map((E,C)=>{var P=r?r.indexOf(E):E;return{coordinate:a(P)+x,value:E,offset:x,index:C}});return A.filter(E=>!Ln(E.coordinate))}return u&&d?d.map((E,C)=>({coordinate:a(E)+x,value:E,index:C,offset:x})):a.ticks&&h!=null?a.ticks(h).map((E,C)=>({coordinate:a(E)+x,value:E,offset:x,index:C})):a.domain().map((E,C)=>({coordinate:a(E)+x,value:r?r[E]:E,index:C,offset:x}))},pA=1e-4,ZD=n=>{var e=n.domain();if(!(!e||e.length<=2)){var t=e.length,r=n.range(),i=Math.min(r[0],r[1])-pA,s=Math.max(r[0],r[1])+pA,a=n(e[0]),l=n(e[t-1]);(a<i||a>s||l<i||l>s)&&n.domain([e[0],e[t-1]])}},JD=(n,e)=>{if(!e||e.length!==2||!xe(e[0])||!xe(e[1]))return n;var t=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[n[0],n[1]];return(!xe(n[0])||n[0]<t)&&(i[0]=t),(!xe(n[1])||n[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<t&&(i[1]=t),i},eL=n=>{var e=n.length;if(!(e<=0))for(var t=0,r=n[0].length;t<r;++t)for(var i=0,s=0,a=0;a<e;++a){var l=Ln(n[a][t][1])?n[a][t][0]:n[a][t][1];l>=0?(n[a][t][0]=i,n[a][t][1]=i+l,i=n[a][t][1]):(n[a][t][0]=s,n[a][t][1]=s+l,s=n[a][t][1])}},tL=n=>{var e=n.length;if(!(e<=0))for(var t=0,r=n[0].length;t<r;++t)for(var i=0,s=0;s<e;++s){var a=Ln(n[s][t][1])?n[s][t][0]:n[s][t][1];a>=0?(n[s][t][0]=i,n[s][t][1]=i+a,i=n[s][t][1]):(n[s][t][0]=0,n[s][t][1]=0)}},nL={sign:eL,expand:OI,none:Sa,silhouette:jI,wiggle:MI,positive:tL},rL=(n,e,t)=>{var r=nL[t],i=NI().keys(e).value((s,a)=>+ot(s,a,0)).order(ag).offset(r);return i(n)};function iL(n){return n==null?void 0:String(n)}var mA=n=>{var{axis:e,ticks:t,offset:r,bandSize:i,entry:s,index:a}=n;if(e.type==="category")return t[a]?t[a].coordinate+r:null;var l=ot(s,e.dataKey,e.scale.domain()[a]);return Lt(l)?null:e.scale(l)-i/2+r},sL=n=>{var{numericAxis:e}=n,t=e.scale.domain();if(e.type==="number"){var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return r<=0&&i>=0?0:i<0?i:r}return t[0]},aL=n=>{var e=n.flat(2).filter(xe);return[Math.min(...e),Math.max(...e)]},oL=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],lL=(n,e,t)=>{if(n!=null)return oL(Object.keys(n).reduce((r,i)=>{var s=n[i],{stackedData:a}=s,l=a.reduce((u,d)=>{var h=WC(d,e,t),f=aL(h);return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},gA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ev=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var r=n.scale.bandwidth();if(!t||r>0)return r}if(n&&e&&e.length>=2){for(var i=Ed(e,h=>h.coordinate),s=1/0,a=1,l=i.length;a<l;a++){var u=i[a],d=i[a-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return t?void 0:0};function yA(n){var{tooltipEntrySettings:e,dataKey:t,payload:r,value:i,name:s}=n;return Jn(Jn({},e),{},{dataKey:t,payload:r,value:i,name:s})}function Od(n,e){if(n)return String(n);if(typeof e=="string")return e}function cL(n,e,t,r,i){if(t==="horizontal"||t==="vertical"){var s=n>=i.left&&n<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return s?{x:n,y:e}:null}return r?GD({x:n,y:e},r):null}var uL=(n,e,t,r)=>{var i=e.find(d=>d&&d.index===t);if(i){if(n==="horizontal")return{x:i.coordinate,y:r.y};if(n==="vertical")return{x:r.x,y:i.coordinate};if(n==="centric"){var s=i.coordinate,{radius:a}=r;return Jn(Jn(Jn({},r),xt(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var l=i.coordinate,{angle:u}=r;return Jn(Jn(Jn({},r),xt(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{x:0,y:0}},dL=(n,e)=>e==="horizontal"?n.x:e==="vertical"?n.y:e==="centric"?n.angle:n.radius,ni=n=>n.layout.width,ri=n=>n.layout.height,hL=n=>n.layout.scale,VC=n=>n.layout.margin,jd=q(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),Md=q(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),KC="data-recharts-item-index",YC="data-recharts-item-data-key",Cl=60;function xA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function su(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xA(Object(t),!0).forEach(function(r){fL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fL(n,e,t){return(e=pL(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pL(n){var e=mL(n,"string");return typeof e=="symbol"?e:e+""}function mL(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var gL=n=>n.brush.height;function vL(n){var e=Md(n);return e.reduce((t,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Cl;return t+i}return t},0)}function yL(n){var e=Md(n);return e.reduce((t,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Cl;return t+i}return t},0)}function xL(n){var e=jd(n);return e.reduce((t,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?t+r.height:t,0)}function bL(n){var e=jd(n);return e.reduce((t,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?t+r.height:t,0)}var Tt=q([ni,ri,VC,gL,vL,yL,xL,bL,vC,LR],(n,e,t,r,i,s,a,l,u,d)=>{var h={left:(t.left||0)+i,right:(t.right||0)+s},f={top:(t.top||0)+a,bottom:(t.bottom||0)+l},m=su(su({},f),h),g=m.bottom;m.bottom+=r,m=QD(m,u,d);var b=n-m.left-m.right,x=e-m.top-m.bottom;return su(su({brushBottom:g},m),{},{width:Math.max(b,0),height:Math.max(x,0)})}),wL=q(Tt,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),Cv=q(ni,ri,(n,e)=>({x:0,y:0,width:n,height:e})),AL=_.createContext(null),rr=()=>_.useContext(AL)!=null,Id=n=>n.brush,Rd=q([Id,Tt,VC],(n,e,t)=>({height:n.height,x:xe(n.x)?n.x:e.left,y:xe(n.y)?n.y:e.top+e.height+e.brushBottom-(t?.bottom||0),width:xe(n.width)?n.width:e.width})),Pv=()=>{var n,e=rr(),t=ve(wL),r=ve(Rd),i=(n=ve(Id))===null||n===void 0?void 0:n.padding;return!e||!r||!i?t:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},SL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},XC=()=>{var n;return(n=ve(Tt))!==null&&n!==void 0?n:SL},kv=()=>ve(ni),Tv=()=>ve(ri),_L=()=>ve(n=>n.layout.margin),$e=n=>n.layout.layoutType,Nv=()=>ve($e),EL={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},QC=Bn({name:"legend",initialState:EL,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload(n,e){n.payload.push(e.payload)},removeLegendPayload(n,e){var t=Vr(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)}}}),{setLegendSize:bA,setLegendSettings:CL,addLegendPayload:ZC,removeLegendPayload:JC}=QC.actions,PL=QC.reducer,kL=["contextPayload"];function vg(){return vg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vg.apply(null,arguments)}function wA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ea(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wA(Object(t),!0).forEach(function(r){Ov(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ov(n,e,t){return(e=TL(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TL(n){var e=NL(n,"string");return typeof e=="symbol"?e:e+""}function NL(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OL(n,e){if(n==null)return{};var t,r,i=jL(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function jL(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function ML(n){return n.value}function IL(n){var{contextPayload:e}=n,t=OL(n,kL),r=fC(e,n.payloadUniqBy,ML),i=Ea(Ea({},t),{},{payload:r});return _.isValidElement(n.content)?_.cloneElement(n.content,i):typeof n.content=="function"?_.createElement(n.content,i):_.createElement(gv,i)}function RL(n,e,t,r,i,s){var{layout:a,align:l,verticalAlign:u}=e,d,h;return(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))&&(l==="center"&&a==="vertical"?d={left:((r||0)-s.width)/2}:d=l==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))&&(u==="middle"?h={top:((i||0)-s.height)/2}:h=u==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),Ea(Ea({},d),h)}function DL(n){var e=lt();return _.useEffect(()=>{e(CL(n))},[e,n]),null}function LL(n){var e=lt();return _.useEffect(()=>(e(bA(n)),()=>{e(bA({width:0,height:0}))}),[e,n]),null}function FL(n){var e=BR(),t=eI(),r=_L(),{width:i,height:s,wrapperStyle:a,portal:l}=n,[u,d]=yC([e]),h=kv(),f=Tv();if(h==null||f==null)return null;var m=h-(r.left||0)-(r.right||0),g=Cs.getWidthOrHeight(n.layout,s,i,m),b=l?a:Ea(Ea({position:"absolute",width:g?.width||i||"auto",height:g?.height||s||"auto"},RL(a,n,r,h,f,u)),a),x=l??t;if(x==null)return null;var A=_.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:d},_.createElement(DL,{layout:n.layout,align:n.align,verticalAlign:n.verticalAlign,itemSorter:n.itemSorter}),_.createElement(LL,{width:u.width,height:u.height}),_.createElement(IL,vg({},n,g,{margin:r,chartWidth:h,chartHeight:f,contextPayload:e})));return fE.createPortal(A,x)}class Cs extends _.PureComponent{static getWidthOrHeight(e,t,r,i){return e==="vertical"&&xe(t)?{height:t}:e==="horizontal"?{width:r||i}:null}render(){return _.createElement(FL,this.props)}}Ov(Cs,"displayName","Legend");Ov(Cs,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function yg(){return yg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yg.apply(null,arguments)}function AA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AA(Object(t),!0).forEach(function(r){$L(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $L(n,e,t){return(e=BL(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BL(n){var e=zL(n,"string");return typeof e=="symbol"?e:e+""}function zL(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UL(n){return Array.isArray(n)&&Nr(n[0])&&Nr(n[1])?n.join(" ~ "):n}var HL=n=>{var{separator:e=" : ",contentStyle:t={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:f,accessibilityLayer:m=!1}=n,g=()=>{if(s&&s.length){var N={padding:0,margin:0},O=(l?Ed(s,l):s).map((j,B)=>{if(j.type==="none")return null;var F=j.formatter||a||UL,{value:Y,name:V}=j,K=Y,te=V;if(F){var H=F(Y,V,j,B,s);if(Array.isArray(H))[K,te]=H;else if(H!=null)K=H;else return null}var ae=fm({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:ae},Nr(te)?_.createElement("span",{className:"recharts-tooltip-item-name"},te):null,Nr(te)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},K),_.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:N},O)}return null},b=fm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),x=fm({margin:0},i),A=!Lt(h),E=A?h:"",C=He("recharts-default-tooltip",u),P=He("recharts-tooltip-label",d);A&&f&&s!==void 0&&s!==null&&(E=f(h,s));var T=m?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",yg({className:C,style:b},T),_.createElement("p",{className:P,style:x},_.isValidElement(E)?E:"".concat(E)),g())},Do="recharts-tooltip-wrapper",WL={visibility:"hidden"};function qL(n){var{coordinate:e,translateX:t,translateY:r}=n;return He(Do,{["".concat(Do,"-right")]:xe(t)&&e&&xe(e.x)&&t>=e.x,["".concat(Do,"-left")]:xe(t)&&e&&xe(e.x)&&t<e.x,["".concat(Do,"-bottom")]:xe(r)&&e&&xe(e.y)&&r>=e.y,["".concat(Do,"-top")]:xe(r)&&e&&xe(e.y)&&r<e.y})}function SA(n){var{allowEscapeViewBox:e,coordinate:t,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=n;if(s&&xe(s[r]))return s[r];var h=t[r]-l-(i>0?i:0),f=t[r]+i;if(e[r])return a[r]?h:f;var m=u[r];if(m==null)return 0;if(a[r]){var g=h,b=m;return g<b?Math.max(f,m):Math.max(h,m)}if(d==null)return 0;var x=f+l,A=m+d;return x>A?Math.max(h,m):Math.max(f,m)}function GL(n){var{translateX:e,translateY:t,useTranslate3d:r}=n;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function VL(n){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:u}=n,d,h,f;return a.height>0&&a.width>0&&t?(h=SA({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),f=SA({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),d=GL({translateX:h,translateY:f,useTranslate3d:l})):d=WL,{cssProperties:d,cssClasses:qL({translateX:h,translateY:f,coordinate:t})}}function _A(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function au(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(t),!0).forEach(function(r){xg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_A(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xg(n,e,t){return(e=KL(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KL(n){var e=YL(n,"string");return typeof e=="symbol"?e:e+""}function YL(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class XL extends _.PureComponent{constructor(){super(...arguments),xg(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xg(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&t!==void 0?t:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:f,useTranslate3d:m,viewBox:g,wrapperStyle:b,lastBoundingBox:x,innerRef:A,hasPortalFromProps:E}=this.props,{cssClasses:C,cssProperties:P}=VL({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:g}),T=E?{}:au(au({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),N=au(au({},T),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:N,ref:A},s)}}var QL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Rs={devToolsEnabled:!1,isSsr:QL()},eP=()=>ve(n=>n.rootProps.accessibilityLayer);function $n(n){return Number.isFinite(n)}function Ca(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function bg(){return bg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bg.apply(null,arguments)}function EA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function CA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(t),!0).forEach(function(r){ZL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ZL(n,e,t){return(e=JL(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JL(n){var e=e3(n,"string");return typeof e=="symbol"?e:e+""}function e3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var PA={curveBasisClosed:xI,curveBasisOpen:bI,curveBasis:yI,curveBumpX:iI,curveBumpY:sI,curveLinearClosed:wI,curveLinear:Sd,curveMonotoneX:AI,curveMonotoneY:SI,curveNatural:_I,curveStep:EI,curveStepAfter:PI,curveStepBefore:CI},ou=n=>$n(n.x)&&$n(n.y),Lo=n=>n.x,Fo=n=>n.y,t3=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(Al(n));return(t==="curveMonotone"||t==="curveBump")&&e?PA["".concat(t).concat(e==="vertical"?"Y":"X")]:PA[t]||Sd},n3=n=>{var{type:e="linear",points:t=[],baseLine:r,layout:i,connectNulls:s=!1}=n,a=t3(e,i),l=s?t.filter(ou):t,u;if(Array.isArray(r)){var d=s?r.filter(f=>ou(f)):r,h=l.map((f,m)=>CA(CA({},f),{},{base:d[m]}));return i==="vertical"?u=Jc().y(Fo).x1(Lo).x0(f=>f.base.x):u=Jc().x(Lo).y1(Fo).y0(f=>f.base.y),u.defined(ou).curve(a),u(h)}return i==="vertical"&&xe(r)?u=Jc().y(Fo).x1(Lo).x0(r):xe(r)?u=Jc().x(Lo).y1(Fo).y0(r):u=VE().x(Lo).y(Fo),u.defined(ou).curve(a),u(l)},tP=n=>{var{className:e,points:t,path:r,pathRef:i}=n;if((!t||!t.length)&&!r)return null;var s=t&&t.length?n3(n):r;return _.createElement("path",bg({},Hi(n),WM(n),{className:He("recharts-curve",e),d:s===null?void 0:s,ref:i}))},r3=["x","y","top","left","width","height","className"];function wg(){return wg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wg.apply(null,arguments)}function kA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function i3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(t),!0).forEach(function(r){s3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s3(n,e,t){return(e=a3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a3(n){var e=o3(n,"string");return typeof e=="symbol"?e:e+""}function o3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function l3(n,e){if(n==null)return{};var t,r,i=c3(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function c3(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var u3=(n,e,t,r,i,s)=>"M".concat(n,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(t),d3=n=>{var{x:e=0,y:t=0,top:r=0,left:i=0,width:s=0,height:a=0,className:l}=n,u=l3(n,r3),d=i3({x:e,y:t,top:r,left:i,width:s,height:a},u);return!xe(e)||!xe(t)||!xe(s)||!xe(a)||!xe(r)||!xe(i)?null:_.createElement("path",wg({},kt(d,!0),{className:He("recharts-cross",l),d:u3(e,t,s,a,r,i)}))};function h3(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function TA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TA(Object(t),!0).forEach(function(r){p3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p3(n,e,t){return(e=m3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m3(n){var e=g3(n,"string");return typeof e=="symbol"?e:e+""}function g3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fn(n,e){var t=f3({},n),r=e,i=Object.keys(e),s=i.reduce((a,l)=>(a[l]===void 0&&r[l]!==void 0&&(a[l]=r[l]),a),t);return s}function v3(){}function NA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function OA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NA(Object(t),!0).forEach(function(r){y3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y3(n,e,t){return(e=x3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x3(n){var e=b3(n,"string");return typeof e=="symbol"?e:e+""}function b3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var w3=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),nP=(n,e,t)=>n.map(r=>"".concat(w3(r)," ").concat(e,"ms ").concat(t)).join(","),A3=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,r)=>t.filter(i=>r.includes(i))),dl=(n,e)=>Object.keys(e).reduce((t,r)=>OA(OA({},t),{},{[r]:n(r,e[r])}),{});function jA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ht(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jA(Object(t),!0).forEach(function(r){S3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S3(n,e,t){return(e=_3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _3(n){var e=E3(n,"string");return typeof e=="symbol"?e:e+""}function E3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Uu=(n,e,t)=>n+(e-n)*t,Ag=n=>{var{from:e,to:t}=n;return e!==t},rP=(n,e,t)=>{var r=dl((i,s)=>{if(Ag(s)){var[a,l]=n(s.from,s.to,s.velocity);return Ht(Ht({},s),{},{from:a,velocity:l})}return s},e);return t<1?dl((i,s)=>Ag(s)?Ht(Ht({},s),{},{velocity:Uu(s.velocity,r[i].velocity,t),from:Uu(s.from,r[i].from,t)}):s,e):rP(n,r,t-1)};function C3(n,e,t,r,i,s){var a,l=r.reduce((m,g)=>Ht(Ht({},m),{},{[g]:{from:n[g],velocity:0,to:e[g]}}),{}),u=()=>dl((m,g)=>g.from,l),d=()=>!Object.values(l).filter(Ag).length,h=null,f=m=>{a||(a=m);var g=m-a,b=g/t.dt;l=rP(t,l,b),i(Ht(Ht(Ht({},n),e),u())),a=m,d()||(h=s.setTimeout(f))};return()=>(h=s.setTimeout(f),()=>{h()})}function P3(n,e,t,r,i,s,a){var l=null,u=i.reduce((f,m)=>Ht(Ht({},f),{},{[m]:[n[m],e[m]]}),{}),d,h=f=>{d||(d=f);var m=(f-d)/r,g=dl((x,A)=>Uu(...A,t(m)),u);if(s(Ht(Ht(Ht({},n),e),g)),m<1)l=a.setTimeout(h);else{var b=dl((x,A)=>Uu(...A,t(1)),u);s(Ht(Ht(Ht({},n),e),b))}};return()=>(l=a.setTimeout(h),()=>{l()})}const k3=(n,e,t,r,i,s)=>{var a=A3(n,e);return t.isStepper===!0?C3(n,e,t,a,i,s):P3(n,e,t,r,a,i,s)};var Hu=1e-4,iP=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],sP=(n,e)=>n.map((t,r)=>t*e**r).reduce((t,r)=>t+r),MA=(n,e)=>t=>{var r=iP(n,e);return sP(r,t)},T3=(n,e)=>t=>{var r=iP(n,e),i=[...r.map((s,a)=>s*a).slice(1),0];return sP(i,t)},IA=function(){for(var e,t,r,i,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];if(a.length===1)switch(a[0]){case"linear":[e,r,t,i]=[0,0,1,1];break;case"ease":[e,r,t,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,i]=[.42,0,1,1];break;case"ease-out":[e,r,t,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,i]=[0,0,.58,1];break;default:{var u=a[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,t,i]=u[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else a.length===4&&([e,r,t,i]=a);var d=MA(e,t),h=MA(r,i),f=T3(e,t),m=b=>b>1?1:b<0?0:b,g=b=>{for(var x=b>1?1:b,A=x,E=0;E<8;++E){var C=d(A)-x,P=f(A);if(Math.abs(C-x)<Hu||P<Hu)return h(A);A=m(A-C/P)}return h(A)};return g.isStepper=!1,g},N3=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:i=17}=e,s=(a,l,u)=>{var d=-(a-l)*t,h=u*r,f=u+(d-h)*i/1e3,m=u*i/1e3+a;return Math.abs(m-l)<Hu&&Math.abs(f)<Hu?[l,0]:[m,f]};return s.isStepper=!0,s.dt=i,s},O3=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return IA(n);case"spring":return N3();default:if(n.split("(")[0]==="cubic-bezier")return IA(n)}return typeof n=="function"?n:null};function j3(n){var e,t=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var l=a,[u,...d]=l;if(typeof u=="number"){i=n.setTimeout(s.bind(null,d),u);return}s(u),i=n.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,t(e)),typeof a=="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(t=a,()=>{t=()=>null}),getTimeoutController:()=>n}}class M3{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=t?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function I3(){return j3(new M3)}var R3=_.createContext(I3);function D3(n,e){var t=_.useContext(R3);return _.useMemo(()=>e??t(n),[n,e,t])}var L3={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},RA={t:0},pm={t:1};function Dd(n){var e=fn(n,L3),{isActive:t,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:u,children:d}=e,h=D3(e.animationId,e.animationManager),[f,m]=_.useState(t?RA:pm),g=_.useRef(null);return _.useEffect(()=>{t||m(pm)},[t]),_.useEffect(()=>{if(!t||!r)return v3;var b=k3(RA,pm,O3(s),i,m,h.getTimeoutController()),x=()=>{g.current=b()};return h.start([u,a,x,i,l]),()=>{h.stop(),g.current&&g.current(),l()}},[t,r,i,s,a,u,l,h]),d(f.t)}function Ld(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=_.useRef(ll(e)),r=_.useRef(n);return r.current!==n&&(t.current=ll(e),r.current=n),t.current}function DA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function LA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(t),!0).forEach(function(r){F3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function F3(n,e,t){return(e=$3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $3(n){var e=B3(n,"string");return typeof e=="symbol"?e:e+""}function B3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wu.apply(null,arguments)}var FA=(n,e,t,r,i)=>{var s=Math.min(Math.abs(t)/2,Math.abs(r)/2),a=r>=0?1:-1,l=t>=0?1:-1,u=r>=0&&t>=0||r<0&&t<0?1:0,d;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>s?s:i[f];d="M".concat(n,",").concat(e+a*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(n+l*h[0],",").concat(e)),d+="L ".concat(n+t-l*h[1],",").concat(e),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(n+t,",").concat(e+a*h[1])),d+="L ".concat(n+t,",").concat(e+r-a*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(n+t-l*h[2],",").concat(e+r)),d+="L ".concat(n+l*h[3],",").concat(e+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(n,",").concat(e+r-a*h[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);d="M ".concat(n,",").concat(e+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(n+l*g,",").concat(e,`
            L `).concat(n+t-l*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(n+t,",").concat(e+a*g,`
            L `).concat(n+t,",").concat(e+r-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(n+t-l*g,",").concat(e+r,`
            L `).concat(n+l*g,",").concat(e+r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(n,",").concat(e+r-a*g," Z")}else d="M ".concat(n,",").concat(e," h ").concat(t," v ").concat(r," h ").concat(-t," Z");return d},z3={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aP=n=>{var e=fn(n,z3),t=_.useRef(null),[r,i]=_.useState(-1);_.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var H=t.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:s,y:a,width:l,height:u,radius:d,className:h}=e,{animationEasing:f,animationDuration:m,animationBegin:g,isAnimationActive:b,isUpdateAnimationActive:x}=e,A=_.useRef(l),E=_.useRef(u),C=_.useRef(s),P=_.useRef(a),T=_.useMemo(()=>({x:s,y:a,width:l,height:u,radius:d}),[s,a,l,u,d]),N=Ld(T,"rectangle-");if(s!==+s||a!==+a||l!==+l||u!==+u||l===0||u===0)return null;var O=He("recharts-rectangle",h);if(!x)return _.createElement("path",Wu({},kt(e,!0),{className:O,d:FA(s,a,l,u,d)}));var j=A.current,B=E.current,F=C.current,Y=P.current,V="0px ".concat(r===-1?1:r,"px"),K="".concat(r,"px 0px"),te=nP(["strokeDasharray"],m,typeof f=="string"?f:void 0);return _.createElement(Dd,{animationId:N,key:N,canBegin:r>0,duration:m,easing:f,isActive:x,begin:g},H=>{var ae=Wt(j,l,H),X=Wt(B,u,H),Q=Wt(F,s,H),Z=Wt(Y,a,H);t.current&&(A.current=ae,E.current=X,C.current=Q,P.current=Z);var $;return b?H>0?$={transition:te,strokeDasharray:K}:$={strokeDasharray:V}:$={strokeDasharray:K},_.createElement("path",Wu({},kt(e,!0),{className:O,d:FA(Q,Z,ae,X,d),ref:t,style:LA(LA({},$),e.style)}))})};function oP(n){var{cx:e,cy:t,radius:r,startAngle:i,endAngle:s}=n,a=xt(e,t,r,i),l=xt(e,t,r,s);return{points:[a,l],cx:e,cy:t,radius:r,startAngle:i,endAngle:s}}function Sg(){return Sg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sg.apply(null,arguments)}var U3=(n,e)=>{var t=Dt(e-n),r=Math.min(Math.abs(e-n),359.999);return t*r},lu=n=>{var{cx:e,cy:t,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:u}=n,d=l*(a?1:-1)+r,h=Math.asin(l/d)/zu,f=u?i:i+s*h,m=xt(e,t,d,f),g=xt(e,t,r,f),b=u?i-s*h:i,x=xt(e,t,d*Math.cos(h*zu),b);return{center:m,circleTangency:g,lineTangency:x,theta:h}},lP=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=n,l=U3(s,a),u=s+l,d=xt(e,t,i,s),h=xt(e,t,i,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var m=xt(e,t,r,s),g=xt(e,t,r,u);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(e,",").concat(t," Z");return f},H3=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:u,endAngle:d}=n,h=Dt(d-u),{circleTangency:f,lineTangency:m,theta:g}=lu({cx:e,cy:t,radius:i,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),{circleTangency:b,lineTangency:x,theta:A}=lu({cx:e,cy:t,radius:i,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(u-d):Math.abs(u-d)-g-A;if(E<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):lP({cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(r>0){var{circleTangency:P,lineTangency:T,theta:N}=lu({cx:e,cy:t,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:O,lineTangency:j,theta:B}=lu({cx:e,cy:t,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),F=l?Math.abs(u-d):Math.abs(u-d)-N-B;if(F<0&&s===0)return"".concat(C,"L").concat(e,",").concat(t,"Z");C+="L".concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(F>180),",").concat(+(h>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,"Z")}else C+="L".concat(e,",").concat(t,"Z");return C},W3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cP=n=>{var e=fn(n,W3),{cx:t,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:f}=e;if(s<i||d===h)return null;var m=He("recharts-sector",f),g=s-i,b=sn(a,g,0,!0),x;return b>0&&Math.abs(d-h)<360?x=H3({cx:t,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(b,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):x=lP({cx:t,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:h}),_.createElement("path",Sg({},kt(e,!0),{className:m,d:x}))};function q3(n,e,t){var r,i,s,a;if(n==="horizontal")r=e.x,s=r,i=t.top,a=t.top+t.height;else if(n==="vertical")i=e.y,a=i,r=t.left,s=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var{cx:l,cy:u,innerRadius:d,outerRadius:h,angle:f}=e,m=xt(l,u,d,f),g=xt(l,u,h,f);r=m.x,i=m.y,s=g.x,a=g.y}else return oP(e);return[{x:r,y:i},{x:s,y:a}]}var mm={},gm={},vm={},$A;function G3(){return $A||($A=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=mC();function t(r){return e.isSymbol(r)?NaN:Number(r)}n.toNumber=t})(vm)),vm}var BA;function V3(){return BA||(BA=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=G3();function t(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}n.toFinite=t})(gm)),gm}var zA;function K3(){return zA||(zA=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=gC(),t=V3();function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=t.toFinite(i),s===void 0?(s=i,i=0):s=t.toFinite(s),a=a===void 0?i<s?1:-1:t.toFinite(a);const l=Math.max(Math.ceil((s-i)/(a||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=a;return u}n.range=r})(mm)),mm}var ym,UA;function Y3(){return UA||(UA=1,ym=K3().range),ym}var X3=Y3();const uP=jr(X3);function Li(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Q3(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function jv(n){let e,t,r;n.length!==2?(e=Li,t=(l,u)=>Li(n(l),u),r=(l,u)=>n(l)-u):(e=n===Li||n===Q3?n:Z3,t=n,r=n);function i(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const f=d+h>>>1;t(l[f],u)<0?d=f+1:h=f}while(d<h)}return d}function s(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const f=d+h>>>1;t(l[f],u)<=0?d=f+1:h=f}while(d<h)}return d}function a(l,u,d=0,h=l.length){const f=i(l,u,d,h-1);return f>d&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:i,center:a,right:s}}function Z3(){return 0}function dP(n){return n===null?NaN:+n}function*J3(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const eF=jv(Li),Pl=eF.right;jv(dP).center;class HA extends Map{constructor(e,t=rF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(WA(this,e))}has(e){return super.has(WA(this,e))}set(e,t){return super.set(tF(this,e),t)}delete(e){return super.delete(nF(this,e))}}function WA({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function tF({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function nF({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function rF(n){return n!==null&&typeof n=="object"?n.valueOf():n}function iF(n=Li){if(n===Li)return hP;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function hP(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const sF=Math.sqrt(50),aF=Math.sqrt(10),oF=Math.sqrt(2);function qu(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=sF?10:s>=aF?5:s>=oF?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/a,l=Math.round(n*d),u=Math.round(e*d),l/d<n&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*a,l=Math.round(n/d),u=Math.round(e/d),l*d<n&&++l,u*d>e&&--u),u<l&&.5<=t&&t<2?qu(n,e,t*2):[l,u,d]}function _g(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,a]=r?qu(e,n,t):qu(n,e,t);if(!(s>=i))return[];const l=s-i+1,u=new Array(l);if(r)if(a<0)for(let d=0;d<l;++d)u[d]=(s-d)/-a;else for(let d=0;d<l;++d)u[d]=(s-d)*a;else if(a<0)for(let d=0;d<l;++d)u[d]=(i+d)/-a;else for(let d=0;d<l;++d)u[d]=(i+d)*a;return u}function Eg(n,e,t){return e=+e,n=+n,t=+t,qu(n,e,t)[2]}function Cg(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?Eg(e,n,t):Eg(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function qA(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function GA(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function fP(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?hP:iF(i);r>t;){if(r-t>600){const u=r-t+1,d=e-t+1,h=Math.log(u),f=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*f*(u-f)/u)*(d-u/2<0?-1:1),g=Math.max(t,Math.floor(e-d*f/u+m)),b=Math.min(r,Math.floor(e+(u-d)*f/u+m));fP(n,e,g,b,i)}const s=n[e];let a=t,l=r;for($o(n,t,e),i(n[r],s)>0&&$o(n,t,r);a<l;){for($o(n,a,l),++a,--l;i(n[a],s)<0;)++a;for(;i(n[l],s)>0;)--l}i(n[t],s)===0?$o(n,t,l):(++l,$o(n,l,r)),l<=e&&(t=l+1),e<=l&&(r=l-1)}return n}function $o(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function lF(n,e,t){if(n=Float64Array.from(J3(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return GA(n);if(e>=1)return qA(n);var r,i=(r-1)*e,s=Math.floor(i),a=qA(fP(n,s).subarray(0,s+1)),l=GA(n.subarray(s+1));return a+(l-a)*(i-s)}}function cF(n,e,t=dP){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,s=Math.floor(i),a=+t(n[s],s,n),l=+t(n[s+1],s+1,n);return a+(l-a)*(i-s)}}function uF(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(i);++r<i;)s[r]=n+r*t;return s}function ir(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function ii(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Pg=Symbol("implicit");function Mv(){var n=new HA,e=[],t=[],r=Pg;function i(s){let a=n.get(s);if(a===void 0){if(r!==Pg)return r;n.set(s,a=e.push(s)-1)}return t[a%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new HA;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Mv(e,t).unknown(r)},ir.apply(i,arguments),i}function Iv(){var n=Mv().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,s,a,l=!1,u=0,d=0,h=.5;delete n.unknown;function f(){var m=e().length,g=i<r,b=g?i:r,x=g?r:i;s=(x-b)/Math.max(1,m-u+d*2),l&&(s=Math.floor(s)),b+=(x-b-s*(m-u))*h,a=s*(1-u),l&&(b=Math.round(b),a=Math.round(a));var A=uF(m).map(function(E){return b+s*E});return t(g?A.reverse():A)}return n.domain=function(m){return arguments.length?(e(m),f()):e()},n.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},n.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,l=!0,f()},n.bandwidth=function(){return a},n.step=function(){return s},n.round=function(m){return arguments.length?(l=!!m,f()):l},n.padding=function(m){return arguments.length?(u=Math.min(1,d=+m),f()):u},n.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),f()):u},n.paddingOuter=function(m){return arguments.length?(d=+m,f()):d},n.align=function(m){return arguments.length?(h=Math.max(0,Math.min(1,m)),f()):h},n.copy=function(){return Iv(e(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},ir.apply(f(),arguments)}function pP(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return pP(e())},n}function dF(){return pP(Iv.apply(null,arguments).paddingInner(1))}function Rv(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function mP(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function kl(){}var hl=.7,Gu=1/hl,ya="\\s*([+-]?\\d+)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hF=/^#([0-9a-f]{3,8})$/,fF=new RegExp(`^rgb\\(${ya},${ya},${ya}\\)$`),pF=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),mF=new RegExp(`^rgba\\(${ya},${ya},${ya},${fl}\\)$`),gF=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${fl}\\)$`),vF=new RegExp(`^hsl\\(${fl},${Tr},${Tr}\\)$`),yF=new RegExp(`^hsla\\(${fl},${Tr},${Tr},${fl}\\)$`),VA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rv(kl,pl,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:KA,formatHex:KA,formatHex8:xF,formatHsl:bF,formatRgb:YA,toString:YA});function KA(){return this.rgb().formatHex()}function xF(){return this.rgb().formatHex8()}function bF(){return gP(this).formatHsl()}function YA(){return this.rgb().formatRgb()}function pl(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=hF.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?XA(e):t===3?new _n(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?cu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?cu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fF.exec(n))?new _n(e[1],e[2],e[3],1):(e=pF.exec(n))?new _n(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mF.exec(n))?cu(e[1],e[2],e[3],e[4]):(e=gF.exec(n))?cu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vF.exec(n))?JA(e[1],e[2]/100,e[3]/100,1):(e=yF.exec(n))?JA(e[1],e[2]/100,e[3]/100,e[4]):VA.hasOwnProperty(n)?XA(VA[n]):n==="transparent"?new _n(NaN,NaN,NaN,0):null}function XA(n){return new _n(n>>16&255,n>>8&255,n&255,1)}function cu(n,e,t,r){return r<=0&&(n=e=t=NaN),new _n(n,e,t,r)}function wF(n){return n instanceof kl||(n=pl(n)),n?(n=n.rgb(),new _n(n.r,n.g,n.b,n.opacity)):new _n}function kg(n,e,t,r){return arguments.length===1?wF(n):new _n(n,e,t,r??1)}function _n(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Rv(_n,kg,mP(kl,{brighter(n){return n=n==null?Gu:Math.pow(Gu,n),new _n(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?hl:Math.pow(hl,n),new _n(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new _n(bs(this.r),bs(this.g),bs(this.b),Vu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QA,formatHex:QA,formatHex8:AF,formatRgb:ZA,toString:ZA}));function QA(){return`#${hs(this.r)}${hs(this.g)}${hs(this.b)}`}function AF(){return`#${hs(this.r)}${hs(this.g)}${hs(this.b)}${hs((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZA(){const n=Vu(this.opacity);return`${n===1?"rgb(":"rgba("}${bs(this.r)}, ${bs(this.g)}, ${bs(this.b)}${n===1?")":`, ${n})`}`}function Vu(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function bs(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hs(n){return n=bs(n),(n<16?"0":"")+n.toString(16)}function JA(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new gr(n,e,t,r)}function gP(n){if(n instanceof gr)return new gr(n.h,n.s,n.l,n.opacity);if(n instanceof kl||(n=pl(n)),!n)return new gr;if(n instanceof gr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=NaN,l=s-i,u=(s+i)/2;return l?(e===s?a=(t-r)/l+(t<r)*6:t===s?a=(r-e)/l+2:a=(e-t)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new gr(a,l,u,n.opacity)}function SF(n,e,t,r){return arguments.length===1?gP(n):new gr(n,e,t,r??1)}function gr(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Rv(gr,SF,mP(kl,{brighter(n){return n=n==null?Gu:Math.pow(Gu,n),new gr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?hl:Math.pow(hl,n),new gr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new _n(xm(n>=240?n-240:n+120,i,r),xm(n,i,r),xm(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new gr(eS(this.h),uu(this.s),uu(this.l),Vu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Vu(this.opacity);return`${n===1?"hsl(":"hsla("}${eS(this.h)}, ${uu(this.s)*100}%, ${uu(this.l)*100}%${n===1?")":`, ${n})`}`}}));function eS(n){return n=(n||0)%360,n<0?n+360:n}function uu(n){return Math.max(0,Math.min(1,n||0))}function xm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Dv=n=>()=>n;function _F(n,e){return function(t){return n+t*e}}function EF(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function CF(n){return(n=+n)==1?vP:function(e,t){return t-e?EF(e,t,n):Dv(isNaN(e)?t:e)}}function vP(n,e){var t=e-n;return t?_F(n,t):Dv(isNaN(n)?e:n)}const tS=(function n(e){var t=CF(e);function r(i,s){var a=t((i=kg(i)).r,(s=kg(s)).r),l=t(i.g,s.g),u=t(i.b,s.b),d=vP(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=n,r})(1);function PF(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function kF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function TF(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),a;for(a=0;a<r;++a)i[a]=Fa(n[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function NF(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Ku(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function OF(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Fa(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var Tg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bm=new RegExp(Tg.source,"g");function jF(n){return function(){return n}}function MF(n){return function(e){return n(e)+""}}function IF(n,e){var t=Tg.lastIndex=bm.lastIndex=0,r,i,s,a=-1,l=[],u=[];for(n=n+"",e=e+"";(r=Tg.exec(n))&&(i=bm.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Ku(r,i)})),t=bm.lastIndex;return t<e.length&&(s=e.slice(t),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?MF(u[0].x):jF(e):(e=u.length,function(d){for(var h=0,f;h<e;++h)l[(f=u[h]).i]=f.x(d);return l.join("")})}function Fa(n,e){var t=typeof e,r;return e==null||t==="boolean"?Dv(e):(t==="number"?Ku:t==="string"?(r=pl(e))?(e=r,tS):IF:e instanceof pl?tS:e instanceof Date?NF:kF(e)?PF:Array.isArray(e)?TF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?OF:Ku)(n,e)}function Lv(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function RF(n,e){e===void 0&&(e=n,n=Fa);for(var t=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);t<r;)s[t]=n(i,i=e[++t]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function DF(n){return function(){return n}}function Yu(n){return+n}var nS=[0,1];function dn(n){return n}function Ng(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:DF(isNaN(e)?NaN:.5)}function LF(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function FF(n,e,t){var r=n[0],i=n[1],s=e[0],a=e[1];return i<r?(r=Ng(i,r),s=t(a,s)):(r=Ng(r,i),s=t(s,a)),function(l){return s(r(l))}}function $F(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ng(n[a],n[a+1]),s[a]=t(e[a],e[a+1]);return function(l){var u=Pl(n,l,1,r)-1;return s[u](i[u](l))}}function Tl(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Fd(){var n=nS,e=nS,t=Fa,r,i,s,a=dn,l,u,d;function h(){var m=Math.min(n.length,e.length);return a!==dn&&(a=LF(n[0],n[m-1])),l=m>2?$F:FF,u=d=null,f}function f(m){return m==null||isNaN(m=+m)?s:(u||(u=l(n.map(r),e,t)))(r(a(m)))}return f.invert=function(m){return a(i((d||(d=l(e,n.map(r),Ku)))(m)))},f.domain=function(m){return arguments.length?(n=Array.from(m,Yu),h()):n.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),h()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),t=Lv,h()},f.clamp=function(m){return arguments.length?(a=m?!0:dn,h()):a!==dn},f.interpolate=function(m){return arguments.length?(t=m,h()):t},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,g){return r=m,i=g,h()}}function Fv(){return Fd()(dn,dn)}function BF(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Xu(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Pa(n){return n=Xu(Math.abs(n)),n?n[1]:NaN}function zF(n,e){return function(t,r){for(var i=t.length,s=[],a=0,l=n[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),s.push(t.substring(i-=l,i+l)),!((u+=l+1)>r));)l=n[a=(a+1)%n.length];return s.reverse().join(e)}}function UF(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var HF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ml(n){if(!(e=HF.exec(n)))throw new Error("invalid format: "+n);var e;return new $v({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ml.prototype=$v.prototype;function $v(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}$v.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WF(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var yP;function qF(n,e){var t=Xu(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(yP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xu(n,Math.max(0,e+s-1))[0]}function rS(n,e){var t=Xu(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const iS={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:BF,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>rS(n*100,e),r:rS,s:qF,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function sS(n){return n}var aS=Array.prototype.map,oS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function GF(n){var e=n.grouping===void 0||n.thousands===void 0?sS:zF(aS.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?sS:UF(aS.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"−":n.minus+"",u=n.nan===void 0?"NaN":n.nan+"";function d(f){f=ml(f);var m=f.fill,g=f.align,b=f.sign,x=f.symbol,A=f.zero,E=f.width,C=f.comma,P=f.precision,T=f.trim,N=f.type;N==="n"?(C=!0,N="g"):iS[N]||(P===void 0&&(P=12),T=!0,N="g"),(A||m==="0"&&g==="=")&&(A=!0,m="0",g="=");var O=x==="$"?t:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",j=x==="$"?r:/[%p]/.test(N)?a:"",B=iS[N],F=/[defgprs%]/.test(N);P=P===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function Y(V){var K=O,te=j,H,ae,X;if(N==="c")te=B(V)+te,V="";else{V=+V;var Q=V<0||1/V<0;if(V=isNaN(V)?u:B(Math.abs(V),P),T&&(V=WF(V)),Q&&+V==0&&b!=="+"&&(Q=!1),K=(Q?b==="("?b:l:b==="-"||b==="("?"":b)+K,te=(N==="s"?oS[8+yP/3]:"")+te+(Q&&b==="("?")":""),F){for(H=-1,ae=V.length;++H<ae;)if(X=V.charCodeAt(H),48>X||X>57){te=(X===46?i+V.slice(H+1):V.slice(H))+te,V=V.slice(0,H);break}}}C&&!A&&(V=e(V,1/0));var Z=K.length+V.length+te.length,$=Z<E?new Array(E-Z+1).join(m):"";switch(C&&A&&(V=e($+V,$.length?E-te.length:1/0),$=""),g){case"<":V=K+V+te+$;break;case"=":V=K+$+V+te;break;case"^":V=$.slice(0,Z=$.length>>1)+K+V+te+$.slice(Z);break;default:V=$+K+V+te;break}return s(V)}return Y.toString=function(){return f+""},Y}function h(f,m){var g=d((f=ml(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(Pa(m)/3)))*3,x=Math.pow(10,-b),A=oS[8+b/3];return function(E){return g(x*E)+A}}return{format:d,formatPrefix:h}}var du,Bv,xP;VF({thousands:",",grouping:[3],currency:["$",""]});function VF(n){return du=GF(n),Bv=du.format,xP=du.formatPrefix,du}function KF(n){return Math.max(0,-Pa(Math.abs(n)))}function YF(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pa(e)/3)))*3-Pa(Math.abs(n)))}function XF(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Pa(e)-Pa(n))+1}function bP(n,e,t,r){var i=Cg(n,e,t),s;switch(r=ml(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=YF(i,a))&&(r.precision=s),xP(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=XF(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=KF(i))&&(r.precision=s-(r.type==="%")*2);break}}return Bv(r)}function Wi(n){var e=n.domain;return n.ticks=function(t){var r=e();return _g(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return bP(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],u,d,h=10;for(l<a&&(d=a,a=l,l=d,d=i,i=s,s=d);h-- >0;){if(d=Eg(a,l,t),d===u)return r[i]=a,r[s]=l,e(r);if(d>0)a=Math.floor(a/d)*d,l=Math.ceil(l/d)*d;else if(d<0)a=Math.ceil(a*d)/d,l=Math.floor(l*d)/d;else break;u=d}return n},n}function wP(){var n=Fv();return n.copy=function(){return Tl(n,wP())},ir.apply(n,arguments),Wi(n)}function AP(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,Yu),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return AP(n).unknown(e)},n=arguments.length?Array.from(n,Yu):[0,1],Wi(t)}function SP(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],s=n[r],a;return s<i&&(a=t,t=r,r=a,a=i,i=s,s=a),n[t]=e.floor(i),n[r]=e.ceil(s),n}function lS(n){return Math.log(n)}function cS(n){return Math.exp(n)}function QF(n){return-Math.log(-n)}function ZF(n){return-Math.exp(-n)}function JF(n){return isFinite(n)?+("1e"+n):n<0?0:n}function e4(n){return n===10?JF:n===Math.E?Math.exp:e=>Math.pow(n,e)}function t4(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function uS(n){return(e,t)=>-n(-e,t)}function zv(n){const e=n(lS,cS),t=e.domain;let r=10,i,s;function a(){return i=t4(r),s=e4(r),t()[0]<0?(i=uS(i),s=uS(s),n(QF,ZF)):n(lS,cS),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(t(l),a()):t()},e.ticks=l=>{const u=t();let d=u[0],h=u[u.length-1];const f=h<d;f&&([d,h]=[h,d]);let m=i(d),g=i(h),b,x;const A=l==null?10:+l;let E=[];if(!(r%1)&&g-m<A){if(m=Math.floor(m),g=Math.ceil(g),d>0){for(;m<=g;++m)for(b=1;b<r;++b)if(x=m<0?b/s(-m):b*s(m),!(x<d)){if(x>h)break;E.push(x)}}else for(;m<=g;++m)for(b=r-1;b>=1;--b)if(x=m>0?b/s(-m):b*s(m),!(x<d)){if(x>h)break;E.push(x)}E.length*2<A&&(E=_g(d,h,A))}else E=_g(m,g,Math.min(g-m,A)).map(s);return f?E.reverse():E},e.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ml(u)).precision==null&&(u.trim=!0),u=Bv(u)),l===1/0)return u;const d=Math.max(1,r*l/e.ticks().length);return h=>{let f=h/s(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=d?u(h):""}},e.nice=()=>t(SP(t(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function _P(){const n=zv(Fd()).domain([1,10]);return n.copy=()=>Tl(n,_P()).base(n.base()),ir.apply(n,arguments),n}function dS(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function hS(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Uv(n){var e=1,t=n(dS(e),hS(e));return t.constant=function(r){return arguments.length?n(dS(e=+r),hS(e)):e},Wi(t)}function EP(){var n=Uv(Fd());return n.copy=function(){return Tl(n,EP()).constant(n.constant())},ir.apply(n,arguments)}function fS(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function n4(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function r4(n){return n<0?-n*n:n*n}function Hv(n){var e=n(dn,dn),t=1;function r(){return t===1?n(dn,dn):t===.5?n(n4,r4):n(fS(t),fS(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Wi(e)}function Wv(){var n=Hv(Fd());return n.copy=function(){return Tl(n,Wv()).exponent(n.exponent())},ir.apply(n,arguments),n}function i4(){return Wv.apply(null,arguments).exponent(.5)}function pS(n){return Math.sign(n)*n*n}function s4(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function CP(){var n=Fv(),e=[0,1],t=!1,r;function i(s){var a=s4(n(s));return isNaN(a)?r:t?Math.round(a):a}return i.invert=function(s){return n.invert(pS(s))},i.domain=function(s){return arguments.length?(n.domain(s),i):n.domain()},i.range=function(s){return arguments.length?(n.range((e=Array.from(s,Yu)).map(pS)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(t=!!s,i):t},i.clamp=function(s){return arguments.length?(n.clamp(s),i):n.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return CP(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},ir.apply(i,arguments),Wi(i)}function PP(){var n=[],e=[],t=[],r;function i(){var a=0,l=Math.max(1,e.length);for(t=new Array(l-1);++a<l;)t[a-1]=cF(n,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Pl(t,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?t[l-1]:n[0],l<t.length?t[l]:n[n.length-1]]},s.domain=function(a){if(!arguments.length)return n.slice();n=[];for(let l of a)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(Li),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return t.slice()},s.copy=function(){return PP().domain(n).range(e).unknown(r)},ir.apply(s,arguments)}function kP(){var n=0,e=1,t=1,r=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Pl(r,u,0,t)]:s}function l(){var u=-1;for(r=new Array(t);++u<t;)r[u]=((u+1)*e-(u-t)*n)/(t+1);return a}return a.domain=function(u){return arguments.length?([n,e]=u,n=+n,e=+e,l()):[n,e]},a.range=function(u){return arguments.length?(t=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[n,r[0]]:d>=t?[r[t-1],e]:[r[d-1],r[d]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return kP().domain([n,e]).range(i).unknown(s)},ir.apply(Wi(a),arguments)}function TP(){var n=[.5],e=[0,1],t,r=1;function i(s){return s!=null&&s<=s?e[Pl(n,s,0,r)]:t}return i.domain=function(s){return arguments.length?(n=Array.from(s),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[n[a-1],n[a]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return TP().domain(n).range(e).unknown(t)},ir.apply(i,arguments)}const wm=new Date,Am=new Date;function Nt(n,e,t,r){function i(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(n(s=new Date(+s)),s),i.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let d;do u.push(d=new Date(+s)),e(s,l),n(s);while(d<s&&s<a);return u},i.filter=s=>Nt(a=>{if(a>=a)for(;n(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),t&&(i.count=(s,a)=>(wm.setTime(+s),Am.setTime(+a),n(wm),n(Am),Math.floor(t(wm,Am))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Qu=Nt(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);Qu.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Nt(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):Qu);Qu.range;const qr=1e3,er=qr*60,Gr=er*60,Qr=Gr*24,qv=Qr*7,mS=Qr*30,Sm=Qr*365,fs=Nt(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*qr)},(n,e)=>(e-n)/qr,n=>n.getUTCSeconds());fs.range;const Gv=Nt(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qr)},(n,e)=>{n.setTime(+n+e*er)},(n,e)=>(e-n)/er,n=>n.getMinutes());Gv.range;const Vv=Nt(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*er)},(n,e)=>(e-n)/er,n=>n.getUTCMinutes());Vv.range;const Kv=Nt(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qr-n.getMinutes()*er)},(n,e)=>{n.setTime(+n+e*Gr)},(n,e)=>(e-n)/Gr,n=>n.getHours());Kv.range;const Yv=Nt(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Gr)},(n,e)=>(e-n)/Gr,n=>n.getUTCHours());Yv.range;const Nl=Nt(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*er)/Qr,n=>n.getDate()-1);Nl.range;const $d=Nt(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Qr,n=>n.getUTCDate()-1);$d.range;const NP=Nt(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Qr,n=>Math.floor(n/Qr));NP.range;function Ds(n){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*er)/qv)}const Bd=Ds(0),Zu=Ds(1),a4=Ds(2),o4=Ds(3),ka=Ds(4),l4=Ds(5),c4=Ds(6);Bd.range;Zu.range;a4.range;o4.range;ka.range;l4.range;c4.range;function Ls(n){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/qv)}const zd=Ls(0),Ju=Ls(1),u4=Ls(2),d4=Ls(3),Ta=Ls(4),h4=Ls(5),f4=Ls(6);zd.range;Ju.range;u4.range;d4.range;Ta.range;h4.range;f4.range;const Xv=Nt(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Xv.range;const Qv=Nt(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Qv.range;const Zr=Nt(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Zr.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Zr.range;const Jr=Nt(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Jr.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Jr.range;function OP(n,e,t,r,i,s){const a=[[fs,1,qr],[fs,5,5*qr],[fs,15,15*qr],[fs,30,30*qr],[s,1,er],[s,5,5*er],[s,15,15*er],[s,30,30*er],[i,1,Gr],[i,3,3*Gr],[i,6,6*Gr],[i,12,12*Gr],[r,1,Qr],[r,2,2*Qr],[t,1,qv],[e,1,mS],[e,3,3*mS],[n,1,Sm]];function l(d,h,f){const m=h<d;m&&([d,h]=[h,d]);const g=f&&typeof f.range=="function"?f:u(d,h,f),b=g?g.range(d,+h+1):[];return m?b.reverse():b}function u(d,h,f){const m=Math.abs(h-d)/f,g=jv(([,,A])=>A).right(a,m);if(g===a.length)return n.every(Cg(d/Sm,h/Sm,f));if(g===0)return Qu.every(Math.max(Cg(d,h,f),1));const[b,x]=a[m/a[g-1][2]<a[g][2]/m?g-1:g];return b.every(x)}return[l,u]}const[p4,m4]=OP(Jr,Qv,zd,NP,Yv,Vv),[g4,v4]=OP(Zr,Xv,Bd,Nl,Kv,Gv);function _m(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Em(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Bo(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function y4(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,s=n.days,a=n.shortDays,l=n.months,u=n.shortMonths,d=zo(i),h=Uo(i),f=zo(s),m=Uo(s),g=zo(a),b=Uo(a),x=zo(l),A=Uo(l),E=zo(u),C=Uo(u),P={a:Q,A:Z,b:$,B:W,c:null,d:wS,e:wS,f:z4,g:Q4,G:J4,H:F4,I:$4,j:B4,L:jP,m:U4,M:H4,p:I,q:L,Q:_S,s:ES,S:W4,u:q4,U:G4,V:V4,w:K4,W:Y4,x:null,X:null,y:X4,Y:Z4,Z:e5,"%":SS},T={a:oe,A:be,b:we,B:le,c:null,d:AS,e:AS,f:i5,g:p5,G:g5,H:t5,I:n5,j:r5,L:IP,m:s5,M:a5,p:me,q:Oe,Q:_S,s:ES,S:o5,u:l5,U:c5,V:u5,w:d5,W:h5,x:null,X:null,y:f5,Y:m5,Z:v5,"%":SS},N={a:Y,A:V,b:K,B:te,c:H,d:xS,e:xS,f:I4,g:yS,G:vS,H:bS,I:bS,j:N4,L:M4,m:T4,M:O4,p:F,q:k4,Q:D4,s:L4,S:j4,u:S4,U:_4,V:E4,w:A4,W:C4,x:ae,X,y:yS,Y:vS,Z:P4,"%":R4};P.x=O(t,P),P.X=O(r,P),P.c=O(e,P),T.x=O(t,T),T.X=O(r,T),T.c=O(e,T);function O(ie,Ae){return function(Ie){var re=[],At=-1,Be=0,qt=ie.length,Gt,sr,Va;for(Ie instanceof Date||(Ie=new Date(+Ie));++At<qt;)ie.charCodeAt(At)===37&&(re.push(ie.slice(Be,At)),(sr=gS[Gt=ie.charAt(++At)])!=null?Gt=ie.charAt(++At):sr=Gt==="e"?" ":"0",(Va=Ae[Gt])&&(Gt=Va(Ie,sr)),re.push(Gt),Be=At+1);return re.push(ie.slice(Be,At)),re.join("")}}function j(ie,Ae){return function(Ie){var re=Bo(1900,void 0,1),At=B(re,ie,Ie+="",0),Be,qt;if(At!=Ie.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(Ae&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Be=Em(Bo(re.y,0,1)),qt=Be.getUTCDay(),Be=qt>4||qt===0?Ju.ceil(Be):Ju(Be),Be=$d.offset(Be,(re.V-1)*7),re.y=Be.getUTCFullYear(),re.m=Be.getUTCMonth(),re.d=Be.getUTCDate()+(re.w+6)%7):(Be=_m(Bo(re.y,0,1)),qt=Be.getDay(),Be=qt>4||qt===0?Zu.ceil(Be):Zu(Be),Be=Nl.offset(Be,(re.V-1)*7),re.y=Be.getFullYear(),re.m=Be.getMonth(),re.d=Be.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),qt="Z"in re?Em(Bo(re.y,0,1)).getUTCDay():_m(Bo(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(qt+5)%7:re.w+re.U*7-(qt+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,Em(re)):_m(re)}}function B(ie,Ae,Ie,re){for(var At=0,Be=Ae.length,qt=Ie.length,Gt,sr;At<Be;){if(re>=qt)return-1;if(Gt=Ae.charCodeAt(At++),Gt===37){if(Gt=Ae.charAt(At++),sr=N[Gt in gS?Ae.charAt(At++):Gt],!sr||(re=sr(ie,Ie,re))<0)return-1}else if(Gt!=Ie.charCodeAt(re++))return-1}return re}function F(ie,Ae,Ie){var re=d.exec(Ae.slice(Ie));return re?(ie.p=h.get(re[0].toLowerCase()),Ie+re[0].length):-1}function Y(ie,Ae,Ie){var re=g.exec(Ae.slice(Ie));return re?(ie.w=b.get(re[0].toLowerCase()),Ie+re[0].length):-1}function V(ie,Ae,Ie){var re=f.exec(Ae.slice(Ie));return re?(ie.w=m.get(re[0].toLowerCase()),Ie+re[0].length):-1}function K(ie,Ae,Ie){var re=E.exec(Ae.slice(Ie));return re?(ie.m=C.get(re[0].toLowerCase()),Ie+re[0].length):-1}function te(ie,Ae,Ie){var re=x.exec(Ae.slice(Ie));return re?(ie.m=A.get(re[0].toLowerCase()),Ie+re[0].length):-1}function H(ie,Ae,Ie){return B(ie,e,Ae,Ie)}function ae(ie,Ae,Ie){return B(ie,t,Ae,Ie)}function X(ie,Ae,Ie){return B(ie,r,Ae,Ie)}function Q(ie){return a[ie.getDay()]}function Z(ie){return s[ie.getDay()]}function $(ie){return u[ie.getMonth()]}function W(ie){return l[ie.getMonth()]}function I(ie){return i[+(ie.getHours()>=12)]}function L(ie){return 1+~~(ie.getMonth()/3)}function oe(ie){return a[ie.getUTCDay()]}function be(ie){return s[ie.getUTCDay()]}function we(ie){return u[ie.getUTCMonth()]}function le(ie){return l[ie.getUTCMonth()]}function me(ie){return i[+(ie.getUTCHours()>=12)]}function Oe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var Ae=O(ie+="",P);return Ae.toString=function(){return ie},Ae},parse:function(ie){var Ae=j(ie+="",!1);return Ae.toString=function(){return ie},Ae},utcFormat:function(ie){var Ae=O(ie+="",T);return Ae.toString=function(){return ie},Ae},utcParse:function(ie){var Ae=j(ie+="",!0);return Ae.toString=function(){return ie},Ae}}}var gS={"-":"",_:" ",0:"0"},Ft=/^\s*\d+/,x4=/^%/,b4=/[\\^$*+?|[\]().{}]/g;function Fe(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",s=i.length;return r+(s<t?new Array(t-s+1).join(e)+i:i)}function w4(n){return n.replace(b4,"\\$&")}function zo(n){return new RegExp("^(?:"+n.map(w4).join("|")+")","i")}function Uo(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function A4(n,e,t){var r=Ft.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function S4(n,e,t){var r=Ft.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function _4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function E4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function C4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function vS(n,e,t){var r=Ft.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function yS(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function P4(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function k4(n,e,t){var r=Ft.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function T4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function xS(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function N4(n,e,t){var r=Ft.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function bS(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function O4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function j4(n,e,t){var r=Ft.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function M4(n,e,t){var r=Ft.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function I4(n,e,t){var r=Ft.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function R4(n,e,t){var r=x4.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function D4(n,e,t){var r=Ft.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function L4(n,e,t){var r=Ft.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function wS(n,e){return Fe(n.getDate(),e,2)}function F4(n,e){return Fe(n.getHours(),e,2)}function $4(n,e){return Fe(n.getHours()%12||12,e,2)}function B4(n,e){return Fe(1+Nl.count(Zr(n),n),e,3)}function jP(n,e){return Fe(n.getMilliseconds(),e,3)}function z4(n,e){return jP(n,e)+"000"}function U4(n,e){return Fe(n.getMonth()+1,e,2)}function H4(n,e){return Fe(n.getMinutes(),e,2)}function W4(n,e){return Fe(n.getSeconds(),e,2)}function q4(n){var e=n.getDay();return e===0?7:e}function G4(n,e){return Fe(Bd.count(Zr(n)-1,n),e,2)}function MP(n){var e=n.getDay();return e>=4||e===0?ka(n):ka.ceil(n)}function V4(n,e){return n=MP(n),Fe(ka.count(Zr(n),n)+(Zr(n).getDay()===4),e,2)}function K4(n){return n.getDay()}function Y4(n,e){return Fe(Zu.count(Zr(n)-1,n),e,2)}function X4(n,e){return Fe(n.getFullYear()%100,e,2)}function Q4(n,e){return n=MP(n),Fe(n.getFullYear()%100,e,2)}function Z4(n,e){return Fe(n.getFullYear()%1e4,e,4)}function J4(n,e){var t=n.getDay();return n=t>=4||t===0?ka(n):ka.ceil(n),Fe(n.getFullYear()%1e4,e,4)}function e5(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fe(e/60|0,"0",2)+Fe(e%60,"0",2)}function AS(n,e){return Fe(n.getUTCDate(),e,2)}function t5(n,e){return Fe(n.getUTCHours(),e,2)}function n5(n,e){return Fe(n.getUTCHours()%12||12,e,2)}function r5(n,e){return Fe(1+$d.count(Jr(n),n),e,3)}function IP(n,e){return Fe(n.getUTCMilliseconds(),e,3)}function i5(n,e){return IP(n,e)+"000"}function s5(n,e){return Fe(n.getUTCMonth()+1,e,2)}function a5(n,e){return Fe(n.getUTCMinutes(),e,2)}function o5(n,e){return Fe(n.getUTCSeconds(),e,2)}function l5(n){var e=n.getUTCDay();return e===0?7:e}function c5(n,e){return Fe(zd.count(Jr(n)-1,n),e,2)}function RP(n){var e=n.getUTCDay();return e>=4||e===0?Ta(n):Ta.ceil(n)}function u5(n,e){return n=RP(n),Fe(Ta.count(Jr(n),n)+(Jr(n).getUTCDay()===4),e,2)}function d5(n){return n.getUTCDay()}function h5(n,e){return Fe(Ju.count(Jr(n)-1,n),e,2)}function f5(n,e){return Fe(n.getUTCFullYear()%100,e,2)}function p5(n,e){return n=RP(n),Fe(n.getUTCFullYear()%100,e,2)}function m5(n,e){return Fe(n.getUTCFullYear()%1e4,e,4)}function g5(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Ta(n):Ta.ceil(n),Fe(n.getUTCFullYear()%1e4,e,4)}function v5(){return"+0000"}function SS(){return"%"}function _S(n){return+n}function ES(n){return Math.floor(+n/1e3)}var fa,DP,LP;y5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y5(n){return fa=y4(n),DP=fa.format,fa.parse,LP=fa.utcFormat,fa.utcParse,fa}function x5(n){return new Date(n)}function b5(n){return n instanceof Date?+n:+new Date(+n)}function Zv(n,e,t,r,i,s,a,l,u,d){var h=Fv(),f=h.invert,m=h.domain,g=d(".%L"),b=d(":%S"),x=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),C=d("%b %d"),P=d("%B"),T=d("%Y");function N(O){return(u(O)<O?g:l(O)<O?b:a(O)<O?x:s(O)<O?A:r(O)<O?i(O)<O?E:C:t(O)<O?P:T)(O)}return h.invert=function(O){return new Date(f(O))},h.domain=function(O){return arguments.length?m(Array.from(O,b5)):m().map(x5)},h.ticks=function(O){var j=m();return n(j[0],j[j.length-1],O??10)},h.tickFormat=function(O,j){return j==null?N:d(j)},h.nice=function(O){var j=m();return(!O||typeof O.range!="function")&&(O=e(j[0],j[j.length-1],O??10)),O?m(SP(j,O)):h},h.copy=function(){return Tl(h,Zv(n,e,t,r,i,s,a,l,u,d))},h}function w5(){return ir.apply(Zv(g4,v4,Zr,Xv,Bd,Nl,Kv,Gv,fs,DP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A5(){return ir.apply(Zv(p4,m4,Jr,Qv,zd,$d,Yv,Vv,fs,LP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ud(){var n=0,e=1,t,r,i,s,a=dn,l=!1,u;function d(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(s(f)-t)*i,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([n,e]=f,t=s(n=+n),r=s(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(a=f,d):a};function h(f){return function(m){var g,b;return arguments.length?([g,b]=m,a=f(g,b),d):[a(0),a(1)]}}return d.range=h(Fa),d.rangeRound=h(Lv),d.unknown=function(f){return arguments.length?(u=f,d):u},function(f){return s=f,t=f(n),r=f(e),i=t===r?0:1/(r-t),d}}function qi(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function FP(){var n=Wi(Ud()(dn));return n.copy=function(){return qi(n,FP())},ii.apply(n,arguments)}function $P(){var n=zv(Ud()).domain([1,10]);return n.copy=function(){return qi(n,$P()).base(n.base())},ii.apply(n,arguments)}function BP(){var n=Uv(Ud());return n.copy=function(){return qi(n,BP()).constant(n.constant())},ii.apply(n,arguments)}function Jv(){var n=Hv(Ud());return n.copy=function(){return qi(n,Jv()).exponent(n.exponent())},ii.apply(n,arguments)}function S5(){return Jv.apply(null,arguments).exponent(.5)}function zP(){var n=[],e=dn;function t(r){if(r!=null&&!isNaN(r=+r))return e((Pl(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Li),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,s)=>lF(n,s/r))},t.copy=function(){return zP(e).domain(n)},ii.apply(t,arguments)}function Hd(){var n=0,e=.5,t=1,r=1,i,s,a,l,u,d=dn,h,f=!1,m;function g(x){return isNaN(x=+x)?m:(x=.5+((x=+h(x))-s)*(r*x<r*s?l:u),d(f?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([n,e,t]=x,i=h(n=+n),s=h(e=+e),a=h(t=+t),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),r=s<i?-1:1,g):[n,e,t]},g.clamp=function(x){return arguments.length?(f=!!x,g):f},g.interpolator=function(x){return arguments.length?(d=x,g):d};function b(x){return function(A){var E,C,P;return arguments.length?([E,C,P]=A,d=RF(x,[E,C,P]),g):[d(0),d(.5),d(1)]}}return g.range=b(Fa),g.rangeRound=b(Lv),g.unknown=function(x){return arguments.length?(m=x,g):m},function(x){return h=x,i=x(n),s=x(e),a=x(t),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),r=s<i?-1:1,g}}function UP(){var n=Wi(Hd()(dn));return n.copy=function(){return qi(n,UP())},ii.apply(n,arguments)}function HP(){var n=zv(Hd()).domain([.1,1,10]);return n.copy=function(){return qi(n,HP()).base(n.base())},ii.apply(n,arguments)}function WP(){var n=Uv(Hd());return n.copy=function(){return qi(n,WP()).constant(n.constant())},ii.apply(n,arguments)}function ey(){var n=Hv(Hd());return n.copy=function(){return qi(n,ey()).exponent(n.exponent())},ii.apply(n,arguments)}function _5(){return ey.apply(null,arguments).exponent(.5)}const Yo=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iv,scaleDiverging:UP,scaleDivergingLog:HP,scaleDivergingPow:ey,scaleDivergingSqrt:_5,scaleDivergingSymlog:WP,scaleIdentity:AP,scaleImplicit:Pg,scaleLinear:wP,scaleLog:_P,scaleOrdinal:Mv,scalePoint:dF,scalePow:Wv,scaleQuantile:PP,scaleQuantize:kP,scaleRadial:CP,scaleSequential:FP,scaleSequentialLog:$P,scaleSequentialPow:Jv,scaleSequentialQuantile:zP,scaleSequentialSqrt:S5,scaleSequentialSymlog:BP,scaleSqrt:i4,scaleSymlog:EP,scaleThreshold:TP,scaleTime:w5,scaleUtc:A5,tickFormat:bP},Symbol.toStringTag,{value:"Module"}));var Gi=n=>n.chartData,ty=q([Gi],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),ny=(n,e,t,r)=>r?ty(n):Gi(n);function Na(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if($n(e)&&$n(t))return!0}return!1}function CS(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function E5(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,r]=n,i,s;if($n(t))i=t;else if(typeof t=="function")return;if($n(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(Na(a))return a}}function C5(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var r=n(e,t);if(Na(r))return CS(r,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[i,s]=n,a,l;if(i==="auto")e!=null&&(a=Math.min(...e));else if(xe(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&gA.test(i)){var u=gA.exec(i);if(u==null||e==null)a=void 0;else{var d=+u[1];a=e[0]-d}}else a=e?.[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(xe(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e?.[1]))}catch{}else if(typeof s=="string"&&vA.test(s)){var h=vA.exec(s);if(h==null||e==null)l=void 0;else{var f=+h[1];l=e[1]+f}}else l=e?.[1];var m=[a,l];if(Na(m))return e==null?m:CS(m,e,t)}}}var $a=1e9,P5={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},iy,nt=!0,nr="[DecimalError] ",ws=nr+"Invalid argument: ",ry=nr+"Exponent out of range: ",Ba=Math.floor,us=Math.pow,k5=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,In,Rt=1e7,Qe=7,qP=9007199254740991,ed=Ba(qP/Qe),de={};de.absoluteValue=de.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};de.comparedTo=de.cmp=function(n){var e,t,r,i,s=this;if(n=new s.constructor(n),s.s!==n.s)return s.s||-n.s;if(s.e!==n.e)return s.e>n.e^s.s<0?1:-1;for(r=s.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(s.d[e]!==n.d[e])return s.d[e]>n.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};de.decimalPlaces=de.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Qe;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};de.dividedBy=de.div=function(n){return Kr(this,new this.constructor(n))};de.dividedToIntegerBy=de.idiv=function(n){var e=this,t=e.constructor;return qe(Kr(e,new t(n),0,1),t.precision)};de.equals=de.eq=function(n){return!this.cmp(n)};de.exponent=function(){return wt(this)};de.greaterThan=de.gt=function(n){return this.cmp(n)>0};de.greaterThanOrEqualTo=de.gte=function(n){return this.cmp(n)>=0};de.isInteger=de.isint=function(){return this.e>this.d.length-2};de.isNegative=de.isneg=function(){return this.s<0};de.isPositive=de.ispos=function(){return this.s>0};de.isZero=function(){return this.s===0};de.lessThan=de.lt=function(n){return this.cmp(n)<0};de.lessThanOrEqualTo=de.lte=function(n){return this.cmp(n)<1};de.logarithm=de.log=function(n){var e,t=this,r=t.constructor,i=r.precision,s=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(In))throw Error(nr+"NaN");if(t.s<1)throw Error(nr+(t.s?"NaN":"-Infinity"));return t.eq(In)?new r(0):(nt=!1,e=Kr(gl(t,s),gl(n,s),s),nt=!0,qe(e,i))};de.minus=de.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?KP(e,n):GP(e,(n.s=-n.s,n))};de.modulo=de.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(nr+"NaN");return t.s?(nt=!1,e=Kr(t,n,0,1).times(n),nt=!0,t.minus(e)):qe(new r(t),i)};de.naturalExponential=de.exp=function(){return VP(this)};de.naturalLogarithm=de.ln=function(){return gl(this)};de.negated=de.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};de.plus=de.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?GP(e,n):KP(e,(n.s=-n.s,n))};de.precision=de.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ws+n);if(e=wt(i)+1,r=i.d.length-1,t=r*Qe+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};de.squareRoot=de.sqrt=function(){var n,e,t,r,i,s,a,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(nr+"NaN")}for(n=wt(l),nt=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=kr(l.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=Ba((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new u(e)):r=new u(i.toString()),t=u.precision,i=a=t+3;;)if(s=r,r=s.plus(Kr(l,s,a+2)).times(.5),kr(s.d).slice(0,a)===(e=kr(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qe(s,t+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;a+=4}return nt=!0,qe(r,t)};de.times=de.mul=function(n){var e,t,r,i,s,a,l,u,d,h=this,f=h.constructor,m=h.d,g=(n=new f(n)).d;if(!h.s||!n.s)return new f(0);for(n.s*=h.s,t=h.e+n.e,u=m.length,d=g.length,u<d&&(s=m,m=g,g=s,a=u,u=d,d=a),s=[],a=u+d,r=a;r--;)s.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)l=s[i]+g[r]*m[i-r-1]+e,s[i--]=l%Rt|0,e=l/Rt|0;s[i]=(s[i]+e)%Rt|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),n.d=s,n.e=t,nt?qe(n,f.precision):n};de.toDecimalPlaces=de.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Or(n,0,$a),e===void 0?e=r.rounding:Or(e,0,8),qe(t,n+wt(t)+1,e))};de.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Ps(r,!0):(Or(n,0,$a),e===void 0?e=i.rounding:Or(e,0,8),r=qe(new i(r),n+1,e),t=Ps(r,!0,n+1)),t};de.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?Ps(i):(Or(n,0,$a),e===void 0?e=s.rounding:Or(e,0,8),r=qe(new s(i),n+wt(i)+1,e),t=Ps(r.abs(),!1,n+wt(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};de.toInteger=de.toint=function(){var n=this,e=n.constructor;return qe(new e(n),wt(n)+1,e.rounding)};de.toNumber=function(){return+this};de.toPower=de.pow=function(n){var e,t,r,i,s,a,l=this,u=l.constructor,d=12,h=+(n=new u(n));if(!n.s)return new u(In);if(l=new u(l),!l.s){if(n.s<1)throw Error(nr+"Infinity");return l}if(l.eq(In))return l;if(r=u.precision,n.eq(In))return qe(l,r);if(e=n.e,t=n.d.length-1,a=e>=t,s=l.s,a){if((t=h<0?-h:h)<=qP){for(i=new u(In),e=Math.ceil(r/Qe+4),nt=!1;t%2&&(i=i.times(l),kS(i.d,e)),t=Ba(t/2),t!==0;)l=l.times(l),kS(l.d,e);return nt=!0,n.s<0?new u(In).div(i):qe(i,r)}}else if(s<0)throw Error(nr+"NaN");return s=s<0&&n.d[Math.max(e,t)]&1?-1:1,l.s=1,nt=!1,i=n.times(gl(l,r+d)),nt=!0,i=VP(i),i.s=s,i};de.toPrecision=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?(t=wt(i),r=Ps(i,t<=s.toExpNeg||t>=s.toExpPos)):(Or(n,1,$a),e===void 0?e=s.rounding:Or(e,0,8),i=qe(new s(i),n,e),t=wt(i),r=Ps(i,n<=t||t<=s.toExpNeg,n)),r};de.toSignificantDigits=de.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Or(n,1,$a),e===void 0?e=r.rounding:Or(e,0,8)),qe(new r(t),n,e)};de.toString=de.valueOf=de.val=de.toJSON=de[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=wt(n),t=n.constructor;return Ps(n,e<=t.toExpNeg||e>=t.toExpPos)};function GP(n,e){var t,r,i,s,a,l,u,d,h=n.constructor,f=h.precision;if(!n.s||!e.s)return e.s||(e=new h(n)),nt?qe(e,f):e;if(u=n.d,d=e.d,a=n.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(r=u,s=-s,l=d.length):(r=d,i=a,l=u.length),a=Math.ceil(f/Qe),l=a>l?a+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=u.length,s=d.length,l-s<0&&(s=l,r=d,d=u,u=r),t=0;s;)t=(u[--s]=u[s]+d[s]+t)/Rt|0,u[s]%=Rt;for(t&&(u.unshift(t),++i),l=u.length;u[--l]==0;)u.pop();return e.d=u,e.e=i,nt?qe(e,f):e}function Or(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ws+n)}function kr(n){var e,t,r,i=n.length-1,s="",a=n[0];if(i>0){for(s+=a,e=1;e<i;e++)r=n[e]+"",t=Qe-r.length,t&&(s+=ki(t)),s+=r;a=n[e],r=a+"",t=Qe-r.length,t&&(s+=ki(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Kr=(function(){function n(r,i){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%Rt|0,a=s/Rt|0;return a&&r.unshift(a),r}function e(r,i,s,a){var l,u;if(s!=a)u=s>a?1:-1;else for(l=u=0;l<s;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function t(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*Rt+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var l,u,d,h,f,m,g,b,x,A,E,C,P,T,N,O,j,B,F=r.constructor,Y=r.s==i.s?1:-1,V=r.d,K=i.d;if(!r.s)return new F(r);if(!i.s)throw Error(nr+"Division by zero");for(u=r.e-i.e,j=K.length,N=V.length,g=new F(Y),b=g.d=[],d=0;K[d]==(V[d]||0);)++d;if(K[d]>(V[d]||0)&&--u,s==null?C=s=F.precision:a?C=s+(wt(r)-wt(i))+1:C=s,C<0)return new F(0);if(C=C/Qe+2|0,d=0,j==1)for(h=0,K=K[0],C++;(d<N||h)&&C--;d++)P=h*Rt+(V[d]||0),b[d]=P/K|0,h=P%K|0;else{for(h=Rt/(K[0]+1)|0,h>1&&(K=n(K,h),V=n(V,h),j=K.length,N=V.length),T=j,x=V.slice(0,j),A=x.length;A<j;)x[A++]=0;B=K.slice(),B.unshift(0),O=K[0],K[1]>=Rt/2&&++O;do h=0,l=e(K,x,j,A),l<0?(E=x[0],j!=A&&(E=E*Rt+(x[1]||0)),h=E/O|0,h>1?(h>=Rt&&(h=Rt-1),f=n(K,h),m=f.length,A=x.length,l=e(f,x,m,A),l==1&&(h--,t(f,j<m?B:K,m))):(h==0&&(l=h=1),f=K.slice()),m=f.length,m<A&&f.unshift(0),t(x,f,A),l==-1&&(A=x.length,l=e(K,x,j,A),l<1&&(h++,t(x,j<A?B:K,A))),A=x.length):l===0&&(h++,x=[0]),b[d++]=h,l&&x[0]?x[A++]=V[T]||0:(x=[V[T]],A=1);while((T++<N||x[0]!==void 0)&&C--)}return b[0]||b.shift(),g.e=u,qe(g,a?s+wt(g)+1:s)}})();function VP(n,e){var t,r,i,s,a,l,u=0,d=0,h=n.constructor,f=h.precision;if(wt(n)>16)throw Error(ry+wt(n));if(!n.s)return new h(In);for(nt=!1,l=f,a=new h(.03125);n.abs().gte(.1);)n=n.times(a),d+=5;for(r=Math.log(us(2,d))/Math.LN10*2+5|0,l+=r,t=i=s=new h(In),h.precision=l;;){if(i=qe(i.times(n),l),t=t.times(++u),a=s.plus(Kr(i,t,l)),kr(a.d).slice(0,l)===kr(s.d).slice(0,l)){for(;d--;)s=qe(s.times(s),l);return h.precision=f,e==null?(nt=!0,qe(s,f)):s}s=a}}function wt(n){for(var e=n.e*Qe,t=n.d[0];t>=10;t/=10)e++;return e}function Cm(n,e,t){if(e>n.LN10.sd())throw nt=!0,t&&(n.precision=t),Error(nr+"LN10 precision limit exceeded");return qe(new n(n.LN10),e)}function ki(n){for(var e="";n--;)e+="0";return e}function gl(n,e){var t,r,i,s,a,l,u,d,h,f=1,m=10,g=n,b=g.d,x=g.constructor,A=x.precision;if(g.s<1)throw Error(nr+(g.s?"NaN":"-Infinity"));if(g.eq(In))return new x(0);if(e==null?(nt=!1,d=A):d=e,g.eq(10))return e==null&&(nt=!0),Cm(x,d);if(d+=m,x.precision=d,t=kr(b),r=t.charAt(0),s=wt(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)g=g.times(n),t=kr(g.d),r=t.charAt(0),f++;s=wt(g),r>1?(g=new x("0."+t),s++):g=new x(r+"."+t.slice(1))}else return u=Cm(x,d+2,A).times(s+""),g=gl(new x(r+"."+t.slice(1)),d-m).plus(u),x.precision=A,e==null?(nt=!0,qe(g,A)):g;for(l=a=g=Kr(g.minus(In),g.plus(In),d),h=qe(g.times(g),d),i=3;;){if(a=qe(a.times(h),d),u=l.plus(Kr(a,new x(i),d)),kr(u.d).slice(0,d)===kr(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(Cm(x,d+2,A).times(s+""))),l=Kr(l,new x(f),d),x.precision=A,e==null?(nt=!0,qe(l,A)):l;l=u,i+=2}}function PS(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=Ba(t/Qe),n.d=[],r=(t+1)%Qe,t<0&&(r+=Qe),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Qe;r<i;)n.d.push(+e.slice(r,r+=Qe));e=e.slice(r),r=Qe-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),nt&&(n.e>ed||n.e<-ed))throw Error(ry+t)}else n.s=0,n.e=0,n.d=[0];return n}function qe(n,e,t){var r,i,s,a,l,u,d,h,f=n.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=Qe,i=e,d=f[h=0];else{if(h=Math.ceil((r+1)/Qe),s=f.length,h>=s)return n;for(d=s=f[h],a=1;s>=10;s/=10)a++;r%=Qe,i=r-Qe+a}if(t!==void 0&&(s=us(10,a-i-1),l=d/s%10|0,u=e<0||f[h+1]!==void 0||d%s,u=t<4?(l||u)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||u||t==6&&(r>0?i>0?d/us(10,a-i):0:f[h-1])%10&1||t==(n.s<0?8:7))),e<1||!f[0])return u?(s=wt(n),f.length=1,e=e-s-1,f[0]=us(10,(Qe-e%Qe)%Qe),n.e=Ba(-e/Qe)||0):(f.length=1,f[0]=n.e=n.s=0),n;if(r==0?(f.length=h,s=1,h--):(f.length=h+1,s=us(10,Qe-r),f[h]=i>0?(d/us(10,a-i)%us(10,i)|0)*s:0),u)for(;;)if(h==0){(f[0]+=s)==Rt&&(f[0]=1,++n.e);break}else{if(f[h]+=s,f[h]!=Rt)break;f[h--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(nt&&(n.e>ed||n.e<-ed))throw Error(ry+wt(n));return n}function KP(n,e){var t,r,i,s,a,l,u,d,h,f,m=n.constructor,g=m.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new m(n),nt?qe(e,g):e;if(u=n.d,f=e.d,r=e.e,d=n.e,u=u.slice(),a=d-r,a){for(h=a<0,h?(t=u,a=-a,l=f.length):(t=f,r=d,l=u.length),i=Math.max(Math.ceil(g/Qe),l)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=u.length,l=f.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=f[i]){h=u[i]<f[i];break}a=0}for(h&&(t=u,u=f,f=t,e.s=-e.s),l=u.length,i=f.length-l;i>0;--i)u[l++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(s=i;s&&u[--s]===0;)u[s]=Rt-1;--u[s],u[i]+=Rt}u[i]-=f[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,nt?qe(e,g):e):new m(0)}function Ps(n,e,t){var r,i=wt(n),s=kr(n.d),a=s.length;return e?(t&&(r=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+ki(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+ki(-i-1)+s,t&&(r=t-a)>0&&(s+=ki(r))):i>=a?(s+=ki(i+1-a),t&&(r=t-i-1)>0&&(s=s+"."+ki(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-a)>0&&(i+1===a&&(s+="."),s+=ki(r))),n.s<0?"-"+s:s}function kS(n,e){if(n.length>e)return n.length=e,!0}function YP(n){var e,t,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ws+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return PS(a,s.toString())}else if(typeof s!="string")throw Error(ws+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,k5.test(s))PS(a,s);else throw Error(ws+s)}if(i.prototype=de,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=YP,i.config=i.set=T5,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function T5(n){if(!n||typeof n!="object")throw Error(nr+"Object expected");var e,t,r,i=["precision",1,$a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(Ba(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(ws+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(ws+t+": "+r);return this}var iy=YP(P5);In=new iy(1);const Ue=iy;var N5=n=>n,XP={},QP=n=>n===XP,TS=n=>function e(){return arguments.length===0||arguments.length===1&&QP(arguments.length<=0?void 0:arguments[0])?e:n(...arguments)},ZP=(n,e)=>n===1?e:TS(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=r.filter(a=>a!==XP).length;return s>=n?e(...r):ZP(n-s,TS(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var d=r.map(h=>QP(h)?l.shift():h);return e(...d,...l)}))}),Wd=n=>ZP(n.length,n),Og=(n,e)=>{for(var t=[],r=n;r<e;++r)t[r-n]=r;return t},O5=Wd((n,e)=>Array.isArray(e)?e.map(n):Object.keys(e).map(t=>e[t]).map(n)),j5=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return N5;var i=t.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((l,u)=>u(l),s(...arguments))}},jg=n=>Array.isArray(n)?n.reverse():n.split("").reverse().join(""),JP=n=>{var e=null,t=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e&&i.every((a,l)=>{var u;return a===((u=e)===null||u===void 0?void 0:u[l])})||(e=i,t=n(...i)),t}};function ek(n){var e;return n===0?e=1:e=Math.floor(new Ue(n).abs().log(10).toNumber())+1,e}function tk(n,e,t){for(var r=new Ue(n),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(t),i++;return s}Wd((n,e,t)=>{var r=+n,i=+e;return r+t*(i-r)});Wd((n,e,t)=>{var r=e-+n;return r=r||1/0,(t-n)/r});Wd((n,e,t)=>{var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});var nk=n=>{var[e,t]=n,[r,i]=[e,t];return e>t&&([r,i]=[t,e]),[r,i]},rk=(n,e,t)=>{if(n.lte(0))return new Ue(0);var r=ek(n.toNumber()),i=new Ue(10).pow(r),s=n.div(i),a=r!==1?.05:.1,l=new Ue(Math.ceil(s.div(a).toNumber())).add(t).mul(a),u=l.mul(i);return e?new Ue(u.toNumber()):new Ue(Math.ceil(u.toNumber()))},M5=(n,e,t)=>{var r=new Ue(1),i=new Ue(n);if(!i.isint()&&t){var s=Math.abs(n);s<1?(r=new Ue(10).pow(ek(n)-1),i=new Ue(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Ue(Math.floor(n)))}else n===0?i=new Ue(Math.floor((e-1)/2)):t||(i=new Ue(Math.floor(n)));var a=Math.floor((e-1)/2),l=j5(O5(u=>i.add(new Ue(u-a).mul(r)).toNumber()),Og);return l(0,e)},ik=function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ue(0),tickMin:new Ue(0),tickMax:new Ue(0)};var a=rk(new Ue(t).sub(e).div(r-1),i,s),l;e<=0&&t>=0?l=new Ue(0):(l=new Ue(e).add(t).div(2),l=l.sub(new Ue(l).mod(a)));var u=Math.ceil(l.sub(e).div(a).toNumber()),d=Math.ceil(new Ue(t).sub(l).div(a).toNumber()),h=u+d+1;return h>r?ik(e,t,r,i,s+1):(h<r&&(d=t>0?d+(r-h):d,u=t>0?u:u+(r-h)),{step:a,tickMin:l.sub(new Ue(u).mul(a)),tickMax:l.add(new Ue(d).mul(a))})};function I5(n){var[e,t]=n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[a,l]=nk([e,t]);if(a===-1/0||l===1/0){var u=l===1/0?[a,...Og(0,r-1).map(()=>1/0)]:[...Og(0,r-1).map(()=>-1/0),l];return e>t?jg(u):u}if(a===l)return M5(a,r,i);var{step:d,tickMin:h,tickMax:f}=ik(a,l,s,i,0),m=tk(h,f.add(new Ue(.1).mul(d)),d);return e>t?jg(m):m}function R5(n,e){var[t,r]=n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=nk([t,r]);if(s===-1/0||a===1/0)return[t,r];if(s===a)return[s];var l=Math.max(e,2),u=rk(new Ue(a).sub(s).div(l-1),i,0),d=[...tk(new Ue(s),new Ue(a),u),a];return i===!1&&(d=d.map(h=>Math.round(h))),t>r?jg(d):d}var D5=JP(I5),L5=JP(R5),sk=n=>n.rootProps.maxBarSize,F5=n=>n.rootProps.barGap,ak=n=>n.rootProps.barCategoryGap,$5=n=>n.rootProps.barSize,Ol=n=>n.rootProps.stackOffset,sy=n=>n.options.chartName,ay=n=>n.rootProps.syncId,ok=n=>n.rootProps.syncMethod,oy=n=>n.options.eventEmitter,Hr={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Mn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},qd=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e},B5={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hr.angleAxisId,includeHidden:!1,name:void 0,reversed:Hr.reversed,scale:Hr.scale,tick:Hr.tick,tickCount:void 0,ticks:void 0,type:Hr.type,unit:void 0},z5={allowDataOverflow:Mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Mn.scale,tick:Mn.tick,tickCount:Mn.tickCount,ticks:void 0,type:Mn.type,unit:void 0},U5={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hr.scale,tick:Hr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},H5={allowDataOverflow:Mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Mn.scale,tick:Mn.tick,tickCount:Mn.tickCount,ticks:void 0,type:"category",unit:void 0},ly=(n,e)=>n.polarAxis.angleAxis[e]!=null?n.polarAxis.angleAxis[e]:n.layout.layoutType==="radial"?U5:B5,cy=(n,e)=>n.polarAxis.radiusAxis[e]!=null?n.polarAxis.radiusAxis[e]:n.layout.layoutType==="radial"?H5:z5,Gd=n=>n.polarOptions,uy=q([ni,ri,Tt],HC),lk=q([Gd,uy],(n,e)=>{if(n!=null)return sn(n.innerRadius,e,0)}),ck=q([Gd,uy],(n,e)=>{if(n!=null)return sn(n.outerRadius,e,e*.8)}),W5=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},uk=q([Gd],W5);q([ly,uk],qd);var dk=q([uy,lk,ck],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});q([cy,dk],qd);var hk=q([$e,Gd,lk,ck,ni,ri],(n,e,t,r,i,s)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||r==null)){var{cx:a,cy:l,startAngle:u,endAngle:d}=e;return{cx:sn(a,i,i/2),cy:sn(l,s,s/2),innerRadius:t,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),rt=(n,e)=>e,jl=(n,e,t)=>t;function dy(n){return n?.id}var Ot=n=>{var e=$e(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},za=n=>n.tooltip.settings.axisId,$t=n=>{var e=Ot(n),t=za(n);return Ml(n,e,t)},fk=q([$t],n=>n?.dataKey);function pk(n,e,t){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=t,a=new Map;return n.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=dy(l);d.forEach((f,m)=>{var g=s==null||i?m:String(ot(f,s,null)),b=ot(f,l.dataKey,0),x;a.has(g)?x=a.get(g):x={},Object.assign(x,{[h]:b}),a.set(g,x)})}}),Array.from(a.values())}function Vd(n){return n.stackId!=null&&n.dataKey!=null}function NS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function td(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NS(Object(t),!0).forEach(function(r){q5(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function q5(n,e,t){return(e=G5(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G5(n){var e=V5(n,"string");return typeof e=="symbol"?e:e+""}function V5(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mg=[0,"auto"],Nn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mk=(n,e)=>n.cartesianAxis.xAxis[e],si=(n,e)=>{var t=mk(n,e);return t??Nn},On={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Mg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Cl},gk=(n,e)=>n.cartesianAxis.yAxis[e],ai=(n,e)=>{var t=gk(n,e);return t??On},K5={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},hy=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??K5},mt=(n,e,t)=>{switch(e){case"xAxis":return si(n,t);case"yAxis":return ai(n,t);case"zAxis":return hy(n,t);case"angleAxis":return ly(n,t);case"radiusAxis":return cy(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Y5=(n,e,t)=>{switch(e){case"xAxis":return si(n,t);case"yAxis":return ai(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Ml=(n,e,t)=>{switch(e){case"xAxis":return si(n,t);case"yAxis":return ai(n,t);case"angleAxis":return ly(n,t);case"radiusAxis":return cy(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},vk=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function fy(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var py=n=>n.graphicalItems.cartesianItems,X5=q([rt,jl],fy),my=(n,e,t)=>n.filter(t).filter(r=>e?.includeHidden===!0?!0:!r.hide),Il=q([py,mt,X5],my),yk=q([Il],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter(Vd)),xk=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),bk=q([Il],xk),gy=n=>n.map(e=>e.data).filter(Boolean).flat(1),Q5=q([Il],gy),vy=(n,e)=>{var{chartData:t=[],dataStartIndex:r,dataEndIndex:i}=e;return n.length>0?n:t.slice(r,i+1)},yy=q([Q5,ny],vy),xy=(n,e,t)=>e?.dataKey!=null?n.map(r=>({value:ot(r,e.dataKey)})):t.length>0?t.map(r=>r.dataKey).flatMap(r=>n.map(i=>({value:ot(i,r)}))):n.map(r=>({value:r})),Kd=q([yy,mt,Il],xy);function wk(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Fs(n){return n.filter(e=>Nr(e)||e instanceof Date).map(Number).filter(e=>Ln(e)===!1)}function Z5(n,e,t){return!t||typeof e!="number"||Ln(e)?[]:t.length?Fs(t.flatMap(r=>{var i=ot(n,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!$n(s)||!$n(a)))return[e-s,e+a]})):[]}var J5=q([yk,ny,$t],pk),Ak=(n,e,t)=>{var r={},i=e.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[a,l]=s,u=l.map(dy);return[a,{stackedData:rL(n,u,t),graphicalItems:l}]}))},Ig=q([J5,yk,Ol],Ak),Sk=(n,e,t)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(t!=="zAxis"){var s=lL(n,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},e$=q([Ig,Gi,rt],Sk),_k=(n,e,t,r,i)=>t.length>0?n.flatMap(s=>t.flatMap(a=>{var l,u,d=(l=r[a.id])===null||l===void 0?void 0:l.filter(f=>wk(i,f)),h=ot(s,(u=e.dataKey)!==null&&u!==void 0?u:a.dataKey);return{value:h,errorDomain:Z5(s,h,d)}})).filter(Boolean):e?.dataKey!=null?n.map(s=>({value:ot(s,e.dataKey),errorDomain:[]})):n.map(s=>({value:s,errorDomain:[]})),Yd=n=>n.errorBars,Ek=(n,e,t)=>n.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>wk(t,r));q([bk,Yd,rt],Ek);var t$=q([yy,mt,bk,Yd,rt],_k);function n$(n){var{value:e}=n;if(Nr(e)||e instanceof Date)return e}var OS=n=>{var e=n.flatMap(r=>[r.value,r.errorDomain]).flat(1),t=Fs(e);if(t.length!==0)return[Math.min(...t),Math.max(...t)]},r$=(n,e,t)=>{var r=n.map(n$).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&FE(r))?uP(0,n.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},by=n=>{var e;if(n==null||!("domain"in n))return Mg;if(n.domain!=null)return n.domain;if(n.ticks!=null){if(n.type==="number"){var t=Fs(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n?.domain)!==null&&e!==void 0?e:Mg},nd=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},Ck=n=>n.referenceElements.dots,Ua=(n,e,t)=>n.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===t:r.yAxisId===t),i$=q([Ck,rt,jl],Ua),Pk=n=>n.referenceElements.areas,s$=q([Pk,rt,jl],Ua),kk=n=>n.referenceElements.lines,a$=q([kk,rt,jl],Ua),Tk=(n,e)=>{var t=Fs(n.map(r=>e==="xAxis"?r.x:r.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},o$=q(i$,rt,Tk),Nk=(n,e)=>{var t=Fs(n.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},l$=q([s$,rt],Nk),Ok=(n,e)=>{var t=Fs(n.map(r=>e==="xAxis"?r.x:r.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},c$=q(a$,rt,Ok),u$=q(o$,c$,l$,(n,e,t)=>nd(n,t,e)),jk=q([mt],by),wy=(n,e,t,r,i,s,a)=>{var l=E5(e,n.allowDataOverflow);if(l!=null)return l;var u=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",d=u?nd(t,i,OS(r)):nd(i,OS(r));return C5(e,d,n.allowDataOverflow)},d$=q([mt,jk,e$,t$,u$,$e,rt],wy),h$=[0,1],Ay=(n,e,t,r,i,s,a)=>{if(!((n==null||t==null||t.length===0)&&a===void 0)){var{dataKey:l,type:u}=n,d=Is(e,s);return d&&l==null?uP(0,t.length):u==="category"?r$(r,n,d):i==="expand"?h$:a}},Sy=q([mt,$e,yy,Kd,Ol,rt,d$],Ay),Mk=(n,e,t,r,i)=>{if(n!=null){var{scale:s,type:a}=n;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Al(s));return l in Yo?l:"point"}}},Ha=q([mt,$e,vk,sy,rt],Mk);function f$(n){if(n!=null){if(n in Yo)return Yo[n]();var e="scale".concat(Al(n));if(e in Yo)return Yo[e]()}}function _y(n,e,t,r){if(!(t==null||r==null)){if(typeof n.scale=="function")return n.scale.copy().domain(t).range(r);var i=f$(e);if(i!=null){var s=i.domain(t).range(r);return ZD(s),s}}}var Ey=(n,e,t)=>{var r=by(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Na(n))return D5(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Na(n))return L5(n,e.tickCount,e.allowDecimals)}},Cy=q([Sy,Ml,Ha],Ey),Py=(n,e,t,r)=>{if(r!=="angleAxis"&&n?.type==="number"&&Na(e)&&Array.isArray(t)&&t.length>0){var i=e[0],s=t[0],a=e[1],l=t[t.length-1];return[Math.min(i,s),Math.max(a,l)]}return e},p$=q([mt,Sy,Cy,rt],Py),m$=q(Kd,mt,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,r=Array.from(Fs(n.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];t=Math.min(t,a)}return t/i}}),Ik=q(m$,$e,ak,Tt,(n,e,t,r)=>r,(n,e,t,r,i)=>{if(!$n(n))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return n*s/2;if(i==="no-gap"){var a=sn(t,n*s),l=n*s/2;return l-a-(l-a)/s*a}return 0}),g$=(n,e)=>{var t=si(n,e);return t==null||typeof t.padding!="string"?0:Ik(n,"xAxis",e,t.padding)},v$=(n,e)=>{var t=ai(n,e);return t==null||typeof t.padding!="string"?0:Ik(n,"yAxis",e,t.padding)},y$=q(si,g$,(n,e)=>{var t,r;if(n==null)return{left:0,right:0};var{padding:i}=n;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),x$=q(ai,v$,(n,e)=>{var t,r;if(n==null)return{top:0,bottom:0};var{padding:i}=n;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),b$=q([Tt,y$,Rd,Id,(n,e,t)=>t],(n,e,t,r,i)=>{var{padding:s}=r;return i?[s.left,t.width-s.right]:[n.left+e.left,n.left+n.width-e.right]}),w$=q([Tt,$e,x$,Rd,Id,(n,e,t)=>t],(n,e,t,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),Rl=(n,e,t,r)=>{var i;switch(e){case"xAxis":return b$(n,t,r);case"yAxis":return w$(n,t,r);case"zAxis":return(i=hy(n,t))===null||i===void 0?void 0:i.range;case"angleAxis":return uk(n);case"radiusAxis":return dk(n,t);default:return}},Rk=q([mt,Rl],qd),Wa=q([mt,Ha,p$,Rk],_y);q([Il,Yd,rt],Ek);function Dk(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var Xd=(n,e)=>e,Qd=(n,e,t)=>t,A$=q(jd,Xd,Qd,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(Dk)),S$=q(Md,Xd,Qd,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(Dk)),Lk=(n,e)=>({width:n.width,height:e.height}),_$=(n,e)=>{var t=typeof e.width=="number"?e.width:Cl;return{width:t,height:n.height}},Fk=q(Tt,si,Lk),E$=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},C$=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},P$=q(ri,Tt,A$,Xd,Qd,(n,e,t,r,i)=>{var s={},a;return t.forEach(l=>{var u=Lk(e,l);a==null&&(a=E$(e,r,n));var d=r==="top"&&!i||r==="bottom"&&i;s[l.id]=a-Number(d)*u.height,a+=(d?-1:1)*u.height}),s}),k$=q(ni,Tt,S$,Xd,Qd,(n,e,t,r,i)=>{var s={},a;return t.forEach(l=>{var u=_$(e,l);a==null&&(a=C$(e,r,n));var d=r==="left"&&!i||r==="right"&&i;s[l.id]=a-Number(d)*u.width,a+=(d?-1:1)*u.width}),s}),T$=(n,e)=>{var t=si(n,e);if(t!=null)return P$(n,t.orientation,t.mirror)},N$=q([Tt,si,T$,(n,e)=>e],(n,e,t,r)=>{if(e!=null){var i=t?.[r];return i==null?{x:n.left,y:0}:{x:n.left,y:i}}}),O$=(n,e)=>{var t=ai(n,e);if(t!=null)return k$(n,t.orientation,t.mirror)},j$=q([Tt,ai,O$,(n,e)=>e],(n,e,t,r)=>{if(e!=null){var i=t?.[r];return i==null?{x:0,y:n.top}:{x:i,y:n.top}}}),$k=q(Tt,ai,(n,e)=>{var t=typeof e.width=="number"?e.width:Cl;return{width:t,height:n.height}}),jS=(n,e,t)=>{switch(e){case"xAxis":return Fk(n,t).width;case"yAxis":return $k(n,t).height;default:return}},Bk=(n,e,t,r)=>{if(t!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=t,l=Is(n,r),u=e.map(d=>d.value);if(a&&l&&s==="category"&&i&&FE(u))return u}},ky=q([$e,Kd,mt,rt],Bk),zk=(n,e,t,r)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:s}=t,a=Is(n,r);if(a&&(i==="number"||s!=="auto"))return e.map(l=>l.value)}},Ty=q([$e,Kd,Ml,rt],zk),MS=q([$e,Y5,Ha,Wa,ky,Ty,Rl,Cy,rt],(n,e,t,r,i,s,a,l,u)=>{if(e==null)return null;var d=Is(n,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:l,range:a,realScaleType:t,scale:r}}),M$=(n,e,t,r,i,s,a,l,u)=>{if(!(e==null||r==null)){var d=Is(n,u),{type:h,ticks:f,tickCount:m}=e,g=t==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/g:0;b=u==="angleAxis"&&s!=null&&s.length>=2?Dt(s[0]-s[1])*2*b:b;var x=f||i;if(x){var A=x.map((E,C)=>{var P=a?a.indexOf(E):E;return{index:C,coordinate:r(P)+b,value:E,offset:b}});return A.filter(E=>!Ln(E.coordinate))}return d&&l?l.map((E,C)=>({coordinate:r(E)+b,value:E,index:C,offset:b})):r.ticks?r.ticks(m).map(E=>({coordinate:r(E)+b,value:E,offset:b})):r.domain().map((E,C)=>({coordinate:r(E)+b,value:a?a[E]:E,index:C,offset:b}))}},Uk=q([$e,Ml,Ha,Wa,Cy,Rl,ky,Ty,rt],M$),I$=(n,e,t,r,i,s,a)=>{if(!(e==null||t==null||r==null||r[0]===r[1])){var l=Is(n,a),{tickCount:u}=e,d=0;return d=a==="angleAxis"&&r?.length>=2?Dt(r[0]-r[1])*2*d:d,l&&s?s.map((h,f)=>({coordinate:t(h)+d,value:h,index:f,offset:d})):t.ticks?t.ticks(u).map(h=>({coordinate:t(h)+d,value:h,offset:d})):t.domain().map((h,f)=>({coordinate:t(h)+d,value:i?i[h]:h,index:f,offset:d}))}},Oa=q([$e,Ml,Wa,Rl,ky,Ty,rt],I$),ja=q(mt,Wa,(n,e)=>{if(!(n==null||e==null))return td(td({},n),{},{scale:e})}),R$=q([mt,Ha,Sy,Rk],_y);q((n,e,t)=>hy(n,t),R$,(n,e)=>{if(!(n==null||e==null))return td(td({},n),{},{scale:e})});var D$=q([$e,jd,Md],(n,e,t)=>{switch(n){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Hk=n=>n.options.defaultTooltipEventType,Wk=n=>n.options.validateTooltipEventTypes;function qk(n,e,t){if(n==null)return e;var r=n?"axis":"item";return t==null?e:t.includes(r)?r:e}function Ny(n,e){var t=Hk(n),r=Wk(n);return qk(e,t,r)}function L$(n){return ve(e=>Ny(e,n))}var Gk=(n,e)=>{var t,r=Number(e);if(!(Ln(r)||e==null))return r>=0?n==null||(t=n[r])===null||t===void 0?void 0:t.value:void 0},F$=n=>n.tooltip.settings,Ni={active:!1,index:null,dataKey:void 0,coordinate:void 0},$$={itemInteraction:{click:Ni,hover:Ni},axisInteraction:{click:Ni,hover:Ni},keyboardInteraction:Ni,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Vk=Bn({name:"tooltip",initialState:$$,reducers:{addTooltipEntrySettings(n,e){n.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(n,e){var t=Vr(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate,n.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:B$,removeTooltipEntrySettings:z$,setTooltipSettingsState:U$,setActiveMouseOverItemIndex:Kk,mouseLeaveItem:H$,mouseLeaveChart:Yk,setActiveClickItemIndex:W$,setMouseOverAxisIndex:Xk,setMouseClickAxisIndex:q$,setSyncInteraction:Rg,setKeyboardInteraction:Dg}=Vk.actions,G$=Vk.reducer;function IS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(t),!0).forEach(function(r){V$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function V$(n,e,t){return(e=K$(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K$(n){var e=Y$(n,"string");return typeof e=="symbol"?e:e+""}function Y$(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function X$(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function Q$(n){return n.index!=null}var Qk=(n,e,t,r)=>{if(e==null)return Ni;var i=X$(n,e,t);if(i==null)return Ni;if(i.active)return i;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var s=n.settings.active===!0;if(Q$(i)){if(s)return hu(hu({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return hu(hu({},Ni),{},{coordinate:i.coordinate})},Oy=(n,e)=>{var t=n?.index;if(t==null)return null;var r=Number(t);if(!$n(r))return t;var i=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(i,Math.min(r,s)))},Zk=(n,e,t,r,i,s,a,l)=>{if(!(s==null||l==null)){var u=a[0],d=u==null?void 0:l(u.positions,s);if(d!=null)return d;var h=i?.[Number(s)];if(h)switch(t){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+n)/2,y:h.coordinate}}}},Jk=(n,e,t,r)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=n.itemInteraction.hover.dataKey:i=n.itemInteraction.click.dataKey,i==null&&r!=null?[n.tooltipItemPayloads[0]]:n.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Dl=n=>n.options.tooltipPayloadSearcher,qa=n=>n.tooltip;function RS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function DS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RS(Object(t),!0).forEach(function(r){Z$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Z$(n,e,t){return(e=J$(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J$(n){var e=eB(n,"string");return typeof e=="symbol"?e:e+""}function eB(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tB(n,e){return n??e}var e2=(n,e,t,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=t,f=[];return n.reduce((m,g)=>{var b,{dataDefinedOnItem:x,settings:A}=g,E=tB(x,l),C=Array.isArray(E)?WC(E,d,h):E,P=(b=A?.dataKey)!==null&&b!==void 0?b:r,T=A?.nameKey,N;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&a==="axis"?N=zM(C,r,i):N=s(C,e,u,T),Array.isArray(N))N.forEach(j=>{var B=DS(DS({},A),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});m.push(yA({tooltipEntrySettings:B,dataKey:j.dataKey,payload:j.payload,value:ot(j.payload,j.dataKey),name:j.name}))});else{var O;m.push(yA({tooltipEntrySettings:A,dataKey:P,payload:N,value:ot(N,P),name:(O=ot(N,T))!==null&&O!==void 0?O:A?.name}))}return m},f)}},jy=q([$t,$e,vk,sy,Ot],Mk),nB=q([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),rB=q([Ot,za],fy),Ll=q([nB,$t,rB],my),iB=q([Ll],n=>n.filter(Vd)),sB=q([Ll],gy),Ga=q([sB,Gi],vy),aB=q([iB,Gi,$t],pk),My=q([Ga,$t,Ll],xy),oB=q([$t],by),lB=q([Ll],n=>n.filter(Vd)),cB=q([aB,lB,Ol],Ak),uB=q([cB,Gi,Ot],Sk),dB=q([Ll],xk),hB=q([Ga,$t,dB,Yd,Ot],_k),fB=q([Ck,Ot,za],Ua),pB=q([fB,Ot],Tk),mB=q([Pk,Ot,za],Ua),gB=q([mB,Ot],Nk),vB=q([kk,Ot,za],Ua),yB=q([vB,Ot],Ok),xB=q([pB,yB,gB],nd),bB=q([$t,oB,uB,hB,xB,$e,Ot],wy),t2=q([$t,$e,Ga,My,Ol,Ot,bB],Ay),wB=q([t2,$t,jy],Ey),AB=q([$t,t2,wB,Ot],Py),n2=n=>{var e=Ot(n),t=za(n),r=!1;return Rl(n,e,t,r)},r2=q([$t,n2],qd),i2=q([$t,jy,AB,r2],_y),SB=q([$e,My,$t,Ot],Bk),_B=q([$e,My,$t,Ot],zk),EB=(n,e,t,r,i,s,a,l)=>{if(e){var{type:u}=e,d=Is(n,l);if(r){var h=t==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return f=l==="angleAxis"&&i!=null&&i?.length>=2?Dt(i[0]-i[1])*2*f:f,d&&a?a.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:s?s[m]:m,index:g,offset:f}))}}},oi=q([$e,$t,jy,i2,n2,SB,_B,Ot],EB),Iy=q([Hk,Wk,F$],(n,e,t)=>qk(t.shared,n,e)),s2=n=>n.tooltip.settings.trigger,Ry=n=>n.tooltip.settings.defaultIndex,Zd=q([qa,Iy,s2,Ry],Qk),ks=q([Zd,Ga],Oy),a2=q([oi,ks],Gk),o2=q([Zd],n=>{if(n)return n.dataKey}),l2=q([qa,Iy,s2,Ry],Jk),CB=q([ni,ri,$e,Tt,oi,Ry,l2,Dl],Zk),PB=q([Zd,CB],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),kB=q([Zd],n=>n.active),TB=q([l2,ks,Gi,fk,a2,Dl,Iy],e2);q([TB],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function LS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LS(Object(t),!0).forEach(function(r){NB(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NB(n,e,t){return(e=OB(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OB(n){var e=jB(n,"string");return typeof e=="symbol"?e:e+""}function jB(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var MB=()=>ve($t),IB=()=>{var n=MB(),e=ve(oi),t=ve(i2);return Ev(FS(FS({},n),{},{scale:t}),e)},RB=()=>ve(sy),Dy=(n,e)=>e,c2=(n,e,t)=>t,Ly=(n,e,t,r)=>r,DB=q(oi,n=>Ed(n,e=>e.coordinate)),Fy=q([qa,Dy,c2,Ly],Qk),u2=q([Fy,Ga],Oy),LB=(n,e,t)=>{if(e!=null){var r=qa(n);return e==="axis"?t==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:t==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},d2=q([qa,Dy,c2,Ly],Jk),rd=q([ni,ri,$e,Tt,oi,Ly,d2,Dl],Zk),FB=q([Fy,rd],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),h2=q(oi,u2,Gk),$B=q([d2,u2,Gi,fk,h2,Dl,Dy],e2),BB=q([Fy],n=>({isActive:n.active,activeIndex:n.index})),zB=(n,e,t,r,i,s,a,l)=>{if(!(!n||!e||!r||!i||!s)){var u=cL(n.chartX,n.chartY,e,t,l);if(u){var d=dL(u,e),h=XD(d,a,s,r,i),f=uL(e,s,h,u);return{activeIndex:String(h),activeCoordinate:f}}}};function Lg(){return Lg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lg.apply(null,arguments)}function $S(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$S(Object(t),!0).forEach(function(r){UB(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$S(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UB(n,e,t){return(e=HB(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HB(n){var e=WB(n,"string");return typeof e=="symbol"?e:e+""}function WB(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qB(n){var{coordinate:e,payload:t,index:r,offset:i,tooltipAxisBandSize:s,layout:a,cursor:l,tooltipEventType:u,chartName:d}=n,h=e,f=t,m=r;if(!l||!h||d!=="ScatterChart"&&u!=="axis")return null;var g,b;if(d==="ScatterChart")g=h,b=d3;else if(d==="BarChart")g=h3(a,h,i,s),b=aP;else if(a==="radial"){var{cx:x,cy:A,radius:E,startAngle:C,endAngle:P}=oP(h);g={cx:x,cy:A,startAngle:C,endAngle:P,innerRadius:E,outerRadius:E},b=cP}else g={points:q3(a,h,i)},b=tP;var T=typeof l=="object"&&"className"in l?l.className:void 0,N=fu(fu(fu(fu({stroke:"#ccc",pointerEvents:"none"},i),g),kt(l,!1)),{},{payload:f,payloadIndex:m,className:He("recharts-tooltip-cursor",T)});return _.isValidElement(l)?_.cloneElement(l,N):_.createElement(b,N)}function GB(n){var e=IB(),t=XC(),r=Nv(),i=RB();return _.createElement(qB,Lg({},n,{coordinate:n.coordinate,index:n.index,payload:n.payload,offset:t,layout:r,tooltipAxisBandSize:e,chartName:i}))}var f2=_.createContext(null),VB=()=>_.useContext(f2),Pm={exports:{}},BS;function KB(){return BS||(BS=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function s(u,d,h,f,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,f||u,m),b=t?t+d:d;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],g]:u._events[b].push(g):(u._events[b]=g,u._eventsCount++),u}function a(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)e.call(h,f)&&d.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=t?t+d:d,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,b=new Array(g);m<g;m++)b[m]=f[m].fn;return b},l.prototype.listenerCount=function(d){var h=t?t+d:d,f=this._events[h];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,h,f,m,g,b){var x=t?t+d:d;if(!this._events[x])return!1;var A=this._events[x],E=arguments.length,C,P;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),E){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,f),!0;case 4:return A.fn.call(A.context,h,f,m),!0;case 5:return A.fn.call(A.context,h,f,m,g),!0;case 6:return A.fn.call(A.context,h,f,m,g,b),!0}for(P=1,C=new Array(E-1);P<E;P++)C[P-1]=arguments[P];A.fn.apply(A.context,C)}else{var T=A.length,N;for(P=0;P<T;P++)switch(A[P].once&&this.removeListener(d,A[P].fn,void 0,!0),E){case 1:A[P].fn.call(A[P].context);break;case 2:A[P].fn.call(A[P].context,h);break;case 3:A[P].fn.call(A[P].context,h,f);break;case 4:A[P].fn.call(A[P].context,h,f,m);break;default:if(!C)for(N=1,C=new Array(E-1);N<E;N++)C[N-1]=arguments[N];A[P].fn.apply(A[P].context,C)}}return!0},l.prototype.on=function(d,h,f){return s(this,d,h,f,!1)},l.prototype.once=function(d,h,f){return s(this,d,h,f,!0)},l.prototype.removeListener=function(d,h,f,m){var g=t?t+d:d;if(!this._events[g])return this;if(!h)return a(this,g),this;var b=this._events[g];if(b.fn)b.fn===h&&(!m||b.once)&&(!f||b.context===f)&&a(this,g);else{for(var x=0,A=[],E=b.length;x<E;x++)(b[x].fn!==h||m&&!b[x].once||f&&b[x].context!==f)&&A.push(b[x]);A.length?this._events[g]=A.length===1?A[0]:A:a(this,g)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(Pm)),Pm.exports}var YB=KB();const XB=jr(YB);var vl=new XB,Fg="recharts.syncEvent.tooltip",zS="recharts.syncEvent.brush";function p2(n,e){if(e){var t=Number.parseInt(e,10);if(!Ln(t))return n?.[t]}}var QB={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},m2=Bn({name:"options",initialState:QB,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ZB=m2.reducer,{createEventEmitter:JB}=m2.actions;function e6(n){return n.tooltip.syncInteraction}var t6={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},g2=Bn({name:"chartData",initialState:t6,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:r}=e.payload;t!=null&&(n.dataStartIndex=t),r!=null&&(n.dataEndIndex=r)}}}),{setChartData:US,setDataStartEndIndexes:n6,setComputedData:SV}=g2.actions,r6=g2.reducer,i6=["x","y"];function HS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function os(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HS(Object(t),!0).forEach(function(r){s6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s6(n,e,t){return(e=a6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a6(n){var e=o6(n,"string");return typeof e=="symbol"?e:e+""}function o6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function l6(n,e){if(n==null)return{};var t,r,i=c6(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function c6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var v2=()=>{};function u6(){var n=ve(ay),e=ve(oy),t=lt(),r=ve(ok),i=ve(oi),s=Nv(),a=Pv(),l=ve(u=>u.rootProps.className);_.useEffect(()=>{if(n==null)return v2;var u=(d,h,f)=>{if(e!==f&&n===d){if(r==="index"){var m;if(a&&h!==null&&h!==void 0&&(m=h.payload)!==null&&m!==void 0&&m.coordinate){var g=h.payload.coordinate,{x:b,y:x}=g,A=l6(g,i6),E=os(os(os({},A),typeof b=="number"&&{x:Math.max(a.x,Math.min(b,a.x+a.width))}),typeof x=="number"&&{y:Math.max(a.y,Math.min(x,a.y+a.height))}),C=os(os({},h),{},{payload:os(os({},h.payload),{},{coordinate:E})});t(C)}else t(h);return}if(i!=null){var P;if(typeof r=="function"){var T={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},N=r(i,T);P=i[N]}else r==="value"&&(P=i.find(te=>String(te.value)===h.payload.label));var{coordinate:O}=h.payload;if(P==null||h.payload.active===!1||O==null||a==null){t(Rg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:j,y:B}=O,F=Math.min(j,a.x+a.width),Y=Math.min(B,a.y+a.height),V={x:s==="horizontal"?P.coordinate:F,y:s==="horizontal"?Y:P.coordinate},K=Rg({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label});t(K)}}};return vl.on(Fg,u),()=>{vl.off(Fg,u)}},[l,t,e,n,r,i,s,a])}function d6(){var n=ve(ay),e=ve(oy),t=lt();_.useEffect(()=>{if(n==null)return v2;var r=(i,s,a)=>{e!==a&&n===i&&t(n6(s))};return vl.on(zS,r),()=>{vl.off(zS,r)}},[t,e,n])}function h6(){var n=lt();_.useEffect(()=>{n(JB())},[n]),u6(),d6()}function f6(n,e,t,r,i,s){var a=ve(m=>LB(m,n,e)),l=ve(oy),u=ve(ay),d=ve(ok),h=ve(e6),f=h?.active;_.useEffect(()=>{if(!f&&u!=null&&l!=null){var m=Rg({active:s,coordinate:t,dataKey:a,index:i,label:typeof r=="number"?String(r):r});vl.emit(Fg,u,m,l)}},[f,t,a,i,r,l,u,d,s])}function WS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WS(Object(t),!0).forEach(function(r){p6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p6(n,e,t){return(e=m6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m6(n){var e=g6(n,"string");return typeof e=="symbol"?e:e+""}function g6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v6(n){return n.dataKey}function y6(n,e){return _.isValidElement(n)?_.cloneElement(n,e):typeof n=="function"?_.createElement(n,e):_.createElement(HL,e)}var GS=[],x6={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Rs.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function id(n){var e=fn(n,x6),{active:t,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:a,filterNull:l,isAnimationActive:u,offset:d,payloadUniqBy:h,position:f,reverseDirection:m,useTranslate3d:g,wrapperStyle:b,cursor:x,shared:A,trigger:E,defaultIndex:C,portal:P,axisId:T}=e,N=lt(),O=typeof C=="number"?String(C):C;_.useEffect(()=>{N(U$({shared:A,trigger:E,axisId:T,active:t,defaultIndex:O}))},[N,A,E,T,t,O]);var j=Pv(),B=eP(),F=L$(A),{activeIndex:Y,isActive:V}=ve(we=>BB(we,F,E,O)),K=ve(we=>$B(we,F,E,O)),te=ve(we=>h2(we,F,E,O)),H=ve(we=>FB(we,F,E,O)),ae=K,X=VB(),Q=t??V,[Z,$]=yC([ae,Q]),W=F==="axis"?te:void 0;f6(F,E,H,W,Y,Q);var I=P??X;if(I==null)return null;var L=ae??GS;Q||(L=GS),l&&L.length&&(L=fC(ae.filter(we=>we.value!=null&&(we.hide!==!0||e.includeHidden)),h,v6));var oe=L.length>0,be=_.createElement(XL,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:u,active:Q,coordinate:H,hasPayload:oe,offset:d,position:f,reverseDirection:m,useTranslate3d:g,viewBox:j,wrapperStyle:b,lastBoundingBox:Z,innerRef:$,hasPortalFromProps:!!P},y6(a,qS(qS({},e),{},{payload:L,label:W,active:Q,coordinate:H,accessibilityLayer:B})));return _.createElement(_.Fragment,null,fE.createPortal(be,I),Q&&_.createElement(GB,{cursor:x,tooltipEventType:F,coordinate:H,payload:ae,index:Y}))}var km={},Tm={},Nm={},VS;function b6(){return VS||(VS=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r,{signal:i,edges:s}={}){let a,l=null;const u=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),h=()=>{l!==null&&(t.apply(a,l),a=void 0,l=null)},f=()=>{d&&h(),x()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},r)},b=()=>{m!==null&&(clearTimeout(m),m=null)},x=()=>{b(),a=void 0,l=null},A=()=>{h()},E=function(...C){if(i?.aborted)return;a=this,l=C;const P=m==null;g(),u&&P&&h()};return E.schedule=g,E.cancel=x,E.flush=A,i?.addEventListener("abort",x,{once:!0}),E}n.debounce=e})(Nm)),Nm}var KS;function w6(){return KS||(KS=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=b6();function t(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:l=!0,maxWait:u}=s,d=Array(2);a&&(d[0]="leading"),l&&(d[1]="trailing");let h,f=null;const m=e.debounce(function(...x){h=r.apply(this,x),f=null},i,{edges:d}),g=function(...x){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(h=r.apply(this,x),f=Date.now(),m.cancel(),m.schedule(),h):(m.apply(this,x),h)},b=()=>(m.flush(),h);return g.cancel=m.cancel,g.flush=b,g}n.debounce=t})(Tm)),Tm}var YS;function A6(){return YS||(YS=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=w6();function t(r,i=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:l})}n.throttle=t})(km)),km}var Om,XS;function S6(){return XS||(XS=1,Om=A6().throttle),Om}var _6=S6();const E6=jr(_6);var Jo=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function QS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QS(Object(t),!0).forEach(function(r){C6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function C6(n,e,t){return(e=P6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P6(n){var e=k6(n,"string");return typeof e=="symbol"?e:e+""}function k6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var sd=_.forwardRef((n,e)=>{var{aspect:t,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:a=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:f,className:m,onResize:g,style:b={}}=n,x=_.useRef(null),A=_.useRef();A.current=g,_.useImperativeHandle(e,()=>x.current);var[E,C]=_.useState({containerWidth:r.width,containerHeight:r.height}),P=_.useCallback((N,O)=>{C(j=>{var B=Math.round(N),F=Math.round(O);return j.containerWidth===B&&j.containerHeight===F?j:{containerWidth:B,containerHeight:F}})},[]);_.useEffect(()=>{var N=F=>{var Y,{width:V,height:K}=F[0].contentRect;P(V,K),(Y=A.current)===null||Y===void 0||Y.call(A,V,K)};h>0&&(N=E6(N,h,{trailing:!0,leading:!1}));var O=new ResizeObserver(N),{width:j,height:B}=x.current.getBoundingClientRect();return P(j,B),O.observe(x.current),()=>{O.disconnect()}},[P,h]);var T=_.useMemo(()=>{var{containerWidth:N,containerHeight:O}=E;if(N<0||O<0)return null;Jo(ds(i)||ds(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Jo(!t||t>0,"The aspect(%s) must be greater than zero.",t);var j=ds(i)?N:i,B=ds(s)?O:s;return t&&t>0&&(j?B=j/t:B&&(j=B*t),u&&B>u&&(B=u)),Jo(j>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,B,i,s,a,l,t),_.Children.map(d,F=>_.cloneElement(F,{width:j,height:B,style:jm({width:j,height:B},F.props.style)}))},[t,d,s,u,l,a,E,i]);return _.createElement("div",{id:f?"".concat(f):void 0,className:He("recharts-responsive-container",m),style:jm(jm({},b),{},{width:i,height:s,minWidth:a,minHeight:l,maxHeight:u}),ref:x},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))}),Fl=n=>null;Fl.displayName="Cell";function T6(n,e,t){return(e=N6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N6(n){var e=O6(n,"string");return typeof e=="symbol"?e:e+""}function O6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class j6{constructor(e){T6(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function ZS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function M6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZS(Object(t),!0).forEach(function(r){I6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function I6(n,e,t){return(e=R6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R6(n){var e=D6(n,"string");return typeof e=="symbol"?e:e+""}function D6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var L6={cacheSize:2e3,enableCache:!0},y2=M6({},L6),JS=new j6(y2.cacheSize),F6={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},e_="recharts_measurement_span";function $6(n,e){var t=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(l)}var t_=(n,e)=>{try{var t=document.getElementById(e_);t||(t=document.createElement("span"),t.setAttribute("id",e_),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,F6,e),t.textContent="".concat(n);var r=t.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},el=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Rs.isSsr)return{width:0,height:0};if(!y2.enableCache)return t_(e,t);var r=$6(e,t),i=JS.get(r);if(i)return i;var s=t_(e,t);return JS.set(r,s),s},n_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B6=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,z6=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,x2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},U6=Object.keys(x2),ma="NaN";function H6(n,e){return n*x2[e]}class An{static parse(e){var t,[,r,i]=(t=z6.exec(e))!==null&&t!==void 0?t:[];return new An(parseFloat(r),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Ln(e)&&(this.unit=""),t!==""&&!B6.test(t)&&(this.num=NaN,this.unit=""),U6.includes(t)&&(this.num=H6(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new An(NaN,""):new An(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new An(NaN,""):new An(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new An(NaN,""):new An(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new An(NaN,""):new An(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ln(this.num)}}function b2(n){if(n.includes(ma))return ma;for(var e=n;e.includes("*")||e.includes("/");){var t,[,r,i,s]=(t=n_.exec(e))!==null&&t!==void 0?t:[],a=An.parse(r??""),l=An.parse(s??""),u=i==="*"?a.multiply(l):a.divide(l);if(u.isNaN())return ma;e=e.replace(n_,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,f,m]=(d=r_.exec(e))!==null&&d!==void 0?d:[],g=An.parse(h??""),b=An.parse(m??""),x=f==="+"?g.add(b):g.subtract(b);if(x.isNaN())return ma;e=e.replace(r_,x.toString())}return e}var i_=/\(([^()]*)\)/;function W6(n){for(var e=n,t;(t=i_.exec(e))!=null;){var[,r]=t;e=e.replace(i_,b2(r))}return e}function q6(n){var e=n.replace(/\s+/g,"");return e=W6(e),e=b2(e),e}function G6(n){try{return q6(n)}catch{return ma}}function Mm(n){var e=G6(n.slice(5,-1));return e===ma?"":e}var V6=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],K6=["dx","dy","angle","className","breakAll"];function $g(){return $g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$g.apply(null,arguments)}function s_(n,e){if(n==null)return{};var t,r,i=Y6(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Y6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var w2=/[ \f\n\r\t\v\u2028\u2029]+/,A2=n=>{var{children:e,breakAll:t,style:r}=n;try{var i=[];Lt(e)||(t?i=e.toString().split(""):i=e.toString().split(w2));var s=i.map(l=>({word:l,width:el(l,r).width})),a=t?0:el(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},X6=(n,e,t,r,i)=>{var{maxLines:s,children:a,style:l,breakAll:u}=n,d=xe(s),h=a,f=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce((K,te)=>{var{word:H,width:ae}=te,X=K[K.length-1];if(X&&(r==null||i||X.width+ae+t<Number(r)))X.words.push(H),X.width+=ae+t;else{var Q={words:[H],width:ae};K.push(Q)}return K},[])},m=f(e),g=Y=>Y.reduce((V,K)=>V.width>K.width?V:K);if(!d||i)return m;var b=m.length>s||g(m).width>Number(r);if(!b)return m;for(var x="…",A=Y=>{var V=h.slice(0,Y),K=A2({breakAll:u,style:l,children:V+x}).wordsWithComputedWidth,te=f(K),H=te.length>s||g(te).width>Number(r);return[H,te]},E=0,C=h.length-1,P=0,T;E<=C&&P<=h.length-1;){var N=Math.floor((E+C)/2),O=N-1,[j,B]=A(O),[F]=A(N);if(!j&&!F&&(E=N+1),j&&F&&(C=N-1),!j&&F){T=B;break}P++}return T||m},a_=n=>{var e=Lt(n)?[]:n.toString().split(w2);return[{words:e}]},Q6=n=>{var{width:e,scaleToFit:t,children:r,style:i,breakAll:s,maxLines:a}=n;if((e||t)&&!Rs.isSsr){var l,u,d=A2({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:f}=d;l=h,u=f}else return a_(r);return X6({breakAll:s,children:r,maxLines:a,style:i},l,u,e,t)}return a_(r)},o_="#808080",Jd=_.forwardRef((n,e)=>{var{x:t=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:l="start",verticalAnchor:u="end",fill:d=o_}=n,h=s_(n,V6),f=_.useMemo(()=>Q6({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:a,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,a,h.style,h.width]),{dx:m,dy:g,angle:b,className:x,breakAll:A}=h,E=s_(h,K6);if(!Nr(t)||!Nr(r)||f.length===0)return null;var C=t+(xe(m)?m:0),P=r+(xe(g)?g:0),T;switch(u){case"start":T=Mm("calc(".concat(s,")"));break;case"middle":T=Mm("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:T=Mm("calc(".concat(f.length-1," * -").concat(i,")"));break}var N=[];if(a){var O=f[0].width,{width:j}=h;N.push("scale(".concat(xe(j)?j/O:1,")"))}return b&&N.push("rotate(".concat(b,", ").concat(C,", ").concat(P,")")),N.length&&(E.transform=N.join(" ")),_.createElement("text",$g({},kt(E,!0),{ref:e,x:C,y:P,className:He("recharts-text",x),textAnchor:l,fill:d.includes("url")?o_:d}),f.map((B,F)=>{var Y=B.words.join(A?"":" ");return _.createElement("tspan",{x:C,dy:F===0?T:i,key:"".concat(Y,"-").concat(F)},Y)}))});Jd.displayName="Text";var Z6=["labelRef"];function J6(n,e){if(n==null)return{};var t,r,i=ez(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function ez(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function l_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ht(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l_(Object(t),!0).forEach(function(r){tz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function tz(n,e,t){return(e=nz(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nz(n){var e=rz(n,"string");return typeof e=="symbol"?e:e+""}function rz(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wr(){return Wr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wr.apply(null,arguments)}var S2=_.createContext(null),iz=n=>{var{x:e,y:t,width:r,height:i,children:s}=n,a=_.useMemo(()=>({x:e,y:t,width:r,height:i}),[e,t,r,i]);return _.createElement(S2.Provider,{value:a},s)},_2=()=>{var n=_.useContext(S2),e=Pv();return n||e},sz=_.createContext(null),az=()=>{var n=_.useContext(sz),e=ve(hk);return n||e},oz=n=>{var{value:e,formatter:t}=n,r=Lt(n.children)?e:n.children;return typeof t=="function"?t(r):r},$y=n=>n!=null&&typeof n=="function",lz=(n,e)=>{var t=Dt(e-n),r=Math.min(Math.abs(e-n),360);return t*r},cz=(n,e,t,r,i)=>{var{offset:s,className:a}=n,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:f,endAngle:m,clockWise:g}=i,b=(d+h)/2,x=lz(f,m),A=x>=0?1:-1,E,C;switch(e){case"insideStart":E=f+A*s,C=g;break;case"insideEnd":E=m-A*s,C=!g;break;case"end":E=m+A*s,C=g;break;default:throw new Error("Unsupported position ".concat(e))}C=x<=0?C:!C;var P=xt(l,u,b,E),T=xt(l,u,b,E+(C?1:-1)*359),N="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(C?0:1,`,
    `).concat(T.x,",").concat(T.y),O=Lt(n.id)?ll("recharts-radial-line-"):n.id;return _.createElement("text",Wr({},r,{dominantBaseline:"central",className:He("recharts-radial-bar-label",a)}),_.createElement("defs",null,_.createElement("path",{id:O,d:N})),_.createElement("textPath",{xlinkHref:"#".concat(O)},t))},uz=(n,e,t)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:l,endAngle:u}=n,d=(l+u)/2;if(t==="outside"){var{x:h,y:f}=xt(r,i,a+e,d);return{x:h,y:f,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+a)/2,{x:g,y:b}=xt(r,i,m,d);return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},E2=n=>"cx"in n&&xe(n.cx),dz=(n,e)=>{var{parentViewBox:t,offset:r,position:i}=n,s;t!=null&&!E2(t)&&(s=t);var{x:a,y:l,width:u,height:d}=e,h=d>=0?1:-1,f=h*r,m=h>0?"end":"start",g=h>0?"start":"end",b=u>=0?1:-1,x=b*r,A=b>0?"end":"start",E=b>0?"start":"end";if(i==="top"){var C={x:a+u/2,y:l-h*r,textAnchor:"middle",verticalAnchor:m};return ht(ht({},C),s?{height:Math.max(l-s.y,0),width:u}:{})}if(i==="bottom"){var P={x:a+u/2,y:l+d+f,textAnchor:"middle",verticalAnchor:g};return ht(ht({},P),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(i==="left"){var T={x:a-x,y:l+d/2,textAnchor:A,verticalAnchor:"middle"};return ht(ht({},T),s?{width:Math.max(T.x-s.x,0),height:d}:{})}if(i==="right"){var N={x:a+u+x,y:l+d/2,textAnchor:E,verticalAnchor:"middle"};return ht(ht({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:d}:{})}var O=s?{width:u,height:d}:{};return i==="insideLeft"?ht({x:a+x,y:l+d/2,textAnchor:E,verticalAnchor:"middle"},O):i==="insideRight"?ht({x:a+u-x,y:l+d/2,textAnchor:A,verticalAnchor:"middle"},O):i==="insideTop"?ht({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:g},O):i==="insideBottom"?ht({x:a+u/2,y:l+d-f,textAnchor:"middle",verticalAnchor:m},O):i==="insideTopLeft"?ht({x:a+x,y:l+f,textAnchor:E,verticalAnchor:g},O):i==="insideTopRight"?ht({x:a+u-x,y:l+f,textAnchor:A,verticalAnchor:g},O):i==="insideBottomLeft"?ht({x:a+x,y:l+d-f,textAnchor:E,verticalAnchor:m},O):i==="insideBottomRight"?ht({x:a+u-x,y:l+d-f,textAnchor:A,verticalAnchor:m},O):i&&typeof i=="object"&&(xe(i.x)||ds(i.x))&&(xe(i.y)||ds(i.y))?ht({x:a+sn(i.x,u),y:l+sn(i.y,d),textAnchor:"end",verticalAnchor:"end"},O):ht({x:a+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},O)},hz={offset:5};function Ti(n){var e=fn(n,hz),{viewBox:t,position:r,value:i,children:s,content:a,className:l="",textBreakAll:u,labelRef:d}=e,h=az(),f=_2(),m=r==="center"?f:h??f,g=t||m;if(!g||Lt(i)&&Lt(s)&&!_.isValidElement(a)&&typeof a!="function")return null;var b=ht(ht({},e),{},{viewBox:g});if(_.isValidElement(a)){var{labelRef:x}=b,A=J6(b,Z6);return _.cloneElement(a,A)}var E;if(typeof a=="function"){if(E=_.createElement(a,b),_.isValidElement(E))return E}else E=oz(e);var C=E2(g),P=kt(e,!0);if(C&&(r==="insideStart"||r==="insideEnd"||r==="end"))return cz(e,r,E,P,g);var T=C?uz(g,e.offset,e.position):dz(e,g);return _.createElement(Jd,Wr({ref:d,className:He("recharts-label",l)},P,T,{breakAll:u}),E)}Ti.displayName="Label";var fz=(n,e,t)=>{if(!n)return null;var r={viewBox:e,labelRef:t};return n===!0?_.createElement(Ti,Wr({key:"label-implicit"},r)):Nr(n)?_.createElement(Ti,Wr({key:"label-implicit",value:n},r)):_.isValidElement(n)?n.type===Ti?_.cloneElement(n,ht({key:"label-implicit"},r)):_.createElement(Ti,Wr({key:"label-implicit",content:n},r)):$y(n)?_.createElement(Ti,Wr({key:"label-implicit",content:n},r)):n&&typeof n=="object"?_.createElement(Ti,Wr({},n,{key:"label-implicit"},r)):null};function pz(n){var{label:e}=n,t=_2();return fz(e,t)||null}var Im={},Rm={},c_;function mz(){return c_||(c_=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(Rm)),Rm}var Dm={},u_;function gz(){return u_||(u_=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(Dm)),Dm}var d_;function vz(){return d_||(d_=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=mz(),t=gz(),r=vv();function i(s){if(r.isArrayLike(s))return e.last(t.toArray(s))}n.last=i})(Im)),Im}var Lm,h_;function yz(){return h_||(h_=1,Lm=vz().last),Lm}var xz=yz();const bz=jr(xz);var wz=["valueAccessor"],Az=["dataKey","clockWise","id","textBreakAll"];function ad(){return ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(null,arguments)}function f_(n,e){if(n==null)return{};var t,r,i=Sz(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Sz(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var _z=n=>Array.isArray(n.value)?bz(n.value):n.value,C2=_.createContext(void 0),Ez=C2.Provider,P2=_.createContext(void 0),Cz=P2.Provider;function Pz(){return _.useContext(C2)}function kz(){return _.useContext(P2)}function Su(n){var{valueAccessor:e=_z}=n,t=f_(n,wz),{dataKey:r,clockWise:i,id:s,textBreakAll:a}=t,l=f_(t,Az),u=Pz(),d=kz(),h=u||d;return!h||!h.length?null:_.createElement(En,{className:"recharts-label-list"},h.map((f,m)=>{var g,b=Lt(r)?e(f,m):ot(f&&f.payload,r),x=Lt(s)?{}:{id:"".concat(s,"-").concat(m)};return _.createElement(Ti,ad({},kt(f,!0),l,x,{fill:(g=t.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:b,textBreakAll:a,viewBox:f.viewBox,key:"label-".concat(m),index:m}))}))}Su.displayName="LabelList";function k2(n){var{label:e}=n;return e?e===!0?_.createElement(Su,{key:"labelList-implicit"}):_.isValidElement(e)||$y(e)?_.createElement(Su,{key:"labelList-implicit",content:e}):typeof e=="object"?_.createElement(Su,ad({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var T2=n=>n.graphicalItems.polarItems,Tz=q([rt,jl],fy),By=q([T2,mt,Tz],my),Nz=q([By],gy),zy=q([Nz,ty],vy),Oz=q([zy,mt,By],xy),jz=q([zy,mt,By],(n,e,t)=>t.length>0?n.flatMap(r=>t.flatMap(i=>{var s,a=ot(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?n.map(r=>({value:ot(r,e.dataKey),errorDomain:[]})):n.map(r=>({value:r,errorDomain:[]}))),p_=()=>{},Mz=q([mt,jk,p_,jz,p_,$e,rt],wy),N2=q([mt,$e,zy,Oz,Ol,rt,Mz],Ay),Iz=q([N2,mt,Ha],Ey);q([mt,N2,Iz,rt],Py);var Rz={radiusAxis:{},angleAxis:{}},O2=Bn({name:"polarAxis",initialState:Rz,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),{addRadiusAxis:_V,removeRadiusAxis:EV,addAngleAxis:CV,removeAngleAxis:PV}=O2.actions,Dz=O2.reducer;function m_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function g_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(t),!0).forEach(function(r){Lz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lz(n,e,t){return(e=Fz(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fz(n){var e=$z(n,"string");return typeof e=="symbol"?e:e+""}function $z(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Bz=(n,e)=>e,Uy=q([T2,Bz],(n,e)=>n.filter(t=>t.type==="pie").find(t=>t.id===e)),zz=[],Hy=(n,e,t)=>t?.length===0?zz:t,j2=q([ty,Uy,Hy],(n,e,t)=>{var{chartData:r}=n;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&t!=null&&(i=t.map(s=>g_(g_({},e.presentationProps),s.props))),i!=null)return i}}),Uz=q([j2,Uy,Hy],(n,e,t)=>{if(!(n==null||e==null))return n.map((r,i)=>{var s,a=ot(r,e.nameKey,e.name),l;return t!=null&&(s=t[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=t[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?l=r.fill:l=e.fill,{value:Od(a,e.dataKey),color:l,payload:r,type:e.legendType}})}),Hz=q([j2,Uy,Hy,Tt],(n,e,t,r)=>{if(!(e==null||n==null))return UU({offset:r,pieSettings:e,displayedData:n,cells:t})}),Fm={},v_;function Wz(){return v_||(v_=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}n.isPlainObject=e})(Fm)),Fm}var $m,y_;function qz(){return y_||(y_=1,$m=Wz().isPlainObject),$m}var Gz=qz();const Vz=jr(Gz);function x_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function b_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x_(Object(t),!0).forEach(function(r){Kz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Kz(n,e,t){return(e=Yz(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yz(n){var e=Xz(n,"string");return typeof e=="symbol"?e:e+""}function Xz(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function od(){return od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},od.apply(null,arguments)}var w_=(n,e,t,r,i)=>{var s=t-r,a;return a="M ".concat(n,",").concat(e),a+="L ".concat(n+t,",").concat(e),a+="L ".concat(n+t-s/2,",").concat(e+i),a+="L ".concat(n+t-s/2-r,",").concat(e+i),a+="L ".concat(n,",").concat(e," Z"),a},Qz={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zz=n=>{var e=fn(n,Qz),{x:t,y:r,upperWidth:i,lowerWidth:s,height:a,className:l}=e,{animationEasing:u,animationDuration:d,animationBegin:h,isUpdateAnimationActive:f}=e,m=_.useRef(),[g,b]=_.useState(-1),x=_.useRef(i),A=_.useRef(s),E=_.useRef(a),C=_.useRef(t),P=_.useRef(r),T=Ld(n,"trapezoid-");if(_.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var H=m.current.getTotalLength();H&&b(H)}catch{}},[]),t!==+t||r!==+r||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var N=He("recharts-trapezoid",l);if(!f)return _.createElement("g",null,_.createElement("path",od({},kt(e,!0),{className:N,d:w_(t,r,i,s,a)})));var O=x.current,j=A.current,B=E.current,F=C.current,Y=P.current,V="0px ".concat(g===-1?1:g,"px"),K="".concat(g,"px 0px"),te=nP(["strokeDasharray"],d,u);return _.createElement(Dd,{animationId:T,key:T,canBegin:g>0,duration:d,easing:u,isActive:f,begin:h},H=>{var ae=Wt(O,i,H),X=Wt(j,s,H),Q=Wt(B,a,H),Z=Wt(F,t,H),$=Wt(Y,r,H);m.current&&(x.current=ae,A.current=X,E.current=Q,C.current=Z,P.current=$);var W=H>0?{transition:te,strokeDasharray:K}:{strokeDasharray:V};return _.createElement("path",od({},kt(e,!0),{className:N,d:w_(Z,$,ae,X,Q),ref:m,style:b_(b_({},W),e.style)}))})},Jz=["option","shapeType","propTransformer","activeClassName","isActive"];function eU(n,e){if(n==null)return{};var t,r,i=tU(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function tU(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function A_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ld(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A_(Object(t),!0).forEach(function(r){nU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nU(n,e,t){return(e=rU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rU(n){var e=iU(n,"string");return typeof e=="symbol"?e:e+""}function iU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sU(n,e){return ld(ld({},e),n)}function aU(n,e){return n==="symbols"}function S_(n){var{shapeType:e,elementProps:t}=n;switch(e){case"rectangle":return _.createElement(aP,t);case"trapezoid":return _.createElement(Zz,t);case"sector":return _.createElement(cP,t);case"symbols":if(aU(e))return _.createElement(pv,t);break;default:return null}}function oU(n){return _.isValidElement(n)?n.props:n}function M2(n){var{option:e,shapeType:t,propTransformer:r=sU,activeClassName:i="recharts-active-shape",isActive:s}=n,a=eU(n,Jz),l;if(_.isValidElement(e))l=_.cloneElement(e,ld(ld({},a),oU(e)));else if(typeof e=="function")l=e(a);else if(Vz(e)&&typeof e!="boolean"){var u=r(e,a);l=_.createElement(S_,{shapeType:t,elementProps:u})}else{var d=a;l=_.createElement(S_,{shapeType:t,elementProps:d})}return s?_.createElement(En,{className:i},l):l}var Wy=(n,e)=>{var t=lt();return(r,i)=>s=>{n?.(r,i,s),t(Kk({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},qy=n=>{var e=lt();return(t,r)=>i=>{n?.(t,r,i),e(H$())}},Gy=(n,e)=>{var t=lt();return(r,i)=>s=>{n?.(r,i,s),t(W$({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function I2(n){var{fn:e,args:t}=n,r=lt(),i=rr();return _.useEffect(()=>{if(!i){var s=e(t);return r(B$(s)),()=>{r(z$(s))}}},[e,t,r,i]),null}var R2=()=>{};function lU(n){var{legendPayload:e}=n,t=lt(),r=rr();return _.useEffect(()=>r?R2:(t(ZC(e)),()=>{t(JC(e))}),[t,r,e]),null}function cU(n){var{legendPayload:e}=n,t=lt(),r=ve($e);return _.useEffect(()=>r!=="centric"&&r!=="radial"?R2:(t(ZC(e)),()=>{t(JC(e))}),[t,r,e]),null}var Bm,uU=()=>{var[n]=_.useState(()=>ll("uid-"));return n},dU=(Bm=dE.useId)!==null&&Bm!==void 0?Bm:uU;function hU(n,e){var t=dU();return e||(n?"".concat(n,"-").concat(t):t)}var fU=_.createContext(void 0),D2=n=>{var{id:e,type:t,children:r}=n,i=hU("recharts-".concat(t),e);return _.createElement(fU.Provider,{value:i},r(i))},pU={cartesianItems:[],polarItems:[]},L2=Bn({name:"graphicalItems",initialState:pU,reducers:{addCartesianGraphicalItem(n,e){n.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(n,e){var{prev:t,next:r}=e.payload,i=Vr(n).cartesianItems.indexOf(t);i>-1&&(n.cartesianItems[i]=r)},removeCartesianGraphicalItem(n,e){var t=Vr(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},addPolarGraphicalItem(n,e){n.polarItems.push(e.payload)},removePolarGraphicalItem(n,e){var t=Vr(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)}}}),{addCartesianGraphicalItem:mU,replaceCartesianGraphicalItem:gU,removeCartesianGraphicalItem:vU,addPolarGraphicalItem:yU,removePolarGraphicalItem:xU}=L2.actions,bU=L2.reducer;function wU(n){var e=lt(),t=_.useRef(null);return _.useEffect(()=>{t.current===null?e(mU(n)):t.current!==n&&e(gU({prev:t.current,next:n})),t.current=n},[e,n]),_.useEffect(()=>()=>{t.current&&(e(vU(t.current)),t.current=null)},[e]),null}function AU(n){var e=lt();return _.useEffect(()=>(e(yU(n)),()=>{e(xU(n))}),[e,n]),null}var SU=["onMouseEnter","onClick","onMouseLeave"],_U=["id"],EU=["id"];function Vy(n,e){if(n==null)return{};var t,r,i=CU(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function CU(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function __(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?__(Object(t),!0).forEach(function(r){PU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):__(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PU(n,e,t){return(e=kU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kU(n){var e=TU(n,"string");return typeof e=="symbol"?e:e+""}function TU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $i(){return $i=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$i.apply(null,arguments)}function NU(n){var e=_.useMemo(()=>cv(n.children,Fl),[n.children]),t=ve(r=>Uz(r,n.id,e));return t==null?null:_.createElement(cU,{legendPayload:t})}function OU(n){var{dataKey:e,nameKey:t,sectors:r,stroke:i,strokeWidth:s,fill:a,name:l,hide:u,tooltipType:d}=n;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:e,nameKey:t,name:Od(l,e),hide:u,type:d,color:a,unit:""}}}var jU=(n,e)=>n>e?"start":n<e?"end":"middle",MU=(n,e,t)=>sn(typeof e=="function"?e(n):e,t,t*.8),IU=(n,e,t)=>{var{top:r,left:i,width:s,height:a}=e,l=HC(s,a),u=i+sn(n.cx,s,s/2),d=r+sn(n.cy,a,a/2),h=sn(n.innerRadius,l,0),f=MU(t,n.outerRadius,l),m=n.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:u,cy:d,innerRadius:h,outerRadius:f,maxRadius:m}},RU=(n,e)=>{var t=Dt(e-n),r=Math.min(Math.abs(e-n),360);return t*r};function DU(n){return n&&typeof n=="object"&&"className"in n&&typeof n.className=="string"?n.className:""}var LU=(n,e)=>{if(_.isValidElement(n))return _.cloneElement(n,e);if(typeof n=="function")return n(e);var t=He("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return _.createElement(tP,$i({},e,{type:"linear",className:t}))},FU=(n,e,t)=>{if(_.isValidElement(n))return _.cloneElement(n,e);var r=t;if(typeof n=="function"&&(r=n(e),_.isValidElement(r)))return r;var i=He("recharts-pie-label-text",DU(n));return _.createElement(Jd,$i({},e,{alignmentBaseline:"middle",className:i}),r)};function $U(n){var{sectors:e,props:t,showLabels:r}=n,{label:i,labelLine:s,dataKey:a}=t;if(!r||!i||!e)return null;var l=Hi(t),u=kt(i,!1),d=kt(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((m,g)=>{var b=(m.startAngle+m.endAngle)/2,x=xt(m.cx,m.cy,m.outerRadius+h,b),A=tt(tt(tt(tt({},l),m),{},{stroke:"none"},u),{},{index:g,textAnchor:jU(x.x,m.cx)},x),E=tt(tt(tt(tt({},l),m),{},{fill:"none",stroke:m.fill},d),{},{index:g,points:[xt(m.cx,m.cy,m.outerRadius,b),x],key:"line"});return _.createElement(En,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},s&&LU(s,E),FU(i,A,ot(m,a)))});return _.createElement(En,{className:"recharts-pie-labels"},f)}function BU(n){var{sectors:e,props:t,showLabels:r}=n,{label:i}=t;return typeof i=="object"&&i!=null&&"position"in i?_.createElement(k2,{label:i}):_.createElement($U,{sectors:e,props:t,showLabels:r})}function zU(n){var{sectors:e,activeShape:t,inactiveShape:r,allOtherPieProps:i}=n,s=ve(ks),{onMouseEnter:a,onClick:l,onMouseLeave:u}=i,d=Vy(i,SU),h=Wy(a,i.dataKey),f=qy(u),m=Gy(l,i.dataKey);return e==null||e.length===0?null:_.createElement(_.Fragment,null,e.map((g,b)=>{if(g?.startAngle===0&&g?.endAngle===0&&e.length!==1)return null;var x=t&&String(b)===s,A=s?r:null,E=x?t:A,C=tt(tt({},g),{},{stroke:g.stroke,tabIndex:-1,[KC]:b,[YC]:i.dataKey});return _.createElement(En,$i({tabIndex:-1,className:"recharts-pie-sector"},Sl(d,g,b),{onMouseEnter:h(g,b),onMouseLeave:f(g,b),onClick:m(g,b),key:"sector-".concat(g?.startAngle,"-").concat(g?.endAngle,"-").concat(g.midAngle,"-").concat(b)}),_.createElement(M2,$i({option:E,isActive:x,shapeType:"sector"},C)))}))}function UU(n){var e,{pieSettings:t,displayedData:r,cells:i,offset:s}=n,{cornerRadius:a,startAngle:l,endAngle:u,dataKey:d,nameKey:h,tooltipType:f}=t,m=Math.abs(t.minAngle),g=RU(l,u),b=Math.abs(g),x=r.length<=1?0:(e=t.paddingAngle)!==null&&e!==void 0?e:0,A=r.filter(O=>ot(O,d,0)!==0).length,E=(b>=360?A:A-1)*x,C=b-A*m-E,P=r.reduce((O,j)=>{var B=ot(j,d,0);return O+(xe(B)?B:0)},0),T;if(P>0){var N;T=r.map((O,j)=>{var B=ot(O,d,0),F=ot(O,h,j),Y=IU(t,s,O),V=(xe(B)?B:0)/P,K,te=tt(tt({},O),i&&i[j]&&i[j].props);j?K=N.endAngle+Dt(g)*x*(B!==0?1:0):K=l;var H=K+Dt(g)*((B!==0?m:0)+V*C),ae=(K+H)/2,X=(Y.innerRadius+Y.outerRadius)/2,Q=[{name:F,value:B,payload:te,dataKey:d,type:f}],Z=xt(Y.cx,Y.cy,X,ae);return N=tt(tt(tt(tt({},t.presentationProps),{},{percent:V,cornerRadius:a,name:F,tooltipPayload:Q,midAngle:ae,middleRadius:X,tooltipPosition:Z},te),Y),{},{value:B,startAngle:K,endAngle:H,payload:te,paddingAngle:Dt(g)*x}),N})}return T}function HU(n){var{showLabels:e,sectors:t,children:r}=n,i=_.useMemo(()=>!e||!t?[]:t.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[t,e]);return _.createElement(Cz,{value:e?i:void 0},r)}function WU(n){var{props:e,previousSectorsRef:t}=n,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:l,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:f}=e,m=Ld(e,"recharts-pie-"),g=t.current,[b,x]=_.useState(!1),A=_.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),E=_.useCallback(()=>{typeof h=="function"&&h(),x(!0)},[h]);return _.createElement(HU,{showLabels:!b,sectors:r},_.createElement(Dd,{animationId:m,begin:s,duration:a,isActive:i,easing:l,onAnimationStart:E,onAnimationEnd:A,key:m},C=>{var P=[],T=r&&r[0],N=T?.startAngle;return r?.forEach((O,j)=>{var B=g&&g[j],F=j>0?Ss(O,"paddingAngle",0):0;if(B){var Y=Wt(B.endAngle-B.startAngle,O.endAngle-O.startAngle,C),V=tt(tt({},O),{},{startAngle:N+F,endAngle:N+Y+F});P.push(V),N=V.endAngle}else{var{endAngle:K,startAngle:te}=O,H=Wt(0,K-te,C),ae=tt(tt({},O),{},{startAngle:N+F,endAngle:N+H+F});P.push(ae),N=ae.endAngle}}),t.current=P,_.createElement(En,null,_.createElement(zU,{sectors:P,activeShape:u,inactiveShape:d,allOtherPieProps:e}))}),_.createElement(BU,{showLabels:!b,sectors:r,props:e}),e.children)}var qU={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Rs.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function GU(n){var{id:e}=n,t=Vy(n,_U),{hide:r,className:i,rootTabIndex:s}=n,a=_.useMemo(()=>cv(n.children,Fl),[n.children]),l=ve(h=>Hz(h,e,a)),u=_.useRef(null),d=He("recharts-pie",i);return r||l==null?(u.current=null,_.createElement(En,{tabIndex:s,className:d})):_.createElement(_.Fragment,null,_.createElement(I2,{fn:OU,args:tt(tt({},n),{},{sectors:l})}),_.createElement(En,{tabIndex:s,className:d},_.createElement(WU,{props:tt(tt({},t),{},{sectors:l}),previousSectorsRef:u})))}function F2(n){var e=fn(n,qU),{id:t}=e,r=Vy(e,EU),i=Hi(r);return _.createElement(D2,{id:t,type:"pie"},s=>_.createElement(_.Fragment,null,_.createElement(AU,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),_.createElement(NU,$i({},r,{id:s})),_.createElement(GU,$i({},r,{id:s}))))}F2.displayName="Pie";function E_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function C_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E_(Object(t),!0).forEach(function(r){VU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VU(n,e,t){return(e=KU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KU(n){var e=YU(n,"string");return typeof e=="symbol"?e:e+""}function YU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var XU={xAxis:{},yAxis:{},zAxis:{}},$2=Bn({name:"cartesianAxis",initialState:XU,reducers:{addXAxis(n,e){n.xAxis[e.payload.id]=e.payload},removeXAxis(n,e){delete n.xAxis[e.payload.id]},addYAxis(n,e){n.yAxis[e.payload.id]=e.payload},removeYAxis(n,e){delete n.yAxis[e.payload.id]},addZAxis(n,e){n.zAxis[e.payload.id]=e.payload},removeZAxis(n,e){delete n.zAxis[e.payload.id]},updateYAxisWidth(n,e){var{id:t,width:r}=e.payload;n.yAxis[t]&&(n.yAxis[t]=C_(C_({},n.yAxis[t]),{},{width:r}))}}}),{addXAxis:QU,removeXAxis:ZU,addYAxis:JU,removeYAxis:e8,addZAxis:kV,removeZAxis:TV,updateYAxisWidth:t8}=$2.actions,n8=$2.reducer,r8=q([Tt],n=>{if(n)return{top:n.top,bottom:n.bottom,left:n.left,right:n.right}}),i8=q([r8,ni,ri],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),B2=()=>ve(i8),s8="Invariant failed";function a8(n,e){throw new Error(s8)}var o8=["x","y"];function Bg(){return Bg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bg.apply(null,arguments)}function P_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ho(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P_(Object(t),!0).forEach(function(r){l8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l8(n,e,t){return(e=c8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c8(n){var e=u8(n,"string");return typeof e=="symbol"?e:e+""}function u8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function d8(n,e){if(n==null)return{};var t,r,i=h8(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function h8(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function f8(n,e){var{x:t,y:r}=n,i=d8(n,o8),s="".concat(t),a=parseInt(s,10),l="".concat(r),u=parseInt(l,10),d="".concat(e.height||i.height),h=parseInt(d,10),f="".concat(e.width||i.width),m=parseInt(f,10);return Ho(Ho(Ho(Ho(Ho({},e),i),a?{x:a}:{}),u?{y:u}:{}),{},{height:h,width:m,name:e.name,radius:e.radius})}function Ky(n){return _.createElement(M2,Bg({shapeType:"rectangle",propTransformer:f8,activeClassName:"recharts-active-bar"},n))}var p8=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(xe(e))return e;var s=xe(r)||Lt(r);return s?e(r,i):(s||a8(),t)}},m8={},z2=Bn({name:"errorBars",initialState:m8,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]||(n[t]=[]),n[t].push(r)},replaceErrorBar:(n,e)=>{var{itemId:t,prev:r,next:i}=e.payload;n[t]&&(n[t]=n[t].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]&&(n[t]=n[t].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:NV,replaceErrorBar:OV,removeErrorBar:jV}=z2.actions,g8=z2.reducer,v8=["children"];function y8(n,e){if(n==null)return{};var t,r,i=x8(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function x8(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var b8={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},w8=_.createContext(b8);function A8(n){var{children:e}=n,t=y8(n,v8);return _.createElement(w8.Provider,{value:t},e)}function U2(n,e){var t,r,i=ve(d=>si(d,n)),s=ve(d=>ai(d,e)),a=(t=i?.allowDataOverflow)!==null&&t!==void 0?t:Nn.allowDataOverflow,l=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:On.allowDataOverflow,u=a||l;return{needClip:u,needClipX:a,needClipY:l}}function S8(n){var{xAxisId:e,yAxisId:t,clipPathId:r}=n,i=B2(),{needClipX:s,needClipY:a,needClip:l}=U2(e,t);if(!l)return null;var{x:u,y:d,width:h,height:f}=i;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:s?u:u-h/2,y:a?d:d-f/2,width:s?h:h*2,height:a?f:f*2}))}var _8=["onMouseEnter","onMouseLeave","onClick"],E8=["value","background","tooltipPosition"],C8=["id"],P8=["onMouseEnter","onClick","onMouseLeave"];function Bi(){return Bi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bi.apply(null,arguments)}function k_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function un(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k_(Object(t),!0).forEach(function(r){k8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function k8(n,e,t){return(e=T8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T8(n){var e=N8(n,"string");return typeof e=="symbol"?e:e+""}function N8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cd(n,e){if(n==null)return{};var t,r,i=O8(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function O8(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var j8=n=>{var{dataKey:e,name:t,fill:r,legendType:i,hide:s}=n;return[{inactive:s,dataKey:e,type:i,color:r,value:Od(t,e),payload:n}]};function M8(n){var{dataKey:e,stroke:t,strokeWidth:r,fill:i,name:s,hide:a,unit:l}=n;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:t,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Od(s,e),hide:a,type:n.tooltipType,color:n.fill,unit:l}}}function I8(n){var e=ve(ks),{data:t,dataKey:r,background:i,allOtherBarProps:s}=n,{onMouseEnter:a,onMouseLeave:l,onClick:u}=s,d=cd(s,_8),h=Wy(a,r),f=qy(l),m=Gy(u,r);if(!i||t==null)return null;var g=kt(i,!1);return _.createElement(_.Fragment,null,t.map((b,x)=>{var{value:A,background:E,tooltipPosition:C}=b,P=cd(b,E8);if(!E)return null;var T=h(b,x),N=f(b,x),O=m(b,x),j=un(un(un(un(un({option:i,isActive:String(x)===e},P),{},{fill:"#eee"},E),g),Sl(d,b,x)),{},{onMouseEnter:T,onMouseLeave:N,onClick:O,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return _.createElement(Ky,Bi({key:"background-bar-".concat(j.index)},j))}))}function R8(n){var{showLabels:e,children:t,rects:r}=n,i=r?.map(s=>{var a={x:s.x,y:s.y,width:s.width,height:s.height};return un(un({},a),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:a,fill:s.fill})});return _.createElement(Ez,{value:e?i:void 0},t)}function D8(n){var{shape:e,activeBar:t,baseProps:r,entry:i,index:s,dataKey:a}=n,l=ve(ks),u=ve(o2),d=t&&String(s)===l&&(u==null||a===u),h=d?t:e;return _.createElement(Ky,Bi({},r,i,{isActive:d,option:h,index:s,dataKey:a}))}function L8(n){var{shape:e,baseProps:t,entry:r,index:i,dataKey:s}=n;return _.createElement(Ky,Bi({},t,r,{isActive:!1,option:e,index:i,dataKey:s}))}function F8(n){var{data:e,props:t}=n,r=Hi(t),{id:i}=r,s=cd(r,C8),{shape:a,dataKey:l,activeBar:u}=t,{onMouseEnter:d,onClick:h,onMouseLeave:f}=t,m=cd(t,P8),g=Wy(d,l),b=qy(f),x=Gy(h,l);return e?_.createElement(_.Fragment,null,e.map((A,E)=>_.createElement(En,Bi({className:"recharts-bar-rectangle"},Sl(m,A,E),{onMouseEnter:g(A,E),onMouseLeave:b(A,E),onClick:x(A,E),key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(E)}),u?_.createElement(D8,{shape:a,activeBar:u,baseProps:s,entry:A,index:E,dataKey:l}):_.createElement(L8,{shape:a,baseProps:s,entry:A,index:E,dataKey:l})))):null}function $8(n){var{props:e,previousRectanglesRef:t}=n,{data:r,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:l,animationEasing:u,onAnimationEnd:d,onAnimationStart:h}=e,f=t.current,m=Ld(e,"recharts-bar-"),[g,b]=_.useState(!1),x=!g,A=_.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),E=_.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return _.createElement(R8,{showLabels:x,rects:r},_.createElement(Dd,{animationId:m,begin:a,duration:l,isActive:s,easing:u,onAnimationEnd:A,onAnimationStart:E,key:m},C=>{var P=C===1?r:r?.map((T,N)=>{var O=f&&f[N];if(O)return un(un({},T),{},{x:Wt(O.x,T.x,C),y:Wt(O.y,T.y,C),width:Wt(O.width,T.width,C),height:Wt(O.height,T.height,C)});if(i==="horizontal"){var j=Wt(0,T.height,C);return un(un({},T),{},{y:T.y+T.height-j,height:j})}var B=Wt(0,T.width,C);return un(un({},T),{},{width:B})});return C>0&&(t.current=P??null),P==null?null:_.createElement(En,null,_.createElement(F8,{props:e,data:P}))}),_.createElement(k2,{label:e.label}),e.children)}function B8(n){var e=_.useRef(null);return _.createElement($8,{previousRectanglesRef:e,props:n})}var H2=0,z8=(n,e)=>{var t=Array.isArray(n.value)?n.value[1]:n.value;return{x:n.x,y:n.y,value:t,errorVal:ot(n,e)}};class U8 extends _.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:i,xAxisId:s,yAxisId:a,needClip:l,background:u,id:d}=this.props;if(e||t==null)return null;var h=He("recharts-bar",i),f=d;return _.createElement(En,{className:h,id:d},l&&_.createElement("defs",null,_.createElement(S8,{clipPathId:f,xAxisId:s,yAxisId:a})),_.createElement(En,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},_.createElement(I8,{data:t,dataKey:r,background:u,allOtherBarProps:this.props}),_.createElement(B8,this.props)))}}var H8={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Rs.isSsr,legendType:"rect",minPointSize:H2,xAxisId:0,yAxisId:0};function W8(n){var{xAxisId:e,yAxisId:t,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:l,animationDuration:u,animationEasing:d,isAnimationActive:h}=n,{needClip:f}=U2(e,t),m=Nv(),g=rr(),b=cv(n.children,Fl),x=ve(C=>yH(C,e,t,g,n.id,b));if(m!=="vertical"&&m!=="horizontal")return null;var A,E=x?.[0];return E==null||E.height==null||E.width==null?A=0:A=m==="vertical"?E.height/2:E.width/2,_.createElement(A8,{xAxisId:e,yAxisId:t,data:x,dataPointFormatter:z8,errorBarOffset:A},_.createElement(U8,Bi({},n,{layout:m,needClip:f,data:x,xAxisId:e,yAxisId:t,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:l,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function q8(n){var{layout:e,barSettings:{dataKey:t,minPointSize:r},pos:i,bandSize:s,xAxis:a,yAxis:l,xAxisTicks:u,yAxisTicks:d,stackedData:h,displayedData:f,offset:m,cells:g,parentViewBox:b}=n,x=e==="horizontal"?l:a,A=h?x.scale.domain():null,E=sL({numericAxis:x});return f.map((C,P)=>{var T,N,O,j,B,F;h?T=JD(h[P],A):(T=ot(C,t),Array.isArray(T)||(T=[E,T]));var Y=p8(r,H2)(T[1],P);if(e==="horizontal"){var V,[K,te]=[l.scale(T[0]),l.scale(T[1])];N=mA({axis:a,ticks:u,bandSize:s,offset:i.offset,entry:C,index:P}),O=(V=te??K)!==null&&V!==void 0?V:void 0,j=i.size;var H=K-te;if(B=Ln(H)?0:H,F={x:N,y:m.top,width:j,height:m.height},Math.abs(Y)>0&&Math.abs(B)<Math.abs(Y)){var ae=Dt(B||Y)*(Math.abs(Y)-Math.abs(B));O-=ae,B+=ae}}else{var[X,Q]=[a.scale(T[0]),a.scale(T[1])];if(N=X,O=mA({axis:l,ticks:d,bandSize:s,offset:i.offset,entry:C,index:P}),j=Q-X,B=i.size,F={x:m.left,y:O,width:m.width,height:B},Math.abs(Y)>0&&Math.abs(j)<Math.abs(Y)){var Z=Dt(j||Y)*(Math.abs(Y)-Math.abs(j));j+=Z}}if(N==null||O==null||j==null||B==null)return null;var $=un(un({},C),{},{x:N,y:O,width:j,height:B,value:h?T:T[1],payload:C,background:F,tooltipPosition:{x:N+j/2,y:O+B/2},parentViewBox:b},g&&g[P]&&g[P].props);return $}).filter(Boolean)}function G8(n){var e=fn(n,H8),t=rr();return _.createElement(D2,{id:e.id,type:"bar"},r=>_.createElement(_.Fragment,null,_.createElement(lU,{legendPayload:j8(e)}),_.createElement(I2,{fn:M8,args:e}),_.createElement(wU,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:iL(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:t}),_.createElement(W8,Bi({},e,{id:r}))))}var Ma=_.memo(G8);Ma.displayName="Bar";function T_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T_(Object(t),!0).forEach(function(r){V8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function V8(n,e,t){return(e=K8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K8(n){var e=Y8(n,"string");return typeof e=="symbol"?e:e+""}function Y8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var X8=(n,e)=>e,Q8=(n,e,t)=>t,Z8=(n,e,t,r)=>r,J8=(n,e,t,r,i)=>i,$l=q([py,J8],(n,e)=>n.filter(t=>t.type==="bar").find(t=>t.id===e)),eH=q([$l],n=>n?.maxBarSize),tH=(n,e,t,r,i,s)=>s,N_=(n,e,t)=>{var r=t??n;if(!Lt(r))return sn(r,e,0)},nH=q([$e,py,X8,Q8,Z8],(n,e,t,r,i)=>e.filter(s=>n==="horizontal"?s.xAxisId===t:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),rH=(n,e,t,r)=>{var i=$e(n);return i==="horizontal"?Ig(n,"yAxis",t,r):Ig(n,"xAxis",e,r)},iH=(n,e,t)=>{var r=$e(n);return r==="horizontal"?jS(n,"xAxis",e):jS(n,"yAxis",t)},sH=(n,e,t)=>{var r={},i=n.filter(Vd),s=n.filter(d=>d.stackId==null),a=i.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),r),l=Object.entries(a).map(d=>{var[h,f]=d,m=f.map(b=>b.dataKey),g=N_(e,t,f[0].barSize);return{stackId:h,dataKeys:m,barSize:g}}),u=s.map(d=>{var h=[d.dataKey].filter(m=>m!=null),f=N_(e,t,d.barSize);return{stackId:void 0,dataKeys:h,barSize:f}});return[...l,...u]},aH=q([nH,$5,iH],sH),oH=(n,e,t,r,i)=>{var s,a,l=$l(n,e,t,r,i);if(l!=null){var u=$e(n),d=sk(n),{maxBarSize:h}=l,f=Lt(h)?d:h,m,g;return u==="horizontal"?(m=ja(n,"xAxis",e,r),g=Oa(n,"xAxis",e,r)):(m=ja(n,"yAxis",t,r),g=Oa(n,"yAxis",t,r)),(s=(a=Ev(m,g,!0))!==null&&a!==void 0?a:f)!==null&&s!==void 0?s:0}},W2=(n,e,t,r)=>{var i=$e(n),s,a;return i==="horizontal"?(s=ja(n,"xAxis",e,r),a=Oa(n,"xAxis",e,r)):(s=ja(n,"yAxis",t,r),a=Oa(n,"yAxis",t,r)),Ev(s,a)};function lH(n,e,t,r,i){var s=r.length;if(!(s<1)){var a=sn(n,t,0,!0),l,u=[];if($n(r[0].barSize)){var d=!1,h=t/s,f=r.reduce((E,C)=>E+(C.barSize||0),0);f+=(s-1)*a,f>=t&&(f-=(s-1)*a,a=0),f>=t&&h>0&&(d=!0,h*=.9,f=s*h);var m=(t-f)/2>>0,g={offset:m-a,size:0};l=r.reduce((E,C)=>{var P,T={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g.offset+g.size+a,size:d?h:(P=C.barSize)!==null&&P!==void 0?P:0}},N=[...E,T];return g=N[N.length-1].position,N},u)}else{var b=sn(e,t,0,!0);t-2*b-(s-1)*a<=0&&(a=0);var x=(t-2*b-(s-1)*a)/s;x>1&&(x>>=0);var A=$n(i)?Math.min(x,i):x;l=r.reduce((E,C,P)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:b+(x+a)*P+(x-A)/2,size:A}}],u)}return l}}var cH=(n,e,t,r,i,s,a)=>{var l=Lt(a)?e:a,u=lH(t,r,i!==s?i:s,n,l);return i!==s&&u!=null&&(u=u.map(d=>pu(pu({},d),{},{position:pu(pu({},d.position),{},{offset:d.position.offset-i/2})}))),u},uH=q([aH,sk,F5,ak,oH,W2,eH],cH),dH=(n,e,t,r)=>ja(n,"xAxis",e,r),hH=(n,e,t,r)=>ja(n,"yAxis",t,r),fH=(n,e,t,r)=>Oa(n,"xAxis",e,r),pH=(n,e,t,r)=>Oa(n,"yAxis",t,r),mH=q([uH,$l],(n,e)=>{if(!(n==null||e==null)){var t=n.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(t!=null)return t.position}}),gH=(n,e)=>{var t=dy(e);if(!(!n||t==null||e==null)){var{stackId:r}=e;if(r!=null){var i=n[r];if(i){var{stackedData:s}=i;if(s)return s.find(a=>a.key===t)}}}},vH=q([rH,$l],gH),yH=q([Tt,Cv,dH,hH,fH,pH,mH,$e,ny,W2,vH,$l,tH],(n,e,t,r,i,s,a,l,u,d,h,f,m)=>{var{chartData:g,dataStartIndex:b,dataEndIndex:x}=u;if(!(f==null||a==null||e==null||l!=="horizontal"&&l!=="vertical"||t==null||r==null||i==null||s==null||d==null)){var{data:A}=f,E;if(A!=null&&A.length>0?E=A:E=g?.slice(b,x+1),E!=null)return q8({layout:l,barSettings:f,pos:a,parentViewBox:e,bandSize:d,xAxis:t,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:E,offset:n,cells:m})}}),q2=n=>{var{chartData:e}=n,t=lt(),r=rr();return _.useEffect(()=>r?()=>{}:(t(US(e)),()=>{t(US(void 0))}),[e,t,r]),null},O_={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},G2=Bn({name:"brush",initialState:O_,reducers:{setBrushSettings(n,e){return e.payload==null?O_:e.payload}}}),{setBrushSettings:MV}=G2.actions,xH=G2.reducer;function bH(n,e,t){return(e=wH(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wH(n){var e=AH(n,"string");return typeof e=="symbol"?e:e+""}function AH(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Yy{static create(e){return new Yy(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],i=t[t.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}bH(Yy,"EPS",1e-4);function SH(n){return(n%180+180)%180}var _H=function(e){var{width:t,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=SH(i),a=s*Math.PI/180,l=Math.atan(r/t),u=a>l&&a<Math.PI-l?r/Math.sin(a):t/Math.cos(a);return Math.abs(u)},EH={dots:[],areas:[],lines:[]},V2=Bn({name:"referenceElements",initialState:EH,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=Vr(n).dots.findIndex(r=>r===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=Vr(n).areas.findIndex(r=>r===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=Vr(n).lines.findIndex(r=>r===e.payload);t!==-1&&n.lines.splice(t,1)}}}),{addDot:IV,removeDot:RV,addArea:DV,removeArea:LV,addLine:FV,removeLine:$V}=V2.actions,CH=V2.reducer,PH=_.createContext(void 0),kH=n=>{var{children:e}=n,[t]=_.useState("".concat(ll("recharts"),"-clip")),r=B2();if(r==null)return null;var{x:i,y:s,width:a,height:l}=r;return _.createElement(PH.Provider,{value:t},_.createElement("defs",null,_.createElement("clipPath",{id:t},_.createElement("rect",{x:i,y:s,height:l,width:a}))),e)};function Ia(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function K2(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function TH(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return _H(r,t)}function NH(n,e,t){var r=t==="width",{x:i,y:s,width:a,height:l}=n;return e===1?{start:r?i:s,end:r?i+a:s+l}:{start:r?i+a:s+l,end:r?i:s}}function ud(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var s=t();return n*(e-n*s/2-r)>=0&&n*(e+n*s/2-i)<=0}function OH(n,e){return K2(n,e+1)}function jH(n,e,t,r,i){for(var s=(r||[]).slice(),{start:a,end:l}=e,u=0,d=1,h=a,f=function(){var b=r?.[u];if(b===void 0)return{v:K2(r,d)};var x=u,A,E=()=>(A===void 0&&(A=t(b,x)),A),C=b.coordinate,P=u===0||ud(n,C,E,h,l);P||(u=0,h=a,d+=1),P&&(h=C+n*(E()/2+i),u+=d)},m;d<=s.length;)if(m=f(),m)return m.v;return[]}function j_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j_(Object(t),!0).forEach(function(r){MH(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function MH(n,e,t){return(e=IH(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IH(n){var e=RH(n,"string");return typeof e=="symbol"?e:e+""}function RH(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DH(n,e,t,r,i){for(var s=(r||[]).slice(),a=s.length,{start:l}=e,{end:u}=e,d=function(m){var g=s[m],b,x=()=>(b===void 0&&(b=t(g,m)),b);if(m===a-1){var A=n*(g.coordinate+n*x()/2-u);s[m]=g=Jt(Jt({},g),{},{tickCoord:A>0?g.coordinate-A*n:g.coordinate})}else s[m]=g=Jt(Jt({},g),{},{tickCoord:g.coordinate});var E=ud(n,g.tickCoord,x,l,u);E&&(u=g.tickCoord-n*(x()/2+i),s[m]=Jt(Jt({},g),{},{isShow:!0}))},h=a-1;h>=0;h--)d(h);return s}function LH(n,e,t,r,i,s){var a=(r||[]).slice(),l=a.length,{start:u,end:d}=e;if(s){var h=r[l-1],f=t(h,l-1),m=n*(h.coordinate+n*f/2-d);a[l-1]=h=Jt(Jt({},h),{},{tickCoord:m>0?h.coordinate-m*n:h.coordinate});var g=ud(n,h.tickCoord,()=>f,u,d);g&&(d=h.tickCoord-n*(f/2+i),a[l-1]=Jt(Jt({},h),{},{isShow:!0}))}for(var b=s?l-1:l,x=function(C){var P=a[C],T,N=()=>(T===void 0&&(T=t(P,C)),T);if(C===0){var O=n*(P.coordinate-n*N()/2-u);a[C]=P=Jt(Jt({},P),{},{tickCoord:O<0?P.coordinate-O*n:P.coordinate})}else a[C]=P=Jt(Jt({},P),{},{tickCoord:P.coordinate});var j=ud(n,P.tickCoord,N,u,d);j&&(u=P.tickCoord+n*(N()/2+i),a[C]=Jt(Jt({},P),{},{isShow:!0}))},A=0;A<b;A++)x(A);return a}function Xy(n,e,t){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:l,interval:u,tickFormatter:d,unit:h,angle:f}=n;if(!i||!i.length||!r)return[];if(xe(u)||Rs.isSsr){var m;return(m=OH(i,xe(u)?u:0))!==null&&m!==void 0?m:[]}var g=[],b=l==="top"||l==="bottom"?"width":"height",x=h&&b==="width"?el(h,{fontSize:e,letterSpacing:t}):{width:0,height:0},A=(P,T)=>{var N=typeof d=="function"?d(P.value,T):P.value;return b==="width"?TH(el(N,{fontSize:e,letterSpacing:t}),x,f):el(N,{fontSize:e,letterSpacing:t})[b]},E=i.length>=2?Dt(i[1].coordinate-i[0].coordinate):1,C=NH(s,E,b);return u==="equidistantPreserveStart"?jH(E,C,A,i,a):(u==="preserveStart"||u==="preserveStartEnd"?g=LH(E,C,A,i,a,u==="preserveStartEnd"):g=DH(E,C,A,i,a),g.filter(P=>P.isShow))}var FH=n=>{var{ticks:e,label:t,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=n,a=0;if(e){e.forEach(h=>{if(h){var f=h.getBoundingClientRect();f.width>a&&(a=f.width)}});var l=t?t.getBoundingClientRect().width:0,u=i+s,d=a+u+l+(t?r:0);return Math.round(d)}return 0},$H=["axisLine","width","height","className","hide","ticks"],BH=["viewBox"],zH=["viewBox"];function zg(n,e){if(n==null)return{};var t,r,i=UH(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function UH(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Ts(){return Ts=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ts.apply(null,arguments)}function M_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Pt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M_(Object(t),!0).forEach(function(r){HH(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HH(n,e,t){return(e=WH(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WH(n){var e=qH(n,"string");return typeof e=="symbol"?e:e+""}function qH(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Qy={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function GH(n){var{x:e,y:t,width:r,height:i,orientation:s,mirror:a,axisLine:l,otherSvgProps:u}=n;if(!l)return null;var d=Pt(Pt(Pt({},u),kt(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!a||s==="bottom"&&a);d=Pt(Pt({},d),{},{x1:e,y1:t+h*i,x2:e+r,y2:t+h*i})}else{var f=+(s==="left"&&!a||s==="right"&&a);d=Pt(Pt({},d),{},{x1:e+f*r,y1:t,x2:e+f*r,y2:t+i})}return _.createElement("line",Ts({},d,{className:He("recharts-cartesian-axis-line",Ss(l,"className"))}))}function VH(n,e,t,r,i,s,a,l,u){var d,h,f,m,g,b,x=l?-1:1,A=n.tickSize||a,E=xe(n.tickCoord)?n.tickCoord:n.coordinate;switch(s){case"top":d=h=n.coordinate,m=t+ +!l*i,f=m-x*A,b=f-x*u,g=E;break;case"left":f=m=n.coordinate,h=e+ +!l*r,d=h-x*A,g=d-x*u,b=E;break;case"right":f=m=n.coordinate,h=e+ +l*r,d=h+x*A,g=d+x*u,b=E;break;default:d=h=n.coordinate,m=t+ +l*i,f=m+x*A,b=f+x*u,g=E;break}return{line:{x1:d,y1:f,x2:h,y2:m},tick:{x:g,y:b}}}function KH(n,e){switch(n){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function YH(n,e){switch(n){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function XH(n){var{option:e,tickProps:t,value:r}=n,i,s=He(t.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))i=_.cloneElement(e,Pt(Pt({},t),{},{className:s}));else if(typeof e=="function")i=e(Pt(Pt({},t),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=He(a,e?.className)),i=_.createElement(Jd,Ts({},t,{className:a}),r)}return i}function QH(n){var{ticks:e=[],tick:t,tickLine:r,stroke:i,tickFormatter:s,unit:a,padding:l,tickTextProps:u,orientation:d,mirror:h,x:f,y:m,width:g,height:b,tickSize:x,tickMargin:A,fontSize:E,letterSpacing:C,getTicksConfig:P,events:T}=n,N=Xy(Pt(Pt({},P),{},{ticks:e}),E,C),O=KH(d,h),j=YH(d,h),B=Hi(P),F=kt(t,!1),Y=Pt(Pt({},B),{},{fill:"none"},kt(r,!1)),V=N.map((K,te)=>{var{line:H,tick:ae}=VH(K,f,m,g,b,d,x,h,A),X=Pt(Pt(Pt(Pt({textAnchor:O,verticalAnchor:j},B),{},{stroke:"none",fill:i},F),ae),{},{index:te,payload:K,visibleTicksCount:N.length,tickFormatter:s,padding:l},u);return _.createElement(En,Ts({className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},Sl(T,K,te)),r&&_.createElement("line",Ts({},Y,H,{className:He("recharts-cartesian-axis-tick-line",Ss(r,"className"))})),t&&_.createElement(XH,{option:t,tickProps:X,value:"".concat(typeof s=="function"?s(K.value,te):K.value).concat(a||"")}))});return V.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},V):null}var ZH=_.forwardRef((n,e)=>{var{axisLine:t,width:r,height:i,className:s,hide:a,ticks:l}=n,u=zg(n,$H),[d,h]=_.useState(""),[f,m]=_.useState(""),g=_.useRef([]);_.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return FH({ticks:g.current,label:(x=n.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:n.tickSize,tickMargin:n.tickMargin})}}));var b=_.useCallback(x=>{if(x){var A=x.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(A);var E=A[0];if(E){var C=window.getComputedStyle(E),P=C.fontSize,T=C.letterSpacing;(P!==d||T!==f)&&(h(P),m(T))}}},[d,f]);return a||r!=null&&r<=0||i!=null&&i<=0?null:_.createElement(En,{className:He("recharts-cartesian-axis",s),ref:b},_.createElement(GH,{x:n.x,y:n.y,width:r,height:i,orientation:n.orientation,mirror:n.mirror,axisLine:t,otherSvgProps:Hi(n)}),_.createElement(QH,{ticks:l,tick:n.tick,tickLine:n.tickLine,stroke:n.stroke,tickFormatter:n.tickFormatter,unit:n.unit,padding:n.padding,tickTextProps:n.tickTextProps,orientation:n.orientation,mirror:n.mirror,x:n.x,y:n.y,width:n.width,height:n.height,tickSize:n.tickSize,tickMargin:n.tickMargin,fontSize:d,letterSpacing:f,getTicksConfig:n,events:u}),_.createElement(iz,{x:n.x,y:n.y,width:n.width,height:n.height},_.createElement(pz,{label:n.label}),n.children))}),JH=_.memo(ZH,(n,e)=>{var{viewBox:t}=n,r=zg(n,BH),{viewBox:i}=e,s=zg(e,zH);return Ia(t,i)&&Ia(r,s)}),Zy=_.forwardRef((n,e)=>{var t=fn(n,Qy);return _.createElement(JH,Ts({},t,{ref:e}))});Zy.displayName="CartesianAxis";var eW=["x1","y1","x2","y2","key"],tW=["offset"],nW=["xAxisId","yAxisId"],rW=["xAxisId","yAxisId"];function I_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I_(Object(t),!0).forEach(function(r){iW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iW(n,e,t){return(e=sW(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sW(n){var e=aW(n,"string");return typeof e=="symbol"?e:e+""}function aW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ps(){return ps=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ps.apply(null,arguments)}function dd(n,e){if(n==null)return{};var t,r,i=oW(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function oW(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var lW=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:r,y:i,width:s,height:a,ry:l}=n;return _.createElement("rect",{x:r,y:i,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function Y2(n,e){var t;if(_.isValidElement(n))t=_.cloneElement(n,e);else if(typeof n=="function")t=n(e);else{var{x1:r,y1:i,x2:s,y2:a,key:l}=e,u=dd(e,eW),d=Hi(u),{offset:h}=d,f=dd(d,tW);t=_.createElement("line",ps({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:l}))}return t}function cW(n){var{x:e,width:t,horizontal:r=!0,horizontalPoints:i}=n;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=n,l=dd(n,nW),u=i.map((d,h)=>{var f=tn(tn({},l),{},{x1:e,y1:d,x2:e+t,y2:d,key:"line-".concat(h),index:h});return Y2(r,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function uW(n){var{y:e,height:t,vertical:r=!0,verticalPoints:i}=n;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=n,l=dd(n,rW),u=i.map((d,h)=>{var f=tn(tn({},l),{},{x1:d,y1:e,x2:d,y2:e+t,key:"line-".concat(h),index:h});return Y2(r,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function dW(n){var{horizontalFill:e,fillOpacity:t,x:r,y:i,width:s,height:a,horizontalPoints:l,horizontal:u=!0}=n;if(!u||!e||!e.length)return null;var d=l.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==d[0]&&d.unshift(0);var h=d.map((f,m)=>{var g=!d[m+1],b=g?i+a-f:d[m+1]-f;if(b<=0)return null;var x=m%e.length;return _.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:b,width:s,stroke:"none",fill:e[x],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function hW(n){var{vertical:e=!0,verticalFill:t,fillOpacity:r,x:i,y:s,width:a,height:l,verticalPoints:u}=n;if(!e||!t||!t.length)return null;var d=u.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==d[0]&&d.unshift(0);var h=d.map((f,m)=>{var g=!d[m+1],b=g?i+a-f:d[m+1]-f;if(b<=0)return null;var x=m%t.length;return _.createElement("rect",{key:"react-".concat(m),x:f,y:s,width:b,height:l,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var fW=(n,e)=>{var{xAxis:t,width:r,height:i,offset:s}=n;return qC(Xy(tn(tn(tn({},Qy),t),{},{ticks:GC(t),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},pW=(n,e)=>{var{yAxis:t,width:r,height:i,offset:s}=n;return qC(Xy(tn(tn(tn({},Qy),t),{},{ticks:GC(t),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},mW={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function eh(n){var e=kv(),t=Tv(),r=XC(),i=tn(tn({},fn(n,mW)),{},{x:xe(n.x)?n.x:r.left,y:xe(n.y)?n.y:r.top,width:xe(n.width)?n.width:r.width,height:xe(n.height)?n.height:r.height}),{xAxisId:s,yAxisId:a,x:l,y:u,width:d,height:h,syncWithTicks:f,horizontalValues:m,verticalValues:g}=i,b=rr(),x=ve(F=>MS(F,"xAxis",s,b)),A=ve(F=>MS(F,"yAxis",a,b));if(!xe(d)||d<=0||!xe(h)||h<=0||!xe(l)||l!==+l||!xe(u)||u!==+u)return null;var E=i.verticalCoordinatesGenerator||fW,C=i.horizontalCoordinatesGenerator||pW,{horizontalPoints:P,verticalPoints:T}=i;if((!P||!P.length)&&typeof C=="function"){var N=m&&m.length,O=C({yAxis:A?tn(tn({},A),{},{ticks:N?m:A.ticks}):void 0,width:e,height:t,offset:r},N?!0:f);Jo(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(P=O)}if((!T||!T.length)&&typeof E=="function"){var j=g&&g.length,B=E({xAxis:x?tn(tn({},x),{},{ticks:j?g:x.ticks}):void 0,width:e,height:t,offset:r},j?!0:f);Jo(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(T=B)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(lW,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement(dW,ps({},i,{horizontalPoints:P})),_.createElement(hW,ps({},i,{verticalPoints:T})),_.createElement(cW,ps({},i,{offset:r,horizontalPoints:P,xAxis:x,yAxis:A})),_.createElement(uW,ps({},i,{offset:r,verticalPoints:T,xAxis:x,yAxis:A})))}eh.displayName="CartesianGrid";var gW=["dangerouslySetInnerHTML","ticks"],vW=["id"],yW=["domain"],xW=["domain"];function Ug(){return Ug=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ug.apply(null,arguments)}function hd(n,e){if(n==null)return{};var t,r,i=bW(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function bW(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function wW(n){var e=lt();return _.useEffect(()=>(e(QU(n)),()=>{e(ZU(n))}),[n,e]),null}var AW=n=>{var{xAxisId:e,className:t}=n,r=ve(Cv),i=rr(),s="xAxis",a=ve(A=>Wa(A,s,e,i)),l=ve(A=>Uk(A,s,e,i)),u=ve(A=>Fk(A,e)),d=ve(A=>N$(A,e)),h=ve(A=>mk(A,e));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:f,ticks:m}=n,g=hd(n,gW),{id:b}=h,x=hd(h,vW);return _.createElement(Zy,Ug({},g,x,{scale:a,x:d.x,y:d.y,width:u.width,height:u.height,className:He("recharts-".concat(s," ").concat(s),t),viewBox:r,ticks:l}))},SW={allowDataOverflow:Nn.allowDataOverflow,allowDecimals:Nn.allowDecimals,allowDuplicatedCategory:Nn.allowDuplicatedCategory,height:Nn.height,hide:!1,mirror:Nn.mirror,orientation:Nn.orientation,padding:Nn.padding,reversed:Nn.reversed,scale:Nn.scale,tickCount:Nn.tickCount,type:Nn.type,xAxisId:0},_W=n=>{var e,t,r,i,s,a=fn(n,SW);return _.createElement(_.Fragment,null,_.createElement(wW,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.xAxisId,scale:a.scale,type:a.type,padding:a.padding,allowDataOverflow:a.allowDataOverflow,domain:a.domain,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,includeHidden:(t=a.includeHidden)!==null&&t!==void 0?t:!1,reversed:a.reversed,ticks:a.ticks,height:a.height,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(i=a.minTickGap)!==null&&i!==void 0?i:5,tick:(s=a.tick)!==null&&s!==void 0?s:!0,tickFormatter:a.tickFormatter}),_.createElement(AW,a))},EW=(n,e)=>{var{domain:t}=n,r=hd(n,yW),{domain:i}=e,s=hd(e,xW);return Ia(r,s)?Array.isArray(t)&&t.length===2&&Array.isArray(i)&&i.length===2?t[0]===i[0]&&t[1]===i[1]:Ia({domain:t},{domain:i}):!1},th=_.memo(_W,EW);th.displayName="XAxis";var CW=["dangerouslySetInnerHTML","ticks"],PW=["id"],kW=["domain"],TW=["domain"];function Hg(){return Hg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hg.apply(null,arguments)}function fd(n,e){if(n==null)return{};var t,r,i=NW(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function NW(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function OW(n){var e=lt();return _.useEffect(()=>(e(JU(n)),()=>{e(e8(n))}),[n,e]),null}var jW=n=>{var{yAxisId:e,className:t,width:r,label:i}=n,s=_.useRef(null),a=_.useRef(null),l=ve(Cv),u=rr(),d=lt(),h="yAxis",f=ve(N=>Wa(N,h,e,u)),m=ve(N=>$k(N,e)),g=ve(N=>j$(N,e)),b=ve(N=>Uk(N,h,e,u)),x=ve(N=>gk(N,e));if(_.useLayoutEffect(()=>{if(!(r!=="auto"||!m||$y(i)||_.isValidElement(i)||x==null)){var N=s.current;if(N){var O=N.getCalculatedWidth();Math.round(m.width)!==Math.round(O)&&d(t8({id:e,width:O}))}}},[b,m,d,i,e,r,x]),m==null||g==null||x==null)return null;var{dangerouslySetInnerHTML:A,ticks:E}=n,C=fd(n,CW),{id:P}=x,T=fd(x,PW);return _.createElement(Zy,Hg({},C,T,{ref:s,labelRef:a,scale:f,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:m.width,height:m.height,className:He("recharts-".concat(h," ").concat(h),t),viewBox:l,ticks:b}))},MW={allowDataOverflow:On.allowDataOverflow,allowDecimals:On.allowDecimals,allowDuplicatedCategory:On.allowDuplicatedCategory,hide:!1,mirror:On.mirror,orientation:On.orientation,padding:On.padding,reversed:On.reversed,scale:On.scale,tickCount:On.tickCount,type:On.type,width:On.width,yAxisId:0},IW=n=>{var e,t,r,i,s,a=fn(n,MW);return _.createElement(_.Fragment,null,_.createElement(OW,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.yAxisId,scale:a.scale,type:a.type,domain:a.domain,allowDataOverflow:a.allowDataOverflow,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,padding:a.padding,includeHidden:(t=a.includeHidden)!==null&&t!==void 0?t:!1,reversed:a.reversed,ticks:a.ticks,width:a.width,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(i=a.minTickGap)!==null&&i!==void 0?i:5,tick:(s=a.tick)!==null&&s!==void 0?s:!0,tickFormatter:a.tickFormatter}),_.createElement(jW,a))},RW=(n,e)=>{var{domain:t}=n,r=fd(n,kW),{domain:i}=e,s=fd(e,TW);return Ia(r,s)?Array.isArray(t)&&t.length===2&&Array.isArray(i)&&i.length===2?t[0]===i[0]&&t[1]===i[1]:Ia({domain:t},{domain:i}):!1},nh=_.memo(IW,RW);nh.displayName="YAxis";var zm={exports:{}},Um={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function DW(){if(R_)return Um;R_=1;var n=Da();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,s=n.useEffect,a=n.useMemo,l=n.useDebugValue;return Um.useSyncExternalStoreWithSelector=function(u,d,h,f,m){var g=i(null);if(g.current===null){var b={hasValue:!1,value:null};g.current=b}else b=g.current;g=a(function(){function A(N){if(!E){if(E=!0,C=N,N=f(N),m!==void 0&&b.hasValue){var O=b.value;if(m(O,N))return P=O}return P=N}if(O=P,t(C,N))return O;var j=f(N);return m!==void 0&&m(O,j)?(C=N,O):(C=N,P=j)}var E=!1,C,P,T=h===void 0?null:h;return[function(){return A(d())},T===null?void 0:function(){return A(T())}]},[d,h,f,m]);var x=r(u,g[0],g[1]);return s(function(){b.hasValue=!0,b.value=x},[x]),l(x),x},Um}var D_;function LW(){return D_||(D_=1,zm.exports=DW()),zm.exports}LW();function FW(n){n()}function $W(){let n=null,e=null;return{clear(){n=null,e=null},notify(){FW(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var L_={notify(){},get:()=>[]};function BW(n,e){let t,r=L_,i=0,s=!1;function a(x){h();const A=r.subscribe(x);let E=!1;return()=>{E||(E=!0,A(),f())}}function l(){r.notify()}function u(){b.onStateChange&&b.onStateChange()}function d(){return s}function h(){i++,t||(t=n.subscribe(u),r=$W())}function f(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=L_)}function m(){s||(s=!0,h())}function g(){s&&(s=!1,f())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return b}var zW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UW=zW(),HW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WW=HW(),qW=()=>UW||WW?_.useLayoutEffect:_.useEffect,GW=qW(),VW=Symbol.for("react-redux-context"),KW=typeof globalThis<"u"?globalThis:{};function YW(){if(!_.createContext)return{};const n=KW[VW]??=new Map;let e=n.get(_.createContext);return e||(e=_.createContext(null),n.set(_.createContext,e)),e}var XW=YW();function QW(n){const{children:e,context:t,serverState:r,store:i}=n,s=_.useMemo(()=>{const u=BW(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),a=_.useMemo(()=>i.getState(),[i]);GW(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const l=t||XW;return _.createElement(l.Provider,{value:s},e)}var ZW=QW,JW=(n,e)=>e,Jy=q([JW,$e,hk,Ot,r2,oi,DB,Tt],zB),e0=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,r=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/r)}},X2=tr("mouseClick"),Q2=El();Q2.startListening({actionCreator:X2,effect:(n,e)=>{var t=n.payload,r=Jy(e.getState(),e0(t));r?.activeIndex!=null&&e.dispatch(q$({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Wg=tr("mouseMove"),Z2=El();Z2.startListening({actionCreator:Wg,effect:(n,e)=>{var t=n.payload,r=e.getState(),i=Ny(r,r.tooltip.settings.shared),s=Jy(r,e0(t));i==="axis"&&(s?.activeIndex!=null?e.dispatch(Xk({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(Yk()))}});var F_={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},J2=Bn({name:"rootProps",initialState:F_,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:F_.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className}}}),eq=J2.reducer,{updateOptions:tq}=J2.actions,eT=Bn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(n,e)=>e.payload}}),{updatePolarOptions:nq}=eT.actions,rq=eT.reducer,tT=tr("keyDown"),nT=tr("focus"),t0=El();t0.startListening({actionCreator:tT,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip,s=n.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(Oy(i,Ga(t))),l=oi(t);if(s==="Enter"){var u=rd(t,"axis","hover",String(i.index));e.dispatch(Dg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var d=D$(t),h=d==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,m=a+f*h;if(!(l==null||m>=l.length||m<0)){var g=rd(t,"axis","hover",String(m));e.dispatch(Dg({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});t0.startListening({actionCreator:nT,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var s="0",a=rd(t,"axis","hover",String(s));e.dispatch(Dg({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Qn=tr("externalEvent"),rT=El();rT.startListening({actionCreator:Qn,effect:(n,e)=>{if(n.payload.handler!=null){var t=e.getState(),r={activeCoordinate:PB(t),activeDataKey:o2(t),activeIndex:ks(t),activeLabel:a2(t),activeTooltipIndex:ks(t),isTooltipActive:kB(t)};n.payload.handler(r,n.payload.reactEvent)}}});var iq=q([qa],n=>n.tooltipItemPayloads),sq=q([iq,Dl,(n,e,t)=>e,(n,e,t)=>t],(n,e,t,r)=>{var i=n.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,t);return a}}}),iT=tr("touchMove"),sT=El();sT.startListening({actionCreator:iT,effect:(n,e)=>{var t=n.payload,r=e.getState(),i=Ny(r,r.tooltip.settings.shared);if(i==="axis"){var s=Jy(r,e0({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));s?.activeIndex!=null&&e.dispatch(Xk({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,l=t.touches[0],u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(KC),h=(a=u.getAttribute(YC))!==null&&a!==void 0?a:void 0,f=sq(e.getState(),d,h);e.dispatch(Kk({activeDataKey:h,activeIndex:d,activeCoordinate:f}))}}});var aq=bC({brush:xH,cartesianAxis:n8,chartData:r6,errorBars:g8,graphicalItems:bU,layout:LD,legend:PL,options:ZB,polarAxis:Dz,polarOptions:rq,referenceElements:CH,rootProps:eq,tooltip:G$}),oq=function(e){return lD({reducer:aq,preloadedState:e,middleware:t=>t({serializableCheck:!1}).concat([Q2.middleware,Z2.middleware,t0.middleware,rT.middleware,sT.middleware]),devTools:Rs.devToolsEnabled})};function aT(n){var{preloadedState:e,children:t,reduxStoreName:r}=n,i=rr(),s=_.useRef(null);if(i)return t;s.current==null&&(s.current=oq(e));var a=xv;return _.createElement(ZW,{context:a,store:s.current},t)}function oT(n){var{layout:e,width:t,height:r,margin:i}=n,s=lt(),a=rr();return _.useEffect(()=>{a||(s(ID(e)),s(RD({width:t,height:r})),s(MD(i)))},[s,a,e,t,r,i]),null}function lT(n){var e=lt();return _.useEffect(()=>{e(tq(n))},[e,n]),null}var lq=["children"];function cq(n,e){if(n==null)return{};var t,r,i=uq(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function uq(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function pd(){return pd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pd.apply(null,arguments)}var dq={width:"100%",height:"100%"},hq=_.forwardRef((n,e)=>{var t=kv(),r=Tv(),i=eP();if(!Ca(t)||!Ca(r))return null;var{children:s,otherAttributes:a,title:l,desc:u}=n,d,h;return typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?h=a.role:h=i?"application":void 0,_.createElement(uv,pd({},a,{title:l,desc:u,role:h,tabIndex:d,width:t,height:r,style:dq,ref:e}),s)}),fq=n=>{var{children:e}=n,t=ve(Rd);if(!t)return null;var{width:r,height:i,y:s,x:a}=t;return _.createElement(uv,{width:r,height:i,x:a,y:s},e)},$_=_.forwardRef((n,e)=>{var{children:t}=n,r=cq(n,lq),i=rr();return i?_.createElement(fq,null,t):_.createElement(hq,pd({ref:e},r),t)});function pq(){var n=lt(),[e,t]=_.useState(null),r=ve(hL);return _.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;$n(s)&&s!==r&&n(DD(s))}},[e,n,r]),t}function B_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mq(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B_(Object(t),!0).forEach(function(r){gq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gq(n,e,t){return(e=vq(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vq(n){var e=yq(n,"string");return typeof e=="symbol"?e:e+""}function yq(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var xq=_.forwardRef((n,e)=>{var{children:t,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:f,onMouseUp:m,onTouchEnd:g,onTouchMove:b,onTouchStart:x,style:A,width:E}=n,C=lt(),[P,T]=_.useState(null),[N,O]=_.useState(null);h6();var j=pq(),B=_.useCallback(L=>{j(L),typeof e=="function"&&e(L),T(L),O(L)},[j,e,T,O]),F=_.useCallback(L=>{C(X2(L)),C(Qn({handler:s,reactEvent:L}))},[C,s]),Y=_.useCallback(L=>{C(Wg(L)),C(Qn({handler:d,reactEvent:L}))},[C,d]),V=_.useCallback(L=>{C(Yk()),C(Qn({handler:h,reactEvent:L}))},[C,h]),K=_.useCallback(L=>{C(Wg(L)),C(Qn({handler:f,reactEvent:L}))},[C,f]),te=_.useCallback(()=>{C(nT())},[C]),H=_.useCallback(L=>{C(tT(L.key))},[C]),ae=_.useCallback(L=>{C(Qn({handler:a,reactEvent:L}))},[C,a]),X=_.useCallback(L=>{C(Qn({handler:l,reactEvent:L}))},[C,l]),Q=_.useCallback(L=>{C(Qn({handler:u,reactEvent:L}))},[C,u]),Z=_.useCallback(L=>{C(Qn({handler:m,reactEvent:L}))},[C,m]),$=_.useCallback(L=>{C(Qn({handler:x,reactEvent:L}))},[C,x]),W=_.useCallback(L=>{C(iT(L)),C(Qn({handler:b,reactEvent:L}))},[C,b]),I=_.useCallback(L=>{C(Qn({handler:g,reactEvent:L}))},[C,g]);return _.createElement(f2.Provider,{value:P},_.createElement(zE.Provider,{value:N},_.createElement("div",{className:He("recharts-wrapper",r),style:mq({position:"relative",cursor:"default",width:E,height:i},A),onClick:F,onContextMenu:ae,onDoubleClick:X,onFocus:te,onKeyDown:H,onMouseDown:Q,onMouseEnter:Y,onMouseLeave:V,onMouseMove:K,onMouseUp:Z,onTouchEnd:I,onTouchMove:W,onTouchStart:$,ref:B},t)))}),bq=["children","className","width","height","style","compact","title","desc"];function wq(n,e){if(n==null)return{};var t,r,i=Aq(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Aq(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var cT=_.forwardRef((n,e)=>{var{children:t,className:r,width:i,height:s,style:a,compact:l,title:u,desc:d}=n,h=wq(n,bq),f=Hi(h);return l?_.createElement($_,{otherAttributes:f,title:u,desc:d},t):_.createElement(xq,{className:r,style:a,width:i,height:s,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},_.createElement($_,{otherAttributes:f,title:u,desc:d,ref:e},_.createElement(kH,null,t)))}),Sq=["width","height"];function qg(){return qg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qg.apply(null,arguments)}function _q(n,e){if(n==null)return{};var t,r,i=Eq(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Eq(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var Cq={top:5,right:5,bottom:5,left:5},Pq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Cq,reverseStackOrder:!1,syncMethod:"index"},kq=_.forwardRef(function(e,t){var r,i=fn(e.categoricalChartProps,Pq),{width:s,height:a}=i,l=_q(i,Sq);if(!Ca(s)||!Ca(a))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,categoricalChartProps:m}=e,g={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(aT,{preloadedState:{options:g},reduxStoreName:(r=m.id)!==null&&r!==void 0?r:u},_.createElement(q2,{chartData:m.data}),_.createElement(oT,{width:s,height:a,layout:i.layout,margin:i.margin}),_.createElement(lT,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(cT,qg({},l,{width:s,height:a,ref:t})))}),Tq=["axis","item"],n0=_.forwardRef((n,e)=>_.createElement(kq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Tq,tooltipPayloadSearcher:p2,categoricalChartProps:n,ref:e}));function Nq(n){var e=lt();return _.useEffect(()=>{e(nq(n))},[e,n]),null}var Oq=["width","height","layout"];function Gg(){return Gg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gg.apply(null,arguments)}function jq(n,e){if(n==null)return{};var t,r,i=Mq(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Mq(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var Iq={top:5,right:5,bottom:5,left:5},Rq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Iq,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Dq=_.forwardRef(function(e,t){var r,i=fn(e.categoricalChartProps,Rq),{width:s,height:a,layout:l}=i,u=jq(i,Oq);if(!Ca(s)||!Ca(a))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:m}=e,g={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return _.createElement(aT,{preloadedState:{options:g},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},_.createElement(q2,{chartData:i.data}),_.createElement(oT,{width:s,height:a,layout:l,margin:i.margin}),_.createElement(lT,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(Nq,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),_.createElement(cT,Gg({width:s,height:a},u,{ref:t})))}),Lq=["item"],Fq={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},$q=_.forwardRef((n,e)=>{var t=fn(n,Fq);return _.createElement(Dq,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Lq,tooltipPayloadSearcher:p2,categoricalChartProps:t,ref:e})});const Ii=[{id:"att1",student_id:"1",student_name:"John Doe",exam_id:"ex1",exam_title:"External Financial Statements",submitted_at:"2023-05-20",score:85,total_marks:100,percentage:85,status:"evaluated"},{id:"att2",student_id:"2",student_name:"Jane Smith",exam_id:"ex1",exam_title:"External Financial Statements",submitted_at:"2023-05-20",score:92,total_marks:100,percentage:92,status:"evaluated"},{id:"att3",student_id:"1",student_name:"John Doe",exam_id:"ex2",exam_title:"Planning, Budgeting, and Forecasting",submitted_at:"2023-04-15",score:40,total_marks:100,percentage:40,status:"evaluated"},{id:"att4",student_id:"3",student_name:"Mike Johnson",exam_id:"ex1",exam_title:"External Financial Statements",submitted_at:"2023-05-21",score:65,total_marks:100,percentage:65,status:"evaluated"},{id:"att5",student_id:"4",student_name:"Emily Davis",exam_id:"ex2",exam_title:"Planning, Budgeting, and Forecasting",submitted_at:"2023-04-15",score:96,total_marks:100,percentage:96,status:"evaluated"},{id:"att6",student_id:"2",student_name:"Jane Smith",exam_id:"ex2",exam_title:"Planning, Budgeting, and Forecasting",submitted_at:"2023-04-16",score:70,total_marks:100,percentage:70,status:"evaluated"},{id:"att7",student_id:"5",student_name:"Robert Brown",exam_id:"ex3",exam_title:"Performance Management",submitted_at:"2023-06-10",score:65,total_marks:75,percentage:87,status:"evaluated"},{id:"att8",student_id:"6",student_name:"Sarah Wilson",exam_id:"ex4",exam_title:"Cost Management",submitted_at:"2023-06-12",score:62,total_marks:75,percentage:83,status:"evaluated"},{id:"att9",student_id:"7",student_name:"David Lee",exam_id:"ex5",exam_title:"Internal Controls",submitted_at:"2023-06-15",score:42,total_marks:50,percentage:84,status:"evaluated"},{id:"att10",student_id:"8",student_name:"Lisa Chen",exam_id:"ex6",exam_title:"Technology and Analytics",submitted_at:"2023-06-18",score:44,total_marks:50,percentage:88,status:"evaluated"},{id:"att11",student_id:"9",student_name:"Michael Taylor",exam_id:"ex7",exam_title:"CMA Part 1 Practice Exam",submitted_at:"2023-06-20",score:135,total_marks:150,percentage:90,status:"evaluated"}];function Bq(n,e){if(!n||n.length===0){console.warn("Export to CSV failed: No data provided.");return}const t=Object.keys(n[0]),i=[t.join(","),...n.map(u=>t.map(d=>{const h=u[d];let f=h==null?"":String(h);return(f.includes(",")||f.includes('"')||f.includes(`
`))&&(f=`"${f.replace(/"/g,'""')}"`),f}).join(","))].join(`
`),s=new Blob([i],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download",e),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const zq={totalStudents:1250,activeExams:15,totalAttempts:5678,averageScore:78},Uq=[{name:"SU 1: Fin. Statements","Avg Score":72,attempts:850},{name:"SU 2: Planning","Avg Score":68,attempts:720},{name:"SU 3: Performance","Avg Score":75,attempts:680},{name:"SU 4: Cost Mgmt","Avg Score":81,attempts:550},{name:"SU 5: Controls","Avg Score":77,attempts:490},{name:"SU 6: Tech & Analytics","Avg Score":79,attempts:420}],mu=({title:n,value:e,icon:t})=>{const r={students:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm-9 3a2 2 0 11-4 0 2 2 0 014 0z"})}),exams:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),attempts:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),score:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},i={students:"bg-blue-500",exams:"bg-green-500",attempts:"bg-yellow-500",score:"bg-indigo-500"};return v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-200 text-shadow",children:n}),v.jsx("p",{className:"text-3xl font-bold text-white text-shadow",children:e})]}),v.jsx("div",{className:`text-white rounded-full p-3 shadow-lg ${i[t]}`,children:r[t]})]})},Hq=({attempts:n})=>{const e=_.useMemo(()=>{const t={};return n.forEach(r=>{t[r.exam_id]||(t[r.exam_id]={totalScore:0,count:0,title:r.exam_title}),t[r.exam_id].totalScore+=r.percentage,t[r.exam_id].count++}),Object.values(t).map(r=>({...r,avg:r.totalScore/r.count})).sort((r,i)=>r.avg-i.avg).slice(0,3)},[n]);return v.jsxs("div",{className:"mt-8 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-bold text-white text-shadow mb-4",children:"Areas for Improvement"}),v.jsx("div",{className:"space-y-4",children:e.map(t=>v.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-900/20 rounded-xl",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-100",children:t.title}),v.jsx("p",{className:"text-sm text-gray-400",children:"Needs review and targeted practice."})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("span",{className:"font-bold text-red-400 text-lg",children:[t.avg.toFixed(1),"%"]}),v.jsx("p",{className:"text-xs text-gray-400",children:"Avg. Score"})]})]},t.title))})]})},Wq=()=>{const[n,e]=_.useState(null),[t,r]=_.useState(!0);return _.useEffect(()=>{setTimeout(()=>{e(zq),r(!1)},500)},[]),t||!n?v.jsx("div",{children:"Loading dashboard..."}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"Dashboard"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[v.jsx(mu,{title:"Total Students",value:n.totalStudents,icon:"students"}),v.jsx(mu,{title:"Active Exams",value:n.activeExams,icon:"exams"}),v.jsx(mu,{title:"Total Attempts",value:n.totalAttempts,icon:"attempts"}),v.jsx(mu,{title:"Average Score",value:`${n.averageScore}%`,icon:"score"})]}),v.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-bold text-white text-shadow mb-4",children:"Exam Performance (CMA/FMAA)"}),v.jsx(sd,{width:"100%",height:400,children:v.jsxs(n0,{data:Uq,children:[v.jsx(eh,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.2)"}),v.jsx(th,{dataKey:"name",tick:{fill:"#ddd"},className:"text-shadow"}),v.jsx(nh,{tick:{fill:"#ddd"},className:"text-shadow"}),v.jsx(id,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.9)",borderColor:"rgba(255, 255, 255, 0.2)",color:"#fff"}}),v.jsx(Cs,{wrapperStyle:{color:"#fff"}}),v.jsx(Ma,{dataKey:"Avg Score",fill:"rgba(8, 145, 178, 0.9)"}),v.jsx(Ma,{dataKey:"attempts",fill:"rgba(16, 185, 129, 0.9)"})]})})]}),v.jsx("div",{className:"lg:col-span-1",children:v.jsx(Hq,{attempts:Ii})})]})]})};let _u=[];const qq=[{id:`log-${Date.now()-1e5}`,timestamp:new Date(Date.now()-1e5).toISOString(),user:"Admin User",role:"Admin",action:"CREATE_EXAM",details:'Created new exam: "Modern Physics Midterm"'},{id:`log-${Date.now()-2e5}`,timestamp:new Date(Date.now()-2e5).toISOString(),user:"Admin User",role:"Admin",action:"CREATE_STUDENT",details:'Created new student: "Emily Davis"'},{id:`log-${Date.now()-3e5}`,timestamp:new Date(Date.now()-3e5).toISOString(),user:"Moderator User",role:"Moderator",action:"UPDATE_STUDENT",details:"Updated details for student: John Doe (ID: 1)"}];_u=[...qq];const vr={addLog:(n,e,t)=>{_u=[{id:`log-${Date.now()}`,timestamp:new Date().toISOString(),user:n.name,role:n.role,action:e,details:t},..._u]},getLogs:()=>[..._u]},Gq=[{id:"1",full_name:"John Doe",email:"john.doe@example.com",phone:"123-456-7890",enrollment_date:"2023-01-15",status:"active"},{id:"2",full_name:"Jane Smith",email:"jane.smith@example.com",phone:"234-567-8901",enrollment_date:"2023-02-20",status:"active"},{id:"3",full_name:"Mike Johnson",email:"mike.j@example.com",phone:"345-678-9012",enrollment_date:"2023-03-10",status:"inactive"},{id:"4",full_name:"Emily Davis",email:"emily.d@example.com",phone:"456-789-0123",enrollment_date:"2023-04-05",status:"suspended"}],z_=({status:n})=>{const e="px-2 py-1 text-xs font-semibold rounded-full text-white text-shadow",t={active:"bg-secondary/70",inactive:"bg-gray-500/70",suspended:"bg-danger/70"};return v.jsx("span",{className:`${e} ${t[n]}`,children:n.charAt(0).toUpperCase()+n.slice(1)})},Vq=()=>{const[n,e]=_.useState([]),[t,r]=_.useState(!0),[i,s]=_.useState(!1),[a,l]=_.useState(null),{currentUser:u}=ti(),d=u.role==="Moderator";_.useEffect(()=>{setTimeout(()=>{e(Gq),r(!1)},500)},[]);const h=(b=null)=>{l(b),s(!0)},f=()=>{s(!1),l(null)},m=b=>{if(a)e(n.map(x=>x.id===a.id?{...x,...b}:x)),vr.addLog(u,"UPDATE_STUDENT",`Updated details for student: ${b.full_name} (ID: ${a.id})`);else{const x={...b,id:String(Date.now()),enrollment_date:new Date().toISOString().split("T")[0]};e([x,...n]),vr.addLog(u,"CREATE_STUDENT",`Created new student: ${b.full_name}`)}f()},g=b=>{const x=n.find(A=>A.id===b);x&&window.confirm("Are you sure you want to delete this student?")&&(e(n.filter(A=>A.id!==b)),vr.addLog(u,"DELETE_STUDENT",`Deleted student: ${x.full_name} (ID: ${b})`))};return t?v.jsx("div",{className:"text-white text-shadow",children:"Loading students..."}):v.jsxs("div",{children:[v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow",children:"Students"}),v.jsx("button",{onClick:()=>h(),className:"w-full md:w-auto px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors shadow-lg disabled:bg-gray-500/50 disabled:cursor-not-allowed",disabled:d,title:d?"You don't have permission to add students":"Add a new student",children:"Add Student"})]}),v.jsx("div",{className:"hidden md:block bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg overflow-hidden",children:v.jsxs("table",{className:"min-w-full leading-normal",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-white/10 border-b border-white/20",children:[v.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student Name"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Email"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Enrolled On"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Status"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Actions"})]})}),v.jsx("tbody",{children:n.map(b=>v.jsxs("tr",{className:"border-b border-white/20 hover:bg-white/10 transition-colors",children:[v.jsx("td",{className:"px-6 py-4",children:v.jsx(eg,{to:`/student/${b.id}`,className:"font-medium text-primary hover:underline",children:b.full_name})}),v.jsx("td",{className:"px-6 py-4",children:b.email}),v.jsx("td",{className:"px-6 py-4",children:new Date(b.enrollment_date).toLocaleDateString()}),v.jsx("td",{className:"px-6 py-4",children:v.jsx(z_,{status:b.status})}),v.jsxs("td",{className:"px-6 py-4",children:[v.jsx("button",{onClick:()=>h(b),className:"text-blue-300 hover:text-blue-100 mr-3 font-semibold",children:"Edit"}),v.jsx("button",{onClick:()=>g(b.id),className:"text-red-400 hover:text-red-200 font-semibold disabled:text-gray-500 disabled:cursor-not-allowed",disabled:d,title:d?"You don't have permission to delete students":"Delete student",children:"Delete"})]})]},b.id))})]})}),v.jsx("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:n.map(b=>v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 space-y-2",children:[v.jsx("div",{className:"font-bold text-white text-lg",children:b.full_name}),v.jsx("div",{className:"text-sm text-gray-200",children:b.email}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Enrolled: ",new Date(b.enrollment_date).toLocaleDateString()]}),v.jsx("div",{children:v.jsx(z_,{status:b.status})}),v.jsxs("div",{className:"pt-2 border-t border-white/10 flex justify-end space-x-4",children:[v.jsx("button",{onClick:()=>h(b),className:"text-blue-300 hover:text-blue-100 font-semibold",children:"Edit"}),v.jsx("button",{onClick:()=>g(b.id),className:"text-red-400 hover:text-red-200 font-semibold disabled:text-gray-500 disabled:cursor-not-allowed",disabled:d,children:"Delete"})]})]},b.id))}),i&&v.jsx(Kq,{student:a,onSave:m,onClose:f})]})},Kq=({student:n,onSave:e,onClose:t})=>{const{currentUser:r}=ti(),i=r.role==="Moderator",[s,a]=_.useState({full_name:n?.full_name||"",email:n?.email||"",phone:n?.phone||"",status:n?.status||"active"}),l=d=>{const{name:h,value:f}=d.target;a(m=>({...m,[h]:f}))},u=d=>{d.preventDefault(),e(s)};return v.jsx(wd,{isOpen:!0,onClose:t,title:n?"Edit Student":"Add Student",children:v.jsxs("form",{onSubmit:u,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-200",children:"Full Name"}),v.jsx("input",{id:"full_name",type:"text",name:"full_name",value:s.full_name,onChange:l,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-white placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-200",children:"Email"}),v.jsx("input",{id:"email",type:"email",name:"email",value:s.email,onChange:l,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-white placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-200",children:"Phone"}),v.jsx("input",{id:"phone",type:"tel",name:"phone",value:s.phone,onChange:l,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-white placeholder-gray-400"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-200",children:"Status"}),v.jsxs("select",{id:"status",name:"status",value:s.status,onChange:l,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white",children:[v.jsx("option",{className:"text-black",value:"active",children:"Active"}),v.jsx("option",{className:"text-black",value:"inactive",children:"Inactive"}),v.jsx("option",{className:"text-black",value:"suspended",children:"Suspended"})]})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20",children:"Cancel"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:bg-gray-500/50 disabled:cursor-not-allowed",disabled:i&&!n,title:i&&!n?"You don't have permission to add students":"Save changes",children:"Save"})]})]})})},md=new ME("AIzaSyB3ZU7PI1I950fCzQfVcWncoifz-z9SHzk"),Yq=async(n,e,t)=>{if(!md)throw new Error("AI service is not configured. Please set the API_KEY environment variable.");try{const r=md.getGenerativeModel({model:"gemini-1.5-flash"}),i=`Generate ${e} multiple-choice questions about "${n}" with a difficulty of "${t}". Each question should have 4 options (A, B, C, D) and a correct answer.`,l=(await(await r.generateContent(i)).response).text();return l?JSON.parse(l).questions:[]}catch(r){throw console.error("Error generating questions with Gemini:",r),new Error("Failed to generate questions. Please check your API key and try again.")}},Xq=async n=>{if(!md)throw new Error("AI service is not configured. Please set the API_KEY environment variable.");try{const e=md.getGenerativeModel({model:"gemini-1.5-flash"}),t=`Generate administrative details for an exam about "${n}". The details should include a creative title, a short description (2-3 sentences), a recommended duration in minutes, and a total marks.`,s=(await(await e.generateContent(t)).response).text();return s?JSON.parse(s):null}catch(e){throw console.error("Error generating exam details with Gemini:",e),new Error("Failed to generate exam details. Please check your API key and try again.")}},uT=[{id:"ex1",unitId:"unit1",title:"Calculus I Final",description:"Final exam for first semester calculus.",duration_minutes:120,total_marks:100,status:"published"},{id:"ex2",unitId:"unit2",title:"Modern Physics Midterm",description:"Midterm covering relativity and quantum mechanics.",duration_minutes:90,total_marks:50,status:"published"},{id:"ex3",unitId:"unit1",title:"Organic Chemistry Quiz",description:"Quiz on nomenclature.",duration_minutes:30,total_marks:20,status:"archived"},{id:"ex4",unitId:"unit3",title:"World History I",description:"Comprehensive exam on ancient civilizations.",duration_minutes:150,total_marks:100,status:"draft"}],U_=({status:n})=>{const e={published:"bg-green-500/80 border-green-400",draft:"bg-yellow-500/80 border-yellow-400",archived:"bg-gray-600/80 border-gray-500"};return v.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full text-white border ${e[n]}`,children:n.charAt(0).toUpperCase()+n.slice(1)})},H_=({exam:n,onEdit:e,onDelete:t,isModerator:r})=>{const[i,s]=_.useState(!1),a=_.useRef(null),l=bd();return _.useEffect(()=>{const u=d=>{a.current&&!a.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),v.jsxs("div",{className:"relative inline-block text-left",ref:a,children:[v.jsx("button",{onClick:()=>s(!i),className:"inline-flex justify-center w-full rounded-md border border-gray-500 shadow-sm px-4 py-2 bg-white/10 text-sm font-medium text-white hover:bg-white/20 focus:outline-none",children:"Actions"}),i&&v.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-10",children:v.jsxs("div",{className:"py-1",children:[n.status==="published"&&v.jsx("a",{href:"#",onClick:u=>{u.preventDefault(),l(`/exam/${n.id}`),s(!1)},className:"block px-4 py-2 text-sm text-green-400 hover:bg-gray-700",children:"Take Exam"}),v.jsx("a",{href:"#",onClick:u=>{u.preventDefault(),e(),s(!1)},className:"block px-4 py-2 text-sm text-gray-200 hover:bg-gray-700",children:"Edit"}),v.jsx("a",{href:"#",onClick:u=>{u.preventDefault(),t(),s(!1)},className:`block px-4 py-2 text-sm ${r?"text-gray-500":"text-red-400 hover:bg-gray-700"}`,title:r?"You don't have permission":"Delete exam",children:"Delete"})]})})]})},Qq=()=>{const[n,e]=_.useState([]),[t,r]=_.useState(!0),[i,s]=_.useState(!1),[a,l]=_.useState(null),[u,d]=_.useState(""),[h,f]=_.useState(""),[m,g]=_.useState(""),[b,x]=_.useState(null),{currentUser:A}=ti(),E=A.role==="Moderator",C=_.useMemo(()=>n.filter(F=>(u?F.unitId===u:!0)&&(h?F.status===h:!0)&&(m?F.title.toLowerCase().includes(m.toLowerCase()):!0)),[n,u,h,m]);_.useEffect(()=>{setTimeout(()=>{e(uT),r(!1)},500)},[]);const P=(F=null)=>{l(F),s(!0)},T=()=>{s(!1),l(null)},N=(F,Y)=>{x({message:F,type:Y}),setTimeout(()=>x(null),3e3)},O=F=>{if(a)e(n.map(Y=>Y.id===a.id?{...Y,...F}:Y)),vr.addLog(A,"UPDATE_EXAM",`Updated exam: ${F.title} (ID: ${a.id})`),N("Exam updated successfully!","success");else{const Y={...F,id:String(Date.now())};e([Y,...n]),vr.addLog(A,"CREATE_EXAM",`Created new exam: ${F.title}`),N("Exam created successfully!","success")}T()},j=F=>{const Y=n.find(V=>V.id===F);Y&&window.confirm("Are you sure you want to delete this exam? This will also delete all associated questions.")&&(e(n.filter(V=>V.id!==F)),vr.addLog(A,"DELETE_EXAM",`Deleted exam: ${Y.title} (ID: ${F})`),N("Exam deleted successfully.","success"))},B=()=>{const F=["ID","Title","Description","Duration (Mins)","Total Marks","Status"],Y=C.map(te=>[te.id,te.title,`"${te.description}"`,te.duration_minutes,te.total_marks,te.status]),V="data:text/csv;charset=utf-8,"+[F.join(","),...Y.map(te=>te.join(","))].join(`
`),K=document.createElement("a");K.setAttribute("href",encodeURI(V)),K.setAttribute("download","exams_export.csv"),document.body.appendChild(K),K.click(),document.body.removeChild(K)};return t?v.jsx("div",{className:"text-white text-shadow",children:"Loading exams..."}):v.jsxs("div",{children:[b&&v.jsx("div",{className:`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white z-50 ${b.type==="success"?"bg-green-600":"bg-red-600"}`,children:b.message}),v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow",children:"Manage Exams"}),v.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark shadow-lg disabled:bg-gray-500/50 disabled:cursor-not-allowed flex items-center gap-2",disabled:E,title:E?"You don't have permission to add exams":"Add a new exam",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Exam"]})]}),v.jsxs("div",{className:"mb-4 bg-glass backdrop-blur-lg border border-white/20 p-4 rounded-lg flex flex-col md:flex-row gap-4",children:[v.jsx("input",{type:"text",placeholder:"Search by exam title...",value:m,onChange:F=>g(F.target.value),className:"flex-grow bg-white/10 border border-white/30 text-white rounded-lg p-2 focus:ring-primary focus:border-primary","aria-label":"Search by exam title"}),v.jsxs("select",{value:u,onChange:F=>d(F.target.value),className:"bg-white/10 border border-white/30 text-white rounded-lg p-2 focus:ring-primary focus:border-primary","aria-label":"Filter exams by unit",children:[v.jsx("option",{value:"",children:"All Units"}),at.map(F=>v.jsx("option",{value:F.id,children:F.title},F.id))]}),v.jsxs("select",{value:h,onChange:F=>f(F.target.value),className:"bg-white/10 border border-white/30 text-white rounded-lg p-2 focus:ring-primary focus:border-primary","aria-label":"Filter exams by status",children:[v.jsx("option",{value:"",children:"All Statuses"}),v.jsx("option",{value:"published",children:"Published"}),v.jsx("option",{value:"draft",children:"Draft"}),v.jsx("option",{value:"archived",children:"Archived"})]}),v.jsx("button",{onClick:B,className:"px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark shadow-lg",children:"Export CSV"})]}),v.jsx("div",{className:"hidden md:block bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg overflow-hidden",children:v.jsxs("table",{className:"min-w-full leading-normal",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-white/10 border-b border-white/20",children:[v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Title"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Unit"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Duration"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Marks"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Status"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Actions"})]})}),v.jsx("tbody",{children:C.map(F=>v.jsxs("tr",{className:"border-b border-white/20 hover:bg-white/10 transition-colors",children:[v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent font-medium text-white",title:F.description,children:F.title}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-300",children:at.find(Y=>Y.id===F.unitId)?.title||"N/A"}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:F.duration_minutes}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:F.total_marks}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent",children:v.jsx(U_,{status:F.status})}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent",children:v.jsx(H_,{exam:F,onEdit:()=>P(F),onDelete:()=>j(F.id),isModerator:E})})]},F.id))})]})}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 md:hidden",children:C.map(F=>v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 flex flex-col justify-between",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("h3",{className:"font-bold text-white text-lg mb-2",title:F.description,children:F.title}),v.jsx(U_,{status:F.status})]}),v.jsx("p",{className:"text-sm text-gray-300 line-clamp-2 mb-4",children:F.description})]}),v.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[v.jsxs("div",{className:"text-xs text-gray-400",children:[F.duration_minutes," mins | ",F.total_marks," marks"]}),v.jsx(H_,{exam:F,onEdit:()=>P(F),onDelete:()=>j(F.id),isModerator:E})]})]},F.id))}),i&&v.jsx(Zq,{exam:a,onSave:O,onClose:T})]})},Zq=({exam:n,onSave:e,onClose:t})=>{const{currentUser:r}=ti(),i=r.role==="Moderator",[s,a]=_.useState({title:n?.title||"",description:n?.description||"",duration_minutes:n?.duration_minutes||60,total_marks:n?.total_marks||100,status:n?.status||"draft"}),[l,u]=_.useState(""),[d,h]=_.useState(!1),[f,m]=_.useState(""),g=A=>{const{name:E,value:C}=A.target,P=E==="duration_minutes"||E==="total_marks"?parseInt(C)||0:C;a(T=>({...T,[E]:P}))},b=A=>{A.preventDefault(),e(s)},x=async()=>{if(!l){m("Please enter a topic to generate details.");return}h(!0),m("");try{const A=await Xq(l);A&&(a(E=>({...E,title:A.title,description:A.description,duration_minutes:A.duration_minutes,total_marks:A.total_marks})),vr.addLog(r,"AI_GENERATE_EXAM",`Generated exam details for topic: "${l}"`))}catch(A){A.message.includes("API_KEY environment variable not set")?m("AI features are not configured. Please contact your administrator to set up the API key."):m(A.message||"An unknown error occurred.")}finally{h(!1)}};return v.jsx(wd,{isOpen:!0,onClose:t,title:n?"Edit Exam":"Add Exam",children:v.jsxs("form",{onSubmit:b,children:[v.jsxs("div",{className:`p-4 mb-4 border border-dashed border-white/30 rounded-lg bg-white/10 ${i?"opacity-50":""}`,children:[v.jsxs("h4",{className:"text-lg font-semibold text-white text-shadow mb-2 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2 text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Generate with AI"]}),v.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Enter a topic and let AI suggest the exam details for you."}),v.jsx("fieldset",{disabled:i,children:v.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[v.jsx("input",{type:"text",value:l,onChange:A=>u(A.target.value),className:"flex-grow block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400",placeholder:"e.g., 'Financial Statements'",disabled:d||i}),v.jsx("button",{type:"button",onClick:x,disabled:d||!l||i,className:"w-full sm:w-auto px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark transition-colors disabled:bg-gray-500/50",children:d?"Generating...":"Generate"})]})}),f&&v.jsx("p",{className:"text-sm text-red-400 mt-2",children:f})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-200",children:"Title"}),v.jsx("input",{id:"title",type:"text",name:"title",value:s.title,onChange:g,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-200",children:"Description"}),v.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:g,rows:3,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400"})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"duration_minutes",className:"block text-sm font-medium text-gray-200",children:"Duration (minutes)"}),v.jsx("input",{id:"duration_minutes",type:"number",name:"duration_minutes",value:s.duration_minutes,onChange:g,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"total_marks",className:"block text-sm font-medium text-gray-200",children:"Total Marks"}),v.jsx("input",{id:"total_marks",type:"number",name:"total_marks",value:s.total_marks,onChange:g,className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400",required:!0})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-200",children:"Status"}),v.jsxs("select",{id:"status",name:"status",value:s.status,onChange:g,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white",children:[v.jsx("option",{className:"text-black",value:"draft",children:"Draft"}),v.jsx("option",{className:"text-black",value:"published",children:"Published"}),v.jsx("option",{className:"text-black",value:"archived",children:"Archived"})]})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20",children:"Cancel"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:bg-gray-500/50 disabled:cursor-not-allowed",disabled:i&&!n,title:i&&!n?"You don't have permission to add exams":"Save exam",children:"Save"})]})]})})},Yr=[{id:"q1",exam_id:"ex1",sectionId:"1.2",question_text:"What is the derivative of x^2?",question_type:"multiple_choice",options:{A:"2x",B:"x",C:"x^2",D:"2"},correct_answer:"A",marks:2,difficulty:"easy"},{id:"q2",exam_id:"ex1",sectionId:"1.3",question_text:"What is the integral of 1/x?",question_type:"multiple_choice",options:{A:"x",B:"ln(x)",C:"-1/x^2",D:"1"},correct_answer:"B",marks:3,difficulty:"medium"},{id:"q3",exam_id:"ex2",question_text:"What does E=mc^2 stand for?",question_type:"short_answer",correct_answer:"Energy equals mass times the speed of light squared",marks:5,difficulty:"easy"},{id:"q4",exam_id:"ex1",sectionId:"1.1",question_text:"What is the primary objective of general-purpose financial reporting?",question_type:"multiple_choice",options:{A:"To report information that is useful to managers.",B:"To report financial information useful for making decisions about providing resources to the entity.",C:"To determine the exact market value of a company.",D:"To assist with tax compliance."},correct_answer:"B",marks:2,difficulty:"easy"},{id:"q5",exam_id:"ex1",sectionId:"1.2",question_text:"Which accounting equation represents the proprietary theory?",question_type:"multiple_choice",options:{A:"Assets = Liabilities + Equity",B:"Assets - Liabilities = Equity",C:"Assets + Equity = Liabilities",D:"Revenues - Expenses = Income"},correct_answer:"B",marks:2,difficulty:"medium"},{id:"q6",exam_id:"ex1",sectionId:"1.5",question_text:"Which of the following is NOT one of the three main activities in a Statement of Cash Flows?",question_type:"multiple_choice",options:{A:"Operating Activities",B:"Investing Activities",C:"Financing Activities",D:"Auditing Activities"},correct_answer:"D",marks:1,difficulty:"easy"},{id:"q7",exam_id:"ex2",sectionId:"2.1",question_text:"Which of the following is NOT a component of SWOT analysis?",question_type:"multiple_choice",options:{A:"Strengths",B:"Weaknesses",C:"Opportunities",D:"Tactics"},correct_answer:"D",marks:1,difficulty:"easy"},{id:"q8",exam_id:"ex2",sectionId:"2.2",question_text:"What is the primary difference between zero-based budgeting and traditional budgeting?",question_type:"multiple_choice",options:{A:"Zero-based budgeting starts from zero each period",B:"Traditional budgeting is more accurate",C:"Zero-based budgeting only applies to capital budgets",D:"Traditional budgeting is used only for operating budgets"},correct_answer:"A",marks:2,difficulty:"medium"},{id:"q9",exam_id:"ex2",sectionId:"2.3",question_text:"Which forecasting method uses a weighted average of past observations, with more weight given to recent data?",question_type:"multiple_choice",options:{A:"Simple moving average",B:"Exponential smoothing",C:"Linear regression",D:"Delphi technique"},correct_answer:"B",marks:2,difficulty:"medium"},{id:"q10",exam_id:"ex2",sectionId:"2.5",question_text:"Which capital budgeting method calculates the discount rate that makes the net present value of an investment equal to zero?",question_type:"multiple_choice",options:{A:"Payback period",B:"Accounting rate of return",C:"Internal rate of return",D:"Profitability index"},correct_answer:"C",marks:2,difficulty:"medium"},{id:"q11",exam_id:"ex3",sectionId:"3.1",question_text:"Which cost classification is based on whether costs change with the level of activity?",question_type:"multiple_choice",options:{A:"Direct vs. indirect",B:"Fixed vs. variable",C:"Product vs. period",D:"Relevant vs. irrelevant"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q12",exam_id:"ex3",sectionId:"3.2",question_text:"Which perspective of the Balanced Scorecard focuses on how customers see the organization?",question_type:"multiple_choice",options:{A:"Financial perspective",B:"Customer perspective",C:"Internal business processes perspective",D:"Learning and growth perspective"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q13",exam_id:"ex3",sectionId:"3.3",question_text:"What is the primary objective of transfer pricing?",question_type:"multiple_choice",options:{A:"To maximize total company profits",B:"To minimize taxes in all jurisdictions",C:"To ensure each division shows the highest profit",D:"To comply with local regulations only"},correct_answer:"A",marks:2,difficulty:"medium"},{id:"q14",exam_id:"ex3",sectionId:"3.4",question_text:"Which performance measure is calculated as Operating Income divided by Average Operating Assets?",question_type:"multiple_choice",options:{A:"Residual Income",B:"Economic Value Added",C:"Return on Investment",D:"Profit Margin"},correct_answer:"C",marks:1,difficulty:"easy"},{id:"q15",exam_id:"ex4",sectionId:"4.1",question_text:"What type of cost remains constant in total regardless of changes in activity level?",question_type:"multiple_choice",options:{A:"Variable cost",B:"Fixed cost",C:"Mixed cost",D:"Step cost"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q16",exam_id:"ex4",sectionId:"4.2",question_text:"Which costing system is most appropriate for a custom furniture manufacturer?",question_type:"multiple_choice",options:{A:"Process costing",B:"Job-order costing",C:"Activity-based costing",D:"Standard costing"},correct_answer:"B",marks:2,difficulty:"easy"},{id:"q17",exam_id:"ex4",sectionId:"4.3",question_text:"In activity-based costing, what is a cost driver?",question_type:"multiple_choice",options:{A:"The total amount of costs in a cost pool",B:"A factor that causes costs to be incurred",C:"The allocation rate for overhead costs",D:"The total number of units produced"},correct_answer:"B",marks:2,difficulty:"medium"},{id:"q18",exam_id:"ex4",sectionId:"4.4",question_text:"What variance measures the difference between actual and standard hours allowed, multiplied by the standard variable overhead rate?",question_type:"multiple_choice",options:{A:"Variable overhead spending variance",B:"Variable overhead efficiency variance",C:"Fixed overhead spending variance",D:"Fixed overhead volume variance"},correct_answer:"B",marks:2,difficulty:"hard"},{id:"q19",exam_id:"ex5",sectionId:"5.1",question_text:"Which of the following is NOT one of the five components of the COSO internal control framework?",question_type:"multiple_choice",options:{A:"Control environment",B:"Risk assessment",C:"Control activities",D:"Strategic planning"},correct_answer:"D",marks:1,difficulty:"easy"},{id:"q20",exam_id:"ex5",sectionId:"5.2",question_text:"Which risk response strategy involves taking action to reduce the likelihood or impact of a risk?",question_type:"multiple_choice",options:{A:"Risk avoidance",B:"Risk reduction",C:"Risk sharing",D:"Risk acceptance"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q21",exam_id:"ex5",sectionId:"5.4",question_text:"According to the fraud triangle, which of the following is NOT one of the conditions that must be present for fraud to occur?",question_type:"multiple_choice",options:{A:"Pressure",B:"Opportunity",C:"Rationalization",D:"Greed"},correct_answer:"D",marks:2,difficulty:"medium"},{id:"q22",exam_id:"ex6",sectionId:"6.1",question_text:"Which type of information system is designed to support middle management decision making?",question_type:"multiple_choice",options:{A:"Transaction Processing System",B:"Management Information System",C:"Decision Support System",D:"Executive Information System"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q23",exam_id:"ex6",sectionId:"6.2",question_text:'Which type of analytics answers the question "What should we do?"',question_type:"multiple_choice",options:{A:"Descriptive analytics",B:"Diagnostic analytics",C:"Predictive analytics",D:"Prescriptive analytics"},correct_answer:"D",marks:2,difficulty:"medium"},{id:"q24",exam_id:"ex6",sectionId:"6.3",question_text:"Which cybersecurity threat involves tricking users into revealing sensitive information through deceptive emails?",question_type:"multiple_choice",options:{A:"Malware",B:"Phishing",C:"Ransomware",D:"DDoS"},correct_answer:"B",marks:1,difficulty:"easy"},{id:"q25",exam_id:"ex6",sectionId:"6.4",question_text:"Which emerging technology uses a distributed ledger to record transactions across multiple computers?",question_type:"multiple_choice",options:{A:"Artificial Intelligence",B:"Blockchain",C:"Internet of Things",D:"Cloud computing"},correct_answer:"B",marks:1,difficulty:"easy"}],Jq=[{id:"ex1",unitId:"unit1",title:"External Financial Statements",description:"",duration_minutes:120,total_marks:100,status:"published"},{id:"ex2",unitId:"unit2",title:"Planning, Budgeting, and Forecasting",description:"",duration_minutes:120,total_marks:100,status:"published"},{id:"ex3",unitId:"unit3",title:"Performance Management",description:"",duration_minutes:90,total_marks:75,status:"published"},{id:"ex4",unitId:"unit4",title:"Cost Management",description:"",duration_minutes:90,total_marks:75,status:"published"},{id:"ex5",unitId:"unit5",title:"Internal Controls",description:"",duration_minutes:60,total_marks:50,status:"published"},{id:"ex6",unitId:"unit6",title:"Technology and Analytics",description:"",duration_minutes:60,total_marks:50,status:"published"}],eG=["easy","medium","hard"],tG=()=>{const[n]=_.useState(Jq),[e,t]=_.useState(Yr),[r,i]=_.useState(""),[s,a]=_.useState(""),[l,u]=_.useState(!1),[d,h]=_.useState(!1),[f,m]=_.useState(""),[g,b]=_.useState(5),[x,A]=_.useState("medium"),[E,C]=_.useState(""),[P,T]=_.useState(""),[N,O]=_.useState(""),[j,B]=_.useState(""),{currentUser:F}=ti(),Y=F.role==="Moderator",V=_.useMemo(()=>e.filter(H=>{const ae=s?H.sectionId===s:r?at.find($=>$.id===r)?.sections.some($=>$.id===H.sectionId):!0,X=P?H.question_text.toLowerCase().includes(P.toLowerCase()):!0,Q=N?H.difficulty===N:!0,Z=j?H.question_type===j:!0;return ae&&X&&Q&&Z}),[e,r,s,P,N,j]),K=async()=>{if(!(!f||!s)){u(!0),C("");try{const ae=(await Yq(f,g,x)).map(Q=>({...Q,id:`ai-${Date.now()}-${Math.random()}`,exam_id:"ex_cma",sectionId:s,question_type:"multiple_choice"}));t(Q=>[...Q,...ae]);const X=at.flatMap(Q=>Q.sections).find(Q=>Q.id===s);vr.addLog(F,"AI_GENERATE_QUESTIONS",`Generated ${g} questions for topic "${f}" in section "${X?.title}"`),h(!1),m("")}catch(H){H.message.includes("API_KEY environment variable not set")?C("AI features are not configured. Please contact your administrator to set up the API key."):C(H.message||"An unknown error occurred.")}finally{u(!1)}}},te=H=>{i(H),a("")};return v.jsxs("div",{children:[v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow",children:"Question Bank"}),v.jsxs("button",{onClick:()=>h(!0),disabled:!s||Y,className:"w-full md:w-auto px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark transition-colors disabled:bg-gray-500/50 disabled:cursor-not-allowed flex items-center justify-center shadow-lg",title:Y?"You don't have permission to generate questions":s?"Generate questions with AI":"Please select a unit and section first",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Generate with AI"]})]}),v.jsx("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Search questions...",value:P,onChange:H=>T(H.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400","aria-label":"Search questions"}),v.jsxs("select",{value:r,onChange:H=>te(H.target.value),className:"w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white","aria-label":"Filter by Unit",children:[v.jsx("option",{value:"",className:"text-black",children:"All Units"}),at.map(H=>v.jsx("option",{value:H.id,className:"text-black",children:H.title},H.id))]}),v.jsxs("select",{value:s,onChange:H=>a(H.target.value),disabled:!r,className:"w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white disabled:bg-gray-500/20","aria-label":"Filter by Section",children:[v.jsx("option",{value:"",className:"text-black",children:"All Sections"}),r&&at.find(H=>H.id===r)?.sections.map(H=>v.jsx("option",{value:H.id,className:"text-black",children:H.title},H.id))]}),v.jsxs("select",{value:N,onChange:H=>O(H.target.value),className:"w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white","aria-label":"Filter by difficulty",children:[v.jsx("option",{value:"",className:"text-black",children:"All Difficulties"}),eG.map(H=>v.jsx("option",{value:H,className:"text-black capitalize",children:H},H))]})]})}),v.jsx("div",{className:"space-y-4",children:V.length>0?V.map(H=>v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 p-4 rounded-lg shadow-lg",children:[v.jsx("p",{className:"font-semibold text-white text-shadow",children:H.question_text}),H.options&&v.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-200",children:Object.entries(H.options).map(([ae,X])=>v.jsxs("p",{className:ae===H.correct_answer?"text-green-300 font-bold":"",children:[ae,": ",X]},ae))}),v.jsxs("div",{className:"flex items-center justify-end gap-4 text-xs mt-2 text-gray-400",children:[v.jsx("span",{className:"capitalize",children:H.difficulty}),v.jsx("span",{children:"|"}),v.jsx("span",{className:"capitalize",children:H.question_type.replace("_"," ")})]})]},H.id)):v.jsx("div",{className:"text-center py-10 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-lg",children:v.jsx("p",{className:"text-white text-shadow",children:"No questions match your filters."})})}),v.jsx(wd,{isOpen:d,onClose:()=>h(!1),title:"Generate Questions with AI",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Section to add to"}),v.jsx("input",{type:"text",value:at.flatMap(H=>H.sections).find(H=>H.id===s)?.title||"",readOnly:!0,disabled:!0,className:"mt-1 block w-full px-3 py-2 bg-black/20 border border-white/30 rounded-md text-gray-300","aria-label":"Selected section"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Topic"}),v.jsx("input",{type:"text",value:f,onChange:H=>m(H.target.value),className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400",placeholder:"e.g., Cost of Capital"})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Number of Questions"}),v.jsx("input",{type:"number",value:g,onChange:H=>b(Number(H.target.value)),min:"1",max:"10",className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white","aria-label":"Number of questions"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Difficulty"}),v.jsxs("select",{value:x,onChange:H=>A(H.target.value),className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white","aria-label":"Difficulty",children:[v.jsx("option",{className:"text-black",value:"easy",children:"Easy"}),v.jsx("option",{className:"text-black",value:"medium",children:"Medium"}),v.jsx("option",{className:"text-black",value:"hard",children:"Hard"})]})]})]}),E&&v.jsx("p",{className:"text-sm text-red-400",children:E}),v.jsxs("div",{className:"flex justify-end pt-2 space-x-3",children:[v.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20",children:"Cancel"}),v.jsx("button",{onClick:K,disabled:l||!f,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:bg-gray-500/50",children:l?"Generating...":"Generate"})]})]})}),v.jsx(IE,{isOpen:d,onClose:()=>h(!1),context:`Generating questions for section: ${at.flatMap(H=>H.sections).find(H=>H.id===s)?.title||"General"}`})]})},nG=({data:n})=>{const e=[{name:"0-20%",count:0},{name:"21-40%",count:0},{name:"41-60%",count:0},{name:"61-80%",count:0},{name:"81-100%",count:0}];return n.forEach(t=>{t.percentage<=20?e[0].count++:t.percentage<=40?e[1].count++:t.percentage<=60?e[2].count++:t.percentage<=80?e[3].count++:e[4].count++}),v.jsx(sd,{width:"100%",height:300,children:v.jsxs(n0,{data:e,children:[v.jsx(eh,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.2)"}),v.jsx(th,{dataKey:"name",tick:{fill:"#fff"},className:"text-shadow"}),v.jsx(nh,{allowDecimals:!1,tick:{fill:"#fff"},className:"text-shadow"}),v.jsx(id,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)",color:"#fff"}}),v.jsx(Cs,{wrapperStyle:{color:"#fff"}}),v.jsx(Ma,{dataKey:"count",fill:"rgba(66, 133, 244, 0.9)",name:"Number of Students"})]})})},rG=()=>{const[n,e]=_.useState([]),[t,r]=_.useState([]),[i,s]=_.useState(!0),[a,l]=_.useState({start:"",end:""}),[u,d]=_.useState(""),[h,f]=_.useState("");_.useEffect(()=>{setTimeout(()=>{e(Ii),r(Ii),s(!1)},500)},[]),_.useEffect(()=>{let x=[...n];if(a.start&&a.end&&(x=x.filter(A=>{const E=new Date(A.submitted_at),C=new Date(a.start),P=new Date(a.end);return E>=C&&E<=P})),u&&(x=x.filter(A=>A.exam_id===u)),h){const A=h.toLowerCase();x=x.filter(E=>E.student_name.toLowerCase().includes(A)||E.exam_title.toLowerCase().includes(A))}r(x)},[n,a,u,h]);const m=()=>{Bq(t,"exam_attempts.csv")},g=()=>{l({start:"",end:""}),d(""),f("")};if(i)return v.jsx("div",{className:"text-white text-shadow",children:"Loading results..."});const b=Array.from(new Map(n.map(x=>[x.exam_id,{id:x.exam_id,title:x.exam_title}])).values());return v.jsxs("div",{className:"fade-in",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow",children:"Results"}),v.jsxs("button",{onClick:m,className:"btn btn-secondary px-4 py-2 text-sm font-semibold text-white rounded-lg shadow-lg flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Export Results"]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 mb-6",children:[v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow",children:"Filters"}),v.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-white bg-gray-700 rounded-md hover:bg-gray-600",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Start Date"}),v.jsx("input",{type:"date",value:a.start,onChange:x=>l({...a,start:x.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"End Date"}),v.jsx("input",{type:"date",value:a.end,onChange:x=>l({...a,end:x.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Exam"}),v.jsxs("select",{value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white",children:[v.jsx("option",{value:"",className:"text-black",children:"All Exams"}),b.map(x=>v.jsx("option",{value:x.id,className:"text-black",children:x.title},x.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Search"}),v.jsx("input",{type:"text",placeholder:"Student or exam name...",value:h,onChange:x=>f(x.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white placeholder-gray-400"})]})]}),v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Showing ",t.length," of ",n.length," results"]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 sm:p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-bold text-white text-shadow mb-4",children:"Overall Score Distribution"}),v.jsx(nG,{data:t})]}),v.jsx("div",{className:"hidden md:block bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg overflow-hidden",children:v.jsxs("table",{className:"min-w-full leading-normal",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-white/10 border-b border-white/20",children:[v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Student"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Exam"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Submitted On"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Score"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Percentage"})]})}),v.jsx("tbody",{children:t.length>0?t.map(x=>v.jsxs("tr",{className:"border-b border-white/20 hover:bg-white/10 transition-colors",children:[v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:x.student_name}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:x.exam_title}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:new Date(x.submitted_at).toLocaleDateString()}),v.jsxs("td",{className:"px-5 py-4 text-sm bg-transparent font-semibold text-gray-100",children:[x.score,"/",x.total_marks]}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent",children:v.jsxs("span",{className:`font-bold text-shadow ${x.percentage>=80?"text-green-300":x.percentage>=60?"text-yellow-300":"text-red-400"}`,children:[x.percentage,"%"]})})]},x.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:5,className:"px-5 py-4 text-center text-gray-400",children:"No results found matching the selected filters"})})})]})}),v.jsx("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:t.length>0?t.map(x=>v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-white text-lg",children:x.student_name}),v.jsx("div",{className:"text-sm text-gray-200",children:x.exam_title})]}),v.jsxs("div",{className:`font-bold text-xl text-shadow ${x.percentage>=80?"text-green-300":x.percentage>=60?"text-yellow-300":"text-red-400"}`,children:[x.percentage,"%"]})]}),v.jsxs("div",{className:"text-xs text-gray-300 pt-2 border-t border-white/10",children:["Submitted on ",new Date(x.submitted_at).toLocaleDateString()," · Score: ",x.score,"/",x.total_marks]})]},x.id)):v.jsx("div",{className:"text-center py-8 text-gray-400",children:"No results found matching the selected filters"})})]})};var tl={};tl.d=(n,e)=>{for(var t in e)tl.o(e,t)&&!tl.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};tl.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ke=globalThis.pdfjsLib={};tl.d(ke,{AbortException:()=>zi,AnnotationEditorLayer:()=>Ur,AnnotationEditorParamsType:()=>Re,AnnotationEditorType:()=>Te,AnnotationEditorUIManager:()=>Ui,AnnotationLayer:()=>Z7,AnnotationMode:()=>Oi,ColorPicker:()=>Zn,DOMSVGFactory:()=>p0,DrawLayer:()=>ln,FeatureTest:()=>hn,GlobalWorkerOptions:()=>rl,ImageKind:()=>Eu,InvalidPDFException:()=>Kg,MissingPDFException:()=>yl,OPS:()=>pr,OutputScale:()=>Yg,PDFDataRangeTransport:()=>TT,PDFDateString:()=>fT,PDFWorker:()=>ba,PasswordResponses:()=>oG,PermissionFlag:()=>aG,PixelsPerInch:()=>Ra,RenderingCancelledException:()=>s0,TextLayer:()=>cn,TouchManager:()=>ch,UnexpectedResponseException:()=>gd,Util:()=>ye,VerbosityLevel:()=>rh,XfaLayer:()=>OT,build:()=>j7,createValidAbsoluteUrl:()=>dG,fetchData:()=>oh,getDocument:()=>S7,getFilenameFromUrl:()=>bG,getPdfFilenameFromUrl:()=>wG,getXfaPageViewport:()=>AG,isDataScheme:()=>lh,isPdfFile:()=>a0,noContextMenu:()=>yr,normalizeUnicode:()=>vG,setLayerDimensions:()=>Ns,shadow:()=>Me,stopEvent:()=>Rn,version:()=>O7});const rn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),dT=[1,0,0,1,0,0],Vg=[.001,0,0,.001,0,0],iG=1e7,Hm=1.35,jn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Oi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sG="pdfjs_internal_editor_",Te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Re={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},aG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Eu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Wo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rh={ERRORS:0,WARNINGS:1,INFOS:5},pr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},oG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ih=rh.WARNINGS;function lG(n){Number.isInteger(n)&&(ih=n)}function cG(){return ih}function sh(n){ih>=rh.INFOS&&console.log(`Info: ${n}`)}function Ne(n){ih>=rh.WARNINGS&&console.log(`Warning: ${n}`)}function Ge(n){throw new Error(n)}function yt(n,e){n||Ge(e)}function uG(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function dG(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=gG(n)}catch{}const r=e?new URL(n,e):new URL(n);if(uG(r))return r}catch{}return null}function Me(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Vi=(function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class W_ extends Vi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Wm extends Vi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Kg extends Vi{constructor(e){super(e,"InvalidPDFException")}}class yl extends Vi{constructor(e){super(e,"MissingPDFException")}}class gd extends Vi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class hG extends Vi{constructor(e){super(e,"FormatError")}}class zi extends Vi{constructor(e){super(e,"AbortException")}}function hT(n){(typeof n!="object"||n?.length===void 0)&&Ge("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=n.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function ah(n){typeof n!="string"&&Ge("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function fG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function r0(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function pG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function mG(){try{return new Function(""),!0}catch{return!1}}class hn{static get isLittleEndian(){return Me(this,"isLittleEndian",pG())}static get isEvalSupported(){return Me(this,"isEvalSupported",mG())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Me(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Me(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const qm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class ye{static makeHexColor(e,t,r){return`#${qm[e]}${qm[t]}${qm[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],a[0]),Math.min(r[1],i[1],s[1],a[1]),Math.max(r[0],i[0],s[0],a[0]),Math.max(r[1],i[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(r+a)/2,u=Math.sqrt((r+a)**2-4*(r*a-s*i))/2,d=l+u||1,h=l-u||1;return[Math.sqrt(d),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[r,s,i,a]}static#e(e,t,r,i,s,a,l,u,d,h){if(d<=0||d>=1)return;const f=1-d,m=d*d,g=m*d,b=f*(f*(f*e+3*d*t)+3*m*r)+g*i,x=f*(f*(f*s+3*d*a)+3*m*l)+g*u;h[0]=Math.min(h[0],b),h[1]=Math.min(h[1],x),h[2]=Math.max(h[2],b),h[3]=Math.max(h[3],x)}static#t(e,t,r,i,s,a,l,u,d,h,f,m){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&this.#e(e,t,r,i,s,a,l,u,-f/h,m);return}const g=h**2-4*f*d;if(g<0)return;const b=Math.sqrt(g),x=2*d;this.#e(e,t,r,i,s,a,l,u,(-h+b)/x,m),this.#e(e,t,r,i,s,a,l,u,(-h-b)/x,m)}static bezierBoundingBox(e,t,r,i,s,a,l,u,d){return d?(d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,u)):d=[Math.min(e,l),Math.min(t,u),Math.max(e,l),Math.max(t,u)],this.#t(e,r,s,l,t,i,a,u,3*(-e+3*(r-s)+l),6*(e-2*r+s),3*(r-e),d),this.#t(e,r,s,l,t,i,a,u,3*(-t+3*(i-a)+u),6*(t-2*i+a),3*(i-t),d),d}}function gG(n){return decodeURIComponent(escape(n))}let Gm=null,q_=null;function vG(n){return Gm||(Gm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,q_=new Map([["ﬅ","ſt"]])),n.replaceAll(Gm,(e,t,r)=>t?t.normalize("NFKC"):q_.get(r))}function yG(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),hT(n)}const i0="pdfjs_internal_id_";function xG(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(hT(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const zr="http://www.w3.org/2000/svg";class Ra{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function oh(n,e="text"){if(Xo(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Bl{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,m,g;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,f=0,m=0,g=1;break;case 90:h=0,f=1,m=1,g=0;break;case 270:h=0,f=-1,m=-1,g=0;break;case 0:h=1,f=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,g=-g);let b,x,A,E;h===0?(b=Math.abs(d-e[1])*r+s,x=Math.abs(u-e[0])*r+a,A=(e[3]-e[1])*r,E=(e[2]-e[0])*r):(b=Math.abs(u-e[0])*r+s,x=Math.abs(d-e[1])*r+a,A=(e[2]-e[0])*r,E=(e[3]-e[1])*r),this.transform=[h*r,f*r,m*r,g*r,b-h*r*u-m*r*d,x-f*r*u-g*r*d],this.width=A,this.height=E}get rawDims(){const{userUnit:e,viewBox:t}=this,r=t.map(i=>i*e);return Me(this,"rawDims",{pageWidth:r[2]-r[0],pageHeight:r[3]-r[1],pageX:r[0],pageY:r[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Bl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return ye.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ye.applyTransform([e[0],e[1]],this.transform),r=ye.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ye.applyInverseTransform([e,t],this.transform)}}class s0 extends Vi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function lh(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function a0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function bG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function wG(n,e="document.pdf"){if(typeof n!="string")return e;if(lh(n))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class G_{started=Object.create(null);times=[];time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Xo(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function yr(n){n.preventDefault()}function Rn(n){n.preventDefault(),n.stopPropagation()}class fT{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=h,l+=f):d==="+"&&(a-=h,l-=f),new Date(Date.UTC(r,i,s,a,l,u))}}function AG(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new Bl({viewBox:s,userUnit:1,scale:e,rotation:t})}function o0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${n}"`),[0,0,0])}function SG(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,o0(r))}e.remove()}function et(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform();return[e,t,r,i,s,a]}function Er(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform().invertSelf();return[e,t,r,i,s,a]}function Ns(n,e,t=!1,r=!0){if(e instanceof Bl){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=n,l=hn.isCSSRoundSupported,u=`var(--scale-factor) * ${i}px`,d=`var(--scale-factor) * ${s}px`,h=l?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,f=l?`round(down, ${d}, var(--scale-round-y, 1px))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Yg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class nl{#e=null;#t=null;#n;#r=null;#s=null;static#i=null;constructor(e){this.#n=e,nl.#i||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",yr,{signal:t}),e.addEventListener("pointerdown",nl.#l,{signal:t});const r=this.#r=document.createElement("div");r.className="buttons",e.append(r);const i=this.#n.toolbarPosition;if(i){const{style:s}=e,a=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#o(e){this.#n._focusEventsAllowed=!1,Rn(e)}#u(e){this.#n._focusEventsAllowed=!0,Rn(e)}#c(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",yr,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#h(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",nl.#i[e]),this.#c(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#r.append(r)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#c(t),this.#r.prepend(t,this.#d),this.#s=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#c(t),this.#r.prepend(t,this.#d)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class _G{#e=null;#t=null;#n;constructor(e){this.#n=e}#r(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",yr,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#i(),e}#s(e,t){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const l=s.x+(t?s.width:0);if(a>r){i=l,r=a;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,r]}show(e,t,r){const[i,s]=this.#s(t,r),{style:a}=this.#t||=this.#r();e.append(this.#t),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",yr,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function vd(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class EG{#e=0;get id(){return`${sG}${this.#e++}`}}class l0{#e=yG();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Me(this,"_isSVGFittingCanvas",s)}async#r(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await oh(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=l0._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((d,h)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,d()},a.onload=async()=>{const f=r.svgUrl=a.result;l.src=await s?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=h});a.readAsDataURL(i),await u}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Ne(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return this.#r(`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return this.#r(e,e)}async getFromBlob(e,t){const r=await t;return this.#r(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class CG{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const u={cmd:e,undo:t,post:r,type:s};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(u);return}if(a&&this.#e[this.#r].type===s){l&&(u.undo=this.#e[this.#r].undo),this.#e[this.#r]=u;return}const d=this.#r+1;d===this.#n?this.#e.splice(0,1):(this.#r=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(u)}undo(){if(this.#r===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(e){if(this.#r!==-1){for(let t=this.#r;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#r-t),this.#r=t;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}}class zl{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=hn.platform;for(const[r,i,s={}]of e)for(const a of r){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:l=null}}=r;l&&!l(e,t)||(i.bind(e,...a,t)(),s||Rn(t))}}class c0{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return SG(e),Me(this,"_colors",e)}convert(e){const t=o0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,a)=>s===t[a]))return c0._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ye.makeHexColor(...t):e}}class Ui{#e=new AbortController;#t=null;#n=new Map;#r=new Map;#s=null;#i=null;#l=null;#o=new CG;#u=null;#c=null;#h=0;#d=new Set;#f=null;#a=null;#p=new Set;_editorUndoBar=null;#g=!1;#m=!1;#v=!1;#b=null;#y=null;#w=null;#S=null;#E=!1;#P=null;#T=new EG;#A=!1;#k=!1;#C=null;#O=null;#I=null;#D=null;#_=Te.NONE;#x=new Set;#M=null;#z=null;#U=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#L=[0,0];#R=null;#F=null;#W=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ui.prototype,t=a=>a.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Me(this,"_keyboardManager",new zl([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,r,i,s,a,l,u,d,h,f,m,g){const b=this._signal=this.#e.signal;this.#F=e,this.#W=t,this.#s=r,this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:b}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),i._on("setpreference",this.onSetPreference.bind(this),{signal:b}),i._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:b}),this.#te(),this.#se(),this.#K(),this.#i=s.annotationStorage,this.#b=s.filterFactory,this.#z=a,this.#S=l||null,this.#g=u,this.#m=d,this.#v=h,this.#D=f||null,this.viewParameters={realScale:Ra.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=g!==!1}destroy(){this.#j?.resolve(),this.#j=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#x.clear(),this.#o.destroy(),this.#s?.destroy(),this.#P?.hide(),this.#P=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#R&&(clearTimeout(this.#R),this.#R=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#D}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Me(this,"hcmFilter",this.#z?this.#b.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Me(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return Me(this,"highlightColors",this.#S?new Map(this.#S.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=e}setMainHighlightColorPicker(e){this.#I=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#r.values()){const{x:i,y:s,width:a,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+l)return r}return null}disableUserSelect(e=!1){this.#W.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ra.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#$({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#V(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#r.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}=t,l=t.toString(),d=this.#$(t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=this.#V(d),m=this.#_===Te.NONE,g=()=>{f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Te.HIGHLIGHT,g);return}g()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#$(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#P||=new _G(this),this.#P.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}#ee(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#P?.hide(),this.#M=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#$(e).closest(".textLayer");if(!i){this.#M&&(this.#P?.hide(),this.#M=null,this.#N({hasSelectedText:!1}));return}if(this.#P?.hide(),this.#M=t,this.#N({hasSelectedText:!0}),!(this.#_!==Te.HIGHLIGHT&&this.#_!==Te.NONE)&&(this.#_===Te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#_===Te.HIGHLIGHT?this.#V(i):null;s?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),u=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),s?.toggleDrawing(!0),d.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",u,{signal:l}),window.addEventListener("blur",u,{signal:l})}}#G(e=""){this.#_===Te.HIGHLIGHT?this.highlightSelection(e):this.#g&&this.#J()}#te(){document.addEventListener("selectionchange",this.#ee.bind(this),{signal:this._signal})}#ne(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#re(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#G("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#x)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#K(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ie(){this.#C?.abort(),this.#C=null}#Y(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#X(){this.#u?.abort(),this.#u=null}#se(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#K(),this.#Y()}removeEditListeners(){this.#ie(),this.#X()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#a)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#a)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#x){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of this.#a)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Ne(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const u of r){const d=await i.deserialize(u);if(!d)return;s.push(d)}const a=()=>{for(const u of s)this.#Q(u);this.#Z(s)},l=()=>{for(const u of s)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){Ne(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Te.NONE&&!this.isEditorHandlingKeyboard&&Ui._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#G("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#N(e){Object.entries(e).some(([r,i])=>this.#H[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#_===Te.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#B([[Re.HIGHLIGHT_FREE,!0]]))}#B(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ne(),this.#Y(),this.#N({isEditing:this.#_!==Te.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#re(),this.#X(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#a){this.#a=e;for(const t of this.#a)this.#B(t.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#r.get(this.#h)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#r.set(e.pageIndex,e),this.#A?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#_!==e&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#_=e,e===Te.NONE){this.setEditingState(!1),this.#oe(),this._editorUndoBar?.hide(),this.#j.resolve();return}this.setEditingState(!0),await this.#ae(),this.unselectAll();for(const i of this.#r.values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const i of this.#n.values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#a){switch(e){case Re.CREATE:this.currentLayer.addNewEditor();return;case Re.HIGHLIGHT_DEFAULT_COLOR:this.#I?.updateColor(t);break;case Re.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#U||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#x)r.updateParams(e,t);for(const r of this.#a)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const s of this.#n.values())s.editorType===e&&s.show(t);(this.#U?.get(Re.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#B([[Re.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#k!==e){this.#k=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ae(){if(!this.#A){this.#A=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#A){this.#A=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#Q(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#B(e.propertiesToUpdate))}get#le(){let e=null;for(e of this.#x);return e}updateUI(e){this.#le===e&&this.#B(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#B(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#x.has(e)){this.#x.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#x.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.#c?.commitOrRemove();for(const t of this.#x)t!==e&&t.unselect();this.#x.clear(),this.#x.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#x.has(e)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(e){e.unselect(),this.#x.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#N({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(e){this.#o.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}cleanUndoStack(e){this.#o.cleanType(e)}#q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#x],r=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const s of t)s.remove()},i=()=>{for(const s of t)this.#Q(s)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Z(e){for(const t of this.#x)t.unselect();this.#x.clear();for(const t of e)t.isEmpty()||(this.#x.add(t),t.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#x)e.commit();this.#Z(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==Te.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const e of this.#x)e.unselect();this.#x.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#L[0]+=e,this.#L[1]+=t;const[i,s]=this.#L,a=[...this.#x],l=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#L[0]=this.#L[1]=0,this.addCommands({cmd:()=>{for(const u of a)this.#n.has(u.id)&&u.translateInPage(i,s)},undo:()=>{for(const u of a)this.#n.has(u.id)&&u.translateInPage(-i,-s)},mustExec:!1})},l);for(const u of a)u.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#x)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:i,y:s,pageIndex:a},l]of e)l.newX=i,l.newY=s,l.newPageIndex=a,t||=i!==l.savedX||s!==l.savedY||a!==l.savedPageIndex;if(!t)return!1;const r=(i,s,a,l)=>{if(this.#n.has(i.id)){const u=this.#r.get(l);u?i._setParentAndPosition(u,s,a):(i.pageIndex=l,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:l}]of e)r(i,s,a,l)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:l}]of e)r(i,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const r of this.#f.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}get imageManager(){return Me(this,"imageManager",new l0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,m)=>({x:(h-i)/a,y:1-(d+f-r)/s,width:m/a,height:f/s});break;case"180":l=(d,h,f,m)=>({x:1-(d+f-r)/s,y:1-(h+m-i)/a,width:f/s,height:m/a});break;case"270":l=(d,h,f,m)=>({x:1-(h+m-i)/a,y:(d-r)/s,width:m/a,height:f/s});break;default:l=(d,h,f,m)=>({x:(d-r)/s,y:(h-i)/a,width:f/s,height:m/a});break}const u=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:m,y:g,width:b,height:x}of f.getClientRects())b===0||x===0||u.push(l(m,g,b,x))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#i.getRawValue(t);r&&(this.#_===Te.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class Pr{#e=null;#t=!1;#n=null;#r=null;#s=null;#i=null;#l=!1;#o=null;#u=null;#c=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,Pr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Pr._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#r=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Pr.#f.missing),t.setAttribute("data-l10n-id",Pr.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",yr,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#a}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#l=!0,i(s))},{signal:r}),await this.#p(),e}get#a(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await Pr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#c===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(this.#c=r,this.#h=i),!(this.#e===e&&this.#t===t)&&(s||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#a}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#s=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#n;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Pr.#f[this.#a]),this.#r?.setAttribute("data-l10n-id",Pr.#f[`${this.#a}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const i=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s?.classList.remove("show")},{signal:s})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class ch{#e;#t=!1;#n=null;#r;#s;#i;#l;#o;#u=null;#c;#h=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:l}){this.#e=e,this.#n=r,this.#r=t,this.#s=i,this.#i=s,this.#l=a,this.#c=new AbortController,this.#o=AbortSignal.any([l,this.#c.signal]),e.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#o})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Me(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#d(e){if(this.#r?.()||e.touches.length<2)return;if(!this.#h){this.#h=new AbortController;const i=AbortSignal.any([this.#o,this.#h.signal]),s=this.#e,a={signal:i,passive:!1};s.addEventListener("touchmove",this.#f.bind(this),a),s.addEventListener("touchend",this.#a.bind(this),a),s.addEventListener("touchcancel",this.#a.bind(this),a),this.#s?.()}if(Rn(e),e.touches.length!==2||this.#n?.()){this.#u=null;return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#u={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#f(e){if(!this.#u||e.touches.length!==2)return;let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:a,screenY:l}=r,u=this.#u,{touch0X:d,touch0Y:h,touch1X:f,touch1Y:m}=u,g=f-d,b=m-h,x=a-i,A=l-s,E=Math.hypot(x,A)||1,C=Math.hypot(g,b)||1;if(!this.#t&&Math.abs(C-E)<=ch.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=s,u.touch1X=a,u.touch1Y=l,e.preventDefault(),!this.#t){this.#t=!0;return}const P=[(i+a)/2,(s+l)/2];this.#i?.(P,C,E)}#a(e){this.#h.abort(),this.#h=null,this.#l?.(),this.#u&&(e.preventDefault(),this.#u=null,this.#t=!1)}destroy(){this.#c?.abort(),this.#c=null}}class Ce{#e=null;#t=null;#n=null;#r=!1;#s=null;#i="";#l=!1;#o=null;#u=null;#c=null;#h=null;#d="";#f=!1;#a=null;#p=!1;#g=!1;#m=!1;#v=null;#b=0;#y=0;#w=null;#S=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#P=Ce._zIndex++;static _borderLineWidth=-1;static _colorManager=new c0;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ce.prototype._resizeWithKeyboard,t=Ui.TRANSLATE_SMALL,r=Ui.TRANSLATE_BIG;return Me(this,"_resizerKeyboardManager",new zl([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ce.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new PG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ce._l10n??=e,Ce._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Ce._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ce._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#P}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#$(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/a,this.fixAndSetPosition()}#T([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#T(this.parentDimensions,e,t)}translateInPage(e,t){this.#a||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#a||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[u,d]=this.getBaseTranslation();a+=u,l+=d;const{style:h}=r;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#a&&(this.#a[0]!==this.x||this.#a[1]!==this.y)}get _hasBeenResized(){return!!this.#a&&(this.#a[2]!==this.width||this.#a[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ce,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:a,width:l,height:u}=this;if(l*=r,u*=i,s*=r,a*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(r-l,s)),a=Math.max(0,Math.min(i-u,a));break;case 90:s=Math.max(0,Math.min(r-u,s)),a=Math.min(i,Math.max(l,a));break;case 180:s=Math.min(r,Math.max(l,s)),a=Math.min(i,Math.max(u,a));break;case 270:s=Math.min(r,Math.max(u,s)),a=Math.max(0,Math.min(i-l,a));break}this.x=s/=r,this.y=a/=i;const[d,h]=this.getBaseTranslation();s+=d,a+=h,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#A(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Ce.#A(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Ce.#A(e,t,360-this.parentRotation)}#k(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/r).toFixed(2)}%`,this.#l||(s.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!this.#l&&t.endsWith("%");if(i&&s)return;const[a,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!this.#l&&!s&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#o.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#O.bind(this,r),{signal:t}),i.addEventListener("contextmenu",yr,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#o)}#O(e,t){t.preventDefault();const{isMac:r}=hn.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#_.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Rn,{passive:!1,signal:a}),window.addEventListener("contextmenu",yr,{signal:a}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=u,this.#D()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#I(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*r,a*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#D(){if(!this.#c)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#c;this.#c=null;const s=this.x,a=this.y,l=this.width,u=this.height;s===e&&a===t&&l===r&&u===i||this.addCommands({cmd:this.#I.bind(this,s,a,l,u),undo:this.#I.bind(this,e,t,r,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#_(e,t){const[r,i]=this.parentDimensions,s=this.x,a=this.y,l=this.width,u=this.height,d=Ce.MIN_SIZE/r,h=Ce.MIN_SIZE/i,f=this.#k(this.rotation),m=(X,Q)=>[f[0]*X+f[2]*Q,f[1]*X+f[3]*Q],g=this.#k(360-this.rotation),b=(X,Q)=>[g[0]*X+g[2]*Q,g[1]*X+g[3]*Q];let x,A,E=!1,C=!1;switch(e){case"topLeft":E=!0,x=(X,Q)=>[0,0],A=(X,Q)=>[X,Q];break;case"topMiddle":x=(X,Q)=>[X/2,0],A=(X,Q)=>[X/2,Q];break;case"topRight":E=!0,x=(X,Q)=>[X,0],A=(X,Q)=>[0,Q];break;case"middleRight":C=!0,x=(X,Q)=>[X,Q/2],A=(X,Q)=>[0,Q/2];break;case"bottomRight":E=!0,x=(X,Q)=>[X,Q],A=(X,Q)=>[0,0];break;case"bottomMiddle":x=(X,Q)=>[X/2,Q],A=(X,Q)=>[X/2,0];break;case"bottomLeft":E=!0,x=(X,Q)=>[0,Q],A=(X,Q)=>[X,0];break;case"middleLeft":C=!0,x=(X,Q)=>[0,Q/2],A=(X,Q)=>[X,Q/2];break}const P=x(l,u),T=A(l,u);let N=m(...T);const O=Ce._round(s+N[0]),j=Ce._round(a+N[1]);let B=1,F=1,Y,V;if(t.fromKeyboard)({deltaX:Y,deltaY:V}=t);else{const{screenX:X,screenY:Q}=t,[Z,$]=this.#u;[Y,V]=this.screenToPageTranslation(X-Z,Q-$),this.#u[0]=X,this.#u[1]=Q}if([Y,V]=b(Y/r,V/i),E){const X=Math.hypot(l,u);B=F=Math.max(Math.min(Math.hypot(T[0]-P[0]-Y,T[1]-P[1]-V)/X,1/l,1/u),d/l,h/u)}else C?B=Math.max(d,Math.min(1,Math.abs(T[0]-P[0]-Y)))/l:F=Math.max(h,Math.min(1,Math.abs(T[1]-P[1]-V)))/u;const K=Ce._round(l*B),te=Ce._round(u*F);N=m(...A(K,te));const H=O-N[0],ae=j-N[1];this.#a||=[this.x,this.y,this.width,this.height],this.width=K,this.height=te,this.x=H,this.y=ae,this.setDims(r*K,i*te),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new nl(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Pr.initialize(Ce._l10n),this.#n=new Pr(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#r?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#L();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),vd(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new ch({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#x.bind(this),onPinching:this.#M.bind(this),onPinchEnd:this.#z.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#x(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#M(e,t,r){let s=.7*(r/t)+1-.7;if(s===1)return;const a=this.#k(this.rotation),l=(O,j)=>[a[0]*O+a[2]*j,a[1]*O+a[3]*j],[u,d]=this.parentDimensions,h=this.x,f=this.y,m=this.width,g=this.height,b=Ce.MIN_SIZE/u,x=Ce.MIN_SIZE/d;s=Math.max(Math.min(s,1/m,1/g),b/m,x/g);const A=Ce._round(m*s),E=Ce._round(g*s);if(A===m&&E===g)return;this.#a||=[h,f,m,g];const C=l(m/2,g/2),P=Ce._round(h+C[0]),T=Ce._round(f+C[1]),N=l(A/2,E/2);this.x=P-N[0],this.y=T-N[1],this.width=A,this.height=E,this.setDims(u*A,d*E),this.fixAndSetPosition(),this._onResizing()}#z(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#D()}pointerdown(e){const{isMac:t}=hn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#H(e);return}this.#U(e)}get isSelected(){return this._uiManager.isSelected(this)}#U(e){const{isMac:t}=hn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},l=d=>{i.abort(),this.#s=null,this.#f=!1,this._uiManager.endDragSession()||this.#U(d),r&&this._onStopDragging()};t&&(this.#b=e.clientX,this.#y=e.clientY,this.#s=e.pointerId,this.#i=e.pointerType,window.addEventListener("pointermove",d=>{r||(r=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:m}=d;if(m!==this.#s){Rn(d);return}const[g,b]=this.screenToPageTranslation(h-this.#b,f-this.#y);this.#b=h,this.#y=f,this._uiManager.dragSelectedEditors(g,b)},a),window.addEventListener("touchmove",Rn,a),window.addEventListener("pointerdown",d=>{d.pointerType===this.#i&&(this.#S||d.isPrimary)&&l(d),Rn(d)},a));const u=d=>{if(!this.#s||this.#s===d.pointerId){l(d);return}Rn(d)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[l,u]=this.pageTranslation,d=e/i,h=t/i,f=this.x*s,m=this.y*a,g=this.width*s,b=this.height*a;switch(r){case 0:return[f+d+l,a-m-h-b+u,f+d+g+l,a-m-h+u];case 90:return[f+h+l,a-m+d+u,f+h+b+l,a-m+d+g+u];case 180:return[f-d-g+l,a-m+h+u,f-d+l,a-m+h+b+u];case 270:return[f-h-b+l,a-m-d-g+u,f-h+l,a-m-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,a]=e,l=s-r,u=a-i;switch(this.rotation){case 0:return[r,t-a,l,u];case 90:return[r,t-i,u,l];case 180:return[s,t-i,l,u];case 270:return[s,t-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&r>0}#L(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#L()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Ge("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;const[s,a]=i.pageDimensions,[l,u,d,h]=i.getRectInCurrentCoords(e.rect,a);return i.x=l/s,i.y=u/a,i.width=d/s,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#$(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#o.classList.remove("hidden"),vd(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#o.children;if(!this.#t){this.#t=Array.from(t);const a=this.#R.bind(this),l=this.#F.bind(this),u=this._uiManager._signal;for(const d of this.#t){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:u}),d.addEventListener("blur",l,{signal:u}),d.addEventListener("focus",this.#W.bind(this,h),{signal:u}),d.setAttribute("data-l10n-id",Ce._l10nResizer[h])}}const r=this.#t[0];let i=0;for(const a of t){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let l=0;l<i-s;l++)this.#o.append(this.#o.firstChild);else if(s>i)for(let l=0;l<s-i;l++)this.#o.firstChild.before(this.#o.lastChild);let a=0;for(const l of t){const d=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Ce._l10nResizer[d])}}this.#j(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#R(e){Ce._resizerKeyboardManager.exec(this,e)}#F(e){this.#m&&e.relatedTarget?.parentNode!==this.#o&&this.#$()}#W(e){this.#d=this.#m?e:""}#j(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#m&&this.#_(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#$(){this.#m=!1,this.#j(-1),this.#D()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:r}=e;let i=this.#w.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(r),this.#w.size===0&&(this.#w=null)},Ce._telemetryTimeout),this.#w.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class PG extends Ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const V_=3285377520,Xn=4294901760,Cr=65535;class pT{constructor(e){this.h1=e?e&4294967295:V_,this.h2=e?e&4294967295:V_}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,A=e.length;x<A;x++){const E=e.charCodeAt(x);E<=255?t[r++]=E:(t[r++]=E>>>8,t[r++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(t.buffer,0,i);let l=0,u=0,d=this.h1,h=this.h2;const f=3432918353,m=461845907,g=f&Cr,b=m&Cr;for(let x=0;x<i;x++)x&1?(l=a[x],l=l*f&Xn|l*g&Cr,l=l<<15|l>>>17,l=l*m&Xn|l*b&Cr,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(u=a[x],u=u*f&Xn|u*g&Cr,u=u<<15|u>>>17,u=u*m&Xn|u*b&Cr,h^=u,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,s){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*f&Xn|l*g&Cr,l=l<<15|l>>>17,l=l*m&Xn|l*b&Cr,i&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Xn|e*36045&Cr,t=t*4283543511&Xn|((t<<16|e>>>16)*2950163797&Xn)>>>16,e^=t>>>1,e=e*444984403&Xn|e*60499&Cr,t=t*3301882366&Xn|((t<<16|e>>>16)*3120437893&Xn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Xg=Object.freeze({map:null,hash:"",transfer:void 0});class u0{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof Ce)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(t))r[s]!==a&&(i=!0,r[s]=a);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof Ce&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?r0(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new mT(this)}get serializable(){if(this.#n.size===0)return Xg;const e=new Map,t=new pT,r=[],i=Object.create(null);let s=!1;for(const[a,l]of this.#n){const u=l instanceof Ce?l.serialize(!1,i):l;u&&(e.set(a,u),t.update(`${a}:${JSON.stringify(u)}`),s||=!!u.bitmap)}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Xg}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof Ce))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const a=e[s]||=new Map;for(const[l,u]of Object.entries(i)){if(l==="type")continue;let d=a.get(l);d||(d=new Map,a.set(l,d));const h=d.get(u)??0;d.set(u,h+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof Ce)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class mT extends u0{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){Ge("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Me(this,"modifiedIds",{ids:new Set,hash:""})}}class kG{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(yt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,a=new FontFace(r,i,s);this.addNativeFontFace(a);try{await a.load(),this.#e.add(r),t?.(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Ne(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(rn||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Me(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(yt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(T,N){return T.charCodeAt(N)<<24|T.charCodeAt(N+1)<<16|T.charCodeAt(N+2)<<8|T.charCodeAt(N+3)&255}function i(T,N,O,j){const B=T.substring(0,N),F=T.substring(N+O);return B+j+F}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let d=0;function h(T,N){if(++d>30){Ne("Load test font never loaded."),N();return}if(u.font="30px "+T,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(h.bind(null,T,N))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=i(m,976,f.length,f);const b=16,x=1482184792;let A=r(m,b);for(s=0,a=f.length-3;s<a;s+=4)A=A-x+r(f,s)|0;s<f.length&&(A=A-x+r(f+"XXX",s)|0),m=i(m,b,4,fG(A));const E=`url(data:font/opentype;base64,${btoa(m)});`,C=`@font-face {font-family:"${f}";src:${E}}`;this.insertRule(C);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const T of[e.loadedName,f]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=T,P.append(N)}this._document.body.append(P),h(f,()=>{P.remove(),t.complete()})}}class TG{constructor(e,{disableFontFace:t=!1,fontExtraProperties:r=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this.fontExtraProperties=r===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${xG(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(a){Ne(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}}const gu={DATA:1,ERROR:2},vt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function K_(){}function wn(n){if(n instanceof zi||n instanceof Kg||n instanceof yl||n instanceof W_||n instanceof gd||n instanceof Wm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new zi(n.message);case"InvalidPDFException":return new Kg(n.message);case"MissingPDFException":return new yl(n.message);case"PasswordException":return new W_(n.message,n.code);case"UnexpectedResponseException":return new gd(n.message,n.status);case"UnknownErrorException":return new Wm(n.message,n.details)}return new Wm(n.message,n.toString())}class Qo{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#r(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===gu.DATA)i.resolve(e.data);else if(e.callback===gu.ERROR)i.reject(wn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:gu.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:gu.ERROR,callbackId:e.callbackId,reason:wn(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:e,streamId:s,data:t,desiredSize:d.desiredSize},i),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,u.postMessage({sourceName:a,targetName:l,stream:vt.PULL,streamId:s,desiredSize:d.desiredSize}),h.promise},cancel:d=>{yt(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:vt.CANCEL,streamId:s,reason:wn(d)}),h.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,l=this.actionHandler[e.action],u={enqueue(d,h=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:vt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:vt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){yt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:vt.ERROR,streamId:t,reason:wn(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(l,e.data,u).then(function(){s.postMessage({sourceName:r,targetName:i,stream:vt.START_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:vt.START_COMPLETE,streamId:t,reason:wn(d)})})}#r(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case vt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(wn(e.reason));break;case vt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(wn(e.reason));break;case vt.PULL:if(!l){s.postMessage({sourceName:r,targetName:i,stream:vt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||K_).then(function(){s.postMessage({sourceName:r,targetName:i,stream:vt.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:vt.PULL_COMPLETE,streamId:t,reason:wn(d)})});break;case vt.ENQUEUE:if(yt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case vt.CLOSE:if(yt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,t);break;case vt.ERROR:yt(a,"error should have stream controller"),a.controller.error(wn(e.reason)),this.#s(a,t);break;case vt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(wn(e.reason)),this.#s(a,t);break;case vt.CANCEL:if(!l)break;const u=wn(e.reason);Promise.try(l.onCancel||K_,u).then(function(){s.postMessage({sourceName:r,targetName:i,stream:vt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:vt.CANCEL_COMPLETE,streamId:t,reason:wn(d)})}),l.sinkCapability.reject(u),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class gT{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ge("Abstract method `_createCanvas` called.")}}class NG extends gT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class vT{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ge("Abstract method `_fetch` called.")}}class yT extends vT{async _fetch(e){const t=await oh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ah(t)}}class xT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}class OG extends xT{#e;#t;#n;#r;#s;#i;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#r=e,this.#s=t}get#o(){return this.#t||=new Map}get#u(){return this.#i||=new Map}get#c(){if(!this.#n){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(zr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#s.createElementNS(zr,"defs"),e.append(r),r.append(this.#n),this.#s.body.append(e)}return this.#n}#h(e){if(e.length===1){const u=e[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[t,r,i]=e,s=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)s[u]=t[u]/255,a[u]=r[u]/255,l[u]=i[u]/255;return[s.join(","),a.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(lh(t)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[r,i,s]=this.#h(e),a=e.length===1?r:`${r}${i}${s}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;const l=`g_${this.#r}_transfer_map_${this.#l++}`,u=this.#d(l);this.#o.set(e,u),this.#o.set(a,u);const d=this.#p(l);return this.#m(r,i,s,d),u}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let s=this.#u.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#u.set(i,s)),!e||!t))return s.url;const a=this.#b(e);e=ye.makeHexColor(...a);const l=this.#b(t);if(t=ye.makeHexColor(...l),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;const u=new Array(256);for(let g=0;g<=255;g++){const b=g/255;u[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=u.join(","),h=`g_${this.#r}_hcm_filter`,f=s.filter=this.#p(h);this.#m(d,d,d,f),this.#a(f);const m=(g,b)=>{const x=a[g]/255,A=l[g]/255,E=new Array(b+1);for(let C=0;C<=b;C++)E[C]=x+C/b*(A-x);return E.join(",")};return this.#m(m(0,5),m(1,5),m(2,5),f),s.url=this.#d(h),s.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[r]=this.#h([e]),i=`alpha_${r}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const s=`g_${this.#r}_alpha_map_${this.#l++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(i,a);const l=this.#p(s);return this.#v(r,l),a}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const s=`g_${this.#r}_luminosity_map_${this.#l++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(i,a);const l=this.#p(s);return this.#f(l),e&&this.#v(r,l),a}addHighlightHCMFilter(e,t,r,i,s){const a=`${t}-${r}-${i}-${s}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!t||!r))return l.url;const[u,d]=[t,r].map(this.#b.bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,g]=[i,s].map(this.#b.bind(this));f<h&&([h,f,m,g]=[f,h,g,m]),this.#c.style.color="";const b=(E,C,P)=>{const T=new Array(256),N=(f-h)/P,O=E/255,j=(C-E)/(255*P);let B=0;for(let F=0;F<=P;F++){const Y=Math.round(h+F*N),V=O+F*j;for(let K=B;K<=Y;K++)T[K]=V;B=Y+1}for(let F=B;F<256;F++)T[F]=T[B-1];return T.join(",")},x=`g_${this.#r}_hcm_${e}_filter`,A=l.filter=this.#p(x);return this.#a(A),this.#m(b(m[0],g[0],5),b(m[1],g[1],5),b(m[2],g[2],5),A),l.url=this.#d(x),l.url}destroy(e=!1){e&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#l=0)}#f(e){const t=this.#s.createElementNS(zr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#a(e){const t=this.#s.createElementNS(zr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#s.createElementNS(zr,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#g(e,t,r){const i=this.#s.createElementNS(zr,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#m(e,t,r,i){const s=this.#s.createElementNS(zr,"feComponentTransfer");i.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",r)}#v(e,t){const r=this.#s.createElementNS(zr,"feComponentTransfer");t.append(r),this.#g(r,"feFuncA",e)}#b(e){return this.#c.style.color=e,o0(getComputedStyle(this.#c).getPropertyValue("color"))}}class bT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ge("Abstract method `_fetch` called.")}}class wT extends bT{async _fetch(e){const t=await oh(e,"arraybuffer");return new Uint8Array(t)}}rn&&Ne("Please use the `legacy` build in Node.js environments.");async function AT(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class jG extends xT{}class MG extends gT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class IG extends vT{async _fetch(e){return AT(e)}}class RG extends bT{async _fetch(e){return AT(e)}}const en={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Qg(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class d0{getPattern(){Ge("Abstract method `getPattern` called.")}}class DG extends d0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===en.STROKE||i===en.FILL){const a=t.current.getClippedPathBoundingBox(i,et(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,u),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),r=ye.transform(r,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Qg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(r);s.setTransform(f)}else Qg(e,this._bbox),s=this._createGradient(e);return s}}function Vm(n,e,t,r,i,s,a,l){const u=e.coords,d=e.colors,h=n.data,f=n.width*4;let m;u[t+1]>u[r+1]&&(m=t,t=r,r=m,m=s,s=a,a=m),u[r+1]>u[i+1]&&(m=r,r=i,i=m,m=a,a=l,l=m),u[t+1]>u[r+1]&&(m=t,t=r,r=m,m=s,s=a,a=m);const g=(u[t]+e.offsetX)*e.scaleX,b=(u[t+1]+e.offsetY)*e.scaleY,x=(u[r]+e.offsetX)*e.scaleX,A=(u[r+1]+e.offsetY)*e.scaleY,E=(u[i]+e.offsetX)*e.scaleX,C=(u[i+1]+e.offsetY)*e.scaleY;if(b>=C)return;const P=d[s],T=d[s+1],N=d[s+2],O=d[a],j=d[a+1],B=d[a+2],F=d[l],Y=d[l+1],V=d[l+2],K=Math.round(b),te=Math.round(C);let H,ae,X,Q,Z,$,W,I;for(let L=K;L<=te;L++){if(L<A){const me=L<b?0:(b-L)/(b-A);H=g-(g-x)*me,ae=P-(P-O)*me,X=T-(T-j)*me,Q=N-(N-B)*me}else{let me;L>C?me=1:A===C?me=0:me=(A-L)/(A-C),H=x-(x-E)*me,ae=O-(O-F)*me,X=j-(j-Y)*me,Q=B-(B-V)*me}let oe;L<b?oe=0:L>C?oe=1:oe=(b-L)/(b-C),Z=g-(g-E)*oe,$=P-(P-F)*oe,W=T-(T-Y)*oe,I=N-(N-V)*oe;const be=Math.round(Math.min(H,Z)),we=Math.round(Math.max(H,Z));let le=f*L+be*4;for(let me=be;me<=we;me++)oe=(H-me)/(H-Z),oe<0?oe=0:oe>1&&(oe=1),h[le++]=ae-(ae-$)*oe|0,h[le++]=X-(X-W)*oe|0,h[le++]=Q-(Q-I)*oe|0,h[le++]=255}}function LG(n,e,t){const r=e.coords,i=e.colors;let s,a;switch(e.type){case"lattice":const l=e.verticesPerRow,u=Math.floor(r.length/l)-1,d=l-1;for(s=0;s<u;s++){let h=s*l;for(let f=0;f<d;f++,h++)Vm(n,t,r[h],r[h+1],r[h+l],i[h],i[h+1],i[h+l]),Vm(n,t,r[h+l+1],r[h+1],r[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)Vm(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class FG extends d0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-u,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),g=d/f,b=h/m,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/g,scaleY:1/b},A=f+4,E=m+4,C=r.getCanvas("mesh",A,E),P=C.context,T=P.createImageData(f,m);if(t){const O=T.data;for(let j=0,B=O.length;j<B;j+=4)O[j]=t[0],O[j+1]=t[1],O[j+2]=t[2],O[j+3]=255}for(const O of this._figures)LG(T,O,x);return P.putImageData(T,2,2),{canvas:C.canvas,offsetX:l-2*g,offsetY:u-2*b,scaleX:g,scaleY:b}}getPattern(e,t,r,i){Qg(e,this._bbox);let s;if(i===en.SHADING)s=ye.singularValueDecompose2dScale(et(e));else if(s=ye.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=ye.singularValueDecompose2dScale(this.matrix);s=[s[0]*l[0],s[1]*l[1]]}const a=this._createMeshCanvas(s,i===en.SHADING?null:this._background,t.cachedCanvases);return i!==en.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class $G extends d0{getPattern(){return"hotpink"}}function BG(n){switch(n[0]){case"RadialAxial":return new DG(n);case"Mesh":return new FG(n);case"Dummy":return new $G}throw new Error(`Unknown IR type: ${n[0]}`)}const Y_={COLORED:1,UNCOLORED:2};class h0{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),sh("TilingType: "+s);const h=t[0],f=t[1],m=t[2],g=t[3],b=m-h,x=g-f,A=ye.singularValueDecompose2dScale(this.matrix),E=ye.singularValueDecompose2dScale(this.baseTransform),C=A[0]*E[0],P=A[1]*E[1];let T=b,N=x,O=!1,j=!1;const B=Math.ceil(u*C),F=Math.ceil(d*P),Y=Math.ceil(b*C),V=Math.ceil(x*P);B>=Y?T=u:O=!0,F>=V?N=d:j=!0;const K=this.getSizeAndScale(T,this.ctx.canvas.width,C),te=this.getSizeAndScale(N,this.ctx.canvas.height,P),H=e.cachedCanvases.getCanvas("pattern",K.size,te.size),ae=H.context,X=l.createCanvasGraphics(ae);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,i,a),ae.translate(-K.scale*h,-te.scale*f),X.transform(K.scale,0,0,te.scale,0,0),ae.save(),this.clipBbox(X,h,f,m,g),X.baseTransform=et(X.ctx),X.executeOperatorList(r),X.endDrawing(),ae.restore(),O||j){const Q=H.canvas;O&&(T=u),j&&(N=d);const Z=this.getSizeAndScale(T,this.ctx.canvas.width,C),$=this.getSizeAndScale(N,this.ctx.canvas.height,P),W=Z.size,I=$.size,L=e.cachedCanvases.getCanvas("pattern-workaround",W,I),oe=L.context,be=O?Math.floor(b/u):0,we=j?Math.floor(x/d):0;for(let le=0;le<=be;le++)for(let me=0;me<=we;me++)oe.drawImage(Q,W*le,I*me,W,I,0,0,W,I);return{canvas:L.canvas,scaleX:Z.scale,scaleY:$.scale,offsetX:h,offsetY:f}}return{canvas:H.canvas,scaleX:K.scale,scaleY:te.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const i=Math.max(h0.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const a=i-t,l=s-r;e.ctx.rect(t,r,a,l),e.current.updateRectMinMax(et(e.ctx),[t,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case Y_.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case Y_.UNCOLORED:const l=ye.makeHexColor(r[0],r[1],r[2]);i.fillStyle=l,i.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new hG(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==en.SHADING&&(s=ye.transform(s,t.baseTransform),this.matrix&&(s=ye.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(l),u}}function zG({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=hn.isLittleEndian?4278190080:255,[u,d]=a?[s,l]:[l,s],h=r>>3,f=r&7,m=n.length;t=new Uint32Array(t.buffer);let g=0;for(let b=0;b<i;b++){for(const A=e+h;e<A;e++){const E=e<m?n[e]:255;t[g++]=E&128?d:u,t[g++]=E&64?d:u,t[g++]=E&32?d:u,t[g++]=E&16?d:u,t[g++]=E&8?d:u,t[g++]=E&4?d:u,t[g++]=E&2?d:u,t[g++]=E&1?d:u}if(f===0)continue;const x=e<m?n[e++]:255;for(let A=0;A<f;A++)t[g++]=x&1<<7-A?d:u}return{srcPos:e,destPos:g}}const X_=16,Q_=100,UG=15,Z_=10,J_=1e3,Sn=16;function HG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,a,l,u){e.transform(r,i,s,a,l,u),this.__originalTransform(r,i,s,a,l,u)},n.setTransform=function(r,i,s,a,l,u){e.setTransform(r,i,s,a,l,u),this.__originalSetTransform(r,i,s,a,l,u)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,a,l){e.bezierCurveTo(t,r,i,s,a,l),this.__originalBezierCurveTo(t,r,i,s,a,l)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class WG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function vu(n,e,t,r,i,s,a,l,u,d){const[h,f,m,g,b,x]=et(n);if(f===0&&m===0){const C=a*h+b,P=Math.round(C),T=l*g+x,N=Math.round(T),O=(a+u)*h+b,j=Math.abs(Math.round(O)-P)||1,B=(l+d)*g+x,F=Math.abs(Math.round(B)-N)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),P,N),n.drawImage(e,t,r,i,s,0,0,j,F),n.setTransform(h,f,m,g,b,x),[j,F]}if(h===0&&g===0){const C=l*m+b,P=Math.round(C),T=a*f+x,N=Math.round(T),O=(l+d)*m+b,j=Math.abs(Math.round(O)-P)||1,B=(a+u)*f+x,F=Math.abs(Math.round(B)-N)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,P,N),n.drawImage(e,t,r,i,s,0,0,F,j),n.setTransform(h,f,m,g,b,x),[F,j]}n.drawImage(e,t,r,i,s,a,l,u,d);const A=Math.hypot(h,f),E=Math.hypot(m,g);return[A*u,E*d]}function qG(n){const{width:e,height:t}=n;if(e>J_||t>J_)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(t+1)),l,u,d;const h=e+7&-8;let f=new Uint8Array(h*t),m=0;for(const E of n.data){let C=128;for(;C>0;)f[m++]=E&C?0:255,C>>=1}let g=0;for(m=0,f[m]!==0&&(a[0]=1,++g),u=1;u<e;u++)f[m]!==f[m+1]&&(a[u]=f[m]?2:1,++g),m++;for(f[m]!==0&&(a[u]=2,++g),l=1;l<t;l++){m=l*h,d=l*s,f[m-h]!==f[m]&&(a[d]=f[m]?1:8,++g);let E=(f[m]?4:0)+(f[m-h]?8:0);for(u=1;u<e;u++)E=(E>>2)+(f[m+1]?4:0)+(f[m-h+1]?8:0),i[E]&&(a[d+u]=i[E],++g),m++;if(f[m-h]!==f[m]&&(a[d+u]=f[m]?2:4,++g),g>r)return null}for(m=h*(t-1),d=l*s,f[m]!==0&&(a[d]=8,++g),u=1;u<e;u++)f[m]!==f[m+1]&&(a[d+u]=f[m]?4:8,++g),m++;if(f[m]!==0&&(a[d+u]=4,++g),g>r)return null;const b=new Int32Array([0,s,-1,0,-s,0,0,0,1]),x=new Path2D;for(l=0;g&&l<=t;l++){let E=l*s;const C=E+e;for(;E<C&&!a[E];)E++;if(E===C)continue;x.moveTo(E%s,l);const P=E;let T=a[E];do{const N=b[T];do E+=N;while(!a[E]);const O=a[E];O!==5&&O!==10?(T=O,a[E]=0):(T=O&51*T>>4,a[E]&=T>>2|T<<2),x.lineTo(E%s,E/s|0),a[E]||--g}while(P!==E);--l}return f=null,a=null,function(E){E.save(),E.scale(1/e,-1/t),E.translate(0,-t),E.fill(x),E.beginPath(),E.restore()}}class eE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=dT,this.textMatrixScale=1,this.fontMatrix=Vg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ye.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ye.applyTransform(t,e),i=ye.applyTransform(t.slice(2),e),s=ye.applyTransform([t[0],t[3]],e),a=ye.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],a[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],a[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],a[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],a[1])}updateScalingPathMinMax(e,t){ye.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,a,l,u,d,h){const f=ye.bezierBoundingBox(t,r,i,s,a,l,u,d,h);h||this.updateRectMinMax(e,f)}getPathBoundingBox(e=en.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===en.STROKE){t||Ge("Stroke bounding box must include transform.");const i=ye.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=a,r[2]+=s,r[3]+=a}return r}updateClipFromPath(){const e=ye.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=en.FILL,t=null){return ye.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function tE(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Sn,s=(t-i)/Sn,a=i===0?s:s+1,l=n.createImageData(r,Sn);let u=0,d;const h=e.data,f=l.data;let m,g,b,x;if(e.kind===Eu.GRAYSCALE_1BPP){const A=h.byteLength,E=new Uint32Array(f.buffer,0,f.byteLength>>2),C=E.length,P=r+7>>3,T=4294967295,N=hn.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(b=m<s?Sn:i,d=0,g=0;g<b;g++){const O=A-u;let j=0;const B=O>P?r:O*8-7,F=B&-8;let Y=0,V=0;for(;j<F;j+=8)V=h[u++],E[d++]=V&128?T:N,E[d++]=V&64?T:N,E[d++]=V&32?T:N,E[d++]=V&16?T:N,E[d++]=V&8?T:N,E[d++]=V&4?T:N,E[d++]=V&2?T:N,E[d++]=V&1?T:N;for(;j<B;j++)Y===0&&(V=h[u++],Y=128),E[d++]=V&Y?T:N,Y>>=1}for(;d<C;)E[d++]=0;n.putImageData(l,0,m*Sn)}}else if(e.kind===Eu.RGBA_32BPP){for(g=0,x=r*Sn*4,m=0;m<s;m++)f.set(h.subarray(u,u+x)),u+=x,n.putImageData(l,0,g),g+=Sn;m<a&&(x=r*i*4,f.set(h.subarray(u,u+x)),n.putImageData(l,0,g))}else if(e.kind===Eu.RGB_24BPP)for(b=Sn,x=r*b,m=0;m<a;m++){for(m>=s&&(b=i,x=r*b),d=0,g=x;g--;)f[d++]=h[u++],f[d++]=h[u++],f[d++]=h[u++],f[d++]=255;n.putImageData(l,0,m*Sn)}else throw new Error(`bad image kind: ${e.kind}`)}function nE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Sn,s=(t-i)/Sn,a=i===0?s:s+1,l=n.createImageData(r,Sn);let u=0;const d=e.data,h=l.data;for(let f=0;f<a;f++){const m=f<s?Sn:i;({srcPos:u}=zG({src:d,srcPos:u,dest:h,width:r,height:m,nonBlackColor:0})),n.putImageData(l,0,f*Sn)}}function qo(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function yu(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!rn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function rE(n,e){if(e)return!0;const t=ye.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Ra.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const GG=["butt","round","square"],VG=["miter","round","bevel"],KG={},iE={};class xa{constructor(e,t,r,i,s,{optionalContentConfig:a,markedContentStack:l=null},u,d){this.ctx=e,this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new WG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=l,r){const u=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...et(this.compositeCtx))}this.ctx.save(),yu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=et(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,a=e.fnArray;let l=t||0;const u=s.length;if(u===l)return l;const d=u-l>Z_&&typeof r=="function",h=d?Date.now()+UG:0;let f=0;const m=this.commonObjs,g=this.objs;let b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(b=a[l],b!==pr.dependency)this[b].apply(this,s[l]);else for(const x of s[l]){const A=x.startsWith("g_")?m:g;if(!A.has(x))return A.get(x,r),l}if(l++,l===u)return l;if(d&&++f>Z_){if(Date.now()>h)return r(),l;f=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=r,u=i,d="prescale1",h,f;for(;s>2&&l>1||a>2&&u>1;){let m=l,g=u;s>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/m),a>2&&u>1&&(g=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/g),h=this.cachedCanvases.getCanvas(d,m,g),f=h.context,f.clearRect(0,0,m,g),f.drawImage(e,0,0,l,u,0,0,m,g),e=h.canvas,l=m,u=g,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,a=this.current.patternFill,l=et(t);let u,d,h,f;if((e.bitmap||e.data)&&e.count>1){const B=e.bitmap||e.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),s]),u=this._cachedBitmapsMap.get(B),u||(u=new Map,this._cachedBitmapsMap.set(B,u));const F=u.get(d);if(F&&!a){const Y=Math.round(Math.min(l[0],l[2])+l[4]),V=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:F,offsetX:Y,offsetY:V}}h=F}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),nE(f.context,e));let m=ye.transform(l,[1/r,0,0,-1/i,0,0]);m=ye.transform(m,[1,0,0,1,0,-i]);const[g,b,x,A]=ye.getAxialAlignedBoundingBox([0,0,r,i],m),E=Math.round(x-g)||1,C=Math.round(A-b)||1,P=this.cachedCanvases.getCanvas("fillCanvas",E,C),T=P.context,N=g,O=b;T.translate(-N,-O),T.transform(...m),h||(h=this._scaleImage(f.canvas,Er(T)),h=h.img,u&&a&&u.set(d,h)),T.imageSmoothingEnabled=rE(et(T),e.interpolate),vu(T,h,0,0,h.width,h.height,0,0,r,i),T.globalCompositeOperation="source-in";const j=ye.transform(Er(T),[1,0,0,1,-N,-O]);return T.fillStyle=a?s.getPattern(t,this,j,en.FILL):s,T.fillRect(0,0,r,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,P.canvas)),{canvas:P.canvas,offsetX:Math.round(N),offsetY:Math.round(O)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=GG[e]}setLineJoin(e){this.ctx.lineJoin=VG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...et(this.suspendedCtx)),qo(this.suspendedCtx,s),HG(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),qo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],a=i[1],l=i[2]-s,u=i[3]-a;l===0||u===0||(this.genericComposeSMask(t.context,r,l,u,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,a,l,u,d,h,f){let m=e.canvas,g=u-h,b=d-f;if(a){const A=ye.makeHexColor(...a);if(g<0||b<0||g+r>m.width||b+i>m.height){const E=this.cachedCanvases.getCanvas("maskExtension",r,i),C=E.context;C.drawImage(m,-g,-b),C.globalCompositeOperation="destination-atop",C.fillStyle=A,C.fillRect(0,0,r,i),C.globalCompositeOperation="source-over",m=E.canvas,g=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,b,r,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=A,e.fillRect(g,b,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(u,d,r,i),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(m,g,b,r,i,u,d,r,i),t.restore()}save(){this.inSMaskMode?(qo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),qo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,a){this.ctx.transform(e,t,r,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,s=this.current;let a=s.x,l=s.y,u,d;const h=et(i),f=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,m=f?r.slice(0):null;for(let g=0,b=0,x=e.length;g<x;g++)switch(e[g]|0){case pr.rectangle:a=t[b++],l=t[b++];const A=t[b++],E=t[b++],C=a+A,P=l+E;i.moveTo(a,l),A===0||E===0?i.lineTo(C,P):(i.lineTo(C,l),i.lineTo(C,P),i.lineTo(a,P)),f||s.updateRectMinMax(h,[a,l,C,P]),i.closePath();break;case pr.moveTo:a=t[b++],l=t[b++],i.moveTo(a,l),f||s.updatePathMinMax(h,a,l);break;case pr.lineTo:a=t[b++],l=t[b++],i.lineTo(a,l),f||s.updatePathMinMax(h,a,l);break;case pr.curveTo:u=a,d=l,a=t[b+4],l=t[b+5],i.bezierCurveTo(t[b],t[b+1],t[b+2],t[b+3],a,l),s.updateCurvePathMinMax(h,u,d,t[b],t[b+1],t[b+2],t[b+3],a,l,m),b+=6;break;case pr.curveTo2:u=a,d=l,i.bezierCurveTo(a,l,t[b],t[b+1],t[b+2],t[b+3]),s.updateCurvePathMinMax(h,u,d,a,l,t[b],t[b+1],t[b+2],t[b+3],m),a=t[b+2],l=t[b+3],b+=4;break;case pr.curveTo3:u=a,d=l,a=t[b+2],l=t[b+3],i.bezierCurveTo(t[b],t[b+1],a,l,a,l),s.updateCurvePathMinMax(h,u,d,t[b],t[b+1],a,l,a,l,m),b+=4;break;case pr.closePath:i.closePath();break}f&&s.updateScalingPathMinMax(h,m),s.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,Er(t),en.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,Er(t),en.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=KG}eoClip(){this.pendingClip=iE}beginText(){this.current.textMatrix=dT,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const r=new Path2D,i=t.getTransform().invertSelf();for(const{transform:s,x:a,y:l,fontSize:u,path:d}of e)r.addPath(d,new DOMMatrix(s).preMultiplySelf(i).translate(a,l).scale(u,-u));t.clip(r),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||Vg,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",a=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const u=r.italic?"italic":"normal";let d=t;t<X_?d=X_:t>Q_&&(d=Q_),this.current.fontSizeScale=t/d,this.ctx.font=`${u} ${l} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,a){this.current.textMatrix=[e,t,r,i,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,s){const a=this.ctx,l=this.current,u=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&Zt.FILL_STROKE_MASK,m=!!(d&Zt.ADD_TO_PATH_FLAG),g=l.patternFill&&!u.missingFile,b=l.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||m||g||b)&&(x=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||g||b){if(a.save(),a.translate(t,r),a.scale(h,-h),f===Zt.FILL||f===Zt.FILL_STROKE)if(i){const A=a.getTransform();a.setTransform(...i),a.fill(this.#n(x,A,i))}else a.fill(x);if(f===Zt.STROKE||f===Zt.FILL_STROKE)if(s){const A=a.getTransform();a.setTransform(...s),a.stroke(this.#n(x,A,s))}else a.lineWidth/=h,a.stroke(x);a.restore()}else(f===Zt.FILL||f===Zt.FILL_STROKE)&&a.fillText(e,t,r),(f===Zt.STROKE||f===Zt.FILL_STROKE)&&a.strokeText(e,t,r);m&&(this.pendingTextPaths||=[]).push({transform:et(a),x:t,y:r,fontSize:h,path:x})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return Me(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,a=t.fontSizeScale,l=t.charSpacing,u=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,m=r.vertical,g=m?1:-1,b=r.defaultVMetrics,x=i*t.fontMatrix[0],A=t.textRenderingMode===Zt.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),d>0?s.scale(h,-1):s.scale(h,1);let E,C;if(t.patternFill){s.save();const j=t.fillColor.getPattern(s,this,Er(s),en.FILL);E=et(s),s.restore(),s.fillStyle=j}if(t.patternStroke){s.save();const j=t.strokeColor.getPattern(s,this,Er(s),en.STROKE);C=et(s),s.restore(),s.strokeStyle=j}let P=t.lineWidth;const T=t.textMatrixScale;if(T===0||P===0){const j=t.textRenderingMode&Zt.FILL_STROKE_MASK;(j===Zt.STROKE||j===Zt.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=T;if(a!==1&&(s.scale(a,a),P/=a),s.lineWidth=P,r.isInvalidPDFjsFont){const j=[];let B=0;for(const F of e)j.push(F.unicode),B+=F.width;s.fillText(j.join(""),0,0),t.x+=B*x*h,s.restore(),this.compose();return}let N=0,O;for(O=0;O<f;++O){const j=e[O];if(typeof j=="number"){N+=g*j*i/1e3;continue}let B=!1;const F=(j.isSpace?u:0)+l,Y=j.fontChar,V=j.accent;let K,te,H=j.width;if(m){const X=j.vmetric||b,Q=-(j.vmetric?X[1]:H*.5)*x,Z=X[2]*x;H=X?-X[0]:H,K=Q/a,te=(N+Z)/a}else K=N/a,te=0;if(r.remeasure&&H>0){const X=s.measureText(Y).width*1e3/i*a;if(H<X&&this.isFontSubpixelAAEnabled){const Q=H/X;B=!0,s.save(),s.scale(Q,1),K/=Q}else H!==X&&(K+=(H-X)/2e3*i/a)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(A&&!V)s.fillText(Y,K,te);else if(this.paintChar(Y,K,te,E,C),V){const X=K+i*V.offset.x/a,Q=te-i*V.offset.y/a;this.paintChar(V.fontChar,X,Q,E,C)}}const ae=m?H*x-F*d:H*x+F*d;N+=ae,B&&s.restore()}m?t.y-=N:t.x+=N*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,a=r.fontDirection,l=i.vertical?1:-1,u=r.charSpacing,d=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||Vg,m=e.length,g=r.textRenderingMode===Zt.INVISIBLE;let b,x,A,E;if(!(g||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(h,a),b=0;b<m;++b){if(x=e[b],typeof x=="number"){E=l*x*s/1e3,this.ctx.translate(E,0),r.x+=E*h;continue}const C=(x.isSpace?d:0)+u,P=i.charProcOperatorList[x.operatorListId];if(!P){Ne(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(s,s),t.transform(...f),this.executeOperatorList(P),this.restore()),A=ye.applyTransform([x.width,0],f)[0]*s+C,t.translate(A,0),r.x+=A*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,a){this.ctx.rect(r,i,s-r,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||et(this.ctx),s={createCanvasGraphics:a=>new xa(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new h0(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=ye.makeHexColor(e,t,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=ye.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=BG(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Er(t),en.SHADING);const i=Er(t);if(i){const{width:s,height:a}=t.canvas,[l,u,d,h]=ye.getAxialAlignedBoundingBox([0,0,s,a],i);this.ctx.fillRect(l,u,d-l,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ge("Should not call beginInlineImage")}beginImageData(){Ge("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=et(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(et(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||sh("TODO: Support non-isolated groups."),e.knockout&&Ne("Knockout groups not supported.");const r=et(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=ye.getAxialAlignedBoundingBox(e.bbox,et(t));const s=[0,0,t.canvas.width,t.canvas.height];i=ye.intersect(i,s)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),m=f.context;m.translate(-a,-l),m.transform(...r),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),qo(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=et(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=ye.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(this.#e(),yu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[u,d]=ye.singularValueDecompose2dScale(et(this.ctx)),{viewportScale:h}=this,f=Math.ceil(a*this.outputScaleX*h),m=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:g,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(u,0,0,-d,0,l*d),yu(this.ctx)}else yu(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=qG(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const u=et(l);l.transform(t,r,i,s,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]);for(let h=0,f=a.length;h<f;h+=2){const m=ye.transform(u,[t,r,i,s,a[h],a[h+1]]),[g,b]=ye.applyTransform([0,0],m);l.drawImage(d.canvas,g,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:a,width:l,height:u,transform:d}=s,h=this.cachedCanvases.getCanvas("maskCanvas",l,u),f=h.context;f.save();const m=this.getObject(a,s);nE(f,m),f.globalCompositeOperation="source-in",f.fillStyle=i?r.getPattern(f,this,Er(t),en.FILL):r,f.fillRect(0,0,l,u),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),vu(t,h.canvas,0,0,l,u,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Ne("Dependent image isn't ready yet");return}const a=s.width,l=s.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[t,0,0,r,i[d],i[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!rn){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,r).context;tE(u,e),s=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(s,Er(i));i.imageSmoothingEnabled=rE(et(i),e.interpolate),vu(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,a=e.height,u=this.cachedCanvases.getCanvas("inlineImage",s,a).context;tE(u,e),i=this.applyTransferMapsToCanvas(u)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),vu(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===iE?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=et(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let a,l;if(r===0&&i===0){const u=Math.abs(t),d=Math.abs(s);if(u===d)if(e===0)a=l=1/u;else{const h=u*e;a=l=h<1?1/h:1}else if(e===0)a=1/u,l=1/d;else{const h=u*e,f=d*e;a=h<1?1/h:1,l=f<1?1/f:1}}else{const u=Math.abs(t*s-r*i),d=Math.hypot(t,r),h=Math.hypot(i,s);if(e===0)a=h/u,l=d/u;else{const f=e*u;a=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(i,s),a.length>0){const l=Math.max(i,s);t.setLineDash(a.map(u=>u/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in pr)xa.prototype[n]!==void 0&&(xa.prototype[pr[n]]=xa.prototype[n]);class rl{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class YG{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return r0(this.#e)}has(e){return this.#e.has(e)}}const pa=Symbol("INTERNAL");class XG{#e=!1;#t=!1;#n=!1;#r=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(e&jn.DISPLAY),this.#t=!!(e&jn.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==pa&&Ge("Internal method `_setVisible` called."),this.#n=r,this.#r=t}}class QG{#e=null;#t=new Map;#n=null;#r=null;constructor(e,t=jn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#r=e.order;for(const r of e.groups)this.#t.set(r.id,new XG(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(pa,!1);for(const r of e.on)this.#t.get(r)._setVisible(pa,!0);for(const r of e.off)this.#t.get(r)._setVisible(pa,!1);this.#n=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=this.#s(s);else if(this.#t.has(s))a=this.#t.get(s).visible;else return Ne(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return sh("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){Ne(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(pa,!1,!0);i._setVisible(pa,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?r0(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new pT;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class ZG{constructor(e,{disableRange:t=!1,disableStream:r=!1}){yt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,s?.length>0){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});yt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){yt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new JG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new e7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class JG{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=a0(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class e7{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function t7(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=u(h),h=d(h),s(h)}if(t=a(n),t){const h=d(t);return s(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=l(t);return h=d(h),s(h)}function r(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(h,{fatal:!0}),g=ah(f);f=m.decode(g),e=!1}catch{}}return f}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function a(h){const f=[];let m;const g=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(h))!==null;){let[,x,A,E]=m;if(x=parseInt(x,10),x in f){if(x===0)break;continue}f[x]=[A,E]}const b=[];for(let x=0;x<f.length&&x in f;++x){let[A,E]=f[x];E=l(E),A&&(E=unescape(E),x===0&&(E=u(E))),b.push(E)}return b.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let m=0;m<f.length;++m){const g=f[m].indexOf('"');g!==-1&&(f[m]=f[m].slice(0,g),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function u(h){const f=h.indexOf("'");if(f===-1)return h;const m=h.slice(0,f),b=h.slice(f+1).replace(/^[^']*'/,"");return i(m,b)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,g,b){if(g==="q"||g==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),i(m,b);try{b=atob(b)}catch{}return i(m,b)})}return""}function ST(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function uh(n){try{return new URL(n).origin}catch{}return null}function _T({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function ET(n){const e=n.get("Content-Disposition");if(e){let t=t7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(a0(t))return t}return null}function dh(n,e){return n===404||n===0&&e.startsWith("file:")?new yl('Missing PDF "'+e+'".'):new gd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function CT(n){return n===200||n===206}function PT(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function kT(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ne(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class sE{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ST(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return yt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new r7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class n7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,PT(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=uh(s.url),!CT(s.status))throw dh(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:l,suggestedLength:u}=_T({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=ET(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:kT(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class r7{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const a=i.url;fetch(a,PT(s,this._withCredentials,this._abortController)).then(l=>{const u=uh(l.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!CT(l.status))throw dh(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:kT(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Km=200,Ym=206;function i7(n){const e=n.response;return typeof e!="string"?e:ah(e).buffer}class s7{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ST(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Ym):i.expectedStatus=Km,t.responseType="arraybuffer",yt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||Km;if(!(s===Km&&r.expectedStatus===Ym)&&s!==r.expectedStatus){r.onError(i.status);return}const l=i7(i);if(s===Ym){const u=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?r.onDone({begin:parseInt(d[1],10),chunk:l}):(Ne('Missing or invalid "Content-Range" header.'),r.onError(0))}else l?r.onDone({begin:0,chunk:l}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class a7{constructor(e){this._source=e,this._manager=new s7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return yt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new l7(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class o7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=uh(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[u,...d]=l.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=_T({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=ET(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=dh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l7{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=uh(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=dh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const c7=/^[a-z][a-z0-9\-+.]+:/i;function u7(n){if(c7.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class d7{constructor(e){this.source=e,this.url=u7(e.url),yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return yt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new h7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new f7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class h7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new yl(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f7{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const p7=1e5,bn=30,m7=.8;class cn{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#s=null;#i=null;#l=0;#o=0;#u=null;#c=null;#h=0;#d=0;#f=Object.create(null);#a=[];#p=null;#g=[];#m=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#w=new WeakMap;static#S=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#d=r.scale*(globalThis.devicePixelRatio||1),this.#h=r.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:a,pageY:l}=r.rawDims;this.#v=[1,0,0,-1,-a,l+s],this.#o=i,this.#l=s,cn.#O(),Ns(t,r),this.#e.promise.finally(()=>{cn.#E.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=hn.platform;return Me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#f,t.styles),this.#P(t.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),cn.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Ns(this.#c,{rotation:i})),r!==this.#d){t?.(),this.#d=r;const s={div:null,properties:null,ctx:cn.#k(this.#s)};for(const a of this.#g)s.properties=this.#m.get(a),s.div=a,this.#A(s)}}cancel(){const e=new zi("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#a}#P(e){if(this.#n)return;this.#i.ctx??=cn.#k(this.#s);const t=this.#g,r=this.#a;for(const i of e){if(t.length>p7){Ne("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#T(i)}}#T(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const i=ye.transform(this.#v,e.transform);let s=Math.atan2(i[1],i[0]);const a=this.#f[e.fontName];a.vertical&&(s+=Math.PI/2);let l=this.#r&&a.fontSubstitution||a.fontFamily;l=cn.fontFamilyMap.get(l)||l;const u=Math.hypot(i[2],i[3]),d=u*cn.#I(l,this.#s);let h,f;s===0?(h=i[4],f=i[5]-d):(h=i[4]+d*Math.sin(s),f=i[5]-d*Math.cos(s));const m="calc(var(--scale-factor)*",g=t.style;this.#t===this.#c?(g.left=`${(100*h/this.#o).toFixed(2)}%`,g.top=`${(100*f/this.#l).toFixed(2)}%`):(g.left=`${m}${h.toFixed(2)}px)`,g.top=`${m}${f.toFixed(2)}px)`),g.fontSize=`${m}${(cn.#S*u).toFixed(2)}px)`,g.fontFamily=l,r.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#r&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),A=Math.abs(e.transform[3]);x!==A&&Math.max(x,A)/Math.min(x,A)>1.5&&(b=!0)}if(b&&(r.canvasWidth=a.vertical?e.height:e.width),this.#m.set(t,r),this.#i.div=t,this.#i.properties=r,this.#A(this.#i),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#A(e){const{div:t,properties:r,ctx:i}=e,{style:s}=t;let a="";if(cn.#S>1&&(a=`scale(${1/cn.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:d}=r;cn.#C(i,d*this.#d,l);const{width:h}=i.measureText(t.textContent);h>0&&(a=`scaleX(${u*this.#d/h}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#E.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#k(e=null){let t=this.#y.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#w.set(t,{size:0,family:""})}return t}static#C(e,t,r){const i=this.#w.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#O(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t){const r=this.#b.get(e);if(r)return r;const i=this.#k(t);i.canvas.width=i.canvas.height=bn,this.#C(i,bn,e);const s=i.measureText("");let a=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);if(a){const h=a/(a+l);return this.#b.set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,bn,bn),i.strokeText("g",0,0);let u=i.getImageData(0,0,bn,bn).data;l=0;for(let h=u.length-1-3;h>=0;h-=4)if(u[h]>0){l=Math.ceil(h/4/bn);break}i.clearRect(0,0,bn,bn),i.strokeText("A",0,bn),u=i.getImageData(0,0,bn,bn).data,a=0;for(let h=0,f=u.length;h<f;h+=4)if(u[h]>0){a=bn-Math.floor(h/4/bn);break}i.canvas.width=i.canvas.height=0;const d=a?a/(a+l):m7;return this.#b.set(e,d),d}}class xl{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){if(!s)return;let a=null;const l=s.name;if(l==="#text")a=s.value;else if(xl.shouldBuildText(l))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)i(u)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const g7=65536,v7=100,y7=5e3,x7=rn?MG:NG,b7=rn?IG:yT,w7=rn?jG:OG,A7=rn?RG:wT;function S7(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new f0,{docId:t}=e,r=n.url?_7(n.url):null,i=n.data?E7(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,u=n.range instanceof TT?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:g7;let h=n.worker instanceof ba?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!lh(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,b=n.cMapPacked!==!1,x=n.CMapReaderFactory||b7,A=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,E=n.StandardFontDataFactory||A7,C=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!rn,O=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!rn&&(hn.platform.isFirefox||!globalThis.chrome),j=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,B=typeof n.disableFontFace=="boolean"?n.disableFontFace:rn,F=n.fontExtraProperties===!0,Y=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,K=n.disableRange===!0,te=n.disableStream===!0,H=n.disableAutoFetch===!0,ae=n.pdfBug===!0,X=n.CanvasFactory||x7,Q=n.FilterFactory||w7,Z=n.enableHWA===!0,$=u?u.length:n.length??NaN,W=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!rn&&!B,I=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===yT&&E===wT&&g&&A&&Xo(g,document.baseURI)&&Xo(A,document.baseURI),L=null;lG(f);const oe={canvasFactory:new X({ownerDocument:V,enableHWA:Z}),filterFactory:new Q({docId:t,ownerDocument:V}),cMapReaderFactory:I?null:new x({baseUrl:g,isCompressed:b}),standardFontDataFactory:I?null:new E({baseUrl:A})};if(!h){const le={verbosity:f,port:rl.workerPort};h=le.port?ba.fromPort(le):new ba(le),e._worker=h}const be={docId:t,apiVersion:"4.10.38",data:i,password:l,disableAutoFetch:H,rangeChunkSize:d,length:$,docBaseUrl:m,enableXfa:Y,evaluatorOptions:{maxImageSize:P,disableFontFace:B,ignoreErrors:C,isEvalSupported:T,isOffscreenCanvasSupported:N,isImageDecoderSupported:O,canvasMaxAreaInBytes:j,fontExtraProperties:F,useSystemFonts:W,cMapUrl:I?g:null,standardFontDataUrl:I?A:null}},we={disableFontFace:B,fontExtraProperties:F,ownerDocument:V,pdfBug:ae,styleElement:L,loadingParams:{disableAutoFetch:H,enableXfa:Y}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const le=h.messageHandler.sendWithPromise("GetDocRequest",be,i?[i.buffer]:null);let me;if(u)me=new ZG(u,{disableRange:K,disableStream:te});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Oe;if(rn)if(Xo(r)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Oe=sE}else Oe=d7;else Oe=Xo(r)?sE:a7;me=new Oe({url:r,length:$,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:K,disableStream:te})}return le.then(Oe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ie=new Qo(t,Oe,h.port),Ae=new T7(ie,e,me,we,oe);e._transport=Ae,ie.send("Ready",null)})}).catch(e._capability.reject),e}function _7(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(rn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function E7(n){if(rn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return ah(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function aE(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class f0{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${f0.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}}class TT{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class C7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class P7{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new G_:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new NT,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new Bl({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=Oi.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(r,i,h,f),{renderingIntent:g,cacheKey:b}=m;this.#t=!1,this.#r(),l||=this._transport.getOptionalContentConfig(g);let x=this._intentStates.get(b);x||(x=Object.create(null),this._intentStates.set(b,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const A=!!(g&jn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const E=T=>{x.renderTasks.delete(C),(this._maybeCleanupAfterRender||A)&&(this.#t=!0),this.#n(!A),T?(C.capability.reject(T),this._abortOperatorList({intentState:x,reason:T instanceof Error?T:new Error(T)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new ga({callback:E,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:d});(x.renderTasks||=new Set).add(C);const P=C.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([T,N])=>{if(this.destroyed){E();return}if(this._stats?.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:T,optionalContentConfig:N}),C.operatorListChanged()}).catch(E),P}getOperatorList({intent:e="display",annotationMode:t=Oi.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(e,t,r,i,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>xl.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:u,done:d}){if(d){r(l);return}l.lang??=u.lang,Object.assign(l.styles,u.styles),l.items.push(...u.items),s()},i)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new G_),t}#n(e=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},y7),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),d=this._intentStates.get(t);d.streamReader=u;const h=()=>{u.read().then(({value:f,done:m})=>{if(m){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const m of d.renderTasks)m.operatorListChanged();this.#n(!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof s0){let i=v7;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new zi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class k7{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:s}=r;if(s.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var yd,gs,vs,wa,Cu,Aa,Pu;const Je=class Je{constructor({name:e=null,port:t=null,verbosity:r=cG()}={}){da(this,wa);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(fr(Je,vs)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(fr(Je,vs)||Io(Je,vs,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Qo("main","worker",e),this._messageHandler.on("ready",function(){}),Qc(this,wa,Cu).call(this)}_initialize(){if(fr(Je,gs)||fr(Je,Aa,Pu)){this._setupFakeWorker();return}let{workerSrc:e}=Je;try{Je._isSameOrigin(window.location.href,e)||(e=Je._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Qo("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",l=>{if(s.abort(),this.destroyed||!l){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,Qc(this,wa,Cu).call(this)}),r.on("ready",l=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};a();return}catch{sh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){fr(Je,gs)||(Ne("Setting up fake worker."),Io(Je,gs,!0)),Je._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new k7;this._port=t;const r=`fake${uw(Je,yd)._++}`,i=new Qo(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new Qo(r,r+"_worker",t),Qc(this,wa,Cu).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,fr(Je,vs)?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=fr(this,vs)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Je(e)}static get workerSrc(){if(rl.workerSrc)return rl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Me(this,"_setupFakeWorkerGlobal",(async()=>fr(this,Aa,Pu)?fr(this,Aa,Pu):(await import(this.workerSrc)).WorkerMessageHandler)())}};yd=new WeakMap,gs=new WeakMap,vs=new WeakMap,wa=new WeakSet,Cu=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Aa=new WeakSet,Pu=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},da(Je,Aa),da(Je,yd,0),da(Je,gs,!1),da(Je,vs),rn&&(Io(Je,gs,!0),rl.workerSrc||="./pdf.worker.mjs"),Je._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(t,r);return r.origin===i.origin},Je._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let ba=Je;class T7{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#s=null;constructor(e,t,r,i,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new NT,this.fontLoader=new kG({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#i(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Me(this,"annotationStorage",new u0)}getRenderingIntent(e,t=Oi.ENABLE,r=null,i=!1,s=!1){let a=jn.DISPLAY,l=Xg;switch(e){case"any":a=jn.ANY;break;case"display":break;case"print":a=jn.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const u=a&jn.PRINT&&r instanceof mT?r:this.annotationStorage;switch(t){case Oi.DISABLE:a+=jn.ANNOTATIONS_DISABLE;break;case Oi.ENABLE:break;case Oi.ENABLE_FORMS:a+=jn.ANNOTATIONS_FORMS;break;case Oi.ENABLE_STORAGE:a+=jn.ANNOTATIONS_STORAGE,l=u.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=jn.IS_EDITING),s&&(a+=jn.OPLIST);const{ids:d,hash:h}=u.modifiedIds,f=[a,l.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),cn.cleanup(),this._networkStream?.cancelAllRequests(new zi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{yt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}yt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{yt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:l}){if(l){i.close();return}yt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new C7(r,this))}),e.on("DocException",r=>{t._capability.reject(wn(r))}),e.on("PasswordRequest",r=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw wn(r);const i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};t.onPassword(i,r.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const m=s.error;Ne(`Error during font loading: ${m}`),this.commonObjs.resolve(r,m);break}const d=u&&globalThis.FontInspector?.enabled?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,h=new TG(s,{disableFontFace:a,fontExtraProperties:l,inspectFont:d});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"CopyLocalImage":const{imageRef:f}=s;yt(f,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,g]of m.objs)if(g?.ref===f)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":l.objs.resolve(r,a),a?.dataLen>iG&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#r.set(s.refStr,e);const a=new P7(t,s,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,i),i}getPageIndex(e){return aE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new QG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new YG(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),cn.cleanup()}}cachedPageNumber(e){if(!aE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#r.get(t)??null}}const Go=Symbol("INITIAL_DATA");class NT{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Go}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===Go)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==Go}delete(e){const t=this.#e[e];return!t||t.data===Go?!1:(delete this.#e[e],!0)}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Go&&(yield[e,t])}}}class N7{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ga{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:m=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new N7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ga.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ga.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:a}=this.params;this.gfx=new xa(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ga.#t.delete(this._canvas),this.callback(e||new s0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ga.#t.delete(this._canvas),this.callback())))}}const O7="4.10.38",j7="f9bea397f";function oE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Vo(n){return Math.max(0,Math.min(255,255*n))}class lE{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Vo(e),[e,e,e]}static G_HTML([e]){const t=oE(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Vo)}static RGB_HTML(e){return`#${e.map(oE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Vo(1-Math.min(1,e+i)),Vo(1-Math.min(1,r+i)),Vo(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,a=1-r,l=Math.min(i,s,a);return["CMYK",i,s,a,l]}}class M7{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ge("Abstract method `_createSVG` called.")}}class p0 extends M7{_createSVG(e){return document.createElementNS(zr,e)}}class OT{static setupStorage(e,t,r,i,s){const a=i.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of r.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const u=l.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[u,d]of Object.entries(a))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}l&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const l=s!=="richText",u=e.div;if(u.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=f}l&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);a.append(f),l&&xl.shouldBuildText(i.name)&&d.push(f)}return{textDivs:d}}const h=[[i,-1,a]];for(;h.length>0;){const[f,m,g]=h.at(-1);if(m+1===f.children.length){h.pop();continue}const b=f.children[++h.at(-1)[1]];if(b===null)continue;const{name:x}=b;if(x==="#text"){const E=document.createTextNode(b.value);d.push(E),g.append(E);continue}const A=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,x):document.createElement(x);if(g.append(A),b.attributes&&this.setAttributes({html:A,element:b,storage:t,intent:s,linkService:r}),b.children?.length>0)h.push([b,-1,A]);else if(b.value){const E=document.createTextNode(b.value);l&&xl.shouldBuildText(x)&&d.push(E),A.append(E)}}for(const f of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ul=1e3,I7=9,Os=new WeakSet;function Fi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class R7{static create(e){switch(e.data.annotationType){case Et.LINK:return new jT(e);case Et.TEXT:return new D7(e);case Et.WIDGET:switch(e.data.fieldType){case"Tx":return new L7(e);case"Btn":return e.data.radioButton?new MT(e):e.data.checkBox?new $7(e):new B7(e);case"Ch":return new z7(e);case"Sig":return new F7(e)}return new $s(e);case Et.POPUP:return new Zg(e);case Et.FREETEXT:return new IT(e);case Et.LINE:return new H7(e);case Et.SQUARE:return new W7(e);case Et.CIRCLE:return new q7(e);case Et.POLYLINE:return new RT(e);case Et.CARET:return new V7(e);case Et.INK:return new m0(e);case Et.POLYGON:return new G7(e);case Et.HIGHLIGHT:return new DT(e);case Et.UNDERLINE:return new K7(e);case Et.SQUIGGLY:return new Y7(e);case Et.STRIKEOUT:return new X7(e);case Et.STAMP:return new LT(e);case Et.FILEATTACHMENT:return new Q7(e);default:return new pt(e)}}}class pt{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return pt._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#r(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#r(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:u}}}}=this;r?.splice(0,4,...e);const{width:d,height:h}=Fi(e);t.left=`${100*(e[0]-l)/s}%`,t.top=`${100*(a-e[3]+u)/a}%`,i===0?(t.width=`${100*d/s}%`,t.height=`${100*h/a}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof $s||(s.tabIndex=Ul);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Zg){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,s),s}const{width:l,height:u}=Fi(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(x>0||A>0){const C=`calc(${x}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;a.borderRadius=C}else if(this instanceof MT){const C=`calc(${l}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;a.borderRadius=C}switch(t.borderStyle.style){case Wo.SOLID:a.borderStyle="solid";break;case Wo.DASHED:a.borderStyle="dashed";break;case Wo.BEVELED:Ne("Unimplemented border style: beveled");break;case Wo.INSET:Ne("Unimplemented border style: inset");break;case Wo.UNDERLINE:a.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(this.#t=!0,a.borderColor=ye.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):a.borderWidth=0}const d=ye.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:f,pageX:m,pageY:g}=i.rawDims;a.left=`${100*(d[0]-m)/h}%`,a.top=`${100*(d[1]-g)/f}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(a.width=`${100*l/h}%`,a.height=`${100*u/f}%`):this.setRotation(b,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:a}=Fi(this.data.rect);let l,u;e%180===0?(l=100*s/r,u=100*a/i):(l=100*a/r,u=100*s/i),t.style.width=`${l}%`,t.style.height=`${u}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],a=s[0],l=s.slice(1);i.target.style[r]=lE[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:lE[`${a}_rgb`](l)})};return Me(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const a=r[i];if(a){const l={detail:{[i]:s},target:e};a(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,A,E,C]=e.subarray(2,6);if(i===x&&s===A&&t===E&&r===C)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:x,borderWidth:A}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const u=i-t,d=s-r,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const m=h.createElement("defs");f.append(m);const g=h.createElement("clipPath"),b=`clippath_${this.data.id}`;g.setAttribute("id",b),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let x=2,A=e.length;x<A;x+=8){const E=e[x],C=e[x+1],P=e[x+2],T=e[x+3],N=h.createElement("rect"),O=(P-t)/u,j=(s-C)/d,B=(E-P)/u,F=(C-T)/d;N.setAttribute("x",O),N.setAttribute("y",j),N.setAttribute("width",B),N.setAttribute("height",F),g.append(N),l?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${j}" width="${B}" height="${F}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:e}=this,t=this.#n=new Zg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:l}of i){if(s===-1||a===t)continue;const u=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Os.has(d)){Ne(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:u,domElement:d})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&Os.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class jT extends pt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:s,include:a}=t,l=[];if(i.length!==0||s.length!==0){const h=new Set(s);for(const f of i){const m=this._fieldObjects[f]||[];for(const{id:g}of m)h.add(g)}for(const f of Object.values(this._fieldObjects))for(const m of f)h.has(m.id)===a&&l.push(m)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const u=this.annotationStorage,d=[];for(const h of l){const{id:f}=h;switch(d.push(f),h.type){case"text":{const g=h.defaultValue||"";u.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=h.defaultValue===h.exportValues;u.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=h.defaultValue||"";u.setValue(f,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${f}"]`);if(m){if(!Os.has(m)){Ne(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class D7 extends pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class $s extends pt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return hn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}})})}_setEventListeners(e,t,r,i){for(const[s,a]of r)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,a,i),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ye.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||I7,s=e.style;let a;const l=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Hm*i))||1,f=d/h;a=Math.min(i,u(f/Hm))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(i,u(d/Hm))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=ye.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class L7 extends $s{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),s.setValue(a.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let s=i.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const u={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",l??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Os.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Ul,this._setRequired(r,this.data.required),a&&(r.maxLength=a),r.addEventListener("input",h=>{e.setValue(t,{value:h.target.value}),this.setPropertyOnSiblings(r,"value",h.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue??"";r.value=u.userValue=f,u.formattedValue=null});let d=h=>{const{formattedValue:f}=u;f!=null&&(h.target.value=f),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",f=>{if(u.focused)return;const{target:m}=f;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const m={value(g){u.userValue=g.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),g.target.value=u.userValue},formattedValue(g){const{formattedValue:b}=g.detail;u.formattedValue=b,b!=null&&g.target!==document.activeElement&&(g.target.value=b),e.setValue(t,{formattedValue:b})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{const{charLimit:b}=g.detail,{target:x}=g;if(b===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",b);let A=u.userValue;!A||A.length<=b||(A=A.slice(0,b),x.value=u.userValue=A,e.setValue(t,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(m,f)}),r.addEventListener("keydown",f=>{u.commitKey=1;let m=-1;if(f.key==="Escape"?m=0:f.key==="Enter"&&!this.data.multiLine?m=2:f.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:g}=f.target;u.lastCommittedValue!==g&&(u.lastCommittedValue=g,u.userValue=g,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:m,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const h=d;d=null,r.addEventListener("blur",f=>{if(!u.focused||!f.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{value:m}=f.target;u.userValue=m,u.lastCommittedValue!==m&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}),h(f)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",f=>{u.lastCommittedValue=null;const{data:m,target:g}=f,{value:b,selectionStart:x,selectionEnd:A}=g;let E=x,C=A;switch(f.inputType){case"deleteWordBackward":{const P=b.substring(0,x).match(/\w*[^\w]*$/);P&&(E-=P[0].length);break}case"deleteWordForward":{const P=b.substring(x).match(/^[^\w]*\w*/);P&&(C+=P[0].length);break}case"deleteContentBackward":x===A&&(E-=1);break;case"deleteContentForward":x===A&&(C+=1);break}f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,change:m||"",willCommit:!1,selStart:E,selEnd:C}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(d&&r.addEventListener("blur",d),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/a;r.classList.add("comb"),r.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class F7 extends $s{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $7 extends $s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Os.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Ul,s.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const d of this._getElementsByName(l,r)){const h=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(r,{value:u})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(r,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class MT extends $s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Os.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=Ul,s.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const d of this._getElementsByName(l,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:u})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",l=>{const u={value:d=>{const h=a===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const m=h&&f.id===r;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class B7 extends jT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class z7 extends $s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Os.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Ul;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const m of i.options)m.selected=m.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,r.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),s=!1),i.append(f)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const l=h=>{const f=h?"value":"textContent",{options:m,multiple:g}=i;return g?Array.prototype.filter.call(m,b=>b.selected).map(b=>b[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let u=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const f={value(m){a?.();const g=m.detail.value,b=new Set(Array.isArray(g)?g:[g]);for(const x of i.options)x.selected=b.has(x.value);e.setValue(t,{value:l(!0)}),u=l(!1)},multipleSelection(m){i.multiple=!0},remove(m){const g=i.options,b=m.detail.remove;g[b].selected=!1,i.remove(b),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),u=l(!1)},clear(m){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=l(!1)},insert(m){const{index:g,displayValue:b,exportValue:x}=m.detail.insert,A=i.children[g],E=document.createElement("option");E.textContent=b,E.value=x,A?A.before(E):i.append(E),e.setValue(t,{value:l(!0),items:d(m)}),u=l(!1)},items(m){const{items:g}=m.detail;for(;i.length!==0;)i.remove(0);for(const b of g){const{displayValue:x,exportValue:A}=b,E=document.createElement("option");E.textContent=x,E.value=A,i.append(E)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),u=l(!1)},indices(m){const g=new Set(m.detail.indices);for(const b of m.target.options)b.selected=g.has(b.index);e.setValue(t,{value:l(!0)}),u=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,h)}),i.addEventListener("input",h=>{const f=l(!0),m=l(!1);e.setValue(t,{value:f}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Zg extends pt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:pt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new U7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${i0}${r}`).join(",")),this.container}}class U7{#e=this.#P.bind(this);#t=this.#C.bind(this);#n=this.#k.bind(this);#r=this.#A.bind(this);#s=null;#i=null;#l=null;#o=null;#u=null;#c=null;#h=null;#d=!1;#f=null;#a=null;#p=null;#g=null;#m=null;#v=null;#b=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:l,parent:u,rect:d,parentRect:h,open:f}){this.#i=e,this.#m=i,this.#l=a,this.#g=l,this.#c=u,this.#s=t,this.#p=d,this.#h=h,this.#u=r,this.#o=fT.toDateObject(s),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",this.#r),m.addEventListener("mouseenter",this.#n),m.addEventListener("mouseleave",this.#t),m.classList.add("popupTriggerArea");for(const m of r)m.container?.addEventListener("keydown",this.#e);this.#i.hidden=!0,f&&this.#A()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#s){const s=e.style.outlineColor=ye.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ye.makeHexColor(...this.#s.map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#m,e.append(t),this.#o){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),t.append(s)}const i=this.#y;if(i)OT.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#i.append(e)}get#y(){const e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#w(){return this.#y?.attributes?.style?.fontSize||0}get#S(){return this.#y?.attributes?.style?.color||null}#E(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#S,fontSize:this.#w?`calc(${this.#w}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const l=i[s];r.append(document.createTextNode(l)),s<a-1&&r.append(document.createElement("br"))}return r}#P(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#v||={contentsObj:this.#l,richText:this.#g},e&&(this.#a=null),t&&(this.#g=this.#E(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#l,richText:this.#g}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#a=null)}#T(){if(this.#a!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#c;let a=!!this.#h,l=a?this.#h:this.#p;for(const b of this.#u)if(!l||ye.intersect(b.data.rect,l)!==null){l=b.data.rect,a=!0;break}const u=ye.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=a?l[2]-l[0]+5:0,f=u[0]+h,m=u[1];this.#a=[100*(f-i)/t,100*(m-s)/r];const{style:g}=this.#i;g.left=`${this.#a[0]}%`,g.top=`${this.#a[1]}%`}#A(){this.#d=!this.#d,this.#d?(this.#k(),this.#i.addEventListener("click",this.#r),this.#i.addEventListener("keydown",this.#e)):(this.#C(),this.#i.removeEventListener("click",this.#r),this.#i.removeEventListener("keydown",this.#e))}#k(){this.#f||this.render(),this.isVisible?this.#d&&this.#i.classList.add("focused"):(this.#T(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#C(){this.#i.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#i.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#k(),this.#b=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class IT extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class H7 extends pt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=Fi(e.rect),i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W7 extends pt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=Fi(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",r-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class q7 extends pt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=Fi(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",r/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",r/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class RT extends pt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;const{width:s,height:a}=Fi(e),l=this.svgFactory.create(s,a,!0);let u=[];for(let h=0,f=t.length;h<f;h+=2){const m=t[h]-e[0],g=e[3]-t[h+1];u.push(`${m},${g}`)}u=u.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class G7 extends RT{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V7 extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class m0 extends pt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Te.HIGHLIGHT:Te.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:s}}=this,{transform:a,width:l,height:u}=this.#n(t,e),d=this.svgFactory.create(l,u,!0),h=this.#e=this.svgFactory.createElement("svg:g");d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,m=r.length;f<m;f++){const g=this.svgFactory.createElement(this.svgElementName);this.#t.push(g),g.setAttribute("points",r[f].join(",")),h.append(g)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:i}=e,s=this.#e;if(t>=0&&s.setAttribute("stroke-width",t||1),r)for(let a=0,l=this.#t.length;a<l;a++)this.#t[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:u}=this.#n(this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class DT extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Te.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class K7 extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Y7 extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class X7 extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class LT extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Te.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Q7 extends pt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=hn.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Z7{#e=null;#t=null;#n=new Map;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:l}){this.div=e,this.#e=t,this.#t=r,this.#r=l||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#s(e,t){const r=e.firstChild||e,i=r.id=`${i0}${t}`,s=await this.#r?.getAriaAttributes(i);if(s)for(const[a,l]of s)r.setAttribute(a,l);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;Ns(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new p0,annotationStorage:e.annotationStorage||new u0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Et.POPUP;if(l){const h=i.get(a.id);if(!h)continue;s.elements=h}else{const{width:h,height:f}=Fi(a.rect);if(h<=0||f<=0)continue}s.data=a;const u=R7.create(s);if(!u.isRenderable)continue;if(!l&&a.popupRef){const h=i.get(a.popupRef);h?h.push(u):i.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await this.#s(d,a.id),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#i()}update({viewport:e}){const t=this.div;this.viewport=e,Ns(t,{rotation:e.rotation}),this.#i(),t.hidden=!1}#i(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const xu=/\r\n?|\n/g;class Ct extends Ce{#e;#t="";#n=`${this.id}-editor`;#r=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Ct.prototype,t=s=>s.isEmpty(),r=Ui.TRANSLATE_SMALL,i=Ui.TRANSLATE_BIG;return Me(this,"_keyboardManager",new zl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Te.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Ct._defaultColor||Ce._defaultLineColor,this.#s=e.fontSize||Ct._defaultFontSize}static initialize(e,t){Ce.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Re.FREETEXT_SIZE:Ct._defaultFontSize=t;break;case Re.FREETEXT_COLOR:Ct._defaultColor=t;break}}updateParams(e,t){switch(e){case Re.FREETEXT_SIZE:this.#i(t);break;case Re.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[Re.FREETEXT_SIZE,Ct._defaultFontSize],[Re.FREETEXT_COLOR,Ct._defaultColor||Ce._defaultLineColor]]}get propertiesToUpdate(){return[[Re.FREETEXT_SIZE,this.#s],[Re.FREETEXT_COLOR,this.#e]]}#i(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#u()},r=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ct._internalPadding*e,-(Ct._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Ct.#c(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,a=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#o().trimEnd();if(e===t)return;const r=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ct._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),vd(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let g,b;switch(this.rotation){case 0:g=e+(a[0]-f)/d,b=t+this.height-(a[1]-m)/h;break;case 90:g=e+(a[0]-f)/d,b=t-(a[1]-m)/h,[l,u]=[u,-l];break;case 180:g=e-this.width+(a[0]-f)/d,b=t-(a[1]-m)/h,[l,u]=[-l,-u];break;case 270:g=e+(a[0]-f-this.height*h)/d,b=t+(a[1]-m-this.width*d)/h,[l,u]=[-u,l];break}this.setAt(g*i,b*s,l,u)}else this.setAt(e*i,t*s,this.width*i,this.height*s);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xu,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=Ct.#f(t.getData("text")||"").replaceAll(xu,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:u}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(xu,"")),g!==this.editorDiv){let b=d;for(const x of this.editorDiv.childNodes){if(x===g){b=h;continue}b.push(Ct.#c(x))}}d.push(l.nodeValue.slice(0,u).replaceAll(xu,""))}else if(l===this.editorDiv){let g=d,b=0;for(const x of this.editorDiv.childNodes)b++===u&&(g=h),g.push(Ct.#c(x))}this.#t=`${d.join(`
`)}${i}${h.join(`
`)}`,this.#h();const f=new Range;let m=d.reduce((g,b)=>g+b.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const b=g.nodeValue.length;if(m<=b){f.setStart(g,m),f.setEnd(g,m);break}m-=b}s.removeAllRanges(),s.addRange(f)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(" "," ")}static#f(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof IT){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:u,rotation:d,id:h,popupRef:f},textContent:m,textPosition:g,parent:{page:{pageNumber:b}}}=e;if(!m||m.length===0)return null;i=e={annotationType:Te.FREETEXT,color:Array.from(l),fontSize:a,value:m.join(`
`),position:g,pageIndex:b-1,rect:u.slice(0),rotation:d,id:h,deleted:!1,popupRef:f}}const s=await super.deserialize(e,t,r);return s.#s=e.fontSize,s.#e=ye.makeHexColor(...e.color),s.#t=Ct.#f(e.value),s.annotationElementId=e.id||null,s._initialData=i,s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Ct._internalPadding*this.parentScale,r=this.getRect(t,t),i=Ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:Te.FREETEXT,color:i,fontSize:this.#s,value:this.#d(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#a(s)?null:(s.id=this.annotationElementId,s)}#a(e){const{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((a,l)=>a!==i[l])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const s of this.#t.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),t.append(a)}const i=Ct._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class he{static PRECISION=1e-4;toSVGPath(){Ge("Abstract method `toSVGPath` must be implemented.")}get box(){Ge("Abstract getter `box` must be implemented.")}serialize(e,t){Ge("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,s,a){a||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)a[l]=t+e[l]*i,a[l+1]=r+e[l+1]*s;return a}static _rescaleAndSwap(e,t,r,i,s,a){a||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)a[l]=t+e[l+1]*i,a[l+1]=r+e[l]*s;return a}static _translate(e,t,r,i){i||=new Float32Array(e.length);for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,s){switch(s){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,s,a){return[(e+5*r)/6,(t+5*i)/6,(5*r+s)/6,(5*i+a)/6,(r+s)/2,(i+a)/2]}}class ms{#e;#t=[];#n;#r;#s=[];#i=new Float32Array(18);#l;#o;#u;#c;#h;#d;#f=[];static#a=8;static#p=2;static#g=ms.#a+ms.#p;constructor({x:e,y:t},r,i,s,a,l=0){this.#e=r,this.#d=s*i,this.#r=a,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=l,this.#c=ms.#a*i,this.#u=ms.#g*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#m(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[r,i,s,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/s,(this.#o+(e[1]-t[1])/2-i)/a,(this.#l+(t[0]-e[0])/2-r)/s,(this.#o+(t[1]-e[1])/2-i)/a]}add({x:e,y:t}){this.#l=e,this.#o=t;const[r,i,s,a]=this.#e;let[l,u,d,h]=this.#i.subarray(8,12);const f=e-d,m=t-h,g=Math.hypot(f,m);if(g<this.#u)return!1;const b=g-this.#c,x=b/g,A=x*f,E=x*m;let C=l,P=u;l=d,u=h,d+=A,h+=E,this.#f?.push(e,t);const T=-E/b,N=A/b,O=T*this.#d,j=N*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([d+O,h+j],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([d-O,h-j],16),isNaN(this.#i[6])?(this.#s.length===0&&(this.#i.set([l+O,u+j],2),this.#s.push(NaN,NaN,NaN,NaN,(l+O-r)/s,(u+j-i)/a),this.#i.set([l-O,u-j],14),this.#t.push(NaN,NaN,NaN,NaN,(l-O-r)/s,(u-j-i)/a)),this.#i.set([C,P,l,u,d,h],6),!this.isEmpty()):(this.#i.set([C,P,l,u,d,h],6),Math.abs(Math.atan2(P-u,C-l)-Math.atan2(E,A))<Math.PI/2?([l,u,d,h]=this.#i.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((l+d)/2-r)/s,((u+h)/2-i)/a),[l,u,C,P]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+l)/2-r)/s,((P+u)/2-i)/a),!0):([C,P,l,u,d,h]=this.#i.subarray(0,6),this.#s.push(((C+5*l)/6-r)/s,((P+5*u)/6-i)/a,((5*l+d)/6-r)/s,((5*u+h)/6-i)/a,((l+d)/2-r)/s,((u+h)/2-i)/a),[d,h,l,u,C,P]=this.#i.subarray(12,18),this.#t.push(((C+5*l)/6-r)/s,((P+5*u)/6-i)/a,((5*l+d)/6-r)/s,((5*u+h)/6-i)/a,((l+d)/2-r)/s,((u+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(r),r.join(" ")}#v(){const[e,t,r,i]=this.#e,[s,a,l,u]=this.#m();return`M${(this.#i[2]-e)/r} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/r} ${(this.#i[5]-t)/i} L${s} ${a} L${l} ${u} L${(this.#i[16]-e)/r} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/r} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,r,i,s]=this.#e,a=this.#i.subarray(4,6),l=this.#i.subarray(16,18),[u,d,h,f]=this.#m();e.push(`L${(a[0]-t)/i} ${(a[1]-r)/s} L${u} ${d} L${h} ${f} L${(l[0]-t)/i} ${(l[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,a){return new FT(e,t,r,i,s,a)}getOutlines(){const e=this.#s,t=this.#t,r=this.#i,[i,s,a,l]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let f=0,m=u.length-2;f<m;f+=2)u[f]=(this.#f[f]-i)/a,u[f+1]=(this.#f[f+1]-s)/l;if(u[u.length-2]=(this.#l-i)/a,u[u.length-1]=(this.#o-s)/l,isNaN(r[6])&&!this.isEmpty())return this.#w(u);const d=new Float32Array(this.#s.length+24+this.#t.length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){d[f]=d[f+1]=NaN;continue}d[f]=e[f],d[f+1]=e[f+1]}h=this.#E(d,h);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[f+m],d[h+1]=t[f+m+1],h+=2}return this.#S(d,h),this.newFreeDrawOutline(d,u,this.#e,this.#h,this.#n,this.#r)}#w(e){const t=this.#i,[r,i,s,a]=this.#e,[l,u,d,h]=this.#m(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(f,e,this.#e,this.#h,this.#n,this.#r)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#E(e,t){const r=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[s,a,l,u]=this.#e,[d,h,f,m]=this.#m();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-a)/u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-a)/u],t),t+=24}}class FT extends he{#e;#t=new Float32Array(4);#n;#r;#s;#i;#l;constructor(e,t,r,i,s,a){super(),this.#l=e,this.#s=t,this.#e=r,this.#i=i,this.#n=s,this.#r=a,this.lastPoint=[NaN,NaN],this.#o(a);const[l,u,d,h]=this.#t;for(let f=0,m=e.length;f<m;f+=2)e[f]=(e[f]-l)/d,e[f+1]=(e[f+1]-u)/h;for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-l)/d,t[f+1]=(t[f+1]-u)/h}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){const a=r-e,l=i-t;let u,d;switch(s){case 0:u=he._rescale(this.#l,e,i,a,-l),d=he._rescale(this.#s,e,i,a,-l);break;case 90:u=he._rescaleAndSwap(this.#l,e,t,a,l),d=he._rescaleAndSwap(this.#s,e,t,a,l);break;case 180:u=he._rescale(this.#l,r,t,-a,l),d=he._rescale(this.#s,r,t,-a,l);break;case 270:u=he._rescaleAndSwap(this.#l,r,i,-a,-l),d=he._rescaleAndSwap(this.#s,r,i,-a,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}#o(e){const t=this.#l;let r=t[4],i=t[5],s=r,a=i,l=r,u=i,d=r,h=i;const f=e?Math.max:Math.min;for(let g=6,b=t.length;g<b;g+=6){if(isNaN(t[g]))s=Math.min(s,t[g+4]),a=Math.min(a,t[g+5]),l=Math.max(l,t[g+4]),u=Math.max(u,t[g+5]),h<t[g+5]?(d=t[g+4],h=t[g+5]):h===t[g+5]&&(d=f(d,t[g+4]));else{const x=ye.bezierBoundingBox(r,i,...t.slice(g,g+6));s=Math.min(s,x[0]),a=Math.min(a,x[1]),l=Math.max(l,x[2]),u=Math.max(u,x[3]),h<x[3]?(d=x[2],h=x[3]):h===x[3]&&(d=f(d,x[2]))}r=t[g+4],i=t[g+5]}const m=this.#t;m[0]=s-this.#n,m[1]=a-this.#n,m[2]=l-s+2*this.#n,m[3]=u-a+2*this.#n,this.lastPoint=[d,h]}get box(){return this.#t}newOutliner(e,t,r,i,s,a=0){return new ms(e,t,r,i,s,a)}getNewOutline(e,t){const[r,i,s,a]=this.#t,[l,u,d,h]=this.#e,f=s*d,m=a*h,g=r*d+l,b=i*h+u,x=this.newOutliner({x:this.#s[0]*f+g,y:this.#s[1]*m+b},this.#e,this.#i,e,this.#r,t??this.#n);for(let A=2;A<this.#s.length;A+=2)x.add({x:this.#s[A]*f+g,y:this.#s[A+1]*m+b});return x.getOutlines()}}class Jg{#e;#t;#n=[];#r=[];constructor(e,t=0,r=0,i=!0){let s=1/0,a=-1/0,l=1/0,u=-1/0;const d=10**-4;for(const{x:A,y:E,width:C,height:P}of e){const T=Math.floor((A-t)/d)*d,N=Math.ceil((A+C+t)/d)*d,O=Math.floor((E-t)/d)*d,j=Math.ceil((E+P+t)/d)*d,B=[T,O,j,!0],F=[N,O,j,!1];this.#n.push(B,F),s=Math.min(s,T),a=Math.max(a,N),l=Math.min(l,O),u=Math.max(u,j)}const h=a-s+2*r,f=u-l+2*r,m=s-r,g=l-r,b=this.#n.at(i?-1:-2),x=[b[0],b[2]];for(const A of this.#n){const[E,C,P]=A;A[0]=(E-m)/h,A[1]=(C-g)/f,A[2]=(P-g)/f}this.#e=new Float32Array([m,g,h,f]),this.#t=x}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#u(t)),this.#l(t)):(this.#o(t),e.push(...this.#u(t)));return this.#s(e)}#s(e){const t=[],r=new Set;for(const a of e){const[l,u,d]=a;t.push([l,u,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const u=t[a][2],d=t[a+1][2];u.push(d),d.push(u),r.add(u),r.add(d)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[l,u,d,h,f]=a;r.delete(a);let m=l,g=u;for(s=[l,d],i.push(s);;){let b;if(r.has(h))b=h;else if(r.has(f))b=f;else break;r.delete(b),[l,u,d,h,f]=b,m!==l&&(s.push(m,g,l,g===u?u:d),m=l),g=g===u?d:u}s.push(m,g)}return new J7(i,this.#e,this.#t)}#i(e){const t=this.#r;let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,a=t[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1}#l([,e,t]){const r=this.#i(e);this.#r.splice(r,0,[e,t])}#o([,e,t]){const r=this.#i(e);for(let i=r;i<this.#r.length;i++){const[s,a]=this.#r[i];if(s!==e)break;if(s===e&&a===t){this.#r.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=this.#r[i];if(s!==e)break;if(s===e&&a===t){this.#r.splice(i,1);return}}}#u(e){const[t,r,i]=e,s=[[t,r,i]],a=this.#i(i);for(let l=0;l<a;l++){const[u,d]=this.#r[l];for(let h=0,f=s.length;h<f;h++){const[,m,g]=s[h];if(!(d<=m||g<=u)){if(m>=u){if(g>d)s[h][1]=d;else{if(f===1)return[];s.splice(h,1),h--,f--}continue}s[h][2]=u,g>d&&s.push([t,d,g])}}}return s}}class J7 extends he{#e;#t;constructor(e,t,r){super(),this.#t=e,this.#e=t,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){const a=t[s],l=t[s+1];a===r?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${a}`),r=a)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){const a=[],l=r-e,u=i-t;for(const d of this.#t){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=e+d[f]*l,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class ev extends ms{newFreeDrawOutline(e,t,r,i,s,a){return new eV(e,t,r,i,s,a)}}class eV extends FT{newOutliner(e,t,r,i,s,a=0){return new ev(e,t,r,i,s,a)}}class Zn{#e=null;#t=null;#n;#r=null;#s=!1;#i=!1;#l=null;#o;#u=null;#c=null;#h;static#d=null;static get _keyboardManager(){return Me(this,"_keyboardManager",new zl([[["Escape","mac+Escape"],Zn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Zn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Zn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Zn.prototype._moveToPrevious],[["Home","mac+Home"],Zn.prototype._moveToBeginning],[["End","mac+End"],Zn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#h=Re.HIGHLIGHT_COLOR,this.#l=e):(this.#i=!0,this.#h=Re.HIGHLIGHT_DEFAULT_COLOR),this.#c=e?._uiManager||t,this.#o=this.#c._eventBus,this.#n=e?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Zn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#c._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#r=this.#f();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#f(){const e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",yr,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of this.#c.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",Zn.#d[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#a.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#a(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}const t=e.target.getAttribute("data-color");t&&this.#a(t,e)}_moveToNext(e){if(!this.#v){this.#g(e);return}if(e.target===this.#e){this.#r.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#r?.firstChild||e.target===this.#e){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#v){this.#g(e);return}this.#r.firstChild?.focus()}_moveToEnd(e){if(!this.#v){this.#g(e);return}this.#r.lastChild?.focus()}#p(e){Zn._keyboardManager.exec(this,e)}#g(e){if(this.#v){this.hideDropdown();return}if(this.#s=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#r){this.#r.classList.remove("hidden");return}const t=this.#r=this.#f();this.#e.append(t)}#m(e){this.#r?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#v(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#v){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#r)return;const t=this.#c.highlightColors.values();for(const r of this.#r.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}}class ft extends Ce{#e=null;#t=0;#n;#r=null;#s=null;#i=null;#l=null;#o=0;#u=null;#c=null;#h=null;#d=!1;#f=null;#a;#p=null;#g="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Te.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ft.prototype;return Me(this,"_keyboardManager",new zl([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ft._defaultColor,this.#m=e.thickness||ft._defaultThickness,this.#a=e.opacity||ft._defaultOpacity,this.#n=e.boxes||null,this.#v=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#d=!0,this.#y(e),this.#T()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Jg(this.#n,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const t=new Jg(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{lastPoint:r}=this.#i;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#c=e;const i=1.5;if(this.#i=e.getNewOutline(this.#m/2+i,.0025),t>=0)this.#h=t,this.#r=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ft.#A(this.#c.box,(h-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ft.#A(this.#i.box,h),path:{d:this.#i.toSVGPath()}})}const[s,a,l,u]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=l,this.height=u;break;case 90:{const[h,f]=this.parentDimensions;this.x=a,this.y=1-s,this.width=l*f/h,this.height=u*h/f;break}case 180:this.x=1-s,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[h,f]=this.parentDimensions;this.x=1-a,this.y=s,this.width=l*f/h,this.height=u*h/f;break}}const{lastPoint:d}=this.#i;this.#f=[(d[0]-s)/l,(d[1]-a)/u]}static initialize(e,t){Ce.initialize(e,t),ft._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Re.HIGHLIGHT_DEFAULT_COLOR:ft._defaultColor=t;break;case Re.HIGHLIGHT_THICKNESS:ft._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case Re.HIGHLIGHT_COLOR:this.#w(t);break;case Re.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[Re.HIGHLIGHT_DEFAULT_COLOR,ft._defaultColor],[Re.HIGHLIGHT_THICKNESS,ft._defaultThickness]]}get propertiesToUpdate(){return[[Re.HIGHLIGHT_COLOR,this.color||ft._defaultColor],[Re.HIGHLIGHT_THICKNESS,this.#m||ft._defaultThickness],[Re.HIGHLIGHT_FREE,this.#d]]}#w(e){const t=(s,a)=>{this.color=s,this.#a=a,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:s,"fill-opacity":a}}),this.#s?.updateColor(s)},r=this.color,i=this.#a;this.addCommands({cmd:t.bind(this,e,ft._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#m,r=i=>{this.#m=i,this.#E(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#s=new Zn({editor:this}),e.addColorPicker(this.#s)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#O())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#P(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#P():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#d)return;this.#y({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#P(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#r}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#a},rootClass:{highlight:!0,free:this.#d},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#r))}static#A([e,t,r,i],s){switch(s){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){const{drawLayer:t}=this.parent;let r;this.#d?(e=(e-this.rotation+360)%360,r=ft.#A(this.#c.box,e)):r=ft.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:ft.#A(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#r;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),vd(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#k(e){ft._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#C(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#O(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,a=new Float32Array(s.length*8);let l=0;for(const{x:u,y:d,width:h,height:f}of s){const m=u*e+r,g=(1-d)*t+i;a[l]=a[l+4]=m,a[l+1]=a[l+3]=g,a[l+2]=a[l+6]=m+h*e,a[l+5]=a[l+7]=g-f*t,l+=8}return a}#D(e){return this.#c.serialize(e,this.#O())}static startHighlighting(e,t,{target:r,x:i,y:s}){const{x:a,y:l,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,f=e.combinedSignal(h),m=g=>{h.abort(),this.#x(e,g)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Rn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",yr,{signal:f}),r.addEventListener("pointermove",this.#_.bind(this,e),{signal:f}),this._freeHighlight=new ev({x:i,y:s},[a,l,u,d],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#_(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#x(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof DT){const{data:{quadPoints:b,rect:x,rotation:A,id:E,color:C,opacity:P,popupRef:T},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:Te.HIGHLIGHT,color:Array.from(C),opacity:P,quadPoints:b,boxes:null,pageIndex:N-1,rect:x.slice(0),rotation:A,id:E,deleted:!1,popupRef:T}}else if(e instanceof m0){const{data:{inkLists:b,rect:x,rotation:A,id:E,color:C,borderStyle:{rawWidth:P},popupRef:T},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:Te.HIGHLIGHT,color:Array.from(C),thickness:P,inkLists:b,boxes:null,pageIndex:N-1,rect:x.slice(0),rotation:A,id:E,deleted:!1,popupRef:T}}const{color:s,quadPoints:a,inkLists:l,opacity:u}=e,d=await super.deserialize(e,t,r);d.color=ye.makeHexColor(...s),d.#a=u||1,l&&(d.#m=e.thickness),d.annotationElementId=e.id||null,d._initialData=i;const[h,f]=d.pageDimensions,[m,g]=d.pageTranslation;if(a){const b=d.#n=[];for(let x=0;x<a.length;x+=8)b.push({x:(a[x]-m)/h,y:1-(a[x+1]-g)/f,width:(a[x+2]-a[x])/h,height:(a[x+1]-a[x+5])/f});d.#b(),d.#T(),d.rotate(d.rotation)}else if(l){d.#d=!0;const b=l[0],x={x:b[0]-m,y:f-(b[1]-g)},A=new ev(x,[0,0,h,f],1,d.#m/2,!0,.001);for(let P=0,T=b.length;P<T;P+=2)x.x=b[P]-m,x.y=f-(b[P+1]-g),A.add(x);const{id:E,clipPathId:C}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);d.#y({highlightOutlines:A.getOutlines(),highlightId:E,clipPathId:C}),d.#T()}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=Ce._colorManager.convert(this.color),i={annotationType:Te.HIGHLIGHT,color:r,opacity:this.#a,thickness:this.#m,quadPoints:this.#I(),outlines:this.#D(t),pageIndex:this.pageIndex,rect:t,rotation:this.#O(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#M(i)?null:(i.id=this.annotationElementId,i)}#M(e){const{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class tV{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Ge("Not implemented")}}class Ee extends Ce{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#s=null;static#i=NaN;static#l=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:t,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#g(e.box)}#h(e,t){const{id:r}=t.drawLayer.draw(Ee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){const r=new Set(Object.keys(e));for(const[i,s]of Object.entries(t))r.has(i)?Object.assign(e[i],s):e[i]=s;return e}static getDefaultDrawingOptions(e){Ge("Not implemented")}static get typesMap(){Ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,t),this._currentParent&&(Ee.#n.updateProperty(r,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)e.push([r,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[r,i]of this.constructor.typesMap)e.push([r,t[i]]);return e}_updateProperty(e,t,r){const i=this._drawingOptions,s=i[t],a=l=>{i.updateProperty(t,l);const u=this.#e.updateProperty(t,l);u&&this.#g(u),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ee._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ee._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m(e,t)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ee._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#g(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#a([e,t,r,i]){const{parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[t,1-e,r*(a/s),i*(s/a)];case 180:return[1-e,1-t,r,i];case 270:return[1-t,e,r*(a/s),i*(s/a)];default:return[e,t,r,i]}}#p(){const{x:e,y:t,width:r,height:i,parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[1-t,e,r*(s/a),i*(a/s)];case 180:return[1-e,1-t,r,i];case 270:return[t,1-e,r*(s/a),i*(a/s)];default:return[e,t,r,i]}}#g(e){if([this.x,this.y,this.width,this.height]=this.#a(e),this.div){this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}this._onResized()}#m(){const{x:e,y:t,width:r,height:i,rotation:s,parentRotation:a,parentDimensions:[l,u]}=this;switch((s*4+a)/90){case 1:return[1-t-i,e,i,r];case 2:return[1-e-r,1-t-i,r,i];case 3:return[t,1-e-r,i,r];case 4:return[e,t-r*(l/u),i*(u/l),r*(l/u)];case 5:return[1-t,e,r*(l/u),i*(u/l)];case 6:return[1-e-i*(u/l),1-t,i*(u/l),r*(l/u)];case 7:return[t-r*(l/u),1-e-i*(u/l),r*(l/u),i*(u/l)];case 8:return[e-r,t-i,r,i];case 9:return[1-t,e-r,i,r];case 10:return[1-e,1-t,r,i];case 11:return[t-i,1-e,i,r];case 12:return[e-i*(u/l),t,i*(u/l),r*(l/u)];case 13:return[1-t-r*(l/u),e-i*(u/l),r*(l/u),i*(u/l)];case 14:return[1-e,1-t-r*(l/u),i*(u/l),r*(l/u)];case 15:return[t,1-e,r*(l/u),i*(u/l)];default:return[e,t,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ee._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#g(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,r,i,s){Ge("Not implemented")}static startDrawing(e,t,r,i){const{target:s,offsetX:a,offsetY:l,pointerId:u,pointerType:d}=i;if(Ee.#l&&Ee.#l!==d)return;const{viewport:{rotation:h}}=e,{width:f,height:m}=s.getBoundingClientRect(),g=Ee.#r=new AbortController,b=e.combinedSignal(g);if(Ee.#i||=u,Ee.#l??=d,window.addEventListener("pointerup",x=>{Ee.#i===x.pointerId?this._endDraw(x):Ee.#o?.delete(x.pointerId)},{signal:b}),window.addEventListener("pointercancel",x=>{Ee.#i===x.pointerId?this._currentParent.endDrawingSession():Ee.#o?.delete(x.pointerId)},{signal:b}),window.addEventListener("pointerdown",x=>{Ee.#l===x.pointerType&&((Ee.#o||=new Set).add(x.pointerId),Ee.#n.isCancellable()&&(Ee.#n.removeLastElement(),Ee.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",yr,{signal:b}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),s.addEventListener("touchmove",x=>{x.timeStamp===Ee.#u&&Rn(x)},{signal:b}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ee.#n){e.drawLayer.updateProperties(this._currentDrawId,Ee.#n.startNew(a,l,f,m,h));return}t.updateUIForDefaultProperties(this),Ee.#n=this.createDrawerInstance(a,l,f,m,h),Ee.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ee.#s.toSVGProperties(),Ee.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ee.#u=-1,!Ee.#n)return;const{offsetX:t,offsetY:r,pointerId:i}=e;if(Ee.#i===i){if(Ee.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ee.#n.add(t,r)),Ee.#u=e.timeStamp,Rn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ee.#n=null,Ee.#s=null,Ee.#l=null,Ee.#u=NaN),Ee.#r&&(Ee.#r.abort(),Ee.#r=null,Ee.#i=NaN,Ee.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,Ee.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Ee.#n,i=this._currentDrawId,s=r.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,r.setLastElement(s))},undo:()=>{t.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Re.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Re.DRAW_STEP),!Ee.#n.isEmpty()){const{pageDimensions:[r,i],scale:s}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ee.#n.getOutlines(r*s,i*s,s,this._INNER_MARGIN),drawingOptions:Ee.#s,mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,r,i,s,a){Ge("Not implemented")}static async deserialize(e,t,r){const{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:l}}=t.viewport,u=this.deserializeDraw(a,l,i,s,this._INNER_MARGIN,e),d=await super.deserialize(e,t,r);return d.createDrawingOptions(e),d.#c({drawOutlines:u}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[t,r]=this.pageTranslation,[i,s]=this.pageDimensions;return this.#e.serialize([t,r,i,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class nV{#e=new Float64Array(6);#t;#n;#r;#s;#i;#l="";#o=0;#u=new hh;#c;#h;constructor(e,t,r,i,s,a){this.#c=r,this.#h=i,this.#r=s,this.#s=a,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#n=[{line:l,points:this.#i}],this.#e.set(l,0)}updateProperty(e,t){e==="stroke-width"&&(this.#s=t)}#d(e,t){return he._normalizePoint(e,t,this.#c,this.#h,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[r,i,s,a]=this.#e.subarray(2,6),l=e-s,u=t-a;return Math.hypot(this.#c*l,this.#h*u)<=2?null:(this.#i.push(e,t),isNaN(r)?(this.#e.set([s,a,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,s,a,e,t],0),this.#t.push(...he.createBezierPoints(r,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){this.#c=r,this.#h=i,this.#r=s,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const l=this.#n.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#n.push({line:a,points:this.#i}),this.#e.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#l="";for(let e=0,t=this.#n.length;e<t;e++){const{line:r,points:i}=this.#n[e];this.#t=r,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=he.svgRound(this.#t[4]),t=he.svgRound(this.#t[5]);if(this.#i.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#i.length<=6){const i=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=he.svgRound(this.#t[10]),s=he.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${i} ${s}`,this.#o=12,this.#l}const r=[];this.#o===0&&(r.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,s=this.#t.length;i<s;i+=6){const[a,l,u,d,h,f]=this.#t.slice(i,i+6).map(he.svgRound);r.push(`C${a} ${l} ${u} ${d} ${h} ${f}`)}return this.#l+=r.join(" "),this.#o=this.#t.length,this.#l}getOutlines(e,t,r,i){const s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#u.build(this.#n,e,t,r,this.#r,this.#s,i),this.#e=null,this.#t=null,this.#n=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class hh extends he{#e;#t=0;#n;#r;#s;#i;#l;#o;#u;build(e,t,r,i,s,a,l){this.#s=t,this.#i=r,this.#l=i,this.#o=s,this.#u=a,this.#n=l??0,this.#r=e,this.#d()}setLastElement(e){return this.#r.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#r){if(e.push(`M${he.svgRound(t[4])} ${he.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${he.svgRound(t[10])} ${he.svgRound(t[11])}`);continue}for(let r=6,i=t.length;r<i;r+=6){const[s,a,l,u,d,h]=t.subarray(r,r+6).map(he.svgRound);e.push(`C${s} ${a} ${l} ${u} ${d} ${h}`)}}return e.join("")}serialize([e,t,r,i],s){const a=[],l=[],[u,d,h,f]=this.#h();let m,g,b,x,A,E,C,P,T;switch(this.#o){case 0:T=he._rescale,m=e,g=t+i,b=r,x=-i,A=e+u*r,E=t+(1-d-f)*i,C=e+(u+h)*r,P=t+(1-d)*i;break;case 90:T=he._rescaleAndSwap,m=e,g=t,b=r,x=i,A=e+d*r,E=t+u*i,C=e+(d+f)*r,P=t+(u+h)*i;break;case 180:T=he._rescale,m=e+r,g=t,b=-r,x=i,A=e+(1-u-h)*r,E=t+d*i,C=e+(1-u)*r,P=t+(d+f)*i;break;case 270:T=he._rescaleAndSwap,m=e+r,g=t+i,b=-r,x=-i,A=e+(1-d-f)*r,E=t+(1-u-h)*i,C=e+(1-d)*r,P=t+(1-u)*i;break}for(const{line:N,points:O}of this.#r)a.push(T(N,m,g,b,x,s?new Array(N.length):null)),l.push(T(O,m,g,b,x,s?new Array(O.length):null));return{lines:a,points:l,rect:[A,E,C,P]}}static deserialize(e,t,r,i,s,{paths:{lines:a,points:l},rotation:u,thickness:d}){const h=[];let f,m,g,b,x;switch(u){case 0:x=he._rescale,f=-e/r,m=t/i+1,g=1/r,b=-1/i;break;case 90:x=he._rescaleAndSwap,f=-t/i,m=-e/r,g=1/i,b=1/r;break;case 180:x=he._rescale,f=e/r+1,m=-t/i,g=-1/r,b=1/i;break;case 270:x=he._rescaleAndSwap,f=t/i+1,m=e/r+1,g=-1/i,b=-1/r;break}if(!a){a=[];for(const E of l){const C=E.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const P=new Float32Array(3*(C-2));a.push(P);let[T,N,O,j]=E.subarray(0,4);P.set([NaN,NaN,NaN,NaN,T,N],0);for(let B=4;B<C;B+=2){const F=E[B],Y=E[B+1];P.set(he.createBezierPoints(T,N,O,j,F,Y),(B-2)*3),[T,N,O,j]=[O,j,F,Y]}}}for(let E=0,C=a.length;E<C;E++)h.push({line:x(a[E].map(P=>P??NaN),f,m,g,b),points:x(l[E].map(P=>P??NaN),f,m,g,b)});const A=new hh;return A.build(h,r,i,1,u,d,s),A}#c(e=this.#u){const t=this.#n+e/2*this.#l;return this.#o%180===0?[t/this.#s,t/this.#i]:[t/this.#i,t/this.#s]}#h(){const[e,t,r,i]=this.#e,[s,a]=this.#c(0);return[e+s,t+a,r-2*s,i-2*a]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#r){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6){const[d,h]=i.subarray(l,l+2);e[0]=Math.min(e[0],d),e[1]=Math.min(e[1],h),e[2]=Math.max(e[2],d),e[3]=Math.max(e[3],h)}continue}let s=i[4],a=i[5];for(let l=6,u=i.length;l<u;l+=6){const[d,h,f,m,g,b]=i.subarray(l,l+6);ye.bezierBoundingBox(s,a,d,h,f,m,g,b,e),s=g,a=b}}const[t,r]=this.#c();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,r]=this.#c();this.#u=e;const[i,s]=this.#c(),[a,l]=[i-t,s-r],u=this.#e;return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u}updateParentDimensions([e,t],r){const[i,s]=this.#c();this.#s=e,this.#i=t,this.#l=r;const[a,l]=this.#c(),u=a-i,d=l-s,h=this.#e;return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(he.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,i=0,s=0,a=0,l=0,u=0;switch(this.#t){case 90:i=t/e,s=-e/t,l=e;break;case 180:r=-1,a=-1,l=e,u=t;break;case 270:i=-t/e,s=e/t,u=t;break;default:return""}return`matrix(${r} ${i} ${s} ${a} ${he.svgRound(l)} ${he.svgRound(u)})`}getPathResizingSVGProperties([e,t,r,i]){const[s,a]=this.#c(),[l,u,d,h]=this.#e;if(Math.abs(d-s)<=he.PRECISION||Math.abs(h-a)<=he.PRECISION){const x=e+r/2-(l+d/2),A=t+i/2-(u+h/2);return{path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:`${this.rotationTransform} translate(${x} ${A})`}}}const f=(r-2*s)/(d-2*s),m=(i-2*a)/(h-2*a),g=d/r,b=h/i;return{path:{"transform-origin":`${he.svgRound(l)} ${he.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${b}) translate(${he.svgRound(s)} ${he.svgRound(a)}) scale(${f} ${m}) translate(${he.svgRound(-s)} ${he.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,r,i]){const[s,a]=this.#c(),l=this.#e,[u,d,h,f]=l;if(l[0]=e,l[1]=t,l[2]=r,l[3]=i,Math.abs(h-s)<=he.PRECISION||Math.abs(f-a)<=he.PRECISION){const A=e+r/2-(u+h/2),E=t+i/2-(d+f/2);for(const{line:C,points:P}of this.#r)he._translate(C,A,E,C),he._translate(P,A,E,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*s)/(h-2*s),g=(i-2*a)/(f-2*a),b=-m*(u+s)+e+s,x=-g*(d+a)+t+a;if(m!==1||g!==1||b!==0||x!==0)for(const{line:A,points:E}of this.#r)he._rescale(A,b,x,m,g,A),he._rescale(E,b,x,m,g,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[i,s]=r,a=this.#e,l=e-a[0],u=t-a[1];if(this.#s===i&&this.#i===s)for(const{line:d,points:h}of this.#r)he._translate(d,l,u,d),he._translate(h,l,u,h);else{const d=this.#s/i,h=this.#i/s;this.#s=i,this.#i=s;for(const{line:f,points:m}of this.#r)he._rescale(f,l,u,d,h,f),he._rescale(m,l,u,d,h,m);a[2]*=d,a[3]*=h}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e[0])} ${he.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class g0 extends tV{#e;constructor(e){super(),this.#e=e,super.updateProperties({fill:"none",stroke:Ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#e.realScale),super.updateSVGProperty(e,t)}clone(){const e=new g0(this.#e);return e.updateAll(this),e}}class v0 extends Ee{static _type="ink";static _editorType=Te.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(e,t){Ce.initialize(e,t),this._defaultDrawingOptions=new g0(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Me(this,"typesMap",new Map([[Re.INK_THICKNESS,"stroke-width"],[Re.INK_COLOR,"stroke"],[Re.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,s){return new nV(e,t,r,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,s,a){return hh.deserialize(e,t,r,i,s,a)}static async deserialize(e,t,r){let i=null;if(e instanceof m0){const{data:{inkLists:a,rect:l,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:g},parent:{page:{pageNumber:b}}}=e;i=e={annotationType:Te.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:a},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:u,id:d,deleted:!1,popupRef:g}}const s=await super.deserialize(e,t,r);return s.annotationElementId=e.id||null,s._initialData=i,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=v0.getDefaultDrawingOptions({stroke:ye.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:Te.INK,color:Ce._colorManager.convert(s),opacity:a,thickness:l,paths:{lines:t,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:r,opacity:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==t[l])||e.thickness!==r||e.opacity!==i||e.pageIndex!==s}renderAnnotationElement(e){const{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class y0 extends Ce{#e=null;#t=null;#n=null;#r=null;#s=null;#i="";#l=null;#o=null;#u=!1;#c=!1;static _type="stamp";static _editorType=Te.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#r=e.bitmapUrl,this.#s=e.bitmapFile}static initialize(e,t){Ce.initialize(e,t)}static get supportedTypes(){return Me(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Me(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Te.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#h(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#u=e.isSvg),e.file&&(this.#i=e.file.name),this.#a()}#d(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:s,height:a,channels:i.length/(s*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#h(r,!0)).finally(()=>this.#d());return}if(this.#r){const r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#h(i)).finally(()=>this.#d());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#h(i)).finally(()=>this.#d());return}const e=document.createElement("input");e.type="file",e.accept=y0.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#d()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#o&&(clearTimeout(this.#o),this.#o=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#a():this.#f(),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#o!==null&&clearTimeout(this.#o);const e=200;this.#o=setTimeout(()=>{this.#o=null,this.#g()},e)}#a(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,s]=this.pageDimensions,a=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>a*i||r>a*s){const h=Math.min(a*i/t,a*s/r);t*=h,r*=h}const[l,u]=this.parentDimensions;this.setDims(t*l/i,r*u/s),this._uiManager.enableWaiting(!1);const d=this.#l=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=t/i,this.height=r/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&d.setAttribute("aria-label",this.#i)}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:s}=this.#e,a=new Yg;let l=this.#e,u=i,d=s,h=null;if(t){if(i>t||s>t){const O=Math.min(t/i,t/s);u=Math.floor(i*O),d=Math.floor(s*O)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*a.sx),g=h.height=Math.ceil(d*a.sy);this.#u||(l=this.#p(m,g));const b=h.getContext("2d");b.filter=this._uiManager.hcmFilter;let x="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",A="#42414d");const E=15,C=E*a.sx,P=E*a.sy,T=new OffscreenCanvas(C*2,P*2),N=T.getContext("2d");N.fillStyle=x,N.fillRect(0,0,C*2,P*2),N.fillStyle=A,N.fillRect(0,0,C,P),N.fillRect(C,P,C,P),b.fillStyle=b.createPattern(T,"repeat"),b.fillRect(0,0,m,g),b.drawImage(l,0,0,l.width,l.height,0,0,m,g)}let f=null;if(r){let m,g;if(a.symmetric&&l.width<e&&l.height<e)m=l.width,g=l.height;else if(l=this.#e,i>e||s>e){const A=Math.min(e/i,e/s);m=Math.floor(i*A),g=Math.floor(s*A),this.#u||(l=this.#p(m,g))}const x=new OffscreenCanvas(m,g).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,m,g),f={width:m,height:g,data:x.getImageData(0,0,m,g).data}}return{canvas:h,width:u,height:d,imageData:f}}#p(e,t){const{width:r,height:i}=this.#e;let s=r,a=i,l=this.#e;for(;s>2*e||a>2*t;){const u=s,d=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(l,0,0,u,d,0,0,s,a),l=h.transferToImageBitmap()}return l}#g(){const[e,t]=this.parentDimensions,{width:r,height:i}=this,s=new Yg,a=Math.ceil(r*e*s.sx),l=Math.ceil(i*t*s.sy),u=this.#l;if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const d=this.#u?this.#e:this.#p(a,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)}getImageForAltText(){return this.#l}#m(e){if(e){if(this.#u){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#u){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Ra.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*Ra.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,r){let i=null;if(e instanceof LT){const{data:{rect:b,rotation:x,id:A,structParent:E,popupRef:C},container:P,parent:{page:{pageNumber:T}}}=e,N=P.querySelector("canvas"),O=r.imageManager.getFromCanvas(P.id,N);N.remove();const j=(await t._structTree.getAriaAttributes(`${i0}${A}`))?.get("aria-label")||"";i=e={annotationType:Te.STAMP,bitmapId:O.id,bitmap:O.bitmap,pageIndex:T-1,rect:b.slice(0),rotation:x,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:E,popupRef:C}}const s=await super.deserialize(e,t,r),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:f}=e;d&&r.imageManager.isValidId(d)?(s.#t=d,l&&(s.#e=l)):s.#r=u,s.#u=h;const[m,g]=s.pageDimensions;return s.width=(a[2]-a[0])/m,s.height=(a[3]-a[1])/g,s.annotationElementId=e.id||null,f&&(s.altTextData=f),s._initialData=i,s.#c=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Te.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#m(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=this.#v(r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const a=this.#u?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:r}),r.bitmap=this.#m(!1);else if(this.#u){const l=t.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#m(!1))}return r}#v(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===t,s=(e.accessibilityData?.alt||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class Ur{#e;#t=!1;#n=null;#r=null;#s=null;#i=new Map;#l=!1;#o=!1;#u=!1;#c=null;#h=null;#d=null;#f=null;#a;static _initialized=!1;static#p=new Map([Ct,v0,y0,ft].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:u,viewport:d,l10n:h}){const f=[...Ur.#p.values()];if(!Ur._initialized){Ur._initialized=!0;for(const m of f)m.initialize(h,e)}e.registerEditorTypes(f),this.#a=e,this.pageIndex=t,this.div=r,this.#e=s,this.#n=a,this.viewport=d,this.#d=u,this.drawLayer=l,this._structTree=i,this.#a.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===Te.NONE}updateToolbar(e){this.#a.updateToolbar(e)}updateMode(e=this.#a.getMode()){switch(this.#y(),e){case Te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Te.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of Ur.#p.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#a.setEditingState(e)}addCommands(e){this.#a.addCommands(e)}cleanUndoStack(e){this.#a.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#i.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#a.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n){this.#u=!1;return}const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#a.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#u=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of this.#i.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const s of i){const{id:a}=s.data;if(this.#a.isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=e.get(a),l&&(this.#a.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of Ur.#p.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#a.getActive()!==e&&this.#a.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#a.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#g.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#g(e){this.#a.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:r}=hn.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#a.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),ft.startHighlighting(this,this.#a.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;const e=this.#a.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#a.isDeletedAnnotationElement(t)&&this.#a.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#a.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#a.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#a.addDeletedAnnotationElement(e.annotationElementId),Ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#a.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#a.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#a.getId()}get#m(){return Ur.#p.get(this.#a.getMode())}combinedSignal(e){return this.#a.combinedSignal(e)}#v(e){const t=this.#m;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#a.updateToolbar(e),this.#a.updateMode(e);const{offsetX:r,offsetY:i}=this.#b(),s=this.getNextId(),a=this.#v({parent:this,id:s,x:r,y:i,uiManager:this.#a,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await Ur.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#a)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#a,isCentered:t,...r});return s&&this.add(s),s}#b(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+r),u=Math.min(window.innerHeight,t+i),d=(s+l)/2-e,h=(a+u)/2-t,[f,m]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#b(),!0)}setSelected(e){this.#a.setSelected(e)}toggleSelected(e){this.#a.toggleSelected(e)}unselect(e){this.#a.unselect(e)}pointerup(e){const{isMac:t}=hn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l&&(this.#l=!1,!(this.#m?.isDrawer&&this.#m.supportMultipleDrawings))){if(!this.#t){this.#t=!0;return}if(this.#a.getMode()===Te.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#a.getMode()===Te.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=hn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#m?.isDrawer){this.startDrawingSession(e);return}const r=this.#a.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus(),this.#c){this.#m.startDrawing(this,this.#a,!1,e);return}this.#a.setCurrentDrawingSession(this),this.#c=new AbortController;const t=this.#a.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#m.startDrawing(this,this.#a,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#a.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#m.endDrawing(e)):null}findNewParent(e,t,r){const i=this.#a.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#m.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#a.removeLayer(this)}#y(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Ns(this.div,e);for(const t of this.#a.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#a.commitOrRemove(),this.#y();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Ns(this.div,{rotation:r}),t!==r)for(const i of this.#i.values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#a.viewParameters.realScale}}class ln{#e=null;#t=0;#n=new Map;#r=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Me(this,"_svgFactory",new p0)}static#s(e,[t,r,i,s]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`}#i(){const e=ln._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const r=ln._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=ln._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}#o(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){const i=this.#t++,s=this.#i(),a=ln._svgFactory.createElement("defs");s.append(a);const l=ln._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,l);const d=r?this.#l(a,u):null,h=ln._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${u}`),this.updateProperties(s,e),this.#n.set(i,s),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,t){const r=this.#t++,i=this.#i(),s=ln._svgFactory.createElement("defs");i.append(s);const a=ln._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const f=ln._svgFactory.createElement("mask");s.append(f),u=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",u),f.setAttribute("maskUnits","objectBoundingBox");const m=ln._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=ln._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const d=ln._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),u&&d.setAttribute("mask",`url(#${u})`);const h=d.cloneNode();return i.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#n.set(r,i),r}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:i,rootClass:s,path:a}=t,l=typeof e=="number"?this.#n.get(e):e;if(l){if(r&&this.#o(l,r),i&&ln.#s(l,i),s){const{classList:u}=l;for(const[d,h]of Object.entries(s))u.toggle(d,h)}if(a){const d=l.firstChild.firstChild;this.#o(d,a)}}}updateParent(e,t){if(t===this)return;const r=this.#n.get(e);r&&(t.#e.append(r),this.#n.delete(e),t.#n.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#r.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Jg};ke.AbortException;ke.AnnotationEditorLayer;ke.AnnotationEditorParamsType;ke.AnnotationEditorType;ke.AnnotationEditorUIManager;ke.AnnotationLayer;ke.AnnotationMode;ke.ColorPicker;ke.DOMSVGFactory;ke.DrawLayer;ke.FeatureTest;var cE=ke.GlobalWorkerOptions;ke.ImageKind;ke.InvalidPDFException;ke.MissingPDFException;ke.OPS;ke.OutputScale;ke.PDFDataRangeTransport;ke.PDFDateString;ke.PDFWorker;ke.PasswordResponses;ke.PermissionFlag;ke.PixelsPerInch;ke.RenderingCancelledException;ke.TextLayer;ke.TouchManager;ke.UnexpectedResponseException;ke.Util;ke.VerbosityLevel;ke.XfaLayer;ke.build;ke.createValidAbsoluteUrl;ke.fetchData;var rV=ke.getDocument;ke.getFilenameFromUrl;ke.getPdfFilenameFromUrl;ke.getXfaPageViewport;ke.isDataScheme;ke.isPdfFile;ke.noContextMenu;ke.normalizeUnicode;ke.setLayerDimensions;ke.shadow;ke.stopEvent;var iV=ke.version;let Xm=!1;const sV=async()=>{if(!Xm)try{cE.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${iV}/pdf.worker.min.mjs`,Xm=!0}catch(n){console.warn("Failed to load PDF worker from CDN, trying local build:",n);try{cE.workerSrc="/node_modules/pdfjs-dist/build/pdf.worker.min.mjs",Xm=!0}catch(e){throw console.error("Failed to initialize PDF worker from local build:",e),new Error("Failed to initialize PDF processing worker from both CDN and local sources")}}};class aV{static async parsePDF(e){try{await sV();const t=await this.readFileAsArrayBuffer(e),r=new Uint8Array(t),s=await rV({data:r,verbosity:0,stopAtErrors:!1,disableFontFace:!0}).promise;let a="";for(let u=1;u<=s.numPages;u++)try{const f=(await(await s.getPage(u)).getTextContent()).items.map(m=>m.str||"").join(" ").replace(/\s+/g," ").trim();f&&(a+=f+`

`)}catch(d){console.warn(`Error processing page ${u}:`,d)}return{text:this.cleanExtractedText(a),pageCount:s.numPages,fileName:e.name}}catch(t){return console.error("Error parsing PDF:",t),{text:"",pageCount:0,fileName:e.name,error:t.message||"Unknown error occurred while parsing PDF"}}}static readFileAsArrayBuffer(e){return new Promise((t,r)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>r(new Error("Failed to read file")),i.readAsArrayBuffer(e)})}static cleanExtractedText(e){let t=e.replace(/\s+/g," ").trim();const r=new RegExp(`


`,"g");for(;t.indexOf(`


`)!==-1;)t=t.replace(r,`

`);return t}}const bu=({label:n,enabled:e,onToggle:t,"aria-label":r})=>v.jsxs("div",{className:"flex items-center justify-between py-3",children:[v.jsx("span",{className:"text-gray-200",children:n}),v.jsx("button",{onClick:t,role:"switch","aria-checked":e?"true":"false","aria-label":r,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-primary ${e?"bg-primary":"bg-gray-600"}`,children:v.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${e?"translate-x-6":"translate-x-1"}`})})]}),oV=()=>{const{currentUser:n}=ti(),[e,t]=_.useState({registrations:!0,submissions:!0,highScores:!1,examPublished:!0}),[r,i]=_.useState({itemsPerPage:10,defaultDateRange:"30d"}),[s,a]=_.useState(""),[l,u]=_.useState(null),[d,h]=_.useState(!1),[f,m]=_.useState(!1),[g,b]=_.useState(null),x=_.useRef(null);_.useEffect(()=>{a(localStorage.getItem("cmaKnowledgeBase")||""),u(localStorage.getItem("cmaKnowledgeBaseLastUpdated")||null)},[]);const A=T=>{t(N=>({...N,[T]:!N[T]}))},E=async T=>{const N=T.target.files?.[0];if(N){m(!0),b(null);try{const O=await aV.parsePDF(N);O.error?O.error.includes("worker")||O.error.includes("Failed to fetch")?(b({message:"PDF processing failed due to worker initialization issues. Loading default CMA curriculum instead.",type:"error"}),setTimeout(()=>{fetch("/data/cmaP1Curriculum.txt").then(j=>j.text()).then(j=>{a(j),b({message:"Successfully loaded default CMA P1 curriculum due to PDF processing issues.",type:"success"})}).catch(j=>{b({message:`Failed to load default curriculum: ${j.message}`,type:"error"})})},2e3)):b({message:`Error: ${O.error}`,type:"error"}):(a(O.text),b({message:`Successfully parsed ${O.pageCount} pages from ${O.fileName}. Extracted ${O.text.length} characters.`,type:"success"}))}catch(O){console.error("Error parsing PDF:",O),b({message:`Failed to parse PDF: ${O.message||"Unknown error"}. Loading default CMA curriculum instead.`,type:"error"}),setTimeout(()=>{fetch("/data/cmaP1Curriculum.txt").then(j=>j.text()).then(j=>{a(j),b({message:"Successfully loaded default CMA P1 curriculum due to PDF processing issues.",type:"success"})}).catch(j=>{b({message:`Failed to load default curriculum: ${j.message}`,type:"error"})})},2e3)}finally{m(!1)}}},C=()=>{x.current?.click()},P=()=>{h(!0);const T=new Date().toLocaleString();localStorage.setItem("cmaKnowledgeBase",s),localStorage.setItem("cmaKnowledgeBaseLastUpdated",T),u(T),setTimeout(()=>{vr.addLog(n,"UPDATE_SETTINGS","Saved application settings."),h(!1)},1e3)};return n.role!=="Admin"?v.jsxs("div",{className:"text-center py-10 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold text-red-400 text-shadow",children:"Access Denied"}),v.jsx("p",{className:"text-gray-200 mt-2",children:"You do not have permission to view this page."})]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"Settings"}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-6",children:[v.jsx("h2",{className:"text-xl font-bold text-white text-shadow mb-4",children:"Notification Preferences"}),v.jsxs("div",{className:"divide-y divide-white/10",children:[v.jsx(bu,{label:"New Student Registrations",enabled:e.registrations,onToggle:()=>A("registrations"),"aria-label":"Toggle new student registration notifications"}),v.jsx(bu,{label:"Exam Submissions",enabled:e.submissions,onToggle:()=>A("submissions"),"aria-label":"Toggle exam submission notifications"}),v.jsx(bu,{label:"High Score Alerts",enabled:e.highScores,onToggle:()=>A("highScores"),"aria-label":"Toggle high score alert notifications"}),v.jsx(bu,{label:"New Exam Published",enabled:e.examPublished,onToggle:()=>A("examPublished"),"aria-label":"Toggle new exam published notifications"})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-6",children:[v.jsx("h2",{className:"text-xl font-bold text-white text-shadow mb-4",children:"Display & Data"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"items-per-page",className:"block text-sm font-medium text-gray-200",children:"Items per Page"}),v.jsxs("select",{id:"items-per-page",value:r.itemsPerPage,onChange:T=>i(N=>({...N,itemsPerPage:Number(T.target.value)})),className:"mt-1 block w-full sm:w-1/2 pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white",children:[v.jsx("option",{className:"text-black",value:"10",children:"10"}),v.jsx("option",{className:"text-black",value:"25",children:"25"}),v.jsx("option",{className:"text-black",value:"50",children:"50"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"date-range",className:"block text-sm font-medium text-gray-200",children:"Default Date Range for Reports"}),v.jsxs("select",{id:"date-range",value:r.defaultDateRange,onChange:T=>i(N=>({...N,defaultDateRange:T.target.value})),className:"mt-1 block w-full sm:w-1/2 pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white",children:[v.jsx("option",{className:"text-black",value:"7d",children:"Last 7 Days"}),v.jsx("option",{className:"text-black",value:"30d",children:"Last 30 Days"}),v.jsx("option",{className:"text-black",value:"90d",children:"Last 90 Days"})]})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-6",children:[v.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3 mb-4",children:[v.jsx("h2",{className:"text-xl font-semibold text-white",children:"AI Knowledge Base (RAG)"}),v.jsx("button",{onClick:C,disabled:f,className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-secondary/90 disabled:bg-gray-500",children:f?"Processing...":"Upload PDF"}),v.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".pdf","aria-label":"PDF Upload"})]}),v.jsx("p",{className:"text-gray-300 mb-4",children:"Upload a PDF of the CMA curriculum, or paste the content directly below to provide context for the AI assistant."}),g&&v.jsx("div",{className:`p-3 rounded-md mb-4 text-sm ${g.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:g.message}),v.jsxs("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-md",children:[v.jsx("h3",{className:"font-medium text-blue-300 mb-2",children:"Alternative Method"}),v.jsxs("p",{className:"text-sm text-gray-300",children:["If PDF upload fails, you can manually copy and paste the CMA curriculum content. A comprehensive CMA P1 curriculum text file is available at:",v.jsx("code",{className:"block mt-1 p-2 bg-black/30 rounded text-xs",children:"c:\\Users\\mojah\\Downloads\\CMA\\CMA.Web\\ClientApp\\data\\cmaP1Curriculum.txt"})]}),v.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"You can also use the pre-loaded curriculum data by clicking the button below:"}),v.jsx("button",{onClick:()=>{fetch("/data/cmaP1Curriculum.txt").then(T=>T.text()).then(T=>{a(T),b({message:"Successfully loaded CMA P1 curriculum from local data file.",type:"success"})}).catch(T=>{b({message:`Failed to load curriculum data: ${T.message}`,type:"error"})})},className:"mt-2 bg-secondary text-white px-3 py-1 rounded text-sm hover:bg-secondary/90",children:"Load CMA P1 Curriculum"})]}),v.jsx("textarea",{value:s,onChange:T=>a(T.target.value),placeholder:"Paste your CMA syllabus/content here...",className:"w-full h-96 p-3 bg-gray-900/50 border border-white/20 rounded-md text-gray-200 focus:ring-2 focus:ring-primary focus:outline-none","aria-label":"AI Knowledge Base Input"}),v.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex justify-between",children:[v.jsx("span",{children:l?`Last updated: ${l}`:"Not updated yet."}),v.jsxs("span",{children:[s.length.toLocaleString()," characters / ",s.split(/\s+/).filter(Boolean).length.toLocaleString()," words"]})]}),v.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:[v.jsx("span",{className:"font-bold",children:"Privacy Note:"})," The content you upload is stored locally in your browser and is only used to provide context to the AI assistant. It is not sent to any external servers beyond the AI provider's API for processing your requests."]})]}),v.jsx("div",{className:"flex justify-end mt-8",children:v.jsx("button",{type:"button",onClick:P,disabled:d,className:"px-6 py-2 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition-colors shadow-lg disabled:bg-gray-500/50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Settings"})})]})]})},lV=()=>{const{currentUser:n}=ti(),[e,t]=_.useState([]),[r,i]=_.useState(""),[s,a]=_.useState("");_.useEffect(()=>{t(vr.getLogs())},[]);const l=_.useMemo(()=>{const d=vr.getLogs().map(h=>h.action);return[...new Set(d)]},[]),u=_.useMemo(()=>e.filter(d=>{const h=r?d.user.toLowerCase().includes(r.toLowerCase()):!0,f=s?d.action===s:!0;return h&&f}),[e,r,s]);return n.role!=="Admin"?v.jsxs("div",{className:"text-center py-10 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold text-red-400 text-shadow",children:"Access Denied"}),v.jsx("p",{className:"text-gray-200 mt-2",children:"You do not have permission to view this page."})]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"Audit Log"}),v.jsx("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"user-filter",className:"block text-sm font-medium text-gray-200",children:"Filter by User"}),v.jsx("input",{id:"user-filter",type:"text",value:r,onChange:d=>i(d.target.value),className:"mt-1 block w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm text-white placeholder-gray-400",placeholder:"Enter user name..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"action-filter",className:"block text-sm font-medium text-gray-200",children:"Filter by Action"}),v.jsxs("select",{id:"action-filter",value:s,onChange:d=>a(d.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white/10 border-white/30 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md text-white",children:[v.jsx("option",{value:"",className:"text-black",children:"All Actions"}),l.map(d=>v.jsx("option",{value:d,className:"text-black",children:d},d))]})]})]})}),v.jsx("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg overflow-x-auto",children:v.jsxs("table",{className:"min-w-full leading-normal",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-white/10 border-b border-white/20",children:[v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Timestamp"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"User"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Role"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Action"}),v.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Details"})]})}),v.jsxs("tbody",{children:[u.map(d=>v.jsxs("tr",{className:"border-b border-white/20 hover:bg-white/10 transition-colors",children:[v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-300 whitespace-nowrap",children:new Date(d.timestamp).toLocaleString()}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:d.user}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-200",children:d.role}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent",children:v.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-primary/70 text-white",children:d.action})}),v.jsx("td",{className:"px-5 py-4 text-sm bg-transparent text-gray-100",children:d.details})]},d.id)),u.length===0&&v.jsx("tr",{children:v.jsx("td",{colSpan:5,className:"text-center py-10 text-gray-300",children:"No log entries match the current filters."})})]})]})})]})},cV=({section:n})=>{const[e,t]=_.useState(!1),{openAssistant:r}=Aj(),i=_.useMemo(()=>Yr.filter(l=>l.sectionId===n.id),[n.id]),s=()=>{let l=n.content;if(i.length>0){const u=i.map(d=>`Question: ${d.question_text}
Correct Answer: ${d.options?d.options[d.correct_answer]:d.correct_answer}`).join(`

`);l+=`

--- RELEVANT QUESTIONS FROM KNOWLEDGE BASE ---
${u}`}r(l)},a=n.content.replace(/## (.*)/g,"").replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-100">$1</strong>').replace(/^- (.*)/gm,'<li class="ml-4 list-disc">$1</li>').replace(/`([^`]+)`/g,'<code class="bg-gray-900/50 px-1 py-0.5 rounded text-sm text-yellow-300">$1</code>').replace(/\n/g,"<br />");return v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-lg rounded-lg overflow-hidden transition-all duration-300",children:[v.jsxs("button",{className:"w-full text-left px-6 py-4 flex justify-between items-center cursor-pointer hover:bg-white/10",onClick:()=>t(!e),"aria-expanded":e,"aria-controls":`section-content-${n.id}`,children:[v.jsxs("h3",{className:"text-lg font-semibold text-white text-shadow",children:[n.id,": ",n.title]}),v.jsx("svg",{className:`w-5 h-5 text-gray-300 transform transition-transform duration-300 ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e&&v.jsxs("div",{id:`section-content-${n.id}`,className:"px-6 pb-6 text-gray-200 divide-y divide-white/10",children:[v.jsx("div",{className:"prose prose-invert prose-sm max-w-none pb-4",dangerouslySetInnerHTML:{__html:a}}),i.length>0&&v.jsxs("div",{className:"pt-4",children:[v.jsx("h4",{className:"text-md font-bold text-white text-shadow mb-3",children:"Related Questions"}),v.jsx("div",{className:"space-y-3",children:i.map(l=>v.jsxs("div",{className:"text-sm bg-black/20 p-3 rounded-md",children:[v.jsx("p",{className:"font-semibold text-gray-200",children:l.question_text}),v.jsxs("p",{className:"text-green-400 mt-1 text-xs",children:[v.jsx("strong",{children:"Answer:"})," ",l.options?`${l.correct_answer}: ${l.options[l.correct_answer]}`:l.correct_answer]})]},l.id))})]}),v.jsx("div",{className:"pt-4",children:v.jsxs("button",{onClick:s,className:"px-3 py-1.5 bg-secondary text-white text-sm font-semibold rounded-md hover:bg-secondary-dark transition-colors shadow-md flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ask AI about this section"]})})]})]})},uV=()=>{const[n,e]=_.useState(0),t=at[n];return v.jsxs("div",{children:[v.jsx("div",{className:"flex justify-between items-center mb-6",children:v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow",children:"CMA Part 1 Curriculum"})}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{htmlFor:"unit-select",className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Study Unit:"}),v.jsx("select",{id:"unit-select",value:n,onChange:r=>e(parseInt(r.target.value)),className:"bg-gray-800 border border-gray-700 text-white rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5",children:at.map((r,i)=>v.jsxs("option",{value:i,children:[r.title," (",r.weight,")"]},r.id))})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-lg rounded-lg p-6 mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-white text-shadow mb-3",children:t.title}),v.jsx("p",{className:"text-gray-300 text-shadow mb-4",children:t.description}),v.jsxs("div",{className:"inline-block bg-primary/20 text-primary px-3 py-1 rounded-full text-sm font-semibold",children:["Exam Weight: ",t.weight]})]}),v.jsx("div",{className:"space-y-4",children:t.sections.map(r=>v.jsx(cV,{section:r},r.id))})]})},dV=[{id:"a1",title:"First Steps",description:"Complete your first study unit.",icon:"🎓",unlocked:!0},{id:"a2",title:"Consistent Learner",description:"Study for 7 days in a row.",icon:"🔥",unlocked:!0},{id:"a3",title:"Top Performer",description:"Score 90% or higher on an exam.",icon:"🏆",unlocked:!1},{id:"a4",title:"Unit Master",description:"Complete all sections in any study unit.",icon:"⭐",unlocked:!0},{id:"a5",title:"Quiz Whiz",description:"Complete 10 quizzes.",icon:"⚡",unlocked:!1},{id:"a6",title:"CMA Explorer",description:"Complete all 6 CMA Part 1 study units.",icon:"🏅",unlocked:!1}],hV=[{rank:1,studentName:"Emily Davis",xp:12500},{rank:2,studentName:"Jane Smith",xp:11800},{rank:3,studentName:"John Doe",xp:10500},{rank:4,studentName:"Alex Ray",xp:9800},{rank:5,studentName:"Mike Johnson",xp:8500}],fV=({achievement:n})=>v.jsxs("div",{className:`p-4 rounded-lg text-center enhanced-card ${n.unlocked?"achievement-unlock":"opacity-50 grayscale"}`,children:[v.jsx("div",{className:"text-5xl mx-auto mb-3",children:n.icon}),v.jsx("h3",{className:"font-bold text-white text-md text-shadow",children:n.title}),v.jsx("p",{className:"text-xs text-gray-300 mt-1",children:n.description}),n.unlocked&&v.jsx("div",{className:"absolute top-2 right-2 text-yellow-300",title:"Unlocked",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),pV=()=>v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"Achievements & Leaderboard"}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-white text-shadow mb-4",children:"Your Badges"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:dV.map(n=>v.jsx(fV,{achievement:n},n.id))})]}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-semibold text-white text-shadow mb-4",children:"Top Students Leaderboard"}),v.jsx("div",{className:"enhanced-card overflow-hidden",children:v.jsxs("table",{className:"min-w-full",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-white/10",children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Rank"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"Student"}),v.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white uppercase tracking-wider text-shadow",children:"XP"})]})}),v.jsx("tbody",{children:hV.map((n,e)=>v.jsxs("tr",{className:`border-t border-white/10 ${e===0?"bg-yellow-500/20":""}`,children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-bold text-white text-shadow",children:n.rank}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-md font-medium text-gray-100",children:n.studentName}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-md text-cyan-300 font-semibold",children:[n.xp.toLocaleString()," XP"]})]},n.rank))})]})})]})]}),mV=()=>{const{studentId:n}=AE(),e={name:`Student ${n}`,email:`student${n}@example.com`},t=Ii.filter(r=>r.student_id===n);return v.jsx(RE,{children:v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4 text-white text-shadow",children:"Student Profile"}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 mb-6",children:[v.jsx("h2",{className:"text-2xl font-semibold mb-2 text-white text-shadow",children:e.name}),v.jsx("p",{className:"text-gray-300",children:e.email})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-4 text-white text-shadow",children:"Exam History"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full",children:[v.jsx("thead",{className:"bg-white/10",children:v.jsxs("tr",{children:[v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Exam"}),v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Score"}),v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Date"}),v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Status"})]})}),v.jsx("tbody",{children:t.map(r=>v.jsxs("tr",{className:"hover:bg-white/10",children:[v.jsx("td",{className:"py-2 px-4 border-b border-white/10 text-gray-200",children:r.exam_title}),v.jsxs("td",{className:"py-2 px-4 border-b border-white/10 text-gray-200",children:[r.percentage,"%"]}),v.jsx("td",{className:"py-2 px-4 border-b border-white/10 text-gray-200",children:new Date(r.submitted_at).toLocaleDateString()}),v.jsx("td",{className:"py-2 px-4 border-b border-white/10",children:v.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${r.percentage>=50?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:r.percentage>=50?"Passed":"Failed"})})]},r.id))})]})})]})]})})},gV=()=>{const[n,e]=_.useState({start:"",end:""}),[t,r]=_.useState(""),i=Ii.filter(f=>{if(n.start&&n.end){const m=new Date(f.submitted_at),g=new Date(n.start),b=new Date(n.end);if(m<g||m>b)return!1}return!(t&&f.exam_id!==t)}),s=at.map(f=>{const m=i.filter(x=>x.exam_id.startsWith(f.id.replace("unit","ex"))),g=m.filter(x=>x.percentage>=50).length,b=m.length-g;return{name:f.title.replace("Study Unit ","SU "),Passed:g,Failed:b}}).filter(f=>f.Passed>0||f.Failed>0),a=Yr.map(f=>{const m=Math.random()*100;return{...f,successRate:m}}).sort((f,m)=>f.successRate-m.successRate).slice(0,5),l={pass:i.filter(f=>f.percentage>=50).length,fail:i.filter(f=>f.percentage<50).length},u=[{name:"Passed",value:l.pass},{name:"Failed",value:l.fail}],d=["#10b981","#ef4444"],h=()=>{e({start:"",end:""}),r("")};return v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold mb-6 text-white text-shadow",children:"Analytics Dashboard"}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 shadow-xl rounded-lg p-6 mb-6",children:[v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow",children:"Filters"}),v.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-white bg-gray-700 rounded-md hover:bg-gray-600",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-200 mb-1",children:"Start Date"}),v.jsx("input",{id:"start-date",type:"date",value:n.start,onChange:f=>e({...n,start:f.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-200 mb-1",children:"End Date"}),v.jsx("input",{id:"end-date",type:"date",value:n.end,onChange:f=>e({...n,end:f.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"exam-filter",className:"block text-sm font-medium text-gray-200 mb-1",children:"Exam"}),v.jsxs("select",{id:"exam-filter",value:t,onChange:f=>r(f.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/30 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-white",children:[v.jsx("option",{value:"",className:"text-black",children:"All Exams"}),Array.from(new Set(Ii.map(f=>f.exam_id))).map(f=>{const m=Ii.find(g=>g.exam_id===f);return v.jsx("option",{value:f,className:"text-black",children:m?.exam_title||f},f)})]})]})]}),v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Showing ",i.length," of ",Ii.length," attempts"]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4 text-white text-shadow",children:"Exam Pass/Fail Rates"}),s.length>0?v.jsx(sd,{width:"100%",height:300,children:v.jsxs(n0,{data:s,children:[v.jsx(eh,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.2)"}),v.jsx(th,{dataKey:"name",tick:{fill:"#ddd"},className:"text-shadow"}),v.jsx(nh,{tick:{fill:"#ddd"},className:"text-shadow"}),v.jsx(id,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)",color:"#fff"}}),v.jsx(Cs,{wrapperStyle:{color:"#fff"}}),v.jsx(Ma,{dataKey:"Passed",fill:"rgba(16, 185, 129, 0.9)"}),v.jsx(Ma,{dataKey:"Failed",fill:"rgba(239, 68, 68, 0.9)"})]})}):v.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"No data available for selected filters"})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4 text-white text-shadow",children:"Overall Performance"}),i.length>0?v.jsx(sd,{width:"100%",height:300,children:v.jsxs($q,{children:[v.jsx(F2,{data:u,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:u.map((f,m)=>v.jsx(Fl,{fill:d[m%d.length]},`cell-${m}`))}),v.jsx(id,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)",color:"#fff"}}),v.jsx(Cs,{wrapperStyle:{color:"#fff"}})]})}):v.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"No data available for selected filters"})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 col-span-1 lg:col-span-2",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4 text-white text-shadow",children:"Top 5 Most Difficult Questions"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full",children:[v.jsx("thead",{className:"bg-white/10",children:v.jsxs("tr",{children:[v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Question"}),v.jsx("th",{className:"py-2 px-4 border-b border-white/20 text-left text-gray-200",children:"Success Rate"})]})}),v.jsx("tbody",{children:a.map(f=>v.jsxs("tr",{className:"hover:bg-white/10",children:[v.jsx("td",{className:"py-2 px-4 border-b border-white/10 text-gray-200",children:f.question_text}),v.jsxs("td",{className:"py-2 px-4 border-b border-white/10 font-semibold text-gray-200",children:[f.successRate.toFixed(2),"%"]})]},f.id))})]})})]})]})]})},vV=()=>{const{examId:n}=AE(),e=bd(),[t,r]=_.useState(null),[i,s]=_.useState([]),[a,l]=_.useState({}),[u,d]=_.useState(0);_.useEffect(()=>{const x=uT.find(A=>A.id===n);if(x){r(x);const A=Yr.filter(E=>E.exam_id===n);s(A)}},[n]);const h=(x,A)=>{l(E=>({...E,[x]:A}))},f=()=>{u<i.length-1&&d(x=>x+1)},m=()=>{u>0&&d(x=>x-1)},g=()=>{window.confirm("Are you sure you want to submit your answers?")&&(console.log("Submitting answers:",a),e("/results"))};if(!t)return v.jsx("div",{className:"text-center p-8 text-white",children:"Exam not found."});const b=i[u];return v.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[v.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t.title}),v.jsx("p",{className:"text-gray-300 mb-6",children:t.description}),b?v.jsxs("div",{className:"bg-glass p-6 rounded-lg",children:[v.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Question ",u+1," of ",i.length]}),v.jsx("p",{className:"text-white mb-6",children:b.question_text}),v.jsx("div",{className:"space-y-4",children:b.options&&Object.entries(b.options).map(([x,A])=>v.jsxs("label",{className:"flex items-center p-4 rounded-lg bg-white/10 hover:bg-white/20 cursor-pointer",children:[v.jsx("input",{type:"radio",name:b.id,value:x,checked:a[b.id]===x,onChange:()=>h(b.id,x),className:"form-radio h-5 w-5 text-primary"}),v.jsx("span",{className:"ml-4 text-white",children:String(A)})]},x))})]}):v.jsx("div",{className:"text-center p-8 text-white",children:"No questions found for this exam."}),v.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[v.jsx("button",{onClick:m,disabled:u===0,className:"px-6 py-2 bg-gray-600 text-white rounded-lg disabled:opacity-50",children:"Previous"}),u===i.length-1?v.jsx("button",{onClick:g,className:"px-6 py-2 bg-green-600 text-white rounded-lg",children:"Submit"}):v.jsx("button",{onClick:f,disabled:u===i.length-1,className:"px-6 py-2 bg-primary text-white rounded-lg disabled:opacity-50",children:"Next"})]})]})},$T=[{id:"hist1",student_id:"stud001",student_name:"Ahmad Mohamed",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-15T09:30:00Z",score:95,total_marks:100,percentage:95,status:"evaluated"},{id:"hist2",student_id:"stud002",student_name:"Fatima Ali",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-16T14:45:00Z",score:87,total_marks:100,percentage:87,status:"evaluated"},{id:"hist3",student_id:"stud003",student_name:"Omar Hassan",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-17T11:20:00Z",score:78,total_marks:100,percentage:78,status:"evaluated"},{id:"hist4",student_id:"stud001",student_name:"Ahmad Mohamed",exam_id:"ex2",exam_title:"Financial Reporting Section Only",submitted_at:"2023-10-20T10:15:00Z",score:82,total_marks:100,percentage:82,status:"evaluated"},{id:"hist5",student_id:"stud002",student_name:"Fatima Ali",exam_id:"ex3",exam_title:"Planning & Budgeting Section Only",submitted_at:"2023-10-21T13:30:00Z",score:91,total_marks:100,percentage:91,status:"evaluated"},{id:"hist6",student_id:"stud004",student_name:"Youssef Khalid",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-22T08:45:00Z",score:65,total_marks:100,percentage:65,status:"evaluated"},{id:"hist7",student_id:"stud005",student_name:"Layla Mahmoud",exam_id:"ex4",exam_title:"Performance Management Section Only",submitted_at:"2023-10-23T15:20:00Z",score:88,total_marks:100,percentage:88,status:"evaluated"},{id:"hist8",student_id:"stud001",student_name:"Ahmad Mohamed",exam_id:"ex5",exam_title:"Cost Management Section Only",submitted_at:"2023-10-25T12:10:00Z",score:93,total_marks:100,percentage:93,status:"evaluated"},{id:"hist9",student_id:"stud006",student_name:"Samira Nassar",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-26T16:40:00Z",score:76,total_marks:100,percentage:76,status:"evaluated"},{id:"hist10",student_id:"stud007",student_name:"Khalid Farouk",exam_id:"ex6",exam_title:"Internal Controls Section Only",submitted_at:"2023-10-27T09:55:00Z",score:85,total_marks:100,percentage:85,status:"evaluated"},{id:"hist11",student_id:"stud002",student_name:"Fatima Ali",exam_id:"ex7",exam_title:"Technology & Analytics Section Only",submitted_at:"2023-10-28T14:25:00Z",score:79,total_marks:100,percentage:79,status:"evaluated"},{id:"hist12",student_id:"stud008",student_name:"Nadia Salem",exam_id:"ex1",exam_title:"CMA Part 1 Mock Exam - Full Length",submitted_at:"2023-10-30T11:15:00Z",score:92,total_marks:100,percentage:92,status:"evaluated"},{id:"hist13",student_id:"stud009",student_name:"Tariq Mustafa",exam_id:"ex2",exam_title:"Financial Reporting Section Only",submitted_at:"2023-11-01T10:30:00Z",score:71,total_marks:100,percentage:71,status:"evaluated"},{id:"hist14",student_id:"stud010",student_name:"Hanan Adel",exam_id:"ex3",exam_title:"Planning & Budgeting Section Only",submitted_at:"2023-11-02T13:45:00Z",score:84,total_marks:100,percentage:84,status:"evaluated"},{id:"hist15",student_id:"stud004",student_name:"Youssef Khalid",exam_id:"ex4",exam_title:"Performance Management Section Only",submitted_at:"2023-11-03T15:50:00Z",score:69,total_marks:100,percentage:69,status:"evaluated"}];class ji{static analyzePerformance(e){const t=$T.filter(a=>a.student_id===e);if(t.length===0)return this.getDefaultRecommendations();const r={};at.forEach(a=>{a.sections.forEach(l=>{r[l.id]={total:0,count:0,average:0}})}),t.forEach(a=>{Yr.filter(u=>u.exam_id===a.exam_id).forEach(u=>{if(u.sectionId){const d=u.sectionId;r[d]||(r[d]={total:0,count:0,average:0});const h=a.percentage>=70;r[d].total+=h?1:0,r[d].count+=1}})}),Object.keys(r).forEach(a=>{r[a].count>0&&(r[a].average=r[a].total/r[a].count)});const i=Object.entries(r).filter(([a,l])=>l.average<.7).map(([a,l])=>({sectionId:a,performance:l.average,title:this.getSectionTitle(a)})).sort((a,l)=>a.performance-l.performance),s=Object.entries(r).filter(([a,l])=>l.average>=.85).map(([a,l])=>({sectionId:a,performance:l.average,title:this.getSectionTitle(a)})).sort((a,l)=>l.performance-a.performance);return{weakAreas:i,strongAreas:s,overallPerformance:this.calculateOverallPerformance(t),recommendations:this.generateRecommendations(i,s)}}static generateAdaptiveExam(e,t=50){const r=this.analyzePerformance(e),i={};r.weakAreas.forEach(h=>{i[h.sectionId]=1.5}),r.strongAreas.forEach(h=>{i[h.sectionId]=.7}),at.forEach(h=>{h.sections.forEach(f=>{f.id in i||(i[f.id]=1)})});const s=[],a={},l=Object.values(i).reduce((h,f)=>h+f,0);Object.entries(i).forEach(([h,f])=>{a[h]=Math.round(f/l*t)});let u=Object.values(a).reduce((h,f)=>h+f,0),d=t-u;return d!==0&&Object.keys(a).forEach((f,m)=>{d>0&&m<d?a[f]+=1:d<0&&m<Math.abs(d)&&(a[f]=Math.max(0,a[f]-1))}),Object.entries(a).forEach(([h,f])=>{if(f>0){const g=[...Yr.filter(b=>b.sectionId===h)].sort(()=>.5-Math.random());s.push(...g.slice(0,f))}}),s.sort(()=>.5-Math.random())}static generateStudyPlan(e){const t=this.analyzePerformance(e);return{title:"Personalized Study Plan",description:"Focus on improving your weak areas while maintaining your strengths",weeks:4,dailyHours:2,focusAreas:t.weakAreas.map(i=>({sectionId:i.sectionId,title:i.title,priority:"High",recommendedHours:Math.round((1-i.performance)*20),topics:this.getSectionTopics(i.sectionId)})),reviewAreas:t.strongAreas.map(i=>({sectionId:i.sectionId,title:i.title,priority:"Low",recommendedHours:Math.round(i.performance*5),topics:this.getSectionTopics(i.sectionId)})),overallStrategy:this.generateStudyStrategy(t)}}static getQuestionRecommendations(e,t,r=10){const i=this.analyzePerformance(e),s=Yr.filter(l=>l.sectionId===t),a=i.overallPerformance;return s.sort((l,u)=>{if(a<70){const d={easy:1,medium:2,hard:3};return d[l.difficulty]-d[u.difficulty]}else if(a>=85){const d={hard:1,medium:2,easy:3};return d[l.difficulty]-d[u.difficulty]}else return .5-Math.random()}),s.slice(0,r)}static getDefaultRecommendations(){return{weakAreas:[],strongAreas:[],overallPerformance:0,recommendations:["Start with foundational topics in Financial Reporting","Practice basic calculations in Cost Management","Review fundamental concepts in Planning & Budgeting"]}}static getSectionTitle(e){for(const t of at){const r=t.sections.find(i=>i.id===e);if(r)return`${t.title} - ${r.title}`}return`Section ${e}`}static calculateOverallPerformance(e){return e.length===0?0:e.reduce((r,i)=>r+i.percentage,0)/e.length}static generateRecommendations(e,t){const r=[];return e.length>0&&r.push(`Focus on improving: ${e.map(i=>i.title).join(", ")}`),t.length>0&&r.push(`Continue practicing: ${t.map(i=>i.title).join(", ")}`),r.length===0&&(r.push("Maintain your current study schedule"),r.push("Practice with mixed difficulty questions")),r}static getSectionTopics(e){const t=at.flatMap(r=>r.sections).find(r=>r.id===e);return t?t.content.split(`
`).filter(i=>i.startsWith("**")&&i.endsWith("**")).map(i=>i.replace(/\*\*/g,"")).slice(0,3):[`Topic 1 in ${e}`,`Topic 2 in ${e}`]}static generateStudyStrategy(e){return e.overallPerformance<60?"Focus intensive study on weak areas, spend 70% of time on improvement":e.overallPerformance<80?"Balanced approach, 50% improvement, 30% maintenance, 20% new topics":"Advanced study, 30% improvement, 20% maintenance, 50% challenging topics"}}const yV=()=>{const n=bd(),[e,t]=_.useState("setup"),[r,i]=_.useState({questionCount:50,timeLimit:180,displayOrder:"random",selectedSections:[],adaptiveMode:!1,studentId:"stud001"}),[s,a]=_.useState([]),[l,u]=_.useState(0),[d,h]=_.useState(0),[f,m]=_.useState(!1),[g,b]=_.useState(null),[x,A]=_.useState(null),[E,C]=_.useState(null),P=_.useRef(null),T=_.useRef(Date.now());_.useEffect(()=>(e==="exam"&&!f&&d>0?P.current=setInterval(()=>{h($=>Math.max(0,$-1))},1e3):P.current&&clearInterval(P.current),()=>{P.current&&clearInterval(P.current)}),[e,f,d]),_.useEffect(()=>{},[d,e]);const N=()=>{const $=ji.analyzePerformance(r.studentId),W=ji.generateStudyPlan(r.studentId);A($),C(W),t("aiAnalysis")},O=()=>{let $=[];if(r.adaptiveMode)$=ji.generateAdaptiveExam(r.studentId,r.questionCount);else{let I=[];r.selectedSections.length===0?I=[...Yr]:I=Yr.filter(oe=>oe.sectionId&&r.selectedSections.includes(oe.sectionId));let L=[];switch(r.displayOrder){case"book":L=[...I].sort((oe,be)=>oe.sectionId&&be.sectionId&&oe.sectionId!==be.sectionId?oe.sectionId.localeCompare(be.sectionId):oe.id.localeCompare(be.id));break;case"selection":L=I;break;case"random":L=[...I].sort(()=>Math.random()-.5);break}$=L.slice(0,r.questionCount)}const W=$.map(I=>({...I,marked:!1,userAnswer:null,timeSpent:0,notes:""}));a(W),h(r.timeLimit*60),b(Date.now()),t("exam"),u(0),T.current=Date.now()},j=$=>{const W=[...s],I=Date.now(),L=Math.floor((I-T.current)/1e3);W[l]={...W[l],userAnswer:$,timeSpent:W[l].timeSpent+L},a(W),T.current=I},B=()=>{const $=[...s];$[l]={...$[l],marked:!$[l].marked},a($)},F=$=>{const W=[...s];W[l]={...W[l],notes:$},a(W)},Y=()=>{const $=Date.now(),W=Math.floor(($-T.current)/1e3),I=[...s];I[l]={...I[l],timeSpent:I[l].timeSpent+W},a(I),u(L=>Math.min(L+1,s.length-1)),T.current=$},V=()=>{const $=Date.now(),W=Math.floor(($-T.current)/1e3),I=[...s];I[l]={...I[l],timeSpent:I[l].timeSpent+W},a(I),u(L=>Math.max(0,L-1)),T.current=$},K=$=>{const W=Date.now(),I=Math.floor((W-T.current)/1e3),L=[...s];L[l]={...L[l],timeSpent:L[l].timeSpent+I},a(L),u($),T.current=W},te=()=>{const $=Date.now(),W=Math.floor(($-T.current)/1e3),I=[...s];I[l]={...I[l],timeSpent:I[l].timeSpent+W},a(I),t("results")},H=()=>{m(!f)},ae=$=>{const W=Math.floor($/3600),I=Math.floor($%3600/60),L=$%60;return`${W.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},X=$=>{i(W=>{const I=W.selectedSections.includes($)?W.selectedSections.filter(L=>L!==$):[...W.selectedSections,$];return{...W,selectedSections:I}})},Q=()=>{const $=at.flatMap(W=>W.sections.map(I=>I.id));i(W=>({...W,selectedSections:$}))},Z=()=>{i($=>({...$,selectedSections:[]}))};if(e==="setup")return v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"CMA Part 1 Exam Simulation"}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"Exam Settings"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:["Number of Questions: ",r.questionCount]}),v.jsx("input",{type:"range",min:"10",max:"100",value:r.questionCount,onChange:$=>i({...r,questionCount:parseInt($.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[v.jsx("span",{children:"10"}),v.jsx("span",{children:"100"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:["Time Limit: ",r.timeLimit," minutes"]}),v.jsx("input",{type:"range",min:"1",max:"360",value:r.timeLimit,onChange:$=>i({...r,timeLimit:parseInt($.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[v.jsx("span",{children:"1 min"}),v.jsx("span",{children:"360 min"})]})]})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Display Order"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[v.jsx("button",{onClick:()=>i({...r,displayOrder:"book"}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.displayOrder==="book"?"bg-primary text-white":"bg-white/10 text-gray-200 hover:bg-white/20"}`,children:"Book Order"}),v.jsx("button",{onClick:()=>i({...r,displayOrder:"selection"}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.displayOrder==="selection"?"bg-primary text-white":"bg-white/10 text-gray-200 hover:bg-white/20"}`,children:"Selection Order"}),v.jsx("button",{onClick:()=>i({...r,displayOrder:"random"}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.displayOrder==="random"?"bg-primary text-white":"bg-white/10 text-gray-200 hover:bg-white/20"}`,children:"Random"})]})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Exam Mode"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"adaptiveMode",checked:r.adaptiveMode,onChange:$=>i({...r,adaptiveMode:$.target.checked}),className:"w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary"}),v.jsx("label",{htmlFor:"adaptiveMode",className:"ml-2 text-gray-200",children:"AI-Powered Adaptive Exam (Personalized based on your performance)"})]})]}),!r.adaptiveMode&&v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Select Sections"}),v.jsxs("div",{className:"space-x-2",children:[v.jsx("button",{onClick:Q,className:"text-xs text-blue-400 hover:text-blue-300",children:"Select All"}),v.jsx("button",{onClick:Z,className:"text-xs text-gray-400 hover:text-gray-300",children:"Clear"})]})]}),v.jsx("div",{className:"max-h-96 overflow-y-auto border border-white/20 rounded-lg p-3 bg-black/20",children:at.map($=>v.jsxs("div",{className:"mb-4 last:mb-0",children:[v.jsx("h3",{className:"font-semibold text-white text-sm mb-2",children:$.title}),v.jsx("div",{className:"space-y-2 ml-2",children:$.sections.map(W=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`section-${W.id}`,checked:r.selectedSections.includes(W.id),onChange:()=>X(W.id),className:"w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary"}),v.jsx("label",{htmlFor:`section-${W.id}`,className:"ml-2 text-sm text-gray-200",children:W.title})]},W.id))})]},$.id))})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("button",{onClick:N,className:"px-6 py-3 bg-secondary text-white rounded-lg hover:bg-secondary-dark font-semibold",children:"AI Performance Analysis"}),v.jsx("button",{onClick:O,disabled:!r.adaptiveMode&&r.selectedSections.length===0,className:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:bg-gray-600 disabled:cursor-not-allowed font-semibold",children:"Start Exam"})]})]})]});if(e==="aiAnalysis"&&x)return v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"AI Performance Analysis"}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[v.jsxs("div",{className:"lg:col-span-2 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"Performance Overview"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsxs("div",{className:"text-3xl font-bold text-white",children:[x.overallPerformance.toFixed(1),"%"]}),v.jsx("div",{className:"text-gray-300",children:"Overall Score"})]}),v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-red-400",children:x.weakAreas.length}),v.jsx("div",{className:"text-gray-300",children:"Weak Areas"})]}),v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-green-400",children:x.strongAreas.length}),v.jsx("div",{className:"text-gray-300",children:"Strong Areas"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-red-400 mb-3",children:"Areas Needing Improvement"}),x.weakAreas.length>0?v.jsx("div",{className:"space-y-3",children:x.weakAreas.map(($,W)=>v.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded",children:v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-white font-medium",children:$.title}),v.jsxs("span",{className:"text-red-400",children:[($.performance*100).toFixed(1),"%"]})]})},W))}):v.jsx("div",{className:"text-gray-400 text-sm",children:"No weak areas identified"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-green-400 mb-3",children:"Strong Areas"}),x.strongAreas.length>0?v.jsx("div",{className:"space-y-3",children:x.strongAreas.map(($,W)=>v.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded",children:v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-white font-medium",children:$.title}),v.jsxs("span",{className:"text-green-400",children:[($.performance*100).toFixed(1),"%"]})]})},W))}):v.jsx("div",{className:"text-gray-400 text-sm",children:"No strong areas identified yet"})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"AI Recommendations"}),v.jsx("div",{className:"space-y-3",children:x.recommendations.map(($,W)=>v.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded text-sm",children:$},W))}),v.jsx("button",{onClick:()=>t("setup"),className:"w-full mt-6 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Back to Exam Setup"})]})]}),E&&v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"Personalized Study Plan"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("p",{className:"text-gray-300",children:E.description}),v.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-400",children:[v.jsxs("span",{children:[E.weeks," weeks"]}),v.jsx("span",{className:"mx-2",children:"•"}),v.jsxs("span",{children:[E.dailyHours," hours/day"]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-red-400 mb-3",children:"Focus Areas"}),E.focusAreas.map(($,W)=>v.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg mb-3",children:[v.jsx("div",{className:"font-medium text-white",children:$.title}),v.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:["Priority: ",$.priority]}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Recommended: ",$.recommendedHours," hours"]}),v.jsx("div",{className:"mt-2",children:$.topics.map((I,L)=>v.jsx("span",{className:"inline-block bg-white/10 text-xs px-2 py-1 rounded mr-2 mb-1",children:I},L))})]},W))]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-green-400 mb-3",children:"Review Areas"}),E.reviewAreas.map(($,W)=>v.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded-lg mb-3",children:[v.jsx("div",{className:"font-medium text-white",children:$.title}),v.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:["Priority: ",$.priority]}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Recommended: ",$.recommendedHours," hours"]}),v.jsx("div",{className:"mt-2",children:$.topics.map((I,L)=>v.jsx("span",{className:"inline-block bg-white/10 text-xs px-2 py-1 rounded mr-2 mb-1",children:I},L))})]},W))]})]})]})]});if(e==="exam"&&s.length>0){const $=s[l];return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border-b border-white/20 p-4 flex flex-wrap items-center justify-between gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{onClick:H,className:"flex items-center text-gray-200 hover:text-white",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f?v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15"}):v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsx("span",{children:f?"Resume":"Pause"})]}),v.jsx("div",{className:"text-lg font-mono",children:v.jsx("span",{className:d<300?"text-red-400":"text-white",children:ae(d)})})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("div",{className:"text-sm text-gray-300",children:["Question ",l+1," of ",s.length]}),v.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:v.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${(l+1)/s.length*100}%`}})}),v.jsx("button",{onClick:B,className:`px-3 py-1 rounded text-sm ${$.marked?"bg-yellow-500/20 text-yellow-400 border border-yellow-400/50":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:$.marked?"Marked":"Mark"}),v.jsx("button",{onClick:te,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium",children:"Finish Test"})]})]}),v.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[v.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 mb-6",children:[v.jsxs("div",{className:"text-gray-300 mb-4",children:["Section: ",$.sectionId||"N/A"]}),v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-6",children:$.question_text}),$.options&&v.jsx("div",{className:"space-y-3 mb-6",children:Object.entries($.options).map(([W,I])=>v.jsx("div",{onClick:()=>j(W),className:`p-4 rounded-lg border cursor-pointer transition-colors ${$.userAnswer===W?"border-primary bg-primary/20":"border-white/20 hover:border-white/40 hover:bg-white/10"}`,children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 mr-3",children:v.jsx("span",{className:"font-medium text-white",children:W})}),v.jsx("span",{className:"text-gray-200",children:I})]})},W))}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("button",{onClick:V,disabled:l===0,className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"❮ Back"}),v.jsx("button",{onClick:Y,disabled:l===s.length-1,className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next ❯"})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white text-shadow mb-3",children:"Notes"}),v.jsx("textarea",{value:$.notes,onChange:W=>F(W.target.value),placeholder:"Add your notes for this question...",className:"w-full h-32 px-3 py-2 bg-white/10 border border-white/30 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),v.jsxs("div",{className:"w-64 border-l border-white/20 bg-black/20 p-4 overflow-y-auto",children:[v.jsx("h3",{className:"font-semibold text-white text-shadow mb-3",children:"Questions"}),v.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.map((W,I)=>v.jsx("button",{onClick:()=>K(I),className:`w-10 h-10 rounded-lg text-sm font-medium flex items-center justify-center transition-colors ${I===l?"bg-primary text-white":W.userAnswer?"bg-green-500/20 text-green-400 border border-green-400/50":W.marked?"bg-yellow-500/20 text-yellow-400 border border-yellow-400/50":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:I+1},I))}),v.jsxs("div",{className:"mt-6 space-y-2 text-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-4 h-4 bg-green-500/20 border border-green-400/50 rounded mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Answered"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-4 h-4 bg-yellow-500/20 border border-yellow-400/50 rounded mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Marked"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-4 h-4 bg-white/10 rounded mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Not answered"})]})]})]})]})]})}if(e==="results"){const $=s.filter(le=>le.userAnswer!==null),W=$.filter(le=>le.userAnswer===le.correct_answer),I=$.filter(le=>le.userAnswer!==le.correct_answer),L=s.filter(le=>le.marked),oe=s.reduce((le,me)=>le+me.timeSpent,0),be=$.length>0?Math.round(oe/$.length):0,we=$.length>0?Math.round(W.length/$.length*100):0;return v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"Exam Results"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 text-center",children:[v.jsxs("div",{className:"text-3xl font-bold text-white",children:[we,"%"]}),v.jsx("div",{className:"text-gray-300",children:"Score"})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-green-400",children:W.length}),v.jsx("div",{className:"text-gray-300",children:"Correct"})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-red-400",children:I.length}),v.jsx("div",{className:"text-gray-300",children:"Incorrect"})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:L.length}),v.jsx("div",{className:"text-gray-300",children:"Marked"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white text-shadow mb-3",children:"Time Statistics"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Total Time:"}),v.jsx("span",{className:"text-white",children:ae(oe)})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Average Time/Question:"}),v.jsx("span",{className:"text-white",children:ae(be)})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Questions Answered:"}),v.jsxs("span",{className:"text-white",children:[$.length,"/",s.length]})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white text-shadow mb-3",children:"Performance"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Correct Answers:"}),v.jsx("span",{className:"text-green-400",children:W.length})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Incorrect Answers:"}),v.jsx("span",{className:"text-red-400",children:I.length})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-300",children:"Unanswered:"}),v.jsx("span",{className:"text-gray-400",children:s.length-$.length})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white text-shadow mb-3",children:"Actions"}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("button",{onClick:()=>t("setup"),className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Take Another Exam"}),v.jsx("button",{onClick:()=>n("/"),className:"w-full px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20",children:"Back to Dashboard"})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white text-shadow mb-4",children:"Question Review"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("h4",{className:"font-medium text-green-400 mb-2",children:["Correctly Answered (",W.length,")"]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:[W.map((le,me)=>v.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded text-sm",children:["Q",s.indexOf(le)+1,": ",le.question_text.substring(0,50),"..."]},me)),W.length===0&&v.jsx("div",{className:"text-gray-400 text-sm",children:"No correctly answered questions"})]})]}),v.jsxs("div",{children:[v.jsxs("h4",{className:"font-medium text-red-400 mb-2",children:["Incorrectly Answered (",I.length,")"]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:[I.map((le,me)=>v.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-sm",children:["Q",s.indexOf(le)+1,": ",le.question_text.substring(0,50),"..."]},me)),I.length===0&&v.jsx("div",{className:"text-gray-400 text-sm",children:"No incorrectly answered questions"})]})]}),v.jsxs("div",{children:[v.jsxs("h4",{className:"font-medium text-yellow-400 mb-2",children:["Marked Questions (",L.length,")"]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:[L.map((le,me)=>v.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded text-sm",children:["Q",s.indexOf(le)+1,": ",le.question_text.substring(0,50),"..."]},me)),L.length===0&&v.jsx("div",{className:"text-gray-400 text-sm",children:"No marked questions"})]})]})]})]})]})}return v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-white",children:"Loading..."})})},xV=()=>{const[n,e]=_.useState("stud001"),[t,r]=_.useState(null),[i,s]=_.useState(null),[a,l]=_.useState([]),[u,d]=_.useState(""),h=Array.from(new Map($T.map(g=>[g.student_id,g.student_name])).entries()).map(([g,b])=>({id:g,name:b}));_.useEffect(()=>{const g=ji.analyzePerformance(n),b=ji.generateStudyPlan(n);if(r(g),s(b),g.weakAreas.length>0){const x=g.weakAreas[0].sectionId;d(x);const A=ji.getQuestionRecommendations(n,x,5);l(A)}else if(at.length>0&&at[0].sections.length>0){const x=at[0].sections[0].id;d(x);const A=ji.getQuestionRecommendations(n,x,5);l(A)}},[n]);const f=g=>{d(g);const b=ji.getQuestionRecommendations(n,g,5);l(b)},m=g=>{for(const b of at){const x=b.sections.find(A=>A.id===g);if(x)return`${b.title.substring(0,10)}... - ${x.title.substring(0,30)}...`}return`Section ${g}`};return v.jsxs("div",{className:"fade-in",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-shadow mb-6",children:"AI Learning Dashboard"}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Select Student"}),v.jsx("select",{value:n,onChange:g=>e(g.target.value),className:"w-full md:w-64 px-3 py-2 bg-white/10 border border-white/30 rounded-md text-white",children:h.map(g=>v.jsx("option",{value:g.id,className:"text-black",children:g.name},g.id))})]}),t&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[v.jsxs("div",{className:"lg:col-span-2 bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"Performance Analytics"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsxs("div",{className:"text-3xl font-bold text-white",children:[t.overallPerformance.toFixed(1),"%"]}),v.jsx("div",{className:"text-gray-300",children:"Overall Score"})]}),v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-red-400",children:t.weakAreas.length}),v.jsx("div",{className:"text-gray-300",children:"Weak Areas"})]}),v.jsxs("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[v.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.strongAreas.length}),v.jsx("div",{className:"text-gray-300",children:"Strong Areas"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-red-400 mb-3",children:"Areas Needing Improvement"}),t.weakAreas.length>0?v.jsx("div",{className:"space-y-3",children:t.weakAreas.map((g,b)=>v.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded",children:v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-white font-medium",children:m(g.sectionId)}),v.jsxs("span",{className:"text-red-400",children:[(g.performance*100).toFixed(1),"%"]})]})},b))}):v.jsx("div",{className:"text-gray-400 text-sm",children:"No weak areas identified"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-green-400 mb-3",children:"Strong Areas"}),t.strongAreas.length>0?v.jsx("div",{className:"space-y-3",children:t.strongAreas.map((g,b)=>v.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded",children:v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-white font-medium",children:m(g.sectionId)}),v.jsxs("span",{className:"text-green-400",children:[(g.performance*100).toFixed(1),"%"]})]})},b))}):v.jsx("div",{className:"text-gray-400 text-sm",children:"No strong areas identified yet"})]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"AI Recommendations"}),v.jsx("div",{className:"space-y-3",children:t.recommendations.map((g,b)=>v.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded text-sm",children:g},b))})]})]}),i&&v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow mb-4",children:"Personalized Study Plan"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("p",{className:"text-gray-300",children:i.description}),v.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-400",children:[v.jsxs("span",{children:[i.weeks," weeks"]}),v.jsx("span",{className:"mx-2",children:"•"}),v.jsxs("span",{children:[i.dailyHours," hours/day"]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-red-400 mb-3",children:"Focus Areas"}),i.focusAreas.map((g,b)=>v.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg mb-3",children:[v.jsx("div",{className:"font-medium text-white",children:m(g.sectionId)}),v.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:["Priority: ",g.priority]}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Recommended: ",g.recommendedHours," hours"]})]},b))]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-green-400 mb-3",children:"Review Areas"}),i.reviewAreas.map((g,b)=>v.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded-lg mb-3",children:[v.jsx("div",{className:"font-medium text-white",children:m(g.sectionId)}),v.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:["Priority: ",g.priority]}),v.jsxs("div",{className:"text-sm text-gray-300",children:["Recommended: ",g.recommendedHours," hours"]})]},b))]})]})]}),v.jsxs("div",{className:"bg-glass backdrop-blur-lg border border-white/20 rounded-lg shadow-xl p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-semibold text-white text-shadow",children:"AI-Powered Question Recommendations"}),v.jsx("select",{value:u,onChange:g=>f(g.target.value),className:"px-3 py-1 bg-white/10 border border-white/30 rounded-md text-white text-sm",children:at.flatMap(g=>g.sections.map(b=>v.jsxs("option",{value:b.id,className:"text-black",children:[g.title.substring(0,15),"... - ",b.title.substring(0,25),"..."]},b.id)))})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.map((g,b)=>v.jsxs("div",{className:"p-4 bg-white/10 border border-white/20 rounded-lg",children:[v.jsx("div",{className:"text-sm text-gray-300 mb-2",children:m(g.sectionId)}),v.jsxs("div",{className:"text-white mb-3 text-sm",children:[g.question_text.substring(0,100),"..."]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-xs px-2 py-1 bg-blue-500/20 text-blue-300 rounded",children:g.difficulty}),v.jsxs("span",{className:"text-xs text-gray-400",children:[g.marks," marks"]})]})]},b)),a.length===0&&v.jsx("div",{className:"col-span-full text-center text-gray-400 py-8",children:"No recommendations available"})]})]})]})]})};function bV(){return v.jsx(Zj,{children:v.jsx(Vj,{children:v.jsx(Bj,{children:v.jsxs(Qt,{path:"/",element:v.jsx(RE,{}),children:[v.jsx(Qt,{index:!0,element:v.jsx(Wq,{})}),v.jsx(Qt,{path:"students",element:v.jsx(Vq,{})}),v.jsx(Qt,{path:"student/:studentId",element:v.jsx(mV,{})}),v.jsx(Qt,{path:"analytics",element:v.jsx(gV,{})}),v.jsx(Qt,{path:"exams",element:v.jsx(Qq,{})}),v.jsx(Qt,{path:"exam/:examId",element:v.jsx(vV,{})}),v.jsx(Qt,{path:"questions",element:v.jsx(tG,{})}),v.jsx(Qt,{path:"results",element:v.jsx(rG,{})}),v.jsx(Qt,{path:"curriculum",element:v.jsx(uV,{})}),v.jsx(Qt,{path:"achievements",element:v.jsx(pV,{})}),v.jsx(Qt,{path:"audit-log",element:v.jsx(lV,{})}),v.jsx(Qt,{path:"settings",element:v.jsx(oV,{})}),v.jsx(Qt,{path:"exam-simulation",element:v.jsx(yV,{})}),v.jsx(Qt,{path:"ai-dashboard",element:v.jsx(xV,{})})]})})})})}const BT=document.getElementById("root");if(!BT)throw new Error("Could not find root element to mount to");const wV=GO.createRoot(BT);wV.render(v.jsx(uE.StrictMode,{children:v.jsx(bV,{})}));
